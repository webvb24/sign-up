(window.webpackJsonp=window.webpackJsonp||[]).push([[1],Array(143).concat([function(e,n,o){(function(i,r,s,a){var c,u={}.hasOwnProperty,l=[].slice,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(c=function(e){var n,i,c,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x;return o(396),w=o(136),P=o(97),S=o(40),k=o(96),m=o(894),h=o(137),C=o(98),g=o(1174),c=o(1175).default,n=o(392).AppCache,i=o(1176).default,B=o(395),p=B.DashboardContracts,f=B.HistoryContracts,o(391),v=o(377),_=o(379),x=o(380),o(862),o(1177)("./jquery.timeago."+("ua"===S.LOCALE?"uk":S.LOCALE)+".js"),o(1181),o(1182),o(1183),20,3e4,(y=o(374).TemplateView).prototype.getGlobalContext=r.wrap(y.prototype.getGlobalContext,(function(t){var e,n;return e=t(),(null!=(n=window.app.session)?n.isAuthenticated():void 0)&&r.extend(e,{userIsManager:window.app.userIsManager()}),e})),b=r.omit(r.extend(g,c.getInstance()),"constructor"),function(e){function c(){return c.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(c,e),c.prototype.wizards={},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.initExceptionHandling()},c.prototype.init=function(t,e){var n,i,r;return null==e&&(e={}),n=o(562).Session,r=this,i=function(){return r.initApp()},this.session=new n,this.session.fetch().then((function(){return i()})).fail(function(t){return function(e){return 401===e.status?t.session.logout().then((function(){return t.session.fetch()})).then((function(){return i()})):(console.warn("Failed to fetch session"),t.initApp(),t.showErrorPage())}}(this))},c.prototype.initApp=function(){var t;if(this.initUserEvents(),!this.redirectPhonesToMobileSite()){if(this.router=new m,window.WB.isErrorPage)return this.ensureHistoryStarted(),void this.initLayout();var e;if(window.OW.tutorialConfig&&(t=o(1184).TutorialEngine,this.tutorialEngine=new t(window.OW.tutorialConfig),this.on("page:change",(e=this,function(){var t;return e.tutorialEngine.showTutorialFor(null!=(t=e.router.currentPage)?t.getPageId():void 0)}))),!this.session.isAuthenticated())return this.ensureHistoryStarted(),this.initLayout(),""===window.location.hash?this.router.login():void 0;this.start()}},c.prototype.ensureHistoryStarted=function(){if(!s.History.started)return s.history.start()},c.prototype.start=function(){var t;if(this.session.isAuthenticated())return this.initData(),this.data.menu.fetchIfEmpty().then((t=this,function(){var e,n,o;if(o="#login"===(n=window.location.hash)||"#enrollment"===n||""===window.location.hash&&window.location.pathname===window.WB.contextPath+"/",e=t.data.menu.getAutoStartupItem(),!o||t.router.knownPageId(e.id))return t.initMainMenu(),t.data.menu.find((function(t){return t.id.endsWith("."+x.mainMenuIds.NEW_CARDS_ACCOUNTS)}))&&(x.mainMenuIds.CARDS_ACCOUNTS=x.mainMenuIds.NEW_CARDS_ACCOUNTS),console.assert(null!=window.WB.applicationSettings,"WB.applicationSettings is undefined"),t.messagingPromise=(t.messagingDef=a.Deferred()).promise(),t.subscriptionsPromise=(t.subscriptionsDef=a.Deferred()).promise(),t.initPaymentsMenu(),t.initSubmenu(),t.initUserSession(),t.toggleAjaxEvents(),t.setJqueryUiOptions(),t.toggleLegacyPagesEnhancements(),t.initMessaging(),t.initSubscriptions(),t.toggleEvents(),t.menuPromise.then((function(){if(a("body").removeClass("anonymous"),t.ensureHistoryStarted(),o)return t.router.start()}));window.location.href=t.data.menu.getItemUrl(e.id)})).fail(function(t){return function(e){return console.warn(e),t.showErrorPage({fullScreen:!0})}}(this))},c.prototype.initData=function(){var t,e,n,r,s,a,c,u;return u=o(453).WbMenu,c=o(865),t=o(1186).default,s=o(393).Templates,n=o(428).RecurrentPayments,a=o(463).ThresholdPayments,r=o(1187).Regions,e=o(1188).default,this.data={user:new c,client:new t,menu:new u,templates:new s,recurrentPayments:new n,thresholdPayments:new a,regions:new r,operationInstalments:new e,contracts:{dashboard:new p,history:new f},cardOrderSettings:new i}},c.prototype.initUserSession=function(){var e;return this.session.on("logout",(e=this,function(){return e.resetApplication()})),this.session.on("logout:implicit",function(e){return function(){return e.session.once("logout",(function(){return e.showInformationMessageOnNextPage(t("You have been logged out due to the inactivity"))}))}}(this))},c.prototype.initMainMenu=function(){var t,e,n;return t=o(1189),e=new a.Deferred,this.menuMapping=r.object(this.data.menu.pluck("id"),this.data.menu.pluck("url")),a(".block__main-menu").show(),this.mainMenu=new t({el:a("#main-menu"),collection:this.data.menu}),this.mainMenu.on("render.complete",(n=this,function(){return a(".owwb-ls-content, .owwb-ls-full-column",".owwb-ls-alpha-content .owwb-cs-content").hide().fadeIn().promise().done((function(){return a(this).find("[autofocus]").trigger("focus"),e.resolve()})),n.hideLoadingIndicator()})),this.mainMenu.show(),this.menuPromise=e.promise()},c.prototype.initPaymentsMenu=function(){var t,e,n;if(t=o(453).WbPaymentsMenu,n=window.app.data.menu.getPath(x.mainMenuIds.PAYMENTS_TRANSFERS),e=this.menuMapping[n])return this.data.paymentsMenu=new t(null,{baseUrl:e,menuItemsLimit:S.PAYMENTS_MENU_ITEMS_DEFAULT_LENGTH});console.debug("PAYMENTS_TRANSFERS menu item is absent, payments menu initialization skipped")},c.prototype.toggleBanners=function(t){var e;return null==t&&(t=!0),t?(e=this,this.bannerViews=[],a(".block__banner-carousel").each((function(){var t;return(t=new(o(1190))({el:a(this)})).show(),e.bannerViews.push(t)})),this.trigger("banners:initialized")):(a(".block__banner-carousel").empty().hide(),r.invoke(this.bannerViews,"remove"),void delete this.bannerViews)},c.prototype.initInvoices=function(){if(a(".block__invoice-details").length)return new(o(1193))},c.prototype.initLayout=function(){var t,e,n,i,r,s;return this.clearViews(),e=(r=o(1194)).HeaderView,t=r.FooterView,n=r.PrintHeader,this.header?(this.header.render(),this.footer.render()):((this.header=new e({el:a(".header-block")})).show(),(this.footer=i=new t({el:a(".footer-block")})).show().then((s=this,function(){return s.on("page:change",(function(){return i.initLanguageSwitch()}))}))),new n({el:a(".bank-info-print-header")}).show()},c.prototype.updateObjectsCounter=function(t,e){var n;return e>0?(n=e>20?"20+":e,t.text(n).fadeIn()):t.fadeOut()},c.prototype.updateMessages=function(){var t;return window.OW.features.MESSAGES&&window.OW.features.CHAT?a.when(this.messages.fetch(),null!=(t=this.chatMessages)?t.fetch({latest:!0}):void 0):a.Deferred().resolve()},c.prototype.updateInvoiceSubscriptions=function(){return window.OW.features.INVOICE_SUBSCRIPTIONS?this.invoiceSubscriptions.fetch().fail((function(t){return w.warn("Unable to get invoices subscriptions"),t.errorHandled=!0})):a.Deferred().resolve()},c.prototype.initMessaging=function(){var t,e,n,i;return e=o(1198).Messages,t=o(847).ChatMessages,i=this,n=function(){var t,e;return e=i.messages.getUnreadCount()+((null!=(t=i.chatMessages)?t.getUnreadCount():void 0)||0),i.updateObjectsCounter(a("#unread-messages-count"),e)},this.menuPromise.done(function(o){return function(){var i,r;if(o.session.isAuthenticated())return o.messages=new e,window.OW.features.CHAT&&(o.chatMessages=new t),o.messages.on("change remove sync",(function(){return n()})),null!=(i=o.chatMessages)&&i.on("change remove sync",(function(){return n()})),a.when(o.messages.fetch(),null!=(r=o.chatMessages)?r.fetch():void 0).done((function(){return o.messagingDef.resolve(),n()})).fail((function(t){return w.warn("Unable to get user messages"),o.messagingDef.reject(),t.errorHandled=!0}))}}(this))},c.prototype.initSubscriptions=function(){var t,e;return window.OW.features.INVOICE_SUBSCRIPTIONS?(t=o(459).InvoiceSubscriptions,this.menuPromise.done((e=this,function(){var n;if(e.session.isAuthenticated())return n=e.updateObjectsCounter.bind(e,a("#unpaid-invoices-count")),(e.invoiceSubscriptions=new t).on("change remove sync",(function(){return n(e.invoiceSubscriptions.getUnpaidCount())})),e.updateInvoiceSubscriptions().done((function(){return e.subscriptionsDef.resolve(),n(e.invoiceSubscriptions.getUnpaidCount())})).fail((function(t){return e.subscriptionsDef.reject()}))}))):this.subscriptionsDef.resolve()},c.prototype.setJqueryUiOptions=function(){return this.initDatepickerOptions(),this.initDialogOptions()},c.prototype.initDatepickerOptions=function(){var e,n,o,i,s,c,u;for(null==S.YEAR_RANGE&&(S.YEAR_RANGE=100),c=[],s=[],u=[],i=k(0),n=o=0;o<=11;n=++o)i.month(n),e=i.toDate(),c.push(h.formatDate(e,{raw:"MMMM"})),s.push(h.formatDate(e,{raw:"LLLL"})),u.push(h.formatDate(e,{raw:"MMM"}));return a.datepicker.formatDate=r.wrap(a.datepicker.formatDate,(function(){var t,e,n;return e=arguments[0],n=(t=2<=arguments.length?l.call(arguments,1):[])[2],c&&(t[2]=r.extend({},n,{monthNames:c})),e.call.apply(e,[this].concat(l.call(t)))})),a.datepicker.parseDate=r.wrap(a.datepicker.parseDate,(function(){var t,e,n;return e=arguments[0],n=(t=2<=arguments.length?l.call(arguments,1):[])[2],c&&(t[2]=r.extend({},n,{monthNames:c})),e.call.apply(e,[this].concat(l.call(t)))})),a.datepicker.setDefaults({monthNames:s,monthNamesShort:u,prevText:t("&#x3C; Prev"),nextText:t("Next &#x3E;"),changeMonth:!0,changeYear:!0,yearRange:"c-"+S.YEAR_RANGE+":c+"+S.YEAR_RANGE})},c.prototype.initDialogOptions=function(){return a.widget("ui.dialog",r.extend({},a.ui.dialog.prototype,{_title:function(t){var e;return e=this.options.title||"&#nbsp;",t.html(e)}}))},c.prototype.toggleEvents=function(t){return null==t&&(t=!0),t?(this.on("page:change",(e=this,function(){return e.updatePageTitle()})),this.session.isAuthenticated()?this.toggleAuthUserEvents():void 0):(this.off("page:change"),this.off("change:contracts"),void a(window).off("beforeunload"));var e},c.prototype.toggleAuthUserEvents=function(){var t;return this.once("page:change",(t=this,function(){return t.on("page:change",r.throttle((function(){return t.updateMessages(),t.updateInvoiceSubscriptions()}),3e4))})),this.on("page:change",function(t){return function(){return t.updateBanners(),t.initSubmenu()}}(this)),a(window).on("beforeunload",function(t){return function(e){var n;return(null!=(n=t.router.currentPage)?n.hasUnsavedChanges():void 0)?e.returnValue=t.router.currentPage.getUnsavedChangesWarning():e.returnValue=void 0}}(this)),this.on("change:contracts",(function(){return window.app.data.contracts={dashboard:new p,history:new f}}))},c.prototype.showPromoMessagesPopup=function(){if(window.OW.features._MESSAGES_PROMOTION)return(new(0,o(1199).PromoMessagesPopupView)).show()},c.prototype.initSubmenu=function(){var t,e;if(e=o(1200),(t=a(".block__submenu-switch")).length)return new e({el:t}).show()},c.prototype.updateBanners=function(){var t,e;return e=this,t=function(){var t,n,o,i,r;for(r=[],n=0,o=(i=e.bannerViews).length;n<o;n++)t=i[n],r.push(t.update());return r},null!=this.bannerViews?t():this.on("banners:initialized",(function(){return t()}))},c.prototype.updatePageTitle=function(){var t,e;return t=null!=(e=this.router.currentPage)?e.getTitle():void 0,document.title=t||S.APP_NAME},c.prototype.toggleAjaxEvents=function(t){return null==t&&(t=!0),t?a(document).ajaxError((e=this,function(t,n,o){return e.handleAjaxError(n,o)})):a(document).off("ajaxError");var e},c.prototype.handleAjaxError=function(e){var n,o,i,r;if(0!==e.status||"abort"!==e.statusText){if(("LOGGED_OUT_USER"===(n=null!=(r=v.parseResponseSafe(e))&&null!=(i=r._error)?i.code:void 0)||"ACCOUNT_PERMANENTLY_BLOCKED"===n)&&!this.session.isLoggingOut)return o="ACCOUNT_PERMANENTLY_BLOCKED"===n?t("Failed to perform operation. Account blocked. Try again later or contact support"):t("You have been logged out due to the inactivity"),void this.session.logout().done((s=this,function(){return s.showInformationMessageOnNextPage(o)}));var s;if(!e.errorHandled&&(this._tryToHandleError(e),!e.errorHandled))return this.showErrorPage()}},c.prototype._tryToHandleError=function(t){var e;if(e=v.parseResponseSafe(t))return this._handleError(e,t)},c.prototype._handleError=function(e,n){var o;if("NO_AUTH_METHODS"===(null!=e&&null!=(o=e._error)?o.code:void 0))return this.showErrorDialog(t("Unable to perform additional authentication. Please contact the bank to solve this problem.")),n.errorHandled=!0},c.prototype.showAppDialog=function(t,e){return new(0,o(1201).AppDialog)({type:t,text:e}).show()},c.prototype.showErrorDialog=function(t){return this.showAppDialog("error",t)},c.prototype.showInfoDialog=function(t){return this.showAppDialog("info",t)},c.prototype.showSuccessDialog=function(t){return this.showAppDialog("success",t)},c.prototype.showFeedbackDialog=function(){return(new(0,o(1202).FeedbackDialog)).show()},c.prototype.showLoadingIndicator=function(){return a("body").removeClass("is-loaded").addClass("is-loading"),a("#owwb_cs_SpinnerContent").addClass("isOpened")},c.prototype.hideLoadingIndicator=function(){return a("body").removeClass("is-loading").addClass("is-loaded"),a("#owwb_cs_SpinnerContent").removeClass("isOpened")},c.prototype.getLoadingIndicator=function(){var t;return t=a("html").hasClass("IE_9"),a(t?'<div class="wb-ie-spinner" />':'<div class="wb-spinner big"> <div class="wb-spinner-circles-container deg0"> <div class="c c1"></div> <div class="c c2"></div> <div class="c c3"></div> <div class="c c4"></div> </div> <div class="wb-spinner-circles-container deg45"> <div class="c c1"></div> <div class="c c2"></div> <div class="c c3"></div> <div class="c c4"></div> </div> <div class="wb-spinner-circles-container deg90"> <div class="c c1"></div> <div class="c c2"></div> <div class="c c3"></div> <div class="c c4"></div> </div> </div>')},c.prototype.hideButtonLoader=function(t){return t.removeClass("loading")},c.prototype.showFlashMessage=function(t){var e;return(e=a("<div class='flash-message'>"+t+"</div>")).appendTo("body").fadeIn(),r.delay((function(){return e.fadeOut(1e3,(function(){return e.remove()}))}),1e3)},c.prototype.showErrorPage=function(t){var e;return null==t&&(t={}),e=o(1206),t.fullScreen&&(a(".block__main-menu").hide(),a(".main-content").addClass("ui-corner-top")),this.router.showPage(null,e,t),a(".ui-dialog, .ui-widget-overlay").detach()},c.prototype.initExceptionHandling=function(){return window.onerror=(t=this,function(e,n,o,i,r){return w.error("line: "+o+", col: "+i+"; "+n+", "+e),null!=(null!=r?r.stack:void 0)&&w.error(r.stack),t.showErrorPage({errorType:"unhandledException"})});var t},c.prototype.toggleLegacyPagesEnhancements=function(t){return null==t&&(t=!0),this.toggleBanners(t),this.toggleReceiptLinks(t),t?(this.initLegacyDatepickers(),this.initInvoices(),this.initLayout(),this.initServicePageTitle(),a(document).on("click.print",".wb-print-check",(function(t){return t.preventDefault(),window.print()}))):a(document).off("click.print")},c.prototype.redirectPhonesToMobileSite=function(){var t,e,n,o;return o=function(){return P.set("redirectedToMobile",!0,{expires:3650,path:window.WB.contextPath})},n=window.WB.applicationSettings.mobileSiteUrl,!r.isEmpty(n)&&!P.get("redirectedToMobile")&&(e=new _(n+"/").normalizePath(),r.isEmpty(e.host())&&(e=e.absoluteTo(location.href)),e.equals(document.referrer)?(o(),!1):(480,window.screen.width<=480&&(o(),t="",t=this.session.isAuthenticated()?window.location.hash:window.localStorage.getItem("lastUrl"),n=new _(n).hash(t),window.location.href=n)))},c.prototype.clearMessages=function(){return a(".page-messages").empty()},c.prototype.showPageMessage=function(t,e){return a(document).scrollTop(0),r.isArray(e)||(e=[e]),r.each(e,(function(e){return a('<div class="page-message '+t+'">'+e+"</div>").hide().appendTo(".page-messages").fadeIn(1e3)}))},c.prototype.showErrorMessage=function(t){return this.showPageMessage("error",t)},c.prototype.showSuccessMessage=function(t){return this.showPageMessage("success",t)},c.prototype.showInformationMessage=function(t){return this.showPageMessage("info",t)},c.prototype.showSuccessMessageOnNextPage=function(t){return this.once("page:change",(e=this,function(){return e.showSuccessMessage(t)}));var e},c.prototype.showErrorMessageOnNextPage=function(t){return this.once("page:change",(e=this,function(){return e.showErrorMessage(t)}));var e},c.prototype.showInformationMessageOnNextPage=function(t){return this.once("page:change",(e=this,function(){return e.showInformationMessage(t)}));var e},c.prototype.initLegacyDatepickers=function(){var t;if((t=a(".owwb_cs_hasDatePicker")).length)return t.each((function(){var t,e,n,o,i;switch(o=(e=a(this)).closest(".owwb-ws-datepicker"),t=o.find("#"+this.id+"_HIDDEN"),n=o.find("#"+this.id+"_DATEPICKER_SWITCH"),i={dateFormat:"dd MM yy",firstDay:1},e.data("editmask")){case"DATE_FUTURE":i.minDate=new Date;break;case"DATE_PAST":i.maxDate=new Date}return e.datepicker(i),this.value&&e.datepicker("setDate",k(this.value).toDate()),n.on("click",(function(){return e.datepicker("show")})),e.on("change",(function(){var n;return n=h.formatDate(e.datepicker("getDate"),{raw:"yyyy-MM-dd"}),t.val(n).trigger("change")}))}))},c.prototype.initServicePageTitle=function(){var t;if((t=a(".form-header")).length)return document.title=t.children("span").text()},c.prototype.toggleReceiptLinks=function(t){if(null==t&&(t=!0),t)return a(document).on("click.receipt",".wb-show-receipt",(function(t){var e,n;if(t.preventDefault(),n=a(t.currentTarget).data("id"))return e=o(437),new(window.OW.features.TRANSACTION_PIECHART?e.CategorySrnOperationDetailsDialog:e.SrnOperationDetailsDialog)({itemId:n}).show();console.warn("Operation SRN is missing")}));a(document).off("click.receipt")},c.prototype.getDisputesConfig=function(){return C(S.API_URL+"/conf/disputes.js").fail((function(){throw new Error("Failed to load dispute reasons config")}))},c.prototype.userIsManager=function(){return"manager"===this.session.get("user.role")},c.prototype.getUniqueTemplateName=function(t){return n.get(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS).then((function(e,n,o){var i,s,a,c;if(c=r.union(e.pluck("name"),n.pluck("name"),o.pluck("name")),d.call(c,t)<0)return t;for(i=s=1;s<=100;i=++s)if(a=t+" ("+i+")",d.call(c,a)<0)return a;throw new Error("Failed to find unused template name")}))},c.prototype.saveMenuId=function(){var t;if(/^menu\//.test(s.history.fragment))return t=r.last(s.history.fragment.split("/")),P.set("previousMenuItemId",t,{path:WB.contextPath})},c.prototype.clearViews=function(){return this.views=[]},c.prototype.addView=function(t){if(null==this.views&&(this.views=[]),d.call(this.views,t)<0)return this.views.push(t)},c.prototype.removeView=function(t){var e;if(this.views&&!((e=this.views.indexOf(t))<0))return this.views.splice(e,1)},c.prototype.printViews=function(){var t,e,n;for(t=0,e=(n=this.views).length;t<e;t++)n[t].print();return""},c.prototype.resetApplication=function(){var t;return null!=(t=this.router.currentPage)&&t.trigger("page:remove"),a(".ui-dialog-content").each((function(){var t;return null!=(t=a(this).dialog("instance"))?t.close():void 0})),a(".ui-datepicker").hide(),this.data={},this.wizards={},this.toggleAjaxEvents(!1),this.toggleEvents(!1),this.toggleLegacyPagesEnhancements(!1),a(".block__main-menu").hide(),a("#main-menu").html('<li id="empty-menu"></li>'),a("body").addClass("anonymous"),s.history.stop(),window.location.hash="",this.init()},c}(s.Model.extend(b))}.call(n,o,n,e))||(e.exports=c)}).call(this,o(379),o(11),o(384),o(14))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(o,i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(t){var e,o,s,c,u;return c=n(40),u=n(908),s=n(136),e=n(384),(o={}).BaseView=function(t){function n(){var t,e,o,s,a,c,u;for(a={},t=0,o=(c=this.mixins||[]).length;t<o;t++)s=c[t],console.assert(i.isObject(s),"Mixin must be an object"),i.extend(a,s);if(!i.isEmpty(a))for(e in a)u=a[e],e in this?r.isPlainObject(u)&&i.extend(this[e],u):this[e]=u;n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.classNameRegex=/function (.{1,})\(/,n.prototype.requiredOptions=[],n.prototype.initialize=function(t){var e,n,o,i,r;for(null==this.options&&(this.options=t||{}),this.options.detached||1===this.$el.length||console.error("View is detached, selector="+this.$el.selector),r=[],e=0,n=(i=this.requiredOptions).length;e<n;e++)o=i[e],r.push(this[o]=this.getRequiredOption(o));return r},n.prototype.remove=function(){var t;window.app.removeView(this);try{this.trigger("remove")}catch(e){t=e,console.warn("Error handling remove event",t)}this.removeChildrenViews();try{return n.__super__.remove.apply(this,arguments)}catch(e){return t=e,console.warn("Error removing view",t)}},n.prototype.clear=function(){return window.app.removeView(this),this.removeChildrenViews(),this.stopListening(),this.undelegateEvents(),this.$el.empty()},n.prototype.removeChildrenViews=function(){var t,n,o,r;for(t in n=function(t){var e;try{return t.remove()}catch(t){return e=t,console.warn("Error removing view",e)}},i.isArray(this.views)&&(i.flatten(this.views).forEach((function(t){return n(t)})),this.views=[]),this,o=[],this)(r=this[t])instanceof e.View&&r!==this?(n(r),o.push(this[t]=null)):o.push(void 0);return o},n.prototype.getRequiredOption=function(t){var e;if(e=this.options[t],i.isNull(e)||i.isUndefined(e))throw new Error("Required option "+t+" is missing");return e},n.prototype.print=function(){var t;return t=this.classNameRegex.exec(this.constructor.toString()),console.debug(t&&t.length>1?t[1]:"Unknown view",this.$el[0])},n}(e.View),o.TemplateView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template=null,e.prototype.templateContext=null,e.prototype.enhance=function(){},e.prototype.onRender=function(){},e.prototype.context=function(){return{}},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),null==this.template&&(this.template=this.options.template),this.templateContext=this.options.templateContext||this.templateContext||{},this.on("render",(t=this,function(){return t.enhance()}));var t},e.prototype.showLoadingIndicator=function(){return this.$el.html(null!=this.$loader?this.$loader:this.$loader=window.app.getLoadingIndicator())},e.prototype.render=function(t){if(null==t&&(t={}),this.partials&&console.warn("Partials property is now redundant and therefore deprecated, please remove it. Class: "+this.constructor.name),!this.template)throw new Error("Cannot render without template");return u.render(this.template,this._getContext(t.context),this,t).done((e=this,function(){if(window.app.addView(e),e.delegateEvents(),!1!==e.onRender(t)&&!t.silent)return e.trigger("render.complete"),e.$el.trigger("render.complete")}));var e},e.prototype.show=function(t){return this.render(t).done((e=this,function(){return(null!=t?t.animate:void 0)?e.$el[t.animate.type].call(e.$el,t.animate.duration):!0!==(null!=t?t.hidden:void 0)&&e.$el.show(),e.trigger("show")}));var e},e.prototype.getGlobalContext=function(){return{settings:c}},e.prototype._getContext=function(t){return i.extend({cid:this.cid},this.getGlobalContext(),this.templateContext,this.context(t),t)},e.prototype.removeEmptyTextNodes=function(){return 3,this.$el.contents().filter((function(){return 3===this.nodeType&&!/\S/.test(this.nodeValue)})).remove()},e}(o.BaseView),o.DataView={load:function(){return this.fetchData().fail(i.bind(this.onAjaxError,this))},fetchData:function(){throw new Error("`fetchData` not implemented")},context:function(){throw new Error("`context` not implemented")},show:function(){return this.options.dataIsReady?this.render():(this.showLoadingIndicator(),this.loadDataAndRender())},loadDataAndRender:function(){return this.load().done((t=this,function(){return t.render()}));var t},showLoadingIndicator:function(t){return this.$loader=window.app.getLoadingIndicator(t),this.$el.html(this.$loader)},showError:function(t){return this.$el.addClass("ajax-error").text(t)},onAjaxError:function(t){var e,n;if(s.error("Ajax error, HTTP "+t.status,t.statusText,t),this.el)return t.errorHandled=!0,n={401:"Error: Not logged in"},e=this.ajaxErrorText||n[t.status]||"Error: "+t.statusText,this.showError(e)}},o.ModelView=i.extend({},o.DataView,{fetchData:function(){return this.model.fetch()},context:function(){return this.model.viewContext()}}),o.CollectionView=i.extend({},o.DataView,{collectionClass:null,fetchData:function(){return null==this.collection&&(this.collection=new this.collectionClass),this.collection.fetch({reset:!0})},context:function(){var t;return{collection:null!=(t=this.collection)?t.viewContext():void 0}},reload:function(){return this.showLoadingIndicator(),this.loadDataAndRender()}}),o}.call(e,n,e,t))||(t.exports=s)}).call(this,n(384),n(11),n(14))},function(t,e,n){(function(o,i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty,l=[].slice,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(t){var e,o,a,u,p,h;return e=n(384),n(903),n(40),p=n(377),h=n(136),n(379),a={_lastSyncAt:null,trackSyncTime:function(){return this.on("sync",(t=this,function(){return t._lastSyncAt=new Date}));var t},fetchIfEmpty:function(t){return this._lastSyncAt?(new i.Deferred).resolve():this.fetch(t)},isOlderThan:function(t){return console.assert(this._lastSyncAt,"Cannot check freshness on model that was never fetched"),new Date-this._lastSyncAt>t},isFetched:function(){return!r.isNull(this._lastSyncAt)},resetLastSync:function(){return this._lastSyncAt=null},setLastSync:function(t){return this._lastSyncAt=t}},(u={}).BaseModel=o=function(t){function n(t,e){null==t&&(t={}),null==e&&(e={}),this.cid=r.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(t=this.parse(t,e)||{}),(t=r.defaults({},t,r.result(this,"defaults")))[this.idAttribute]&&(this.id=t[this.idAttribute]),!1===this.optimize?this.set(t,{silent:!0}):this.attributes=t,this.changed={},this.initialize.apply(this,arguments)}return c(n,t),n.prototype.ephemeralAttributes=["_error","_status","_fieldErrors","confirmation.smsTemplate"],n.prototype.addAuthRequired=!1,n.prototype.optimize=!0,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.trackSyncTime()},n.prototype.changedAttributes=function(){var t,e,o,i;return t=n.__super__.changedAttributes.apply(this,arguments),i=this,o=function(t){var e,n,o,s,a;for(a=r.clone(i._previousAttributes),e=0,o=(s=t.split(".")).length;e<o;e++)n=s[e],a=null!=a?a[n]:void 0;return a},e=function(t,n){var i,s,a,c;for(s in a={},t)c=t[s],i=r.compact([n,s]).join("."),!r.isObject(c)||r.isArray(c)?c!==o(i)&&(a[i]=c):r.extend(a,e(c,i));return a},e(t)},n.prototype.cleanAttributes=function(){var t,e,n,o,i;for(i=[],e=0,n=(o=this.ephemeralAttributes).length;e<n;e++)t=o[e],this.get(t)?i.push(this.unset(t)):i.push(void 0);return i},n.prototype.save=function(){return this.cleanAttributes(),n.__super__.save.apply(this,arguments).fail((t=this,function(e){return t.onAjaxError(e)}));var t},n.prototype.revert=function(t){return null==t&&(t=!1),this.savedValue?this.set(this.savedValue,{silent:t}):console.warn("Call trackSavedValue() to allow revert()")},n.prototype.sendPatch=function(t){var n,o;return 1===r.size(t)?n=t[0]:(n={_patches:t},this.has("confirmation")&&(n.confirmation=this.get("confirmation"))),e.sync("patch",this,{url:this.getUrl(),data:JSON.stringify(n),contentType:"application/json"}).done((o=this,function(){return o.trigger("sync")})).fail(function(t){return function(e){return t.onAjaxError(e)}}(this))},n.prototype.getUrl=function(){return r.isFunction(this.url)?this.url():this.url},n.prototype.getAttrsToSafeOnError=function(){return["_status","_error","confirmation"]},n.prototype.onAjaxError=function(t){var e;try{t.serverAttrs=this.parse(JSON.parse(t.responseText),t)}catch(n){e=n,t.isInvalidResponse=!0,h.warn(e.stack),h.error("Cannot parse error response: ",t)}if(t.serverAttrs)return this.set(r.pick.apply(r,[t.serverAttrs].concat(l.call(this.getAttrsToSafeOnError()))))},n.prototype.prepareOutgoingData=function(t,e){return p.sanitizeValues(e)},n.prototype.sync=function(t,e,o){var i;return!e||"create"!==t&&"update"!==t&&"patch"!==t||(o.data||(o.contentType="application/json",o.data=o.attrs||e.toJSON(o)),o.data&&!r.isString(o.data)&&(i=this.prepareOutgoingData(t,o.data),o.data=JSON.stringify(i))),n.__super__.sync.call(this,t,e,o)},n.prototype.destroy=function(t){var e,o,r;return null==t&&(t={}),null==t.wait&&(t.wait=!0),this.has("confirmation")&&(e={confirmation:this.get("confirmation")},t.data=JSON.stringify(e),t.contentType="application/json"),!1===(o=n.__super__.destroy.apply(this,arguments))?(new i.Deferred).resolve():o.fail((r=this,function(t){return r.onAjaxError(t)}))},n.prototype.unset=function(t,e){return this.set(t,null)},n.prototype.setDefaults=function(t){var e,n;return n=this,t=(e=function(t,o){var i,s,a,c;for(s in a={},o)c=o[s],i=t?t+"."+s:s,r.isObject(c)?a[s]=e(i,c):r.isEmpty(n.get(i))?a[s]=c:a[s]=n.get(i);return a})(null,t),this.set(t)},n.prototype.setResendOtpFlag=function(){return this.set("confirmation.resend",!0)},n.prototype.isAddAuthRequired=function(t){var e;return e=JSON.parse(t.responseText),401===t.status&&"confirmationRequired"===e._status},n.prototype.getAddAuthMethods=function(){var t,e,n,o,i,r,s,a,c,u,l,d,p,h,f,m,y;for(e=this.get("confirmation"),console.assert(e,"Get auth methods but no confirmation property"),y=[],o=0,s=(p=e.authTypes).length;o<s;o++)if(-1!==(t=p[o]).indexOf("otp_sms")){if(console.assert(null!==e.phones,"Missing required fields: confirmation.phones for otp_sms"),l=[],e.phones){for(i=0,a=(h=e.phones).length;i<a;i++)d=h[i],l.push({type:t,phoneId:d.id,phoneNumber:d.displayValue,steps:t.split("->")});y=l.concat(y)}}else if(-1!==t.indexOf("otp_mma")){if(u=[],null!=(f=e.devices)?f.length:void 0)for(r=0,c=(m=e.devices).length;r<c;r++)n=m[r],u.push({type:t,deviceId:n.id,deviceName:n.name,steps:t.split("->")});else u.push({type:t,deviceId:"",deviceName:"",steps:t.split("->")});y=u.concat(y)}else y.push({type:t,steps:t.split("->")});return y},n.prototype.viewContext=function(){return this.toJSON()},n.prototype.getValueToSave=function(){return r.omit(this.toJSON(),["_status","_error","confirmation"])},n.prototype.hasUnsavedChanges=function(){return console.assert(this.savedValue,"Call trackSavedValue() to start tracking model changes"),!r.isEqual(this.savedValue,this.getValueToSave())},n.prototype.saveValue=function(){return this.savedValue=this.getValueToSave()},n.prototype.destroySavedValue=function(){return delete this.savedValue},n.prototype.hasSavedValue=function(){return!r.isUndefined(this.savedValue)},n.prototype.trackSavedValue=function(){return this.saveValue(),this.on("sync",(t=this,function(){return t.saveValue()}));var t},n}(e.NestedModel.extend(r.extend({},a))),u.BaseCollection=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=u.BaseModel,e.prototype.parse=function(t){var n;return r.every(t,(function(t,e){return e.id}))&&(n=r.pluck(t,"id"),console.assert(n.length===r.uniq(n).length,"Collection contains several objects with same id ",this.url&&r.isFunction(this.url)?this.url():this.url)),e.__super__.parse.apply(this,arguments)},e.prototype.initialize=function(t,n){var o;if(e.__super__.initialize.apply(this,arguments),null!=n?n.urlParams:void 0){if(r.isFunction(this.url))throw new Error("Function-type url and urlParams are not supported together (yet)");(o=new s(this.url)).addQuery(n.urlParams),this.url=o.toString()}return this.trackSyncTime()},e.prototype.getOrFetch=function(t){var e,n;return(n=this.get(t))?(new i.Deferred).resolve(n).promise():(n=new this.model({id:t}),e=(new i.Deferred).notify("fetch"),n.fetch().done((function(){return e.resolve(n)})).fail((function(){return e.reject.apply(this,arguments)})),e.promise())},e.prototype.viewContext=function(t){var e;null==t&&(t=null);try{return this.invoke("viewContext",t)}catch(t){throw e=t,console.error("Could not call model.viewContext()"),e}},e.prototype.checkForUniqueIds=function(t){var e,n;if((e=r.pluck(t,"id").sort()).length!==r.uniq(e,!0).length)return n=r.chain(e).countBy().pairs().filter((function(t){return t[1]>1})).value().map((function(t){return"'"+t[0]+"': "+t[1]+" uses"})).join(", "),console.warn("Collection contains several objects with same id. "+n)},e.prototype.isAddAuthRequired=function(t){var e;return e=JSON.parse(t.responseText),401===t.status&&"confirmationRequired"===e._status},e.prototype.onAjaxError=function(t){var e;try{return t.serverAttrs=JSON.parse(t.responseText)}catch(n){return e=n,h.warn(e.stack),h.error("Cannot parse error response: ",t)}},e}(e.Collection.extend(r.extend({},a))),u.CollectionQueryRefValues=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.readyPromises={}},e.prototype._getSafeReference=function(t){return t.replace(/\./g,"|")},e.prototype.whenReady=function(t){var e;return this.readyPromises[t]?this.readyPromises[t]:(this.readyPromises[t]=e=i.Deferred(),this.getValue(t)?e.resolve():this.once("change:"+this._getSafeReference(t),(function(){return e.resolve()})),e.promise())},e.prototype.triggerForReference=function(t,e){return this.trigger(t+":"+this._getSafeReference(e))},e.prototype.getValue=function(t){return this.get(this._getSafeReference(t))},e.prototype.setValue=function(t,e,n,o){return this.set(this._getSafeReference(t),{param:e,value:n},o)},e.prototype.valuesForParam=function(t){var e,n,o,i;for(e in o=[],n=this.viewContext())(null!=(i=n[e])?i.param:void 0)===t&&o.push(i.value);return o},e}(o),u.CollectionQuery=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.urlPath="",this.refValues=new u.CollectionQueryRefValues},e.prototype.asUrlQuery=function(){var t;return t=new s(this.urlPath),this.updateQuery(t),t.toString()},e.prototype.updateQuery=function(t){var e,n,o,i,r;for(e in n=this.omit("filters"))r=n[e],t.removeQuery(e),Boolean(r)&&t.addQuery(e,r);if(this.get("filters")){for(e in t.removeQuery("filter"),i=[],o=this.get("filters"))r=o[e],Boolean(r)?i.push(t.addQuery("filter",e+":"+r)):i.push(void 0);return i}},e.prototype.setFromUrl=function(t){var e,n,o,i,s,a,c,u;for(e={},o=0,s=(c=r.keys(this.omit("filters"))).length;o<s;o++)e[c[o]]=null;if(n=this.get("filters"))for(i=0,a=(u=r.keys(n)).length;i<a;i++)e["filters."+u[i]]=null;return this.set(r.extend(e,this.urlToJson(t)))},e.prototype.setFromUrlQuery=function(t){return this.setFromUrl("?"+t)},e.prototype.urlToJson=function(t){var e,n,o,i,a,c,u,l,d;if(a=new s(t).query(!0),i=r.omit(a,"filter"),a.filter)if(i.filters={},r.isString(a.filter))n=(c=a.filter.split(":"))[0],d=c[1],i.filters[n]=d;else for(e=0,o=(u=a.filter).length;e<o;e++)n=(l=u[e].split(":"))[0],d=l[1],i.filters[n]=d;return i},e.prototype.updateReferencedParameter=function(t,e,n){var o,i,s,a;return n!==(null!=(a=this.refValues.getValue(e))?a.value:void 0)&&(s=this.valuesFor(t)||[],this.refValues.setValue(e,t,n,{silent:!0}),!this.has(t)&&r.isEmpty(n)||(i=this.get(t),r.isArray(i)?(s.forEach((function(t){var e;if(-1!==(e=i.indexOf(t)))return i.splice(e,1)})),o=i.concat(this.valuesFor(t))):o=this.valuesFor(t),this.set(t,o)),this.refValues.triggerForReference("change",e),!0)},e.prototype.valuesFor=function(t){return console.assert(this.refValues,"refValues must be already populated"),this.refValues.valuesForParam(t)},e}(o),u.CollectionQuery.fromUrl=function(t){var e,n,o,i,a,c,l;for(n in o=new u.CollectionQuery,c=new s(t),o.urlPath=c.path().replace(/^\/$/,""),i={},e=function(t){return/\$\{([^}]+)}/.test(t)},a=o.urlToJson(t)){if(l=a[n],r.isArray(l)){if(0===(l=l.filter((function(t){return!e(t)}))).length)continue}else if(e(l))continue;i[n]=l}return o.set(i),o},u.CollectionFilters=u.CollectionQuery,u.TreeCollection=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.enhanceChildren()}return c(e,t),e.prototype.subtreeAttr="items",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("sync reset",(t=this,function(){return t.enhanceChildren()}));var t},e.prototype.enhanceChildren=function(){var t,e,n;return e=this,n=this,(t=function(o){return o.forEach((function(o){var i;if(o.root||(o.root=e),o.has(n.subtreeAttr)&&!r.all(o.get(n.subtreeAttr),(function(t){return t instanceof n.model})))return i=o.get(n.subtreeAttr).map((function(t){return t instanceof n.model?t:new n.model(t)})),o.unset(n.subtreeAttr),o.set(n.subtreeAttr,i),t(i)}))})(this.models)},e.prototype.get=function(t){var n,o,i,r,s,a;if(i=e.__super__.get.apply(this,arguments))return i;for(n=0,o=(r=this.models).length;n<o;n++)if(i=r[n],a=null!=(s=this.getChildrenOf(i))?s.get(t):void 0)return a;return null},e.prototype.isFlat=function(){return!this.any((function(t){return this.item.has(this.subtreeAttr)}))},e.prototype.getChildrenOf=function(t){var e;if((e=this.get(t.id)).has(this.subtreeAttr))return new this.constructor(e.get(this.subtreeAttr))},e.prototype.isParent=function(t,e){var n;return n=t?this.get(t):this,Boolean(n&&this.getChildrenOf(n).find((function(t){return t.id===e})))},e.prototype.isChild=function(t,e){return this.isParent(e,t)},e.prototype.leafs=function(){var t,e,n,o,i,r;for(r=[],e=0,n=(i=this.models).length;e<n;e++)o=i[e],(t=this.getChildrenOf(o))?r.push.apply(r,t.leafs()):r.push(o);return r},e.prototype.flatten=function(){var t,e,n,o,i,r;for(r=[],e=0,n=(i=this.models).length;e<n;e++)o=i[e],r.push(o),(t=this.getChildrenOf(o))&&r.push.apply(r,t.flatten());return r},e.prototype.searchPredicate=function(t){var e,n,o;return o=this,n=function(e){var i,s,a,c,u,l;for(l=[],i=0,s=e.length;i<s;i++)(u=e[i]).has(o.subtreeAttr)?(c=n(u.get(o.subtreeAttr))).length&&((a=new o.model(r.clone(u.omit(o.subtreeAttr)))).set(o.subtreeAttr,c,{silent:!0}),a.root=u.root,l.push(a)):t(u)&&l.push(u);return l},(e=new this.constructor).add(n(this.models)),e},e.prototype.viewContext=function(t){var e,n,o,i,r,s,a;for(null==t&&(t={}),n=[],o=0,i=(a=this.models).length;o<i;o++)((s=(r=a[o]).viewContext(t))||!0!==t.omitEmpty)&&(n.push(s),(e=this.getChildrenOf(r))&&(s[this.subtreeAttr]=e.viewContext(t)));return n},e}(u.BaseCollection),u.SingleFetchBaseCollection=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t,n){return null==n&&(n={}),this.fetchingUrl="",this.fetchingPromise=null,e.__super__.initialize.apply(this,arguments)},e.prototype.fetch=function(t){var n,o,i,s;if(null==t&&(t={}),n=r.isFunction(this.url)?this.url():this.url,this.fetchingPromise){if(n===this.fetchingUrl)return this.fetchingPromise;i=this.fetchingPromise.readyState,d.call([1,2,3],i)>=0&&this.fetchingPromise.abort()}return o=t.error,t.error=(s=this,function(t,e,n){return o&&o(t,e,n),"abort"===e.statusText&&(e.errorHandled=!0),s.trigger("syncError",s,e,n)}),this.fetchingUrl=n,this.fetchingPromise=e.__super__.fetch.call(this,t),this.fetchingPromise.always(function(t){return function(){return t.fetchingPromise=null}}(this))},e}(u.BaseCollection),u}.call(e,n,e,t))||(t.exports=a)}).call(this,n(384),n(14),n(11),n(379))},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.b(e.getBlock("subMenu"),e,{block:n},{}).b(e.getBlock("pageMessages"),e,{block:o},{}).w('<div id="').f(e.get(["pageId"],!1),e,"h").w('" class="page-content ').b(e.getBlock("pageClass"),e,{},{}).w('">').b(e.getBlock("title"),e,{block:i},{}).nx(e.get(["loadError"],!1),e,{else:s,block:a},{}).w("</div>")}function n(t,e){return t.w('<ul class="block__submenu-switch keep-on-page-load hidden"></ul>')}function o(t,e){return t.w('<div class="page-messages"></div>')}function i(t,e){return t.s(e.get(["pageTitle"],!1),e,{block:r},{})}function r(t,e){return t.w("<h1>").f(e.getPath(!0,[]),e,"h",["s"]).w("</h1>")}function s(t,e){return t.w('<div class="page-load-error"><p class="message">').f(e.getPath(!1,["loadError","message"]),e,"h").w("</p></div>")}function a(t,e){return t.b(e.getBlock("content"),e,{block:c},{})}function c(t,e){return t.w('<div class="content"></div>')}t.register("templates/common/page",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/page",t,e)};i.templateName="templates/common/page",t.exports=i},function(t,e,n){(function(o,i,r){var s,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;void 0===(s=function(){var t,e,s,u,l,d;return l=n(40),u=n(96),d=n(895).slugify,e=n(137),t=function(t){var e;return"uk"===t&&(t="ua"),"ru"===t||"en"===t||"ua"===t||"ro"===t?(e=n(896)("./countries."+t+".json"),o.indexBy(e,"alpha-2")):{}}(l.LOCALE),(s={}).datePickerDateFormatToMomentDateFormatMap={default:"d MMMM yyyy","%d/%m/%Y":"dd/MM/yyyy","%d %B %Y":"dd MMMM yyyy","%d %b %Y":"dd MMM yyyy"},s.datePickerDateFormat=function(t){var e,n,o;return e="ua"===l.LOCALE?"uk":l.LOCALE,i.jtsage?i(t).data("datebox-format")||(null!=(n=i.jtsage.datebox.prototype.options.lang[e])?n.dateFormat:void 0)||(null!=(o=i.jtsage.datebox.prototype.options.lang.default)?o.dateFormat:void 0):"default"},s.datePickerDateFormatToMomentDateFormatConverter=function(t){return s.datePickerDateFormatToMomentDateFormatMap[t]},s.encodeWithHTMLEntities=function(t){return new Option(t).innerHTML},s.maskSensitiveData=function(t,e){var n,i,r,s;return t&&o.isString(t)&&e&&/^\d+\*\d+$/.test(e)?(s=e.split("*"),n=parseInt(s[0],10),i=parseInt(s[1],10),n<=0||i<=0||(r=t.length-(n+i))<=0?t:""+t.slice(0,n)+new Array(r+1).join("*")+t.slice(-i)):t},s.checkNumberSymbol=function(t,e,n){var o,i,r,s,c,u,l,d,p,h,f,m;if(null==e&&(e=!0),null==n&&(n=!1),"textInput"===t.type)u=t.originalEvent.data;else if(t.key){if((u=t.key).length>1)return!0}else u=String.fromCharCode(t.which);for("+-",".,",o=["0123456789",e?".,":"",n?"+-":""].join(""),c=0,p=u.length;c<p;c++)if(i=u[c],a.call(o,i)<0)return!1;for(m=t.currentTarget.value,l=0,h=u.length;l<h;l++)if(i=u[l],a.call("+-",i)>=0&&m.length>0)return!1;if(s=-1!==m.indexOf(".")||-1!==m.indexOf(","),1===u.length&&a.call(".,",u)>=0&&(!m||s))return!1;if(u.length>1)for(r=0,d=0,f=u.length;d<f;d++){if(i=u[d],a.call(".,",i)>=0&&r++,a.call(".,",i)>=0&&s)return!1;if(r>1)return!1}return!0},s.parseAmountInput=function(t){var n;return t=t.replace(/\s/g,"").replace(/,/g,".").replace(/^0+(?=[1-9])/,""),n=e.parseFloat(t),isNaN(n)?null:n},s.sanitizePastedAmount=function(t){var e,n;if(t.preventDefault(),e=(t.clipboardData||(null!=(n=t.originalEvent)?n.clipboardData:void 0)||window.clipboardData).getData("Text"),e=s.parseAmountInput(e))return i(t.currentTarget).val(e).trigger("change")},s.greatestCommonDivisor=function(t,e){return e?s.greatestCommonDivisor(e,t%e):Math.abs(t)},s.checkAmount=function(t){return console.assert(!o.isEmpty(t.currency),"amount.currency required"),console.assert(t.currency.length>=3,"amount.currency.length must be at least 3"),console.assert(o.isNumber(t.value)||!o.isEmpty(t.value),"amount.value required")},s.formatMoneyValue=function(t,n,i){var r,s;return null==n&&(n=!1),null==i&&(i=!1),r=o.isNumber(t)?t:parseFloat(t),i&&(r=Math.abs(r)),n?s=e.formatNumber(r,{maximumFractionDigits:0}):(2,s=e.formatNumber(r,{minimumFractionDigits:2,maximumFractionDigits:2})),"+"===t[0]?"+"+s:s},s.getReadableDuration=function(t){var e,n,i,r,s,a,c;return a=(i=u.duration(t)).years(),r=i.months(),e=i.days(),a&&(c=tn("%(num)s year","%(num)s years",a)),r&&(s=tn("%(num)s month","%(num)s months",r)),e&&(n=tn("%(num)s day","%(num)s days",e)),o.compact([c,s,n]).join(" ")},s.getHashCode=function(t){var e,n,o;if(!t||!t.length)return t;for(e=0,n=0,o=t.length;n<o;n++)e=(e<<5)-e+t[n].charCodeAt(),e|=0;return e},s._loadImageCache={},s.loadImage=function(t){var e,n;return s._loadImageCache[t]?s._loadImageCache[t]:(e=new Image,n=i.Deferred(),e.onload=function(){return n.resolve(t)},e.onerror=function(){return n.reject()},e.src=t,s._loadImageCache[t]=n.promise())},s.getExistingImage=function(t){var e,n,o;return n=i.Deferred(),e=0,0===t.length?n.reject():((o=function(){return s.loadImage(t[e]).done((function(t){return n.resolve(t)})).fail((function(){return(e+=1)<t.length?o():n.reject()}))})(),n.promise())},s.getSuitableIcons=function(t){var e,n,o,i,r;return o=l.PAYMENTS_MENU_ICONS_PATH,i=[],t.hasItems?n=(e=t.icon)?e:o+"/categories/"+t.menuId+".png":(e=t.icon)?n=e:(e=t.paymentType)?n=o+"/payment-types/"+t.paymentType+".png":(e=t.invoiceCode)?n=o+"/services/"+e+".png":(r=t.serviceId)&&(n=o+"/services/"+r+".png"),n&&i.push(n),t.parentMenuId&&i.push(o+"/categories/"+t.parentMenuId+".png"),i.push(o+"/categories/default.png"),i},s.sanitizeValues=function(t){var e,n,i;return e=function(t){return o.isNaN(t)||o.isUndefined(t)?null:t},o.isObject(t)?(i=o.isArray(t),t=o.reduce(o.keys(t),n=function(t,i){var r,s,a,c;return r=t.source,s=t.target,a=r[i],o.isObject(a)?(c=o.isArray(a),a=o.reduce(o.keys(a),n,{source:a,target:{}}).target,c&&(a=o.values(a))):a=e(a),s[i]=a,t},{source:t,target:{}}).target,i&&(t=o.values(t)),t):e(t)},s.getCountryName=function(e){var n;return null!=(n=t[e])?n.name:void 0},s.isValidCardNumber=window.func=function(t){var e,n,o,i,r;if(/[^0-9 \-]+/.test(t))return!1;if((t=t.replace(/\D/g,"")).length<13||t.length>19)return!1;for(o=0,e=!1,r=t.length;r;)n=t.charAt(r-1),i=parseInt(n,10),e&&(i*=2)>9&&(i-=9),o+=i,e=!e,r-=1;return o%10==0},s.parseResponseSafe=function(t){try{return JSON.parse(t.responseText)}catch(t){t}},s.getDashboardContract=function(t,e){var n,o,r;return o=window.app.data.contracts.dashboard,n=i.Deferred(),(r=function(){var e;return!!(e=o.get(t))&&(n.resolve(e),!0)})()||(o.on("sourceLoaded",(function(){return r()})),o.on("complete",(function(){if(!r())return n.reject()})),o.fetchIfEmpty(e),o.ready().fail((function(t){return t.errorHandled=!0}))),n.promise()},s.cropUrl=function(t,e){return t.length<=e?t:(t=t.slice(0,e-1)).replace(/&(?:.(?!&))*$/,"")},s.replaceSearchAndNavigate=function(t,e,n){var i;return null==e&&(e=null),n=o.extend({trigger:!1,replace:!1},n),(i=new r((new r).fragment())).removeSearch(t).addSearch(t,e),window.app.router.navigate(i.toString(),n)},s.removeSearchAndNavigate=function(t,e){var n;return e=o.extend({trigger:!1,replace:!1},e),(n=new r((new r).fragment())).removeSearch(t),window.app.router.navigate(n.toString(),e)},s.clearQueryString=function(){var t;return(t=new r((new r).fragment())).search(""),window.app.router.navigate(t.toString(),{trigger:!1,replace:!0})},s.isElementVisibleInView=function(t){var e;return(e=t.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},s.flattenObject=function(t){var e;return(e=function(t,n){return null==n&&(n=[]),Object.keys(t).reduce((function(o,r){var s,a;return i.isPlainObject(t[r])?a=e(t[r],n.concat(r)):((s={})[""+n.concat(r).join(".")]=t[r],a=s),Object.assign(o,a)}),{})})(t)},s.transliterateFileName=function(t){var e,n;return e=(n=t.split(".")).splice(n.length-1,1),d(n.join("."))+"."+e},s.downloadFile=function(t){var e,n;return e=i.Deferred(),(n=new XMLHttpRequest).open("GET",t,!0),n.responseType="blob",n.onload=function(){var t,o,i,r,s;return 200!==n.status?(n.errorHandled=!0,void e.reject(n)):(t=n.response,s=null,i=n.getResponseHeader("content-type"),s=n.getResponseHeader("content-disposition")?(o=n.getResponseHeader("content-disposition")).substring(o.indexOf("=")+1):"unnamed."+i.substring(i.indexOf("/")+1),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(new Blob([t],{type:i}),s):((r=document.createElement("a")).href=window.URL.createObjectURL(t),r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r)),e.resolve())},n.send(),e.promise()},s.get=function(t,e){var n,i;for(n=0,i=(e=e.split(".")).length;n<i;n++)if(t=t[e[n]],o.isUndefined(t))return;return t},s.set=function(t,e,n){var o,i,r,s,a,c;for(c=t,s=(e=e.split(".")).length-1,i=o=0,a=e.length;o<a;i=++o)r=e[i],i===s?t[r]=n:(t[r]||(t[r]={}),t=t[r]);return c},s.unset=function(t,e){var n,i,r,s,a;for(s=(e=e.split(".")).length-1,i=n=0,a=e.length;n<a;i=++n){if(r=e[i],!o.isObject(t))return!1;if(!t.hasOwnProperty(r))return!1;i===s?delete t[r]:t=t[r]}return!0},s.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))},s.series=function(){return(1<=arguments.length?c.call(arguments,0):[]).reduce((function(t,e){return t.then((function(){return e.apply(null,arguments)}))}),Promise.resolve())},s}.call(e,n,e,t))||(t.exports=s)}).call(this,n(11),n(14),n(379))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d;return d=o(380),l=o(40),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.requiredOptions=["message"],e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),this.backLink=this.options.backLink},e.prototype.context=function(){return{message:this.message,backLink:this.backLink}},e}(u=o(374).TemplateView),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="common/operation-success-message",e}(s),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="common/operation-error-message",e}(s),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.pageType=null,o.prototype.initialize=function(){return window.app.clearViews(),o.__super__.initialize.apply(this,arguments),this.$el.addClass("main-content"),this.showLoadingIndicator(),this.options.menuId&&(window.app.saveMenuId(),this.addClasses(this.options.menuId)),window.WB.pageType=this.options.pageType||this.pageType,this.on("page:remove",(t=this,function(){return t.stopListening(),t.undelegateEvents(),t.cleanUp()}));var t},o.prototype.context=function(){return{contextPath:window.WB.contextPath,pageId:this.getPageId()}},o.prototype.show=function(){return window.scrollTo(0,0),this.render()},o.prototype.showLoadError=function(t){return console.debug("load error",t),this.render({context:{loadError:{message:t}}})},o.prototype.showOperationSuccess=function(t,e){return null==e&&(e={}),new c(i.extend({},e,{el:this.$(".page-content"),message:t})).show()},o.prototype.showOperationError=function(t,e){return null==e&&(e={}),new n(i.extend({},e,{el:this.$(".page-content"),message:t})).show()},o.prototype.hasUnsavedChanges=function(){return!1},o.prototype.getUnsavedChangesWarning=function(){return t("This page has changes which will be lost if you leave the page. Continue?")},o.prototype.cleanUp=function(){},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.showPage()},o.prototype.showPage=function(){return window.app.trigger("page:change")},o.prototype.addClasses=function(t){var e,n;if(t)return"cards_accounts"!==(n=(""+t).replace(/^.*\./,"").replace(/\./g,"_").toLowerCase())&&"new_cards_accounts"!==n||(n=d.mainMenuIds.CARDS_ACCOUNTS.toLowerCase()),e=r("#main-menu"),r(".active",e).removeClass("active"),r("body").removeClass((function(t,e){return i.filter(e.split(" "),(function(t){return/^owwb-ls-section_/.test(t)})).join(" ")})).addClass("owwb-ls-section_"+n),r("."+n+"-menu-item",e).addClass("active")},o.prototype.getTitle=function(){return l.APP_NAME},o.prototype.getPageId=function(){return this.template.replace(/\//g,"-")},o}(u)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mainMenuIds={CP_HISTORY:"CP_HISTORY",CARDS_ACCOUNTS:"CARDS_ACCOUNTS",NEW_CARDS_ACCOUNTS:"NEW_CARDS_ACCOUNTS",PAYMENTS_TRANSFERS:"PAYMENTS_TRANSFERS",SECURITY:"SECURITY",MESSAGES:"MESSAGES",DIVISION_MAIN_CONTRACT:"DIVISION_MAIN_CONTRACT",DIVISION_CONTRACTS:"DIVISION_CONTRACTS",SETTINGS:"SETTINGS",SHOWCASE:"SHOWCASE",DEPOSITS:"DEPOSITS"},e.events={user:{LOGIN:"user:login"},page:{CHANGE:"page:change"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11);e.template=function(t){return function(e){e.prototype.template=t}},e.requiredOptions=function(t){return function(e){e.prototype.requiredOptions=t}},e.mixins=function(t){return function(e){return e.prototype.mixins=t,e}};e.on=function(t){return function(e,n,r){var s;if(i.isFunction(e.events))throw new Error("The on decorator is not compatible with an events method");if(!t)throw new Error("The on decorator requires an eventName argument");return e.__events__=o.__assign(o.__assign({},e.__events__),((s={})[t]=n,s)),Object.defineProperty(e,"events",{configurable:!0,get:function(){return this.hasOwnProperty("__events__")||(this.__events__=o.__assign({},this.__events__)),this.__events__},set:function(t){this.__events__=t}}),r}},e.preventDefault=function(t,e,n){n.value=i.wrap(n.value,(function(t,e){return e.preventDefault(),t.apply(this,[].slice.call(arguments,1))}))}},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="details ').f(e.get(["className"],!1),e,"h").w('"><div class="name">').f(e.get(["attrName"],!1),e,"h",["t"]).w('</div><div class="value" ').x(e.get(["attrMask"],!1),e,{block:n},{}).w(" ").x(e.get(["rawMask"],!1),e,{block:o},{}).w(">").x(e.get(["iconPath"],!1),e,{block:i},{}).x(e.get(["translateValue"],!1),e,{else:r,block:s},{}).w("</div></div>")}function n(t,e){return t.w('data-mask="').f(e.get(["attrMask"],!1),e,"h").w('"')}function o(t,e){return t.w('data-raw-mask="').f(e.get(["rawMask"],!1),e,"h").w('"')}function i(t,e){return t.w('<img src="').f(e.get(["iconPath"],!1),e,"h").w('" class="icon-details" />')}function r(t,e){return t.f(e.get(["attrValue"],!1),e,"h")}function s(t,e){return t.h("_",e,{block:a},{},"h")}function a(t,e){return t.f(e.get(["attrValue"],!1),e,"h")}t.register("templates/partials/details-attr",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/details-attr",t,e)};i.templateName="templates/partials/details-attr",t.exports=i},,function(t,e,n){var o,i,r;
//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
r=this,o=[n(11),n(14),e],void 0===(i=function(t,e,n){r.Backbone=function(t,e,n,o){var i=t.Backbone,r=[],s=r.slice;e.VERSION="1.1.2",e.$=o,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){return u(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,o){if(!u(this,"once",t,[e,o])||!e)return this;var i=this,r=n.once((function(){i.off(t,r),e.apply(this,arguments)}));return r._callback=e,this.on(t,r,o)},off:function(t,e,o){var i,r,s,a,c,l,d,p;if(!this._events||!u(this,"off",t,[e,o]))return this;if(!t&&!e&&!o)return this._events=void 0,this;for(c=0,l=(a=t?[t]:n.keys(this._events)).length;c<l;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=i=[],e||o)for(d=0,p=s.length;d<p;d++)r=s[d],(e&&e!==r.callback&&e!==r.callback._callback||o&&o!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&l(n,e),o&&l(o,arguments),this},stopListening:function(t,e,o){var i=this._listeningTo;if(!i)return this;var r=!e&&!o;for(var s in o||"object"!=typeof e||(o=this),t&&((i={})[t._listenId]=t),i)(t=i[s]).off(e,o,this),(r||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},c=/\s+/,u=function(t,e,n,o){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(o));return!1}if(c.test(n)){for(var r=n.split(c),s=0,a=r.length;s<a;s++)t[e].apply(t,[r[s]].concat(o));return!1}return!0},l=function(t,e){var n,o=-1,i=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<i;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r);return;case 2:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s);return;case 3:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s,a);return;default:for(;++o<i;)(n=t[o]).callback.apply(n.ctx,e);return}};n.each({listenTo:"on",listenToOnce:"once"},(function(t,e){a[e]=function(e,o,i){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=n.uniqueId("l"))]=e,i||"object"!=typeof o||(i=this),e[t](o,i,this),this}})),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var d=e.Model=function(t,e){var o=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{}),o=n.defaults({},o,n.result(this,"defaults")),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,o){var i,r,s,a,c,u,l,d;if(null==t)return this;if("object"==typeof t?(r=t,o=e):(r={})[t]=e,o||(o={}),!this._validate(r,o))return!1;for(i in s=o.unset,c=o.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[i],n.isEqual(d[i],e)||a.push(i),n.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,s?delete d[i]:d[i]=e;if(!c){a.length&&(this._pending=o);for(var p=0,h=a.length;p<h;p++)this.trigger("change:"+a[p],this,d[a[p]],o)}if(u)return this;if(!c)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,o=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(i[r],e=t[r])||((o||(o={}))[r]=e);return o},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?n.clone(t):{}).parse&&(t.parse=!0);var e=this,o=t.success;return t.success=function(n){if(!e.set(e.parse(n,t),t))return!1;o&&o(e,n,t),e.trigger("sync",e,n,t)},I(this,t),this.sync("read",this,t)},save:function(t,e,o){var i,r,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,o=e):(i={})[t]=e,o=n.extend({validate:!0},o),i&&!o.wait){if(!this.set(i,o))return!1}else if(!this._validate(i,o))return!1;i&&o.wait&&(this.attributes=n.extend({},a,i)),void 0===o.parse&&(o.parse=!0);var c=this,u=o.success;return o.success=function(t){c.attributes=a;var e=c.parse(t,o);if(o.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!c.set(e,o))return!1;u&&u(c,t,o),c.trigger("sync",c,t,o)},I(this,o),"patch"==(r=this.isNew()?"create":o.patch?"patch":"update")&&(o.attrs=i),s=this.sync(r,this,o),i&&o.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,o=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),o&&o(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;I(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||M();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return!o||(this.trigger("invalid",this,o,n.extend(e,{validationError:o})),!1)}}),n.each(["keys","values","pairs","invert","pick","omit"],(function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}}));var p=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},h={add:!0,remove:!0,merge:!0},f={add:!0,remove:!1};n.extend(p.prototype,a,{model:d,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,f))},remove:function(t,e){var o,i,r,s,a=!n.isArray(t);for(e||(e={}),o=0,i=(t=a?[t]:n.clone(t)).length;o<i;o++)(s=t[o]=this.get(t[o]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s,e));return a?t[0]:t},set:function(t,e){(e=n.defaults({},e,h)).parse&&(t=this.parse(t,e));var o,i,r,s,a,c,u,l=!n.isArray(t);t=l?t?[t]:[]:n.clone(t);var p=e.at,f=this.model,m=this.comparator&&null==p&&!1!==e.sort,y=n.isString(this.comparator)?this.comparator:null,_=[],g=[],v={},w=e.add,b=e.merge,k=e.remove,B=!(m||!w||!k)&&[];for(o=0,i=t.length;o<i;o++){if(r=(a=t[o]||{})instanceof d?s=a:a[f.prototype.idAttribute||"id"],c=this.get(r))k&&(v[c.cid]=!0),b&&(a=a===s?s.attributes:a,e.parse&&(a=c.parse(a,e)),c.set(a,e),m&&!u&&c.hasChanged(y)&&(u=!0)),t[o]=c;else if(w){if(!(s=t[o]=this._prepareModel(a,e)))continue;_.push(s),this._addReference(s,e)}s=c||s,!B||!s.isNew()&&v[s.id]||B.push(s),v[s.id]=!0}if(k){for(o=0,i=this.length;o<i;++o)v[(s=this.models[o]).cid]||g.push(s);g.length&&this.remove(g,e)}if(_.length||B&&B.length)if(m&&(u=!0),this.length+=_.length,null!=p)for(o=0,i=_.length;o<i;o++)this.models.splice(p+o,0,_[o]);else{B&&(this.models.length=0);var C=B||_;for(o=0,i=C.length;o<i;o++)this.models.push(C[o])}if(u&&this.sort({silent:!0}),!e.silent){for(o=0,i=_.length;o<i;o++)(s=_[o]).trigger("add",s,this,e);(u||B&&B.length)&&this.trigger("sort",this,e)}return l?t[0]:t},reset:function(t,e){e||(e={});for(var o=0,i=this.models.length;o<i;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"]((function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0}))},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?n.clone(t):{}).parse&&(t.parse=!0);var e=t.success,o=this;return t.success=function(n){var i=t.reset?"reset":"set";o[i](n,t),e&&e(o,n,t),o.trigger("sync",o,n,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var o=this,i=e.success;return e.success=function(t,n){e.wait&&o.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;(e=e?n.clone(e):{}).collection=this;var o=new this.model(t,e);return o.validationError?(this.trigger("invalid",this,o.validationError,e),!1):o},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,o){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,o),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],(function(t){p.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}})),n.each(["groupBy","countBy","sortBy","indexBy"],(function(t){p.prototype[t]=function(e,o){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,o)}}));var m=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(m.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var o=t[e];if(n.isFunction(o)||(o=this[t[e]]),o){var i=e.match(y),r=i[1],s=i[2];o=n.bind(o,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,o):this.$el.on(r,s,o)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var o=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(o,!1)}}}),e.sync=function(t,o,i){var r=v[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(i.url||(s.url=n.result(o,"url")||M()),null!=i.data||!o||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||o.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",i.emulateJSON&&(s.data._method=r);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&g&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(n.extend(s,i));return o.trigger("request",o,c,i),c};var g=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),v={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var w=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(w.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,o,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(o)&&(i=o,o=""),i||(i=this[o]);var r=this;return e.history.route(t,(function(n){var s=r._extractParameters(t,n);!1!==r.execute(i,s)&&(r.trigger.apply(r,["route:"+o].concat(s)),r.trigger("route",o,s),e.history.trigger("route",r,o,s))})),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(b,"(?:$1)?").replace(k,(function(t,e){return e?t:"([^/?]+)"})).replace(B,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return n.map(o,(function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null}))}});var S=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,A=/\/$/,E=/#.*$/;S.started=!1,n.extend(S.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(A,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var o=this.getFragment(),i=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(o)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=o;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),S.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!S.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(E,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var o=t.href.replace(/(javascript:|#).*$/,"");t.replace(o+"#"+e)}else t.hash="#"+e}}),e.history=new S,d.extend=p.extend=w.extend=m.extend=S.extend=function(t,e){var o,i=this;o=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e);var r=function(){this.constructor=o};return r.prototype=i.prototype,o.prototype=new r,t&&n.extend(o.prototype,t),o.__super__=i.prototype,o};var M=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(o){n&&n(t,o,e),t.trigger("error",t,o,e)}};return e}(r,n,t,e)}.apply(e,o))||(t.exports=i)},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.nx(e.get(["isLoading"],!1),e,{block:n},{})}function n(t,e){return t.b(e.getBlock("content"),e,{},{})}t.register("templates/common/dialog",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/dialog",t,e)};i.templateName="templates/common/dialog",t.exports=i},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r;return e=n(374).TemplateView,r=n(391),function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="common/dialog",e.prototype.allowImplicitClose=!0,e.prototype.processing=!1,e.prototype.dialogCssClass="",e.prototype.initialize=function(t){if(this.options=t,!this.id)throw new Error("Dialog id must be specified!");if(this.$el=r.getOrCreateEl(this.id,this.cssClass),e.__super__.initialize.apply(this,arguments),"allowImplicitClose"in this.options)return this.allowImplicitClose=this.options.allowImplicitClose},e.prototype.onDialogClose=function(){return o(document.body).removeClass("has-dialog has-modal-dialog"),this.remove(),this.closed=!0},e.prototype.showLoadingIndicator=function(){return this.processing=!0,this.deactivateButtons(),this.$loader||(this.$loader=this.getLoadingIndicator()),this.$loader.appendTo(this.$el)},e.prototype.hideLoadingIndicator=function(){var t;return this.processing=!1,this.activateButtons(),this._getButton(".loading-button").removeClass("loading-button"),null!=(t=this.$loader)?t.remove():void 0},e.prototype.getLoadingIndicator=function(){var t;return(t=o('<div class="wb-spinner-wrapper"/>')).append(window.app.getLoadingIndicator()),t},e.prototype.applyLoadingStateToButton=function(t){return t.addClass("loading-button")},e.prototype.setExplicitDialogHeight=function(){var t;return(t=this.$el.parent()).css("height","auto"),t.css("height",t.height()+"px")},e.prototype.show=function(){var t,n;return t={classes:{"ui-dialog":this.id+" "+this.dialogCssClass},create:function(t){if(o(document.body).addClass("has-dialog"),o(this).dialog("instance").option("modal"))return o(document.body).addClass("has-modal-dialog")},beforeClose:(n=this,function(){return n.trigger("cancel")}),close:function(t){return function(){return t.onDialogClose()}}(this)},i.extend(t,("function"==typeof this.dialogOptions?this.dialogOptions():void 0)||this.dialogOptions||{}),r.createDialog(this.$el,t),o(".ui-widget-overlay").on("click.dialog",function(t){return function(){return t.tryCloseDialog()}}(this)),e.__super__.show.apply(this,arguments)},e.prototype.onRender=function(t){var e;if(this.$el.dialog("instance"))return this.ensureAlignment(),(null!=t&&null!=(e=t.context)?e.isLoading:void 0)?this.showLoadingIndicator():this.hideLoadingIndicator()},e.prototype.ensureAlignment=function(){return this.$el.dialog("option","position",{my:"center",at:"center",of:window})},e.prototype.activateButtons=function(){return this._getButton(".proceed").removeClass("inactive").prop("disabled",!1)},e.prototype.deactivateButtons=function(){return this._getButton(".proceed").addClass("inactive").prop("disabled",!0)},e.prototype._getButton=function(t){return this.$el.dialog("instance").uiButtonSet.find(t)},e.prototype.tryCloseDialog=function(){if(!this.processing&&this.allowImplicitClose)return o(".ui-widget-overlay").off("click.dialog"),this.close();this.$el.closest(".ui-dialog").effect("shake",{distance:5})},e.prototype.close=function(){if(!this.closed)return this.$el.dialog("close")},e}(e)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s;void 0===(s=function(e){var n,s,a,c;return c=o(377),a=o(782),s=o(415).Checkbox,n=o(783).AddAuthDialog,{WbFormMixin:i.extend({},a,{defaultValidationOptions:{errorElement:"p",errorPlacement:function(t,e){return t.insertAfter(e.parent()),t.addClass("error-message")},showErrors:function(){var t,e;return e=Boolean(this.numberOfInvalids()),t=r(this.currentForm),e?this.currentElements.trigger("validation:failed"):i.all(t.find("[required]").filter(":visible"),(function(t){return!i.isEmpty(r(t).val())}))&&this.currentElements.trigger("validation:success"),this.defaultShowErrors()},highlight:function(t,e,n){var o;return(o=r(t).closest(".field-wrapper")).length?o.addClass(e).removeClass(n):r.validator.defaults.highlight(t,e,n)},unhighlight:function(t,e,n){var o;return(o=r(t).closest(".field-wrapper")).length?o.removeClass(e).addClass(n):r.validator.defaults.unhighlight(t,e,n)},onkeyup:function(t,e){if(9!==e.which)return this.element(t)},ignore:":hidden:not(select),:disabled"},initForm:function(){return a.initForm.apply(this,arguments),this.on("submit.success",(t=this,function(){if(t.addAuthDialog)return t.addAuthDialog.off("cancel"),t.closeAddAuthDialog()}));var t},showError:function(t){return this.addAuthDialog?this.addAuthDialog.showError(t):(this.clearMessages(),window.app.showErrorMessage(t))},showFormLoadingIndicator:function(){return this.$el.addClass("is-loading")},hideFormLoadingIndicator:function(){return this.$el.removeClass("is-loading")},showUnrecoverableError:function(e){var n;return n=t("Failed to perform operation.  Try again later or contact support"),e.respText?n=e.respText:(null!=e?e._error:void 0)&&(n=this.errorMessageFor(e._error)||n),window.app.showErrorDialog(n)},onSubmitError:function(t){var e,n,o;switch(this.hideFormLoadingIndicator(),o=c.parseResponseSafe(t),!1){case!(401===t.status&&"confirmationRequired"===o._status):return this.handleAddAuth(o),null!=o._error&&this.addAuthDialog.showError(this.errorMessageFor(o._error)),!0;case 400!==(e=t.status)&&403!==e&&500!==e:return this.closeAddAuthDialog(),this.showUnrecoverableError(o),!0;case 401!==(n=t.status)&&412!==n:this.closeAddAuthDialog();break;default:return a.onSubmitError.apply(this,arguments)}return a.onSubmitError.apply(this,arguments)},resetAttrsOnError:function(){return a.resetAttrsOnError.apply(this,arguments),r(".valid:has(:input:empty)").removeClass("valid")},closeAddAuthDialog:function(){if(this.addAuthDialog)return this.addAuthDialog.resetModel(),this.addAuthDialog.close(),this.addAuthDialog=null},handleAddAuth:function(){return this.addAuthDialog?(this.addAuthDialog.hideLoadingIndicator(),this.addAuthDialog.render()):(this.addAuthDialog=new n({form:this.$form,model:this.model,submitAction:(t=this,function(e){return null==e&&(e={}),t.submit(i.extend(e,{noLoadingIndicator:!0}))}),onSuccess:r.noop})).on("cancel",function(t){return function(){return t.addAuthDialog=null,t.resetAttrsOnError(),"function"==typeof t.onAddAuthCancel?t.onAddAuthCancel():void 0}}(this)).show();var t},showSuccessMessage:function(t){return i.defer((e=this,function(){var n;if((n=e.$(".save-status")).length)return n.addClass("success").text(t).fadeIn(),e.$el.one("input paste focus",":input",(function(){return n.hide()}));console.warn("Failed to find element for displaying operation result")}));var e},initValidation:function(){return a.initValidation.apply(this,arguments),this.$form.off("change.chosen").on("change.chosen","select",(function(t){return r(t.target).trigger("focusout")}))},validateField:function(t){if(!i.isEmpty(r(t.target).rules()))return this.validator.element(t.target)},toggleSubmit:function(t){return null==t&&(t=!1),this.$form.find(":submit").prop("disabled",t)},ensureLicense:function(){var t,e;if(t=this.formMeta.get("license"))return this.licenseCheckbox=new s({el:this.$("[data-js-license]"),name:"license",className:"licenseAgreement",label:t,checked:this.formMeta.isLicenseAccepted,onChange:(e=this,function(t){return e.formMeta.isLicenseAccepted=t})}),this.licenseCheckbox.show()}})}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},,,,function(e,n,o){(function(i,r){var s;void 0===(s=function(){var e,n,s,a;return a=o(40),o(396),n=o(393).TEMPLATE_TYPES,e=o(400).IC_PAYMENT_TYPES,(s={}).getOrCreateEl=function(t,e){var n;return(n=i("#"+t)).length||(n=i("<div id='"+t+"' class='dialog-holder "+e+"'/>").appendTo(".owwb-ls-alpha-content")),n},s.createDialog=function(e,n){return(n=r.extend({closeText:"",modal:!0,width:483,draggable:!1,resizable:!1,appendTo:"body",buttons:[{text:t("Close"),class:"wb-button",click:function(){return i(this).dialog("close")}}]},n)).dialogClass&&(console.warn("dialogClass for jQuery UI dialog is no longer supported, please check the migration guide"),n.classes={"ui-dialog":n.dialogClass}),e.dialog(n)},s.appendExistingImage=function(t,e,n){var o;return(o=new Image).onload=function(){return t.append(i("<img src='"+o.src+"'/>")),"function"==typeof n?n():void 0},o.src=e,o},s.createOverlay=function(t){var e;return e=i('<div class="ui-widget-overlay ui-front"/>'),t.prepend(e),e},s.centerElement=function(t){return t.css({left:"50%",top:"50%",marginTop:-t.height()/2,marginLeft:-t.width()/2})},s.toHSLA=function(t){return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+(r.isUndefined(t[3])?1:t[3])+")"},s.getAnalyticsColorsContext=function(){var t,e;return(t=window.OW.historyAnalyticsConfig)&&t.categories?(e=function(t){var e,n;return n=Math.min(t[2]+10,100),e=r.isUndefined(t[3])?1:t[3],[t[0],t[1],n,e]},{defaultCategoryColor:s.toHSLA(t.categories.default.color),defaultCategoryHighlightColor:s.toHSLA(e(t.categories.default.color)),categoriesColors:i.map(t.categories,(function(t,n){return r.object(["category","color","highlightColor"],[n,s.toHSLA(t.color),s.toHSLA(e(t.color))])}))}):{}},s.getOperationCategoryName=function(e){var n;return(n=window.OW.historyAnalyticsConfig)&&e?n.categories[e]?n.categories[e].name:t(e+" [operations category]"):""},s.getTemplateItemIcons=function(t){var e,o,i,r,s,c,u,l,d;return arguments.length>1?(d=arguments[0],l=arguments[1],r=arguments[2]):(d=t.templateType,l=t.serviceId,r=t.isInvoice,u=t.paymentType),i=a.PAYMENTS_MENU_ICONS_PATH,e=function(){switch(d){case n.RECURRENT:return i+"/recurrents/default.png";case n.THRESHOLD:return i+"/threshold/default.png";default:return i+"/templates/default.png"}}(),c=u?window.app.data.paymentsMenu.getPaymentMenuItemId(u):r?window.app.data.paymentsMenu.getInvoiceMenuItemId(l):window.app.data.paymentsMenu.getServiceMenuItemId(l),(s=window.app.data.paymentsMenu.get(c))?(o=s.getSuitableIcons()).splice(o.length-1,1,e):o=[e],o},s.discoverClientEmail=function(){var t,e,n;return t=o(472).ContactInfo,window.OW.features.CONTACT_INFO&&(e=new t),n=i.Deferred(),i.when(null!=e?e.fetchIfEmpty():void 0,window.app.data.client.fetchIfEmpty()).then((function(){var t;return t=(null!=e?e.get("main_email"):void 0)||window.app.data.client.get("baseAddress.email")||"",n.resolve(t)})).fail((function(){return n.reject()})),n.promise()},s.getTemplateLink=function(t){var o,i,r,s;switch(r=t.get("payment.type"),s=t.get("type"),i=t.get("id"),r){case e.INTRA_BANK_TRANSFER:case e.CURRENCY_EXCHANGE_TRANSFER:switch(s){case n.RECURRENT:o="#intrabank-transfer?pageMode=editRecurrent&templateId="+i;break;default:o="#intrabank-transfer?pageMode=edit&templateId="+i}break;default:if(t.get("allowRest"))switch(s){case n.COMMON:o="#paymentTemplates/"+i+"/edit";break;case n.RECURRENT:o="#recurrentPayments/"+i+"/edit";break;case n.THRESHOLD:o="#thresholdPayments/"+i+"/edit"}else switch(s){case n.COMMON:o="templates/"+i;break;case n.RECURRENT:o="recurrents/"+i}}return o?window.WB.contextPath+"/"+o:""},s}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){e=n(902),t.exports=e},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(r=function(t){var e,r,a,u,l,d,p,h,f;return f=n(40),e=n(392).AppCache,p=n(377),a=(h=n(375)).BaseModel,r=h.BaseCollection,l=n(397).ServicePayment,u=n(414).PaymentServiceMeta,(d={}).Template=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.set("type",d.TEMPLATE_TYPES.COMMON),this.set("serviceActive",!0),this.has("service")&&this.setService()}return s(e,t),e.prototype.urlRoot=f.API_URL+"/payment-templates",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("sync reset",(t=this,function(){return t.setService()}));var t},e.prototype.setService=function(){if(!this.service||this.get("service"))return this.service=new u(this.rawService=this.get("service")),this.unset("service")},e.prototype.formValues=function(){return this.getPayment().asFormValues()},e.prototype.getService=function(){return this.service.clone()},e.prototype.getPayment=function(){return new l(this.get("payment"),{service:this.service})},e.prototype.isInvalid=function(){return"invalid"===this.get("status")},e.prototype.getRemoteModels=function(){var t,e,n,o;if(this.remoteModels)return this.remoteModels;for(n in this.remoteModels={},o=this.service.getRemoteCatalogs())(e=(t=o[n]).field.get("value.id"))&&t.field.get("visible")&&(this.remoteModels[n]=new t.model({id:e}));return this.remoteModels},e.prototype.fetchRemoteModels=function(){var t;return o.when.apply(o,function(){var e,n,o,r;for(r=[],e=0,n=(o=i.values(this.getRemoteModels())).length;e<n;e++)t=o[e],r.push(t.fetch());return r}.call(this))},e.prototype.rename=function(t){var e;return null==t&&(t=""),e={path:"/name"},(t=t.trim())?(e.op="replace",e.value=t,this.set("name",t)):(e.op="remove",this.set("name",this.getDefaultName())),this.sendPatch([e])},e.prototype.viewContext=function(){var t;return t=this.toJSON(),this.has("payment")&&this.service&&i.extend(t,{payment:this.getPayment().viewContext({remoteModels:this.remoteModels})}),t},e}(a),d.Templates=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=d.Template,e.prototype.url=f.API_URL+"/payment-templates?include=payment",e.prototype.search=function(t){var e;return e=this.models.filter((function(e){return e.get("name").match(new RegExp(RegExp.escape(t),"ig"))})).map((function(t){return t.toJSON()})),new this.constructor(e)},e.prototype.getUniqueName=function(t){var e,n,o,i;if(o=this.pluck("name"),c.call(o,t)<0)return t;for(e=n=1;n<=100;e=++n)if(i=t+" ("+e+")",c.call(o,i)<0)return i;throw new Error("Failed to find unused template name")},e}(r),d.TEMPLATE_TYPES={NONE:"NONE",COMMON:"COMMON",RECURRENT:"RECURRENT",THRESHOLD:"THRESHOLD"},d.getTemplateById=function(t){var n;return n=new o.Deferred,t?(e.get(e.KEYS.PAYMENT_TEMPLATES,e.KEYS.RECURRENT_PAYMENTS,e.KEYS.THRESHOLD_PAYMENTS).done((function(e,o,i){var r;return null!=(r=e.get(t))&&r.set("type",d.TEMPLATE_TYPES.COMMON),r||null!=(r=o.get(t))&&r.set("type",d.TEMPLATE_TYPES.RECURRENT),r||null!=(r=i.get(t))&&r.set("type",d.TEMPLATE_TYPES.THRESHOLD),r?r.fetchIfEmpty().done((function(){return n.resolve(r)})).fail((function(t){var e,o;return"SERVICE_UNAVAILABLE"===(o=null!=(e=p.parseResponseSafe(t)._error)?e.code:void 0)||"HANDBOOK_LOCKED"===o?(t.errorHandled=!0,n.resolve(null,t)):n.reject(t)})):(console.warn("Failed to find template by id: "+t),n.resolve(null))})),n.promise()):n.resolve(d.TEMPLATE_TYPES.NONE)},d.getUniqueTemplateName=function(t){var n;return n=o.Deferred(),e.get(e.KEYS.PAYMENT_TEMPLATES,e.KEYS.RECURRENT_PAYMENTS,e.KEYS.THRESHOLD_PAYMENTS).done((function(e,o,r){var s,a,u,l,d;if(d=i.union(e.pluck("name"),o.pluck("name"),r.pluck("name")),l="",c.call(d,t)<0)l=t;else for(s=a=1;a<=100;s=++a)if(u=t+" ("+s+")",c.call(d,u)<0){l=u;break}return n.resolve(l)})),n.promise()},d}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){var e,r,s,a;return r=n(919).GenericFormMixin,s=n(387).WbFormMixin,a=n(785),e=n(434),{WbGenericFormMixin:o.extend({},s,r,{enhanceFieldView:function(t,e,n){var o;if(r.enhanceFieldView.apply(this,arguments),t.isBeneficiaryField())return this.listenTo(e,"mode.changed",(o=this,function(){if(o.validator)return o.validator.form()}))},isSkippedField:function(t,e){var n;return n=e.get("allowInternational")&&t.isDestinationField(),t.isCurrencyField()||t.isPaymentPeriodDayField()||n},fieldViewFor:function(t,n,i){var r,s,c,u;if(t.isCatalog()&&(s=t.catalog),r=n.get("allowInternational"),n.isInvoice()&&null!==(c=this.invoiceFieldViewFor(t,n,i)))return c;switch(!1){case!this.isSkippedField(t,n):return!1;case!t.isMap():return new a.MapFieldView({model:t,formMeta:n,dataModel:i});case!t.isRadioButtonGroupAsTabs():return new a.RadioButtonGroupAsTabs({model:t,formMeta:n,dataModel:i});case!t.isDateRangeGroup():return new a.DateRangeView({model:t,formMeta:n,dataModel:i});case!t.isGroup():return new a.GroupView({model:t,dataModel:i});case!t.isDateField():return new a.DateFieldView({model:t,formMeta:n,dataModel:i});case!(r&&t.isBeneficiaryField()):return new a.InternationalDestinationFieldView({model:t,formMeta:n,dataModel:i,collection:s,newBeneficiaryAllowed:this.newBeneficiaryAllowed||!1});case!t.isSwitchField():return new a.SwitchFieldView({model:t,dataModel:i});case!t.isCheckboxField():return new a.CheckboxFieldView({model:t,dataModel:n});case!t.isBalanceRequestField():return new a.BalanceFieldView({model:t,formMeta:n,dataModel:i});case!t.isAmountField():return t.has("dataSource")&&t.get("editable")?(console.warn("AmountSelectFieldView not implemented yet"),null):new a.AmountFieldView({model:t,formMeta:n,dataModel:i});case!!o.isEmpty(t.get("dataSource")):if(t.get("visible")&&t.get("editable")){if(!s){if(!(u=i.get("dataSource.values")))throw new Error("FieldView.collection is required");s=new e(u,{field:i})}return"contracts"===t.get("dataSource.type")?new a.ContractSelectFieldView({model:t,dataModel:i,collection:s,showNewContractItem:this.showNewContractItem||!1,canAddExternalCard:this.canAddExternalCard||!1,canPayWithExternalCard:this.canPayWithExternalCard||!1}):new a.CollectionSelectFieldView({model:t,dataModel:i,collection:s})}return t.isRemoteCatalog()?new a.DynamicFieldView({model:t,formMeta:n,dataModel:i}):new a.FieldView({model:t,dataModel:i});case!t.isPaymentPeriodField():return new a.PaymentPeriodFieldView({model:t,dataModel:i});case!t.isCardNumberField():return new a.CardNumberFieldView({model:t,dataModel:i});default:return new a.FieldView({model:t,dataModel:i})}},invoiceFieldViewFor:function(t,e,n){switch(!1){case!(t.isMeasurementDateField()||t.isMeasurementUnitField()):return!1;case!t.isInvoiceItemField():return new a.InvoiceItemView({model:t,dataModel:n});case!t.isInvoiceItemAmountField():return new a.InvoiceItemAmountFieldView({model:t,formMeta:e,dataModel:n});case!t.isInvoiceTotalAmountField():return new a.InvoiceTotalAmountFieldView({model:t,formMeta:e,dataModel:n});case!(t.isInvoiceDebtAmountField()||t.isInvoiceOverpayAmountField()):return new a.InvoiceAmountCorrectionFieldView({model:t,formMeta:e,dataModel:n});case!t.isMeasurementField():return new a.MeasurementFieldView({model:t,dataModel:n});default:return null}},defaultValidationOptions:o.extend({},!0,s.defaultValidationOptions,{errorPlacement:function(t,e){var n,o,r;return n=e.closest(".field-wrapper"),(o=i(".error-message",n)).length?(r=e.attr("name"))&&o.find("#"+i.escapeSelector(r)+"-error").remove():(o=i("<div></div>",{class:"error-message"}),n.append(o)),o.append(t)},showErrors:function(){var t,e;return e=Boolean(this.numberOfInvalids()),(t=i(this.currentForm)).find(":submit"),e?this.currentElements.trigger("validation:failed"):o.all(t.find("[required]").filter(":visible"),(function(t){return!o.isEmpty(i(t).val())}))&&this.currentElements.trigger("validation:success"),this.defaultShowErrors(),i(".error-message",t).each((function(){return i(this).children().filter(":not(:visible)").remove()}))},highlight:function(t,e,n){var o;return(o=i(t).closest(".control-container")).length?o.addClass(e).removeClass(n):i.validator.defaults.highlight(t,e,n)},unhighlight:function(t,e,n){var o,r,s;return(r=i(t).closest(".control-container")).length?(r.removeClass(e).addClass(n),o=r.closest(".field-wrapper").find(".error-message"),t.name&&(s="#"+i.escapeSelector(t.name)+"-error",o=o.find(s)),o.remove()):i.validator.defaults.unhighlight(t,e,n)}}),showCatalogsSyncErrors:function(t){return this.showError(t)},hideCatalogsSyncErrors:function(){return window.app.clearMessages()},updateCatalogsErrors:function(){var t,n,o,i,r,s;for(i in r=[],s=this.formMeta.getRemoteCatalogs())(t=s[i]).state===e.States.FAILED&&(o=t.getFailureMessage(),n=t.getFailureErrorCode(),o&&(r.push(o),t.reset()),"RESOURCE_LOCKED"!==n&&"HANDBOOK_LOCKED"!==n||this.handbookLockedHandler());if(this.hideCatalogsSyncErrors(),r.length)return this.showCatalogsSyncErrors(r)}})}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(14))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty,l=[].slice,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(e){var n,a,u,p,h,f,m,y;return y=o(40),a=(m=o(375)).BaseModel,n=m.BaseCollection,u=o(420),(h={Contract:u}).ContractListAction=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewContext=function(){var t;return null==(t=this.toJSON()).icon&&(t.icon=this.id),i.isFunction(this.get("service.link"))&&(t.link=this.get("service.link")()),t},e}(a),h.ContractListActions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=h.ContractListAction,e}(n),h.ContractGroup=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t,n){return null==n&&(n={}),e.__super__.initialize.apply(this,arguments),this.items=new h.Contracts(n.items||[])},e.prototype.viewContext=function(){return{contract:this.getMainContract().viewContext(),children:i.invoke(this.getChildren(),"viewContext"),isCreditOrHasChildren:this.getChildren().length>0||"credit"===this.getMainContract().get("type"),isGroup:this.items.length>1}},e.prototype.getMainContract=function(){return this.items.at(0)},e.prototype.getChildren=function(){return this.items.without(this.getMainContract())},e.prototype.getSortIndex=function(){return this.getMainContract().getSortIndex()},e}(a),h.ContractGroups=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=h.ContractGroup,e}(n),h.Contracts=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=u,n.prototype.baseUrl=y.API_URL+"/contracts",n.prototype.url=function(){return this.baseUrl+(this.urlQuery||"")},n.prototype.initialize=function(t,e){return null==e&&(e={}),null!==e.urlQuery&&void 0!==e.urlQuery&&(this.urlQuery=e.urlQuery),n.__super__.initialize.apply(this,arguments)},n.prototype.asGroups=function(){var e,n,o,r,s,a,c,l,d,p,f,m,y,_,g;for(g=this,_=function(t){var e;if((e=g.get(t.get("card.primaryCardId")))&&e.isMultiCurrencyCard())t=e;else if(!t.isMultiCurrencyCard())return null;return t.get("card.accounts").filter((function(e){return e.balances.available.currency===t.get("currency")}))[0].number},n=function(t){return function(e){var n;return(n=e.get("card.primaryCardId"))?t.get(n):e}}(this),y=this.filter((function(t){return"card"!==t.get("type")||!t.get("card.isForeign")&&!t.get("parentId")&&!t.get("card.primaryCardId")})),(s=this.groupBy(function(t){return function(e){var n,o;return"card"!==e.get("type")?null:e.get("card.isForeign")?"foreign-cards":(o=e.get("parentId"))?t.get(o)?o:(e.set("card.isAdditional",!0),"additional-cards"):(n=_(e))?n:e.get("card.primaryCardId")||e.id}}(this)))["foreign-cards"]&&y.push(new u({id:"foreign-cards",name:t("Foreign cards"),type:"aggregateCardAccount"})),s["additional-cards"]&&y.push(new u({id:"additional-cards",name:t("Additional cards"),type:"aggregateCardAccount"})),y=i.sortBy(y,(function(t){return t.getSortIndex()})),e=function(t){return function(e,n){var o,r,a,c,u,l;if(r=s[n.id])if("mccCardAccount"===n.get("type"))e.items.add(r);else for(a=0,c=(l=i.reject(r,(function(e){var n;return(n=e.get("card.primaryCardId"))&&t.get(n)}))).length;a<c;a++)u=l[a],o=function(t){var n,s,a,c,u;for(u=[],s=0,a=(c=i.filter(r,(function(e){return e.get("card.primaryCardId")===t.id}))).length;s<a;s++)n=c[s],e.items.add(n),u.push(o(n));return u},e.items.add(u),o(u);return e}}(this),p={},r=new h.ContractGroups,a=0,c=y.length;a<c;a++)f=y[a],(l=_(f))?(d=n(f),p[l]||(p[l]=new u({id:l,name:l,type:"mccCardAccount",balances:d.get("balances"),additionalBalances:d.get("card.accounts").map((function(t){return t.balances.available})),mccCardAccount:{isLoyaltyEnabled:d.get("card.isLoyaltyEnabled")}})),m=p[l]):m=f,e(o=new h.ContractGroup(null,{items:[m]}),m),r.add(o);return r},n.prototype.childrenOf=function(t){var e,n;return(e=new h.Contracts(this.filter((function(e){return e.get("card.primaryCardId")===t||e.get("parentId")===t})))).clone().each((n=this,function(t,o){return e.add(n.childrenOf(t.id).models,{at:o+1})})),e},n.prototype.fetch=function(){var t,e;return(this.urlQuery||"").endsWith("&delay")?(t=new r.Deferred,i.delay((e=this,function(){return n.__super__.fetch.apply(e,arguments).then((function(){return t.resolve()}),(function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],t.reject.apply(t,e)}))}),5e3),t.promise()):n.__super__.fetch.apply(this,arguments)},n.prototype.withParents=function(t){var e;return e=i.chain(t).map((function(t){return[t.id,t.get("parentId")]})).flatten().compact().value(),this.filter((function(t){var n;return n=t.id,d.call(e,n)>=0}))},n}(n),p=window.OW.contractsConfig,console.assert(null!=p?p.queries:void 0,"contracts.js must define 'queries' setting"),f=i.extend({history:"",limiters:""},null!=p?p.queries:void 0),h.DashboardContracts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return this.sources=[],e.__super__.initialize.apply(this,arguments)},e.prototype.fetch=function(){return console.error("DashboardContracts.fetch is not available")},e.prototype.resetLastSync=function(){return e.__super__.resetLastSync.apply(this,arguments),this.resetCache()},e.prototype.resetCache=function(){return this.sources=[],this.reset()},e.prototype.resync=function(){return console.assert(this.contractSections,"DashboardContracts.resync is unavailable before fetchIfEmpty call"),this.resetCache(),this.fetchIfEmpty(this.contractSections)},e.prototype.fetchIfEmpty=function(t){var e,n,o,s,a,c,u;if(console.assert(t,"DashboardContracts.fetchIfEmpty with empty contractSections is unavailable"),!this.isEmpty())return this._isComplete()&&this.trigger("complete"),r.Deferred().resolve();for(this.contractSections=t,s=0,a=(o=i.pairs(i.groupBy(t,"urlQuery"))).length;s<a;s++)n=o[s],u="undefined"===n[0]?"":n[0],(null!=(c=i.find(this.sources,(function(t){return t.urlQuery===u})))?c.promise:void 0)||(e=new h.Contracts(null,{urlQuery:u}),this._addSource(e,e.urlQuery));return this.ready()},e.prototype._addSource=function(t,e){var n,o,i;return n=t.fetch(),this.sources.push(o={promise:n,urlQuery:e}),n.done((i=this,function(){var e,n,r,s,a;for(o.collection=t,e=0,n=(s=i.contractSections.filter((function(t){return t.urlQuery===o.urlQuery}))).length;e<n;e++)r=(a=s[e]).condition?t.filter(a.condition):t.models,i.add(r),a.fetched=!0;return i.trigger("sourceLoaded")})).always(function(t){return function(){if(t._isComplete())return t.trigger("complete")}}(this))},e.prototype._isComplete=function(){return-1===this.sources.map((function(t){return t.promise.state()})).indexOf("pending")},e.prototype.ready=function(){return r.when.apply(r,i.map(this.sources,(function(t){return t.promise}))).done((t=this,function(){var e,n,o,i,r,s;for(i=new Date,t.setLastSync(i),s=[],e=0,n=(r=t.models).length;e<n;e++)o=r[e],s.push(o.setLastSync(i));return s}));var t},e.prototype.getCards=function(){var t,e,n,o,i,r,s,a;for(a=new h.Contracts,e=0,o=(r=this.asGroups().models).length;e<o;e++)for(n=0,i=(s=r[e].items.models).length;n<i;n++)"card"!==(t=s[n]).get("type")||t.getInArchive()||a.add(t);return a},e.prototype.getAccounts=function(){var t,e,n,o,i,r,s,a;for(a=new h.Contracts,e=0,o=(r=this.asGroups().models).length;e<o;e++)for(n=0,i=(s=r[e].items.models).length;n<i;n++)("current"===(t=s[n]).get("type")||t.get("credit")||t.get("deposit")||t.get("cardAccount")&&!t.getInArchive())&&a.add(t);return a},e.prototype.getHceEnrolledCards=function(){var t,e,n,o,i,r,s,a;for(a=new h.Contracts,e=0,o=(r=this.asGroups().models).length;e<o;e++)for(n=0,i=(s=r[e].items.models).length;n<i;n++)(t=s[n]).isHceEnrolled()&&a.add(t);return a},e.prototype.getHcePaymentAllowedCards=function(){var t,e,n,o,i,r,s,a;for(a=new h.Contracts,e=0,o=(r=this.asGroups().models).length;e<o;e++)for(n=0,i=(s=r[e].items.models).length;n<i;n++)(t=s[n]).isHcePaymentAllowed()&&a.add(t);return a},e.prototype.getDefaultHceCard=function(){var t,e,n,o,i,r,s;for(e=0,o=(r=this.asGroups().models).length;e<o;e++)for(n=0,i=(s=r[e].items.models).length;n<i;n++)if((t=s[n]).isHceDefault())return t;return null},e}(h.Contracts),h.HistoryContracts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.fetchingPromise=!1,e.prototype.url=function(){return console.assert(f=window.OW.contractsConfig.queries,"contracts.js must define 'queries' setting"),y.API_URL+"/contracts"+(f.history||"")},e.prototype.fetchIfEmpty=function(){return this.fetchingPromise?this.fetchingPromise:(this.fetchingPromise=e.__super__.fetchIfEmpty.apply(this,arguments),this.fetchingPromise.always((t=this,function(){return t.fetchingPromise=!1})));var t},e}(h.Contracts),h.DepositFlowContracts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.url=function(){var t;return(t=f.deposits?s.parseQuery(f.deposits):{type:["cardAccount","current"],filterCode:"CONTRACT_LIST"}).filter?i.isArray(t.filter)?t.filter.push("currency:"+this.currency):t.filter=[t.filter,"currency:"+this.currency]:t.filter="currency:"+this.currency,new s(y.API_URL+"/contracts").addSearch(t).toString()},e.prototype.initialize=function(t,n){if(null==n&&(n={}),e.__super__.initialize.apply(this,arguments),!n.currency)throw new Error("Deposit currency is not specified");return this.currency=n.currency},e}(h.Contracts),h.MoneyRequestContracts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.url=function(){var t;return t=f.moneyRequests?s.parseQuery(f.moneyRequests):{type:["card","current"],filterCode:"CONTRACT_LIST"},new s(y.API_URL+"/contracts").addSearch(t).toString()},e}(h.Contracts),h.InvoiceAutopaymentContracts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.url=function(){var t;return t=f.invoiceAutopayments?s.parseQuery(f.invoiceAutopayments):{type:"card",filterCode:"CONTRACT_LIST",excludeForeign:!0},new s(y.API_URL+"/contracts").addSearch(t).toString()},e}(h.Contracts),h}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(14),o(379))},function(t,e,n){(function(t){t.uiBackCompat=!1,n(14),n(408),n(568),n(491),n(872),n(441),n(874),n(887),n(888),n(889),n(890),n(891),n(892)}).call(this,n(14))},function(t,e,n){(function(o,i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].slice;void 0===(s=function(t){var e,s,c,l,d,p,h,f,m;return f=n(40),s=(h=n(375)).BaseModel,e=h.BaseCollection,l=n(494).ServiceRequest,p=n(377),c=n(420),m=n(97),(d={}).STAGES_3D={PREPARE:"prepare",CONFIRM:"confirm",FINALIZE:"finalize"},d.PAYMENT_STAGES={PREPARE:"prepare",EXECUTION:"execution",COMPLETE:"complete"},d.RATE_TYPES={MIDDLE:"MIDDLE",BUY:"BUY",SELL:"SELL"},d.ServicePayment=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.preventAuthStart=!1,e.prototype.url=function(){return f.API_URL+"/payments/"+this.service.id},e.prototype.prepareUrl=function(){return f.API_URL+"/payments/"+this.service.id+"/prepare?preventAuthStart="+this.preventAuthStart},e.prototype.preparePayment=function(t,e){var n,i;return null==e&&(e={}),n=new o.Deferred,this.ensureBeneficiary().then((i=this,function(){var t,r;if(i.cleanAttributes(),t=new o.Deferred,(r=o.ajax({url:i.prepareUrl(),data:JSON.stringify(i.getPaymentJSON()),type:"POST",dataType:"json",contentType:"application/json"})).done((function(e){return i.set(e),t.resolve(),n.resolve()})),e.success&&o.when(r,t).done(e.success),r.fail((function(t){return i.onAjaxError(t),n.reject(t)})),e.error)return r.fail((function(t,n,o){return e.error(i,t,e)}))})),n},e.prototype.getPaymentJSON=function(){var t,e,n,o,r,s,a;if(t=this.toJSON(),s=this.service.getSourceField())for(e=this.getSource()?["embossedName","number","expiryDate","securityCode"]:["id"],a=s.getAttrPath(),n=0,o=e.length;n<o;n++)r=e[n],delete t[a][r];return this.has("templateId")&&(t=i.omit(t,["status","paymentPeriod","paymentPeriod.period","paymentPeriod.day","threshold_AMOUNT"])),p.sanitizeValues(t)},e.prototype.clearPrepareData=function(){var t;return["confirmation","executionId","fees","total"].forEach((t=this,function(e){return t.unset(e)}))},e.prototype.unsetExternalCard=function(){var t,e,n,o,i,r;for(r=this.service.getSourceField().getAttrPath(),i=[],t=0,n=(o=["embossedName","number","expiryDate","securityCode"]).length;t<n;t++)e=o[t],i.push(this.unset(r+"."+e));return i},e.prototype.viewContext=function(){var t,n,o,r,s,a;if(t=i.extend(e.__super__.viewContext.apply(this,arguments),{baseAmount:this.getAmount()}),window.OW.features.BONUS_PAYMENT)for(r=o=0,s=(a=t.fees||[]).length;o<s;r=++o)"bonus"===(n=a[r]).description&&(t.bonusAmount=n.amount,t.fees.splice(r,1));return t},e.prototype.getAmount=function(){var t,e,n;return n=this.service.getField({role:"amount.value"}),t=this.service.getField({role:"amount.currency"}),n&&t?(n.has("dataSource")&&(e=this.get(n.getAttrPath()+".id")),null==e&&(e=this.get(n.getAttrPath())),{value:e,currency:this.get(t.getAttrPath()+".id")}):(null==this._warn&&(this._warn=i.once((function(){return console.warn("Base amount and/or currency field not found",n,t)}))),this._warn(),null)},e.prototype.getAmountStr=function(){var t,e;return e=[(t=this.getAmount()).value,t.currency],console.assert(!i.some(e,i.isEmpty),"Cannot serialize amount from %j",e),e.join(" ")},e.prototype.setExternalCardProperties=function(){var t,e;if(e=this.service.getSourceField()){if(e.isCatalog())return(t=this.getSource())instanceof c?this.isExternalCard=this.securityCodeRequired=t.get("card.isForeign"):(this.isExternalCard=!t,this.securityCodeRequired=!1);this.isExternalCard=this.securityCodeRequired=!1}else this.isExternalCard=this.securityCodeRequired=!1},e.prototype.ensureBeneficiary=function(){var t,e,n,r,s,a;return s=o.Deferred().resolve(),r=this.service.getField({_filter:function(t){return t.isDestinationField()}}),t=this.service.getField({_filter:function(t){return t.isBeneficiaryField()}}),this.isBeneficiary?(n=this.get(t.getAttrPath()),this.unset(r.getAttrPath(),{silent:!0}),"new-beneficiary"!==n.id?(this.beneficiary=t.resolveValue(n),s):(e=new d.Beneficiary(i.omit(n,"id")),this.beneficiary=e,e.save().done((a=this,function(){return a.set(t.getAttrPath(),{id:e.id},{silent:!0})})))):(t&&this.unset(t.getAttrPath(),{silent:!0}),s)},e}(l),d.PaymentExecution=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){return f.API_URL+"/executions/"+this.executionId},e.prototype.initialize=function(t,n){return e.__super__.initialize.apply(this,arguments),this.executionId=n.executionId},e.prototype.getAttrsToSafeOnError=function(){return u.call(e.__super__.getAttrsToSafeOnError.apply(this,arguments)).concat(["acceptUrl"])},e.prototype.getUrlQuery=function(){var t,e,n,o,i;for(i=new r(""),e=0,n=(o=this.service.fields.toJSON()).length;e<n;e++)"securityCode"!==(t=o[e].attr)&&"number"!==t&&this.get(t)&&i.addSearch(t,this.get(t));return i},e}(d.ServicePayment),d.Payment3DProcessing=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.stage=d.STAGES_3D.PREPARE,e.prototype.url=function(){return this.baseUrl+"/"+this.stage},e.prototype.initialize=function(t,n){return e.__super__.initialize.apply(this,arguments),this.executionId=n.executionId,this.baseUrl=f.API_URL+"/executions/"+this.executionId+"/3d-secure",this.set("backUrl",JSON.stringify(this.getBackUrlDescriptor()))},e.prototype.getBackUrlDescriptor=function(){return{origin:window.location.origin,confirmationUrl:this.getConfirmationUrl(),finalizationUrl:this.getFinalizationUrl(),token:m.get("csrfToken")}},e.prototype.setStage=function(t){return this.stage=t},e.prototype.getStage=function(){return this.stage},e.prototype.getContinuationUrl=function(){return this.baseUrl},e.prototype.getConfirmationUrl=function(){return this.baseUrl+"/"+d.STAGES_3D.CONFIRM},e.prototype.getFinalizationUrl=function(){return this.baseUrl+"/"+d.STAGES_3D.FINALIZE},e}(s),d.ExternalCard=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.urlRoot=f.API_URL+"/foreign-cards",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("sync",(function(){return window.app.trigger("change:contracts")}))},e}(s),d.Beneficiary=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.urlRoot=f.API_URL+"/beneficiary/client",e.prototype.getDisplayName=function(){return this.get("firstName")+" "+this.get("lastName")+" ("+this.get("cardNumber")+")"},e.prototype.viewContext=function(){return i.extend(e.__super__.viewContext.apply(this,arguments),{displayName:this.getDisplayName()})},e}(s),d.Beneficiaries=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=f.API_URL+"/beneficiary/client",e.prototype.model=d.Beneficiary,e}(e),d.IntraBankBeneficiary=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=f.API_URL+"/suggest/beneficiary",e.prototype.lastJqXHR=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("change:cardNumber",(t=this,function(){var e;return e=t.get("cardNumber"),t.clear(),t.set({cardNumber:e},{silent:!0})}));var t},e.prototype.isNew=function(){return!0},e.prototype.fetchInfo=function(t){return t===this.get("cardNumber")?this.lastJqXHR:(this.set({cardNumber:t}),this.lastJqXHR=this.save())},e}(s),d.CardDestination=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=f.API_URL+"/dictionaries/card-info",e.prototype.lastJqXHR=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("change:cardNumberPrefix",(t=this,function(){var e;return e=t.get("cardNumberPrefix"),t.clear(),t.set({cardNumberPrefix:e},{silent:!0})}));var t},e.prototype.fetchInfo=function(t){return t===this.get("cardNumberPrefix")?this.lastJqXHR:(this.set({cardNumberPrefix:t}),this.lastJqXHR=this.fetch({data:{bin:t}}))},e}(s),d.ICPayment=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.optimize=!1,e.prototype.url=function(){switch(this.stage){case d.PAYMENT_STAGES.PREPARE:return f.API_URL+"/ic-payments/prepare";case d.PAYMENT_STAGES.EXECUTION:return f.API_URL+"/ic-payments/"+this.id+"/process";default:throw new Error("Unknown or unsupported payment stage: ",this.stage)}},e.prototype.isNew=function(){return!0},e.prototype.setStage=function(t){if(this.stage=t,t===d.PAYMENT_STAGES.PREPARE)return this.prePrepareAttrs=i.clone(this.attributes)},e.prototype.setPrepareStage=function(){return this.setStage(d.PAYMENT_STAGES.PREPARE)},e.prototype.setExecutionStage=function(){return this.setStage(d.PAYMENT_STAGES.EXECUTION)},e.prototype.setCompleteStage=function(){return this.setStage(d.PAYMENT_STAGES.COMPLETE)},e.prototype.getStage=function(){return this.stage},e.prototype.clearPrepareData=function(){return this.prePrepareAttrs&&(this.attributes=this.prePrepareAttrs,this.trigger("change"),delete this.prePrepareAttrs),this.setStage(d.PAYMENT_STAGES.PREPARE)},e.prototype.getAmount=function(){return this.get("amount")},e}(s),d.CurrencyConvertModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){var t;return t={amount:this.amount,from:this.sourceCurrency,to:this.targetCurrency,rateType:this.rateType},new r(f.API_URL+"/currencies/convert").addSearch(t).toString()},e.prototype.convert=function(t){var e,n;return n={amount:this.amount,sourceCurrency:this.sourceCurrency,targetCurrency:this.targetCurrency,rateType:this.rateType},e=i.extend({rateType:t.rateType||d.RATE_TYPES.MIDDLE},t),i.isEqual(n,e)?o.Deferred().resolve():(i.extend(this,e),this.fetch())},e}(s),d}.call(e,n,e,t))||(t.exports=s)}).call(this,n(14),n(11),n(379))},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty,c=[].slice;void 0===(r=function(t){var e,r,a,u,l,d,p,h,f,m;return m=n(40),h=n(136),p=n(405),f=n(375),e=f.BaseModel,f.BaseCollection,d=f.TreeCollection,r=n(434),"error.calculationParametersMissing",a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.fieldPlaceholderRegex=/\$\{([^}]+)}/,n.prototype.defaults={name:null,visible:!0,editable:!0,htmlAttrs:{}},n.prototype.initialize=function(){var t,e;return this.root=this.collection,t=this.get("dataSource")||o.isObject(this.get("value"))?this.id+".id":this.id,(e=this.get("parentGroupId"))&&(t=e+"$"+t),this.get("attr")||this.set("attr",t),this.isCatalog()&&this.initCatalog(),this.isGroup()&&this.set("editable",!1),(this.isBeneficiaryField()||this.isDestinationField())&&this.set("optional",!1),this.processInputProps()},n.prototype.processInputProps=function(){var t;return"AREA"===this.get("inputType")&&this.set("input","textarea"),t=this.get("htmlAttrs"),this.has("minLength")&&(t.minlength=this.get("minLength")),this.has("maxLength")&&(t.maxlength=this.get("maxLength")),this.set({htmlAttrs:t})},n.prototype.getModelAttrPath=function(){return this.isPlainCatalog()?this.getAttrPath():this.get("attr")},n.prototype.getAttrPath=function(){return this.get("attr").replace(/\.id$/,"")},n.prototype.getDefault=function(){return[this.getAttrPath(),this.get("value")||this.get("defaultValue")||null]},n.prototype.skipBinding=function(){return!1===this.get("editable")||!1===this.get("visible")||this.isExternalCardField()},n.prototype.getFormBinding=function(){if(!this.skipBinding())return[this.getModelAttrPath(),{selector:"[name='"+this.get("attr")+"']",converter:this.getConverter()}]},n.prototype.getConverter=function(){return this.isAmountField()&&!this.has("dataSource")?m.AMOUNT_INPUT_IS_ALWAYS_FRACTIONAL?p.ccyAmountConverter(null!=this.get("placeholder")?"":"0.00"):p.amountConverter:this.isSwitchField()?p.makeFlipSwitchConverter(this.get("converterMapping")):this.isDateField()?p.isoDatepickerConverter:p.defaultConverter},n.prototype.isCatalog=function(){return!o.isEmpty(this.get("dataSource.url")||this.get("dataSource.values"))},n.prototype.isPlainCatalog=function(){return this.isCatalog()&&this.get("dataSource.isPlainCatalog")},n.prototype.isStaticCatalog=function(){return!o.isEmpty(this.get("dataSource.values"))},n.prototype.isRemoteCatalog=function(){return!o.isEmpty(this.get("dataSource.url"))},n.prototype.isEditableCatalog=function(){return this.isCatalog()&&this.get("editable")},n.prototype.isAutoSelectCatalog=function(){return this.isCatalog()&&"AUTO"===this.get("addData.SINGLE_ITEM_SELECT")},n.prototype.isExtendableCatalog=function(){return this.isCatalog()&&this.get("dataSource.allowEntry")},n.prototype.isSearchableCatalog=function(){return this.isCatalog()&&this.get("dataSource.clientSearch")},n.prototype.externalCardAllowed=function(){return this.isExternalCardField()||"contracts"===this.get("dataSource.type")&&this.isExtendableCatalog()},n.prototype.isDestinationField=function(){return"destination"===this.get("role")},n.prototype.isBeneficiaryField=function(){return this.isCatalog()&&"beneficiary"===this.get("role")},n.prototype.isAmountField=function(){var t;return(null!=(t=this.get("role"))?t.endsWith(".value"):void 0)||this.id.endsWith("_AMOUNT")},n.prototype.isBalanceRequestField=function(){return"destination.account.balance"===this.get("role")},n.prototype.isCurrencyField=function(){var t;return(null!=(t=this.get("role"))?t.endsWith(".currency"):void 0)||this.id.endsWith("_CURRENCY")},n.prototype.isSwitchField=function(){return"switch"===this.get("role")},n.prototype.isCheckboxField=function(){return"checkbox"===this.get("role")},n.prototype.isPaymentPeriodField=function(){return"paymentPeriod.period"===this.get("role")},n.prototype.isPaymentPeriodDayField=function(){return"paymentPeriod.day"===this.get("role")},n.prototype.isDateField=function(){var t;return"DATE"===(t=this.get("inputType"))||"DATE_PAST"===t||"DATE_FUTURE"===t},n.prototype.isCardNumberField=function(){return"cardNumber"===this.get("inputType")},n.prototype.isExternalCardField=function(){return"externalCard"===this.get("inputType")},n.prototype.isIntraBankBeneficiary=function(){return this.isDestinationField()&&this.isCardNumberField()&&"Y"===this.get("addData.INTRA-BANK")},n.prototype.isGroup=function(){return"group"===this.get("role")},n.prototype.isDateRangeGroup=function(){return"group"===this.get("role")&&"dateRange"===this.get("inputType")},n.prototype.isRadioButtonGroupAsTabs=function(){return"radioButtonGroupAsTabs"===this.get("inputType")},n.prototype.isMap=function(){return"branches"===this.get("dataSource.type")},n.prototype.isMissingMandatoryField=function(t){var e;return e=this.hasCalculation()||this.has("reference")||this.hasParameterReferences(),!(this.isGroup()||this.get("optional")||this.get("editable")||e||this.resolveValue(null,t))},n.prototype.getMyPeriodDayField=function(){var t;if(!this.isPaymentPeriodField())throw new Error("Cannot get period day field for period field");return t=this.id.replace(/period$/,"day"),this.root.get(t)},n.prototype.getMyCurrencyField=function(){var t,e,n,o,i;if(!this.isAmountField())throw new Error("Cannot get currency field for non-amount field");if((null!=(o=this.get("role"))?o.endsWith(".value"):void 0)?(i=this.get("role").replace(".value",""),t=this.root.searchPredicate((function(t){return t.get("role")===i+".currency"})).leafs()[0]):(e=this.id.replace(/_AMOUNT$/,"_CURRENCY"),t=((n=this.get("parentGroupId"))?this.root.getChildrenOf(this.root.get(n)):this.root).get(e)),!t)throw new Error("Failed to find currency field for amount field '"+this.id+"'");return t},n.prototype.initCatalog=function(){var t,e,n;return t=r.extend(o.extend(this.toJSON(),{field:this})),(e=this.get("dataSource.values"))?this.catalog=new t(e,{offline:!0}):this.catalog=new t,this.catalog.field=this,this.catalog.allowEmptyDataSource=this.get("allowEmptyDataSource"),this.catalog.required&&this.listenTo(this.catalog,"sync",(n=this,function(){var t;if(0===n.catalog.length&&!n.externalCardAllowed())return null!=(t=n.collection)&&t.trigger("error:empty-catalog",{field:n.toJSON(),url:n.catalog.url}),h.warn("Catalog is empty: "+n.catalog.url())})),this.catalog},n.prototype.viewContext=function(t){var e;if(null==t&&(t={}),this.get("visible"))return e=n.__super__.viewContext.apply(this,arguments),o.extend(e,{attrPath:this.getAttrPath(),isCatalog:this.isCatalog(),isRemoteCatalog:this.isRemoteCatalog(),isEditableCatalog:this.isEditableCatalog(),isPlainCatalog:this.isPlainCatalog(),isAmountField:this.isAmountField(),isCurrencyField:this.isCurrencyField(),isDestinationField:this.isDestinationField(),isBeneficiaryField:this.isBeneficiaryField(),isGroup:this.isGroup(),isDateField:this.isDateField(),externalCardAllowed:this.externalCardAllowed(),emptyMessage:this.getEmptyMessage()}),e.htmlAttrs&&(e.htmlAttrs=o.pairs(e.htmlAttrs)),(e.pattern||e.mask)&&(null==e.htmlAttrs&&(e.htmlAttrs=[]),e.pattern&&e.htmlAttrs.push(["pattern",e.pattern]),e.mask&&e.htmlAttrs.push(["data-raw-mask",e.mask])),this.isGroup()||(this.get("editable")?this.get("dataSource")?(e.controlType="select",o.isEmpty(e.placeholder)?e.noDefaultOption=!0:(e.noDefaultOption=!1,e.defaultOptionTitle=e.placeholder)):e.controlType="text":(e.value=this.resolveValue(null,null!=t?t.model:void 0),o.isObject(e.value)?e.displayValue=e.value.name:e.displayValue=e.value,null===e.displayValue&&(e.defaultValue?e.displayValue=e.defaultValue:e.displayValue=e.emptyMessage||"-"))),e},n.prototype.resolveValue=function(t,e){var n,i,s,a;return null==t&&(t=null),null==e&&(e=null),e&&!t&&(t=e.get(this.getAttrPath())),s=o.isObject(t)&&t.id?t.id:this.isPlainCatalog()?this.get("value"):this.get("value.id"),(a=this.get("dataSource.values"))?o.findWhere(a,{id:s}):this.catalog?this.catalog.state!==r.States.READY?t:this.catalog.get(s):(n=this.get("reference"))?(i=this.root.getByReference(n)).isRemoteCatalog()&&i.catalog.state!==r.States.READY?t:e&&e.service?e.service.getReferenceValue(e,n):e?this.root.getReferenceValue(e,n):(!1!==e&&console.warn("Cannot resolve value without referenced model"),this.get("value")||null):(null==t&&(t=this.get("value")),t)},n.prototype.hasParameterReferences=function(){var t;return!!(t=this.get("dataSource.url"))&&this.fieldPlaceholderRegex.test(i.decode(t))},n.prototype.getParameterReferences=function(){var t,e,n,r,s,a,c,u;for(n in s=i.parseQuery(i.parse(this.get("dataSource.url")).query),a=[],u=this,t=function(t,e){var n;if(n=e.match(u.fieldPlaceholderRegex))return a.push({key:t,value:n[1]})},s)if(c=s[n],o.isArray(c))for(e=0,r=c.length;e<r;e++)t(n,c[e]);else t(n,c);return a},n.prototype.hasCalculation=function(){return!o.isEmpty(this.get("calculation.expression"))},n.prototype.getCalculationFunc=function(){var t;return t=this.get("calculation.expression"),console.assert(t,"calculation.expression must be defined"),null!=this.calculationFunc?this.calculationFunc:this.calculationFunc=new Function("values","return "+t)},n.prototype.getCalculationValue=function(t,n){var i;return console.assert(t instanceof e,"Calculation argument must be payment model"),i=this.get("calculation.parameters"),console.assert(i instanceof Array,"Calculation parameters must be array"),o.all(i,(function(e){return!o.isEmpty(n.getReferenceValue(t,e))}))?this.getCalculationFunc()(this.getCalculationContext(t)):"error.calculationParametersMissing"},n.prototype.getCalculationContext=function(t){var e,n,i,r;for(i in e=t.toJSON(),r=t.viewContext().fields,e)e[i],(null!=(n=o.findWhere(r,{id:i}))?n.object:void 0)&&(e[i]=n.object);return e},n.prototype.hasVisibilityCondition=function(){return this.has("visibilityCondition")},n.prototype.getVisibilityConditionContext=function(t){var n,i,r,s,a,c,u,l;for(c=this.getCalculationContext(t),n=new e(c),a=this.get("visibilityCondition.parameters"),console.assert(a instanceof Array,"Visibility Condition parameters must be array"),i=0,r=(u=a||[]).length;i<r;i++)s=u[i],l=n.get(s),(o.isUndefined(l)||""===l)&&n.set(s,null);return n.toJSON()},n.prototype.getVisibilityConditionFunc=function(){var t;return t=this.get("visibilityCondition.expression"),console.assert(t,"visibilityCondition.expression must be defined"),null!=this.visibilityConditionFunc?this.visibilityConditionFunc:this.visibilityConditionFunc=new Function("values","return "+t)},n.prototype.getVisibilityConditionValue=function(t){var e;return e=this.getVisibilityConditionContext(t),Boolean(this.getVisibilityConditionFunc()(e))},n.prototype.getEmptyMessage=function(){return this.isCatalog()?this.get("emptyCatalogMessage"):this.get("emptyAttributeMessage")},n}(e),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.model=a,n.prototype.subtreeAttr="components",n.prototype.getByReference=function(t){return this.searchPredicate((function(e){var n;return(n=e.getAttrPath())===t||t.startsWith(n+".")})).leafs()[0]},n.prototype.getReferenceValue=function(t,n){var i,r,s,a;return a=n.split("."),r=this.getByReference(n),i=a.slice(1).join("."),o.isEmpty(i)?t.get(r.getAttrPath()):(s=t.get(r.getAttrPath()))?(s=r.resolveValue(s))instanceof e?s.get(i):o.isObject(s)?new e(s).get(i):s||null:null},n.prototype.getDefaults=function(){var t;return t=this.leafs().map((function(t){return t.getDefault()})),o.object(o.filter(t,(function(t){return null!==t[1]})))},n.prototype.getFormBindings=function(){var t;return t=this.leafs().map((function(t){return t.getFormBinding()})),o.object(o.compact(t))},n.prototype.viewContext=function(t){return null==t&&(t={}),t.omitEmpty=!0,n.__super__.viewContext.call(this,t)},n}(d),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(t,n){var o;return this.useServerMeta=(null!=n?n.useServerMeta:void 0)||!1,this.baseUrl=null!=n?n.baseUrl:void 0,e.__super__.initialize.apply(this,arguments),this.set("active",!0),this.fields=this.createFields(this._getFieldsAsArray()),this.on("change:fields",(o=this,function(){return o.resetFields()})),this.listenTo(this.fields,"error:empty-catalog",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.trigger.apply(t,["error:empty-catalog"].concat(c.call(e)))}}(this))},e.prototype.resetFields=function(){return this.fields.reset(this._getFieldsAsArray())},e.prototype.createFields=function(t){return new u(t)},e.prototype.viewContext=function(t){return null==t&&(t={}),o.extend(this.toJSON(),{fields:this.fields.viewContext(t)})},e.prototype.isCpService=function(){return this.has("type")},e.prototype.isInvoice=function(){return!1},e.prototype.externalCardAllowed=function(){return Boolean(this.getField({_filter:function(t){return t.externalCardAllowed()}}))},e.prototype._getFieldsAsArray=function(){var t,e,n;if(t=this.get("fields"),o.isObject(t)){for(e in t)null==(n=t[e]).id&&(n.id=e);return o.values(t)}return t},e.prototype.getModelDefaults=function(){return this.fields.getDefaults()},e.prototype.getFormBindings=function(){return this.fields.getFormBindings()},e.prototype.getFields=function(t){return this.fields.searchPredicate((function(e){var n,o,i;for(n in o=t||{})switch(i=o[n],n){case"_filter":if(!i(e))return!1;break;case"_reject":if(i(e))return!1;break;default:if((e.viewContext({model:!1})||e.toJSON())[n]!==i)return!1}return!0}))},e.prototype.getAttrPaths=function(){return this.getFields().leafs().map((function(t){return t.getAttrPath()}))},e.prototype.getModelAttrPaths=function(){return this.getFields().leafs().map((function(t){return t.getModelAttrPath()}))},e.prototype.getByAttrPath=function(t){return this.getField({_filter:function(e){return e.getAttrPath()===t}})},e.prototype.getField=function(t){var e;return(e=this.getFields(t).leafs()).length>1&&console.warn("Multiple fields found by condition",t),e[0]},e.prototype.getCatalogs=function(){var t,e,n,o;if(this.catalogs)return this.catalogs;for(this.catalogs={},e=0,n=(o=this.fields.leafs()).length;e<n;e++)(t=o[e]).isCatalog()&&(this.catalogs[t.getAttrPath()]=t.catalog);return this.catalogs},e.prototype.getCatalog=function(t){return this.getCatalogs()[t]},e.prototype.getRemoteCatalogs=function(){var t,e,n,o;if(this.remoteCatalogs)return this.remoteCatalogs;for(this.remoteCatalogs={},e=0,n=(o=this.fields.leafs()).length;e<n;e++)(t=o[e]).isRemoteCatalog()&&(this.remoteCatalogs[t.getAttrPath()]=t.catalog);return this.remoteCatalogs},e.prototype.fetchCatalogs=function(){var t,e,n,o;if(this.catalogsPromises)return this.catalogsPromises;for(t in this.catalogsPromises=[],n=this.getCatalogs(),o=this,e=function(t,e){return o.getByAttrPath(t).isRemoteCatalog()?o.catalogsPromises.push(e.whenNew().then((function(){return e.fetch({reset:!0})}))):e.trigger("sync")},n)e(t,n[t]);return this.catalogsPromises},e.prototype.getReferenceValue=function(t,e){return this.fields.getReferenceValue(t,e)},e.prototype.getReferenceListeners=function(){var t,e,n,i,s,a,c,u,l;for(l=this,u=function(t,e){return function(n,i){if(i=l.getReferenceValue(n,e),!(o.isEqual(n.get(t.get("attr")),i)||t.isCurrencyField()&&o.isEmpty(i)))return console.debug("Updating "+t.get("attr")+"="+i+" from reference "+e),n.set(t.get("attr"),i)}},c=function(t){return function(e,n,o){return function(i,s){return(null!=(s=t.getReferenceValue(i,n))?s.id:void 0)&&(s=s.id),s?e.catalog.query.updateReferencedParameter(o,n,s):e.catalog.state===r.States.READY?e.catalog.reset():void 0}}}(this),a=function(t){return function(e){return function(n){var i,r,s;if(i=e.get("attr"),s=n.get(i)||null,"error.calculationParametersMissing"!==(r=e.getCalculationValue(n,t)))return r&&(r=String(r)),n.has(i)&&o.isEqual(r,s)?void 0:(console.debug("Updating calculated value: "+i+"="+r),n.set(i,r))}}}(this),s=[],i=this.fields.leafs(),t=function(t){return function(e){var n,i,r,l,d,p;if(r=e.get("reference"))return l=t.fields.getByReference(r),s.push(["change:"+l.getAttrPath(),u(e,r)]);if(e.hasParameterReferences()){for(p=[],n=0,i=(d=e.getParameterReferences()).length;n<i;n++)r=d[n],l=t.fields.getByReference(r.value),p.push(s.push(["change:"+l.getAttrPath(),c(e,r.value,r.key)]));return p}return e.hasCalculation()?(console.assert(o.isEmpty(e.get("dataSource")),"dataSource with calculation not yet supported"),s.push(["change",a(e)])):void 0}}(this),e=0,n=i.length;e<n;e++)t(i[e]);return s},e.prototype.bindChangeListeners=function(t){var e,n,i,s,a,c,u,l,d;for(n=0,s=(u=this.getReferenceListeners()).length;n<s;n++)c=u[n],t.on(c[0],c[1],t);for(d=[],i=0,a=(l=this.fields.leafs()).length;i<a;i++)e=l[i],d.push(function(e){if(e.isStaticCatalog()&&t.trigger("change:"+e.getAttrPath(),t,t.get(e.getAttrPath())),e.isRemoteCatalog())return e.isAutoSelectCatalog()?t.listenTo(e.catalog,"sync reset",(function(){var n,i,s;if(e.catalog.state===r.States.READY){if(e.isEditableCatalog()){if(e.catalog.length>1)return}else console.assert(e.catalog.length<=1,"Catalog must have at most one item");return i=t.get(e.get("attr")),n=null!=(s=e.catalog.at(0))?s.toJSON():void 0,o.isEqual(n,i)?void 0:(console.debug("Autoselect single item from catalog",n),o.isObject(n)?t.set(e.getAttrPath(),n):t.set(e.get("attr"),n))}})):t.listenToOnce(e.catalog,"reset",(function(){return t.trigger("change:"+e.getAttrPath(),t,t.get(e.getAttrPath()))}))}(e));return d},e}(e),{Field:a,Fields:u,FormMeta:l}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(379))},,function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(135),s=n(375),a=n(11),c=n(40),u=n(398),l=n(372),d=n(379),p=n(377),h=n(397).ICPayment,f=n(912).ADD_DATA_FIELD_LABELS;!function(t){t.MCC_INTRA_TRANSFER="mcc_intra_transfer",t.INTRA_BANK_TRANSFER="intra_bank_transfer",t.CURRENCY_EXCHANGE_TRANSFER="currency_exchange_transfer",t.MVISA_TRANSFER="m_visa_transfer",t.RETRIEVE_MONEY="retrieve_money_transfer",t.FEE="fee"}(o=e.IC_PAYMENT_TYPES||(e.IC_PAYMENT_TYPES={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return c.API_URL+"/ic-payments/"+e.id},e}return i.__extends(e,t),e}(s.BaseModel);e.IcPaymentDetails=m;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.defaults=function(){return{type:o.MCC_INTRA_TRANSFER}},e}(h);e.IntraCardTransfer=y;var _=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.getFxRateField=function(t){if(!t)return null;var e=t.rate,n=t.baseCurrency,o=t.quoteCurrency,i=t.units;if(n===o)return null;var s=[l.filters.money({value:i,currency:n}),"&nbsp;=&nbsp;",l.filters.money({value:e,currency:o})];return{type:"raw",name:r.t("Currency rate"),value:s.join("")}},n.getDebitAndCreditFields=function(t){var e,n=t.amount,o=t.convertedAmount,s=t.sourceContractCurrency;if(!o)return[];var a=n,c=o;return a.currency!==s&&(c=(e=i.__read([a,c],2))[0],a=e[1]),[{name:r.t("Debit [currency_exchange_transfer]"),value:l.filters.money(a)},{name:r.t("Credit [currency_exchange_transfer]"),value:l.filters.money(c)}]},n.prototype.defaults=function(){return{type:o.INTRA_BANK_TRANSFER}},n.prototype.preparePayment=function(){return this.setPrepareStage(),this.save()},n.prototype.ensureBeneficiary=function(){return t.Deferred().resolve().promise()},n.prototype.setExternalCardProperties=function(){},n.prototype.viewContextForConfirmation=function(t){var e=t.getCatalog("remitter").get(this.get("remitter.id")),o=t.getCatalog("beneficiary").get(this.get("beneficiary.id")),s=[{role:"source",name:r.t("Source"),value:this.get("remitter"),fieldName:r.t("Source"),object:e.viewContext()},{name:r.t("Beneficiary"),fieldName:r.t("Beneficiary"),value:this.get("beneficiary"),object:o.viewContext()}],a=n.getFxRateField(this.get("fxRate"));return a&&s.push(a),s.push.apply(s,i.__spread(n.getDebitAndCreditFields({amount:this.get("amount"),convertedAmount:this.get("convertedAmount"),sourceContractCurrency:e.get("currency")}))),{fields:s}},n}(h);e.IntraBankTransfer=_;var g=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.getContractsUri=function(){var t=new d("/contracts?filterCode=CONTRACT_LIST");return c.INTRABANK_TRANSFER_USE_ISSUING_CONTRACTS?t.addQuery({ACC_TYPE:"ACCOUNT"}):t.addQuery({ACC_TYPE:"CARD",excludeForeign:"true"}),t},n.getDefaults=function(){var t=this.getContractsUri();return{name:r.t("Intra-bank transfer"),license:r.t("Accept all payment terms"),fields:{source:{id:"remitter",role:"source",name:r.t("Source"),dataSource:{type:"contracts",url:t.toString()}},beneficiary:{id:"beneficiary",role:"beneficiary",name:r.t("Beneficiary"),dataSource:{type:"contracts",url:t.toString()}},amount:{id:"amount.value",role:"amount.value",name:r.t("Amount"),inputType:"amount"},currency:{dataSource:{isPlainCatalog:!0,values:[{}]},id:"amount.currency",role:"amount.currency",name:r.t("Currency"),visible:!0,editable:!1,optional:!1}}}},n.prototype.defaults=function(){return n.getDefaults()},n.prototype.isCpService=function(){return!1},n.prototype.fetch=function(){return t.Deferred().resolve().promise()},n}(u.FormMeta);e.IntraBankTransferMeta=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.defaults=function(){return{type:o.MVISA_TRANSFER}},e.prototype.getDetails=function(){return[{name:r.t("Merchant name"),value:this.get("merchantName")},{name:r.t("Merchant country"),value:p.getCountryName(this.get("merchantCountry"))},{name:r.t("Merchant city"),value:this.get("merchantCity")}].concat(a.compact([this.get("primaryId"),this.get("secondaryId")]).map((function(t){return{name:f[t.id],value:t.value}})))},e}(h);e.MVisaTransfer=v;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.defaults=function(){return{type:o.RETRIEVE_MONEY}},e.prototype.getDetails=function(t){var e=this,n=[];return a.isArray(null!=t?t.fields:void 0)&&t.fields.forEach((function(t){var o=e.get(t.id);o&&n.push({name:t.name,value:o})})),n},e}(h);e.RetrieveMoneyTransfer=w}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(135);e.authTypes={OTP_SMS:"otp_sms",OTP_MMA:"otp_mma",OTP_EMAIL:"otp_email",OTP_LIST:"otp_list",RANDOM_AUTH:"random_auth",EXT_OTP:"ext_otp",EXT_WEB:"ext_web"},e.DEVICE={NO_CORDOVA_LABEL:"noCordova"},e.FLOW_TYPES={PAYMENT:"payment",PAYMENT_CART:"payment_cart",REMITTANCE:"remittance",CARD_ORDERS:"card-orders",CONVERSION_TO_INSTALMENT:"conversion-to-instalment"},e.FINGERPRINT_ERRORS={KEY_INVALIDATED:"KEY_INVALIDATED",KEY_BLOCKED:"KEY_BLOCKED",USER_CANCEL:"USER_CANCEL",USER_FALLBACK:"USER_FALLBACK",SYSTEM_CANCEL:"SYSTEM_CANCEL",AUTHENTICATION_FAILED:"AUTHENTICATION_FAILED",NOT_INTERACTIVE:"NOT_INTERACTIVE",UNKNOWN_ERROR:"UNKNOWN_ERROR"},e.INTEREST_OPTIONS_LABELS={at_maturity:o.t("At maturity"),daily:o.t("Daily"),weekly:o.t("Weekly"),monthly:o.t("Monthly"),quarterly:o.t("Quarterly"),halfyearly:o.t("Halfyearly"),yearly:o.t("Yearly")},e.settings={}},function(t,e,n){(function(o,i,r){var s;void 0===(s=function(t){var e,s,a;return n(139),a=n(40),s=n(377),{formatWithMask:function(t,e){var n;return e?((n=i("<div>"+t+"</div>")).mask(e.mask,e.maskOptions),n.text()):t},applyMasks:function(t){var n,c;return t instanceof r||(t=i(t)),c=function(t,e,n){var i,r;if(8,8===e.keyCode){if(i=n.cleanVal(),o.isEmpty(i))return n.val("");if(o.last(t)!==o.last(i)){try{r=t.replace(new RegExp("(^.*"+o.last(i)+").*?$"),"$1")}catch(t){t,r=""}return n.val(r)}}},n=i("[data-mask]",t),t.is("[data-mask]")&&n.push(t),n.get().forEach((function(t){var n,r,u,l,d,p,h,f;if(l=(n=i(t)).data("mask"),n.is(":not(:input)")&&o.isObject(l))n.trigger("keyup");else if(!o.isObject(l)&&("STRING"!==l&&"NSTRING"!==l?p=a.MASKS[l]:(h=n.data("raw-mask"))&&(p={mask:h,maskOptions:{translation:e}}),p&&(d=o.extend({},p.maskOptions),u=d.onKeyPress,d.onKeyPress=function(t,e,n,o){return u&&u.apply(this,arguments),c.apply(this,arguments)},n.mask(p.mask,d),n.triggerHandler("keyup.mask"),!n.data("extMaskApplied"))))return n.data("extMaskApplied",!0),p.attrs&&n.attr(p.attrs),p.defaultValue&&o.isEmpty(n.val())&&n.val(p.defaultValue).trigger("change"),p.defaultValueOnFocus&&o.isEmpty(n.val())&&(n.on("mouseup",(function(){var t,e;if(n.data("fix-caret")&&(n.removeData("fix-caret"),t=n.get(0),p.defaultValueOnFocus===t.value))try{return t.selectionStart=t.selectionEnd=t.value.length}catch(t){return e=t,console.warn("Some elements don't have selection interface, e.g. InputNumber:",e)}})),n.on("focus",(function(){if(o.isEmpty(n.val()))return n.val(p.defaultValueOnFocus).trigger("change"),n.data("fix-caret",!0)})),n.on("blur",(function(){if(n.val()===p.defaultValueOnFocus)return n.val("").trigger("change")}))),o.isUndefined(null!=(f=p.maskOptions)?f.decimalInput:void 0)?void 0:(r=p.maskOptions.decimalInput,n.on("keypress textInput",(function(t){if(!s.checkNumberSymbol(t,r,Boolean(p.maskOptions.allowSign)))return t.preventDefault()})))}))},MBILLING_MASK_TRANSLATION:e=o.extend({},i.jMaskGlobals.translation,{"#":{pattern:/\d/},"*":{pattern:/[^+-.,() ]/}})}}.call(e,n,e,t))||(t.exports=s)}).call(this,n(11),n(14),n(14))},,,function(t,e,n){(function(o,i){var r;void 0===(r=function(t){var e,r,s,a,c,u,l,d,p;return n(40),l=n(96),u=n(377),e=n(137),d=n(406).Constants,r=d.ModelToView,s=d.ViewToModel,c=function(t){return t.get(0).selectionStart},p=function(t,e){var n,o;if(t.is(":focus")&&((n=t.get(0)).setSelectionRange&&n.setSelectionRange(e,e),n.createTextRange))return(o=n.createTextRange()).collapse(!0),o.moveEnd("character",e),o.moveStart("character",e),o.select()},(a={}).defaultConverter=function(t,e,n,s,a){var c,u,l,d,p,h,f,m;if(t===r){for(d=0,h=a.length;d<h;d++){switch((l=a[d]).nodeName.toLowerCase()){case"select":o.defer((function(){return i(l).trigger("chosen:updated").trigger("selectList:updated")}));break;case"input":if(!("function"==typeof(u=i(l)).checkboxradio?u.checkboxradio("instance"):void 0))break;"checkbox"===l.type?o.defer((function(){return i(l).checkboxradio("refresh")})):"radio"===l.type&&o.defer((function(){return i(":radio[name="+l.name+"]").checkboxradio("refresh")}))}if(o.isUndefined(e))return i(l).is(":checkbox")?l.checked:i(l).val();if((m=i(l).data("mask"))&&o.isObject(m)&&e===m.getCleanVal())return i(l).val()}return e}for(p=0,f=a.length;p<f;p++){if(l=a[p],(c=i(l)).is("select")&&!1===c.data("ready"))return s.get(n);if(c.is(":checkbox"))return l.checked;if((m=c.data("mask"))&&o.isObject(m))return m.getCleanVal()}return e},a.ccyAmountConverter=function(t){throw null==t&&(t=""),new Error("ccyAmountConverter is not supported")},a.makeDecimalConverter=function(t){var n;return null==t&&(t=2),n=new RegExp("(\\.\\d{"+t+"})\\d+$","g"),function(a,u,l,d,h){var f,m,y,_,g;return g=function(e){var n,o;return n=Math.pow(10,t),(o=e.toFixed(t))>e&&(o=(o-1/n).toFixed(t)),o},o.isNull(u)||o.isUndefined(u)||o.isNaN(u)?a===r?"":null:(u=String(u).replace(/\s/g,""),(y=e.parseFloat(u))?(a===s&&"number"!==(f=i(h[0])).attr("type")&&(_=c(f),o.defer((function(){return p(f,_)}))),m=g(y),parseFloat(m)!==y?m:(u=u.replace(/,/g,".").replace(/^0+(?=[1-9])/,"").replace(n,"$1"),0===t&&(u=u.replace(".","")),u)):u)}},a.amountConverter=a.makeDecimalConverter(2),a.intAmountConverter=function(t,n){return o.isNull(n)||o.isUndefined(n)||o.isNaN(n)?t===r?"":null:(n=String(n))&&e.parseNumber(n)?t===r?e.formatNumber(parseInt(n,10)):String(e.parseNumber(n)):n},a.expiryConverter=function(t){return function(e,n,o,i){var s,a,c;return s=l().format("YYYY-MM"),c={year:(a=i.get(o)||s).split("-")[0],month:parseInt(a.split("-")[1],10)},e===r?c[t]:(c[t]=n,l(new Date(c.year,c.month-1)).format("YYYY-MM"))}},a.expirationDateConverter=function(t,e){var n;return e?t===r?(n=e.match(/^(\d{4})-(\d{2})$/))?n[2]+"/"+n[1].slice(2):e:(n=e.match(/^(\d{2})\/(\d{2})$/))?"20"+n[2]+"-"+n[1]:e:""},a.makeFlipSwitchConverter=function(t){return function(e,n){switch(e){case r:return"true"===o.invert(t)[n];case s:return t[n];default:throw new Error("Unexpected value of flip switch, use on|off. value="+n)}}},a.makeSelectConverter=function(t){return function(e,n){switch(e){case r:return o.invert(t)[n];case s:return t[n];default:throw new Error("Unexpected value of flip switch, use on|off. value="+n)}}},a.datepickerConverter=function(t,n){return t===r?e.formatDate(n,{raw:"dd MMM yyyy"}):e.parseDate(n,{raw:"dd MMM yyyy"})},a.isoDatepickerConverter=function(t,n,o,i,s){var a,c,l;return n?(c=u.datePickerDateFormat(s),l=u.datePickerDateFormatToMomentDateFormatConverter(c),t===r?(a=e.parseDate(n,{raw:"yyyy-MM-dd"}),e.formatDate(a,{raw:l})):(a=e.parseDate(n,{raw:l}),e.formatDate(a,{raw:"yyyy-MM-dd"}))):""},a.limiterSwitchConverter=function(t,e){return t===r?"unlimited"===e:e?"unlimited":"forbidden"},a.BIRTH_DATE_FORMAT="DD-MM-YYYY",a.birthDateConverter=function(t,e,n,o,i){return e?t===r?l(e).format(a.BIRTH_DATE_FORMAT):l(e,[a.BIRTH_DATE_FORMAT]).format("YYYY-MM-DD"):""},a.lowerCase=function(t,e,n,o,s){var a;return a=i.camelCase("raw-"+n),t===r?o[a]||"":(o[a]=e,e.toLowerCase())},a}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(14))},function(t,e,n){var o,i,r;
// (c) 2013 Bart Wood
// Distributed Under MIT License
i=[n(11),n(14),n(384)],void 0===(r="function"==typeof(o=function(t,e,n){if(!n)throw"Please include Backbone.js before Backbone.ModelBinder.js";return n.ModelBinder=function(){t.bindAll.apply(t,[this].concat(t.functions(this)))},n.ModelBinder.SetOptions=function(t){n.ModelBinder.options=t},n.ModelBinder.VERSION="1.0.5",n.ModelBinder.Constants={},n.ModelBinder.Constants.ModelToView="ModelToView",n.ModelBinder.Constants.ViewToModel="ViewToModel",t.extend(n.ModelBinder.prototype,{bind:function(t,n,o,i){this.unbind(),this._model=t,this._rootEl=n,this._setOptions(i),this._model||this._throwException("model must be specified"),this._rootEl||this._throwException("rootEl must be specified"),o?(this._attributeBindings=e.extend(!0,{},o),this._initializeAttributeBindings(),this._initializeElBindings()):this._initializeDefaultBindings(),this._bindModelToView(),this._bindViewToModel()},bindCustomTriggers:function(t,e,n,o,i){this._triggers=n,this.bind(t,e,o,i)},unbind:function(){this._unbindModelToView(),this._unbindViewToModel(),this._attributeBindings&&(delete this._attributeBindings,this._attributeBindings=void 0)},_setOptions:function(e){this._options=t.extend({boundAttribute:"name"},n.ModelBinder.options,e),this._options.modelSetOptions||(this._options.modelSetOptions={}),this._options.modelSetOptions.changeSource="ModelBinder",this._options.changeTriggers||(this._options.changeTriggers={"":"change","[contenteditable]":"blur"}),this._options.initialCopyDirection||(this._options.initialCopyDirection=n.ModelBinder.Constants.ModelToView)},_initializeAttributeBindings:function(){var e,n,o,i;for(e in this._attributeBindings){for(n=this._attributeBindings[e],t.isString(n)?o={elementBindings:[{selector:n}]}:t.isArray(n)?o={elementBindings:n}:t.isObject(n)?o={elementBindings:[n]}:this._throwException("Unsupported type passed to Model Binder "+o),i=0;i<o.elementBindings.length;i++)o.elementBindings[i].attributeBinding=o;o.attributeName=e,this._attributeBindings[e]=o}},_initializeDefaultBindings:function(){var t,n,o,i,r;for(this._attributeBindings={},n=e("["+this._options.boundAttribute+"]",this._rootEl),t=0;t<n.length;t++)o=n[t],i=e(o).attr(this._options.boundAttribute),this._attributeBindings[i]?this._attributeBindings[i].elementBindings.push({attributeBinding:this._attributeBindings[i],boundEls:[o]}):((r={attributeName:i}).elementBindings=[{attributeBinding:r,boundEls:[o]}],this._attributeBindings[i]=r)},_initializeElBindings:function(){var t,n,o,i,r,s,a;for(t in this._attributeBindings)for(n=this._attributeBindings[t],o=0;o<n.elementBindings.length;o++)if(0===(r=""===(i=n.elementBindings[o]).selector?e(this._rootEl):e(i.selector,this._rootEl)).length)this._throwException("Bad binding found. No elements returned for binding selector "+i.selector);else for(i.boundEls=[],s=0;s<r.length;s++)a=r[s],i.boundEls.push(a)},_bindModelToView:function(){this._model.on("change",this._onModelChange,this),this._options.initialCopyDirection===n.ModelBinder.Constants.ModelToView&&this.copyModelAttributesToView()},copyModelAttributesToView:function(e){var n,o;for(n in this._attributeBindings)void 0!==e&&-1===t.indexOf(e,n)||(o=this._attributeBindings[n],this._copyModelToView(o))},copyViewValuesToModel:function(){var t,n,o,i,r,s;for(t in this._attributeBindings)for(n=this._attributeBindings[t],o=0;o<n.elementBindings.length;o++)if(i=n.elementBindings[o],this._isBindingUserEditable(i))if(this._isBindingRadioGroup(i))(s=this._getRadioButtonGroupCheckedEl(i))&&this._copyViewToModel(i,s);else for(r=0;r<i.boundEls.length;r++)s=e(i.boundEls[r]),this._isElUserEditable(s)&&this._copyViewToModel(i,s)},_unbindModelToView:function(){this._model&&(this._model.off("change",this._onModelChange),this._model=void 0)},_bindViewToModel:function(){t.each(this._options.changeTriggers,(function(t,n){e(this._rootEl).delegate(n,t,this._onElChanged)}),this),this._options.initialCopyDirection===n.ModelBinder.Constants.ViewToModel&&this.copyViewValuesToModel()},_unbindViewToModel:function(){this._options&&this._options.changeTriggers&&t.each(this._options.changeTriggers,(function(t,n){e(this._rootEl).undelegate(n,t,this._onElChanged)}),this)},_onElChanged:function(t){var n,o,i,r;for(n=e(t.target)[0],o=this._getElBindings(n),i=0;i<o.length;i++)r=o[i],this._isBindingUserEditable(r)&&this._copyViewToModel(r,n)},_isBindingUserEditable:function(t){return void 0===t.elAttribute||"text"===t.elAttribute||"html"===t.elAttribute},_isElUserEditable:function(t){return t.attr("contenteditable")||t.is("input")||t.is("select")||t.is("textarea")},_isBindingRadioGroup:function(t){var n,o=t.boundEls.length>0;for(n=0;n<t.boundEls.length;n++)if("radio"!==e(t.boundEls[n]).attr("type")){o=!1;break}return o},_getRadioButtonGroupCheckedEl:function(t){var n,o;for(n=0;n<t.boundEls.length;n++)if("radio"===(o=e(t.boundEls[n])).attr("type")&&o.attr("checked"))return o},_getElBindings:function(t){var e,n,o,i,r,s=[];for(e in this._attributeBindings)for(n=this._attributeBindings[e],o=0;o<n.elementBindings.length;o++)for(i=n.elementBindings[o],r=0;r<i.boundEls.length;r++)i.boundEls[r]===t&&s.push(i);return s},_onModelChange:function(){var t,e;for(t in this._model.changedAttributes())(e=this._attributeBindings[t])&&this._copyModelToView(e)},_copyModelToView:function(t){var o,i,r,s,a,c;for(a=this._model.get(t.attributeName),o=0;o<t.elementBindings.length;o++)for(i=t.elementBindings[o],r=0;r<i.boundEls.length;r++)(s=i.boundEls[r])._isSetting||(c=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,i,a),this._setEl(e(s),i,c))},_setEl:function(t,e,n){e.elAttribute?this._setElAttribute(t,e,n):this._setElValue(t,n)},_setElAttribute:function(e,o,i){switch(o.elAttribute){case"html":e.html(i);break;case"text":e.text(i);break;case"enabled":e.prop("disabled",!i);break;case"displayed":e[i?"show":"hide"]();break;case"hidden":e[i?"hide":"show"]();break;case"css":e.css(o.cssAttribute,i);break;case"class":var r=this._model.previous(o.attributeBinding.attributeName),s=this._model.get(o.attributeBinding.attributeName);t.isUndefined(r)&&t.isUndefined(s)||(r=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,o,r),e.removeClass(r)),i&&e.addClass(i);break;default:e.attr(o.elAttribute,i)}},_setElValue:function(t,e){if(t.attr("type"))switch(t.attr("type")){case"radio":t.prop("checked",t.val()===e);break;case"checkbox":t.prop("checked",!!e);break;case"file":break;default:t.val(e)}else t.is("input")||t.is("select")||t.is("textarea")?t.val(e||(0===e?"0":"")):t.text(e||(0===e?"0":""))},_copyViewToModel:function(t,o){var i,r,s;o._isSetting||(o._isSetting=!0,i=this._setModel(t,e(o)),o._isSetting=!1,i&&t.converter&&(r=this._model.get(t.attributeBinding.attributeName),s=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,t,r),this._setEl(e(o),t,s)))},_getElValue:function(t,e){switch(e.attr("type")){case"checkbox":return!!e.prop("checked");default:return void 0!==e.attr("contenteditable")?e.html():e.val()}},_setModel:function(t,e){var o={},i=this._getElValue(t,e);return i=this._getConvertedValue(n.ModelBinder.Constants.ViewToModel,t,i),o[t.attributeBinding.attributeName]=i,this._model.set(o,this._options.modelSetOptions)},_getConvertedValue:function(t,e,n){return e.converter?n=e.converter(t,n,e.attributeBinding.attributeName,this._model,e.boundEls):this._options.converter&&(n=this._options.converter(t,n,e.attributeBinding.attributeName,this._model,e.boundEls)),n},_throwException:function(t){if(!this._options.suppressThrows)throw t;console&&console.error&&console.error(t)}}),n.ModelBinder.CollectionConverter=function(e){if(this._collection=e,!this._collection)throw"Collection must be defined";t.bindAll(this,"convert")},t.extend(n.ModelBinder.CollectionConverter.prototype,{convert:function(t,e){return t===n.ModelBinder.Constants.ModelToView?e?e.id:void 0:this._collection.get(e)}}),n.ModelBinder.createDefaultBindings=function(t,n,o,i){var r,s,a,c,u={};for(r=e("["+n+"]",t),s=0;s<r.length;s++)if(a=r[s],!u[c=e(a).attr(n)]){var l={selector:"["+n+'="'+c+'"]'};u[c]=l,o&&(u[c].converter=o),i&&(u[c].elAttribute=i)}return u},n.ModelBinder.combineBindings=function(e,n){return t.each(n,(function(t,n){var o={selector:t.selector};t.converter&&(o.converter=t.converter),t.elAttribute&&(o.elAttribute=t.elAttribute),e[n]?e[n]=[e[n],o]:e[n]=o})),e},n.ModelBinder})?o.apply(e,i):o)||(t.exports=r)},,,function(t,e,n){var o=n(372);n(449);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').x(e.get(["showFieldLabel"],!1),e,{block:n},{}).w('</div><div class="control-container">').b(e.getBlock("input"),e,{block:i},{}).b(e.getBlock("fieldHint"),e,{block:r},{}).w("</div></div>").b(e.getBlock("extraContent"),e,{},{})}function n(t,e){return t.h("_",e,{block:o},{},"h")}function o(t,e){return t.f(e.get(["name"],!1),e,"h")}function i(t,e){return t}function r(t,e){return t.p("templates/form-fields/hint",e,e,{})}t.register("templates/form-fields/base",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/base",t,e)};i.templateName="templates/form-fields/base",t.exports=i},,function(e,n,o){(function(i,r){var s;void 0===(s=function(e){var n,s,a,c;return a=o(917).ServiceMethodsMixin,s=o(473).ConfirmActionDialog,n=o(530).BlockingInlineEditView,(c={}).WbServiceMethodsMixin=i.extend({},a,{showMissingMandatoryFieldsWarning:function(){var t;if(null!=(t=a.getMissingMandatoryFieldsWarning.apply(this,arguments))?t.length:void 0)return this.showError(t)},balanceEnoughConfirmation:function(){var e;return e=new r.Deferred,this.isBalanceEnoughToAmount()?e.resolve():new s({actionText:t("Please, make sure, that your account has sufficient funds for the transaction"),confirmButtonText:t("Yes, i'm sure"),onConfirm:function(){return e.resolve()},onCancel:function(){return e.reject()}}).show(),e},showMissingFieldsError:function(t){var e,n,o,r,s;for(s={},i.isArray(t)||(t=a.getMissingFieldsErrors.apply(this,arguments)),r=this.getFields(),n=0,o=t.length;n<o;n++)(e=t[n]).target&&r.get({id:e.target})?s[e.target]=e.message:this.showError(e.message);return i.isEmpty(s)||this.validator.showErrors(s),!0},showInlineEditField:function(t,e,o,s,a){var c;return null==o&&(o=null),null==s&&(s=""),null==a&&(a={}),(c=t.data("inlineEditInstance"))?c.setValue(s):((c=new n({el:t},{defaultValue:s,validationRules:i.extend({required:!0},a)})).on("save",(function(n){return r.when(e(n)).always((function(){return t.parent().removeClass("edit-form-enabled"),c.close()}))})),c.on("cancel",(function(){return t.parent().removeClass("edit-form-enabled"),"function"==typeof o?o():void 0})),t.data("inlineEditInstance",c)),c.show(),t.parent().addClass("edit-form-enabled")}}),c}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},,,function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m;return m=o(40),o(375).BaseModel,s=(f=o(398)).Field,c=f.Fields,u=f.FormMeta,o(397),o(395),o(136),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.skipBinding=function(){return e.__super__.skipBinding.apply(this,arguments)||"N"===this.get("addData.SHOW_ON_INPUT")},e.prototype.externalCardAllowed=function(){var t;return e.__super__.externalCardAllowed.apply(this,arguments)&&("source"===(t=this.get("role"))||"destination"===t)},e}(s),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=p,e}(c),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.useServerMeta=!0,e.prototype.url=function(){var t,e,n,o,r;for(o=new i(m.API_URL+"/services/"+this.id),t=0,e=(n=this.serviceAttrs).length;t<e;t++)r=n[t],o.addQuery("attr",r);return o.toString()},e.prototype.initialize=function(t,n){return e.__super__.initialize.apply(this,arguments),this.serviceAttrs=(null!=n?n.serviceAttrs:void 0)?n.serviceAttrs.split(","):[]},e.prototype.getDisplayMode=function(){return this.get("addData.DISPLAY_MODE")},e.prototype.createFields=function(t){return new h(t)},e.prototype.fieldsContext=function(t){return null==t&&(t={}),this.fields.viewContext(t)},e.prototype.getModelDefaults=function(){var t,n,o,i,r,s,a,c,u;for(t=e.__super__.getModelDefaults.apply(this,arguments),o=0,r=(a=this.serviceAttrs).length;o<r;o++)i=(c=a[o].split(":"))[0],u=c[1],(n=this.fields.getByReference(i))&&(s=n.getAttrPath(),n.isCatalog()&&(u={id:u}),null==t[s]&&(t[s]=u));return t},e.prototype.getSourceField=function(){return this.getField({role:"source"})},e.prototype.getDestnationField=function(){return this.getField({role:"destination"})},e.prototype.getServiceAttrs=function(){var t,e,n,o,i,r;for(i={},e=0,n=(o=this.getFields().leafs()).length;e<n;e++)(t=o[e]).isGroup()||(r=t.get("value"),t.has("dataSource")&&r&&(r=r.id),i[t.get("attr")]=r);return i},e}(u),l={payment:t("Payment"),transfer:t("Transfer"),_default:t("Operation")},d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={allowTemplate:!0},e.prototype.externalCardAllowed=function(){var t;return t=this.getSourceField(),Boolean(!!t&&t.externalCardAllowed())},e.prototype.viewContext=function(){return r.extend(e.__super__.viewContext.apply(this,arguments),{allowPeriodic:window.OW.features.RECURRENT_PAYMENTS&&this.get("allowPeriodic"),allowThreshold:window.OW.features.THRESHOLD_PAYMENTS&&this.get("allowThreshold"),typeName:l[this.get("type")]||l._default})},e}(n),{ServiceField:p,ServiceFields:h,CpServiceMeta:n,PaymentServiceMeta:d}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(379),o(11))},function(t,e,n){(function(t,o){var i,r={}.hasOwnProperty;n(406),i=n(374).TemplateView,e.Checkbox=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="common/checkbox",n.prototype.events={"change input":"onChange","click .checkbox-label":"onLabelClick"},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),this.options.model)return console.assert(this.options.name,"Field name should be specified for checkbox with bound model"),this.model=this.options.model,this.listenTo(this.model,"change:"+this.options.name,(t=this,function(){return t.onChange()}));var t},n.prototype.getBindings=function(){return t.object([this.options.name],["input[type=checkbox]"])},n.prototype.onRender=function(){if(n.__super__.onRender.apply(this,arguments),this.$container=this.$(".checkbox"),this.$checkbox=this.$(":checkbox"),this.model)return this.modelBinder=new o.ModelBinder,this.modelBinder.bind(this.model,this.$el,this.getBindings())},n.prototype.onLabelClick=function(){return this.$checkbox.trigger("click")},n.prototype.onChange=function(){var e;if(e=this.model?this.model.get(this.options.name):this.$checkbox.is(":checked"),this.$container.toggleClass("checked",e),t.isFunction(this.options.onChange))return this.options.onChange(e)},n.prototype.context=function(){return t.extend(n.__super__.context.apply(this,arguments),{label:this.options.label,className:this.options.className,inputName:this.options.name,checked:this.options.checked})},n}(i)}).call(this,n(11),n(384))},function(t,e,n){var o,i={}.hasOwnProperty,r=[].slice;void 0===(o=function(t){return{WbWizard:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.menuSectionId=null,e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),null==this.menuSectionId&&(this.menuSectionId=null!=t?t.menuSectionId:void 0),console.assert(this.menuSectionId,"menuSectionId of a wizard must be defined")},e.prototype.showStep=function(t){var e;return this.currentStep=t,e=[this.menuSectionId].concat(r.call(this.getRouterOptionsForStep(this.currentStep))),window.app.router.showPage.apply(window.app.router,e)},e}(n(918))}}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i,r,s,a){var c,u=function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(c=function(e){var n,c,l,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A,E,M,I;return T=o(96),M=o(40),p=(A=o(375)).BaseModel,S=A.SingleFetchBaseCollection,E=o(400),v=E.IC_PAYMENT_TYPES,b=E.MVisaTransfer,C=E.RetrieveMoneyTransfer,k=o(414).PaymentServiceMeta,x=o(790),o(377),w=o(400).IntraBankTransfer,{BF:t("Bundled Service"),BG:t("Baggage Fee"),CF:t("Change Fee"),CG:t("Cargo"),CO:t("Carbon Offset"),FF:t("Frequent Flyer"),GF:t("Gift Card"),GT:t("Ground Transport"),IE:t("In-Flight Entertainment"),LG:t("Lounge"),MD:t("Medical"),ML:t("Meal/Beverage"),OT:t("Other"),PA:t("Passenger Assist Fee"),PT:t("Pets"),SA:t("Seat Fees"),SB:t("Standby"),SF:t("Service Fee"),ST:t("Store"),TS:t("Travel Service"),UN:t("Unaccompanied Travel"),UP:t("Upgrades"),WI:t("Wi-Fi")},null==M.RECENT_PAYMENTS_LIMIT&&(M.RECENT_PAYMENTS_LIMIT=10),null==M.RECENT_PAYMENTS_PERIOD&&(M.RECENT_PAYMENTS_PERIOD="P3M"),null==M.CASH_OUT_CATEGORY&&(M.CASH_OUT_CATEGORY="Cash-out"),"YYYY-MM-DD",I=function(t){return T(t).format("YYYY-MM-DD")},g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.urlRoot=M.API_URL+"/history",e.prototype.defaults={from:T().subtract(1,"month").add(1,"day").toDate(),to:T().toDate(),period:"",contract:"",textSearch:""},e.prototype.setFilters=function(t,e){return null==e&&(e=!1),this.set(t,{silent:e})},e.prototype.resetFilter=function(t){var e;return(e={})[t]=this.defaults[t],this.setFilters(e)},e.prototype.getUrl=function(){var t,e,n,o;return o=new r(this.urlRoot),(n=this.get("period"))&&this.set({from:T().subtract(T.duration(n)).add(1,"day").toDate(),to:T().toDate()},{silent:!0}),e={from:I(this.get("from"))},T(this.get("to")).isSame(new Date,"day")||(e.to=I(this.get("to"))),(t=this.get("contract"))&&(e.contractId=t),o.addQuery(e),o.toString()},e}(i.Model),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),s.extend(this.defaults,{category:"",operationGroup:"",bonusOperations:null})},e.prototype.hasOfflineFilters=function(){return this.get("operationGroup")||this.get("category")||this.get("textSearch")||this.get("bonusOperations")},e.prototype.setFilters=function(t,e){return null==e&&(e=!1),t.operationGroup&&(t.category=this.defaults.category),t.category&&(t.operationGroup=this.defaults.operationGroup),s.has(t,"bonusOperations")&&(t.category=this.defaults.category,t.operationGroup=this.defaults.operationGroup),this.set(t,{silent:e})},e}(g),y=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return u(n,e),n.prototype.urlRoot=M.API_URL+"/history",n.prototype.url=function(){return this.urlRoot+"/"+this.id},n.prototype.initialize=function(){return this.setOperationCurrency(),this.on("sync",(t=this,function(){return t.setOperationCurrency()}));var t},n.prototype.setOperationCurrency=function(){var t,e,n,o,i;return i=null!=(e=this.get("transAmount"))?e.currency:void 0,o=null!=(n=this.get("totalAmount"))?n.currency:void 0,t=i||o,this.set("operationCurrency",t||null)},n.prototype.getServiceFields=function(){var t,e,n,o,i;if(t=this.get("service.shortFields"))return t;for(t={},e=0,n=(o=this.get("service.fields")).length;e<n;e++)t[(i=o[e]).id]=i.value;return t},n.prototype.getNotServiceDescription=function(){var e,n;if(!(e=this.get("payment")))return{type:"plain",text:this.get("description")};switch(e.type){case v.INTRA_BANK_TRANSFER:n=t("Intra-bank transfer");break;case v.CURRENCY_EXCHANGE_TRANSFER:n=t("Currency exchange transfer");break;case v.MCC_INTRA_TRANSFER:n=t("Multi-currency card intra transfer");break;case v.MVISA_TRANSFER:n=t("mVisa transfer");break;case v.RETRIEVE_MONEY:n=t("Retrieve money transfer [history]");break;default:n=this.get("description")}return{type:"plain",text:n}},n.prototype.getTransferDescription=function(){var t,e,n;return e=this.getServiceFields(),{type:"transfer",service:this.get("service.name"),destination:((t=window.app.data.contracts.history.find((n=this,function(t){return t.id===n.get("destContractId")})))?(t=t.viewContext()).name||t.number:e.DESTINATION||e.DESTINATION_IDT)||""}},n.prototype.getPhoneTopUpDescription=function(){var t;return t=this.getServiceFields(),{type:"mobileTopUp",service:this.get("service.name"),phoneNumber:{value:t.CUSTOM_IDT,mask:"PHONE10"}}},n.prototype.getInvoicePaymentDescription=function(){return{type:"payment",text:this.get("service.invoice.name")||this.get("service.name")}},n.prototype.isPhoneTopUp=function(){return-1!==(M.MOBILE_PAYMENTS_SERVICES||[]).indexOf(this.get("service.id"))},n.prototype.isInvoice=function(){var t;return t=M.INVOICE_SERVICES||[],this.get("withInvoice")||-1!==t.indexOf(this.get("service.id"))},n.prototype.getServicePaymentDescription=function(){var t,e;return e=this.getServiceFields(),t={type:"payment",text:""+this.get("service.name")},e.CUSTOM_IDT&&(t.destination=e.CUSTOM_IDT),t},n.prototype.getPaymentDescription=function(){return this.isPhoneTopUp()?this.getPhoneTopUpDescription():this.isInvoice()?this.getInvoicePaymentDescription():this.getServicePaymentDescription()},n.prototype.getDescription=function(){return this.get("service")?this.get("service.shortFields")||this.get("service.fields")?"transfer"===this.get("operationType")?this.getTransferDescription():this.getPaymentDescription():{type:"servicePlain",text:this.get("service.name")||this.get("description")}:this.getNotServiceDescription()},n.prototype.getDisputeStatus=function(){return window.OW.disputesConfig&&window.OW.disputesConfig.getDisputeStatus?window.OW.disputesConfig.getDisputeStatus(this.get("disputeOpen"),this.get("disputeStep")):null},n.prototype.matchesTextSearch=function(t){var e,n,o;if(!(e=this.getDescription())||!e.type)return!1;switch(o=new RegExp(RegExp.escape(t),"i"),e.type){case"plain":if(o.test(e.text))return!0;if((n=this.get("merchantCategory"))&&o.test(x.getAnalyticsCategoryLocalizedName(n)))return!0;if(this.get("merchantData")&&o.test(this.get("merchantData.name"))||o.test(this.get("location.merchant")))return!0;break;case"payment":case"servicePlain":if(o.test(e.text))return!0;break;case"transfer":if(o.test(e.service)||o.test(e.destination))return!0;break;case"mobileTopUp":if(o.test(e.service)||o.test(e.phoneNumber.value))return!0;break;default:if(this.get("template")&&o.test(this.get("template.name")))return!0;if(this.get("description")&&o.test(this.get("description")))return!0}return!1},n.prototype.getAmountDetails=function(){var t,e,n,o,i,r,a,c,u,l,d,p,h;if(t={},(p=this.get("transAmount"))&&(t.trans=p),(d=this.get("totalAmount"))&&(t.total=d),(l=this.get("settlAmount"))&&(t.settl=l),this.get("operationType")===v.FEE&&!t.trans&&t.total&&(t.trans=t.total,delete t.total),i=this.get("partialAmount"))if(e=(null!=(r=t.trans)?r.currency:void 0)||(null!=(a=t.total)?a.currency:void 0),t.parts=[],e){for(o in c=s.pick(i,e))(h=c[o])&&t.parts.push(h);for(o in u=s.omit(i,e))(h=u[o])&&t.parts.push(h)}else for(o in i)(h=i[o])&&t.parts.push(h);return s.isEmpty(n=this.get("fees"))||(t.fees={},n.surcharge&&n.surcharge.currency!==n.totalFee.currency&&(t.fees.surcharge=n.surcharge),n.totalFee&&(t.fees.total=n.totalFee),window.OW.features.LOYALTY&&(n.bonus&&(t.fees.bonus=n.bonus),n.cashback&&(t.fees.cashback=n.cashback))),t},n.prototype.getServiceDetails=function(){var t,e,n,o,i;if(t=[],!(n=this.get("service.fields")))return t;for(o=0,i=n.length;o<i;o++)(e=n[o]).id.endsWith("AMOUNT")||e.id.endsWith("CURRENCY")||t.push({name:e.name,value:e.value,mask:e.inputType,rawMask:e.mask});return t},n.prototype.getInvoiceDetails=function(){var t,e,n,o,i,r,a,c,u,l,d,p,h,f,m,y,_,g;for(c in _="TEMP"+Date.now(),y={},o=this.get("service.fields"),i=s.groupBy(o,(function(t){var e;return(null!=(e=t.parentGroupId)?e.startsWith("INVOICE"):void 0)?t.parentGroupId:_})),t=s.filter(i[_],(function(t){return!/(amount|currency)$/i.test(t.id)})),y.header=t.concat(i.INVOICE_HEADER),y.details=[],i)if(a=i[c],-1!==c.indexOf("INVOICE_ITEM_")){for(e={},r=0,u=a.length;r<u;r++)(n=a[r]).addData&&(n.addData.INVOICE_ITEM_TYPE&&(e.name=n.name,e.type=n.addData.INVOICE_ITEM_TYPE),n.addData.INVOICE_PARAM_CODE&&(p=n.addData.INVOICE_PARAM_CODE.split("."),g=s.omit(n,["addData"]),/amount$/i.test(n.addData.INVOICE_PARAM_CODE)&&(g.currency=this.get("operationCurrency")),/info$/i.test(n.addData.INVOICE_PARAM_CODE)?(null==e[l=p[0]]&&(e[l]=[]),e[p[0]].push(g)):p[1]?(null==e[d=p[0]]&&(e[d]={}),e[p[0]][p[1]]=g):e[p[0]]=g));(null!=(h=e.Counter)?h.Unit:void 0)&&((null!=(f=e.Counter)?f.PrevValue:void 0)&&(e.Counter.PrevValueObj={value:e.Counter.PrevValue.value,currency:e.Counter.Unit.value}),(null!=(m=e.Counter)?m.Value:void 0)&&(e.Counter.ValueObj={value:e.Counter.Value.value,currency:e.Counter.Unit.value})),y.details.push(e)}return y},n.prototype.getIntraBankTransferFields=function(){var e,n,o,i;return n=[],(i=window.app.data.contracts.history.get(this.get("payment.remitter.id")))&&n.push({name:t("Source"),value:i.get("name")}),(e=window.app.data.contracts.history.get(this.get("payment.beneficiary.id")))&&n.push({name:t("Beneficiary"),value:e.get("name")}),(o=w.getFxRateField(this.get("payment.fxRate")))&&n.push(o),n},n.prototype.getIntraCardTransferFields=function(){var e,n,o,i;return(n=window.app.data.contracts.history.get(this.get("payment.remitter.id")))?(e=n.get("card.accounts"),o=s.findWhere(e,{number:this.get("payment.remitter.accountNumber")}),i=s.findWhere(e,{number:this.get("payment.beneficiary.accountNumber")}),o&&i?[{name:t("Contract"),value:n.get("name")},{name:t("Source currency"),value:t(o.currency+" [text]")},{name:t("Target currency"),value:t(i.currency+" [text]")}]:[]):[]},n.prototype.getMVisaTransferFields=function(){return new b(this.get("payment")).getDetails()},n.prototype.getRetrieveMoneyFields=function(){return new C(this.get("payment")).getDetails(this.get("meta"))},n.prototype.getOperationDetails=function(){if(this.has("service"))return this.getServiceDetails();switch(this.get("payment.type")){case v.INTRA_BANK_TRANSFER:case v.CURRENCY_EXCHANGE_TRANSFER:return this.getIntraBankTransferFields();case v.MCC_INTRA_TRANSFER:return this.getIntraCardTransferFields();case v.MVISA_TRANSFER:return this.getMVisaTransferFields();case v.RETRIEVE_MONEY:return this.getRetrieveMoneyFields();default:return[]}},n.prototype.getGroup=function(){return this.get("isDataComplete")?"failed"===this.get("status")?"failed":this.get("isReversal")?"reversal":this.get("isReversed")?"reversed":"expenses":"incomplete"},n.prototype.isContactlessPayment=function(){return!0===this.get("isContactless")},n.prototype.isPaymentByToken=function(){return!0===this.get("isTokenPay")},n.prototype.inMenu=function(){var t,e;return(e=this.get("service.id"))&&(null!=(t=window.app.data.menu)?t.hasService(e):void 0)},n.prototype.viewContext=function(){var t,e,o,i,r;return(t=s.extend(n.__super__.viewContext.apply(this,arguments),{disputeStatus:this.getDisputeStatus(),operationDescription:this.getDescription(),amountDetails:this.getAmountDetails(),operationDetails:this.getOperationDetails(),serviceDetails:this.getServiceDetails()})).allowRepeat=t.allowRepeat&&(this.has("contractId")||this.has("payment")),t.isInvoice=this.isInvoice(),t.isInvoice&&(t.invoiceDetails=this.getInvoiceDetails()),null!=(e=t.service)&&(e.allowPeriodic=window.OW.features.RECURRENT_PAYMENTS&&(null!=(o=t.service)?o.allowPeriodic:void 0)),null!=(i=t.service)&&(i.allowThreshold=window.OW.features.THRESHOLD_PAYMENTS&&(null!=(r=t.service)?r.allowThreshold:void 0)),t.isContactlessPayment=this.isContactlessPayment(),t.isPaymentByToken=this.isPaymentByToken(),t},n}(p),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.isBonusOperation=function(){return!s.isEmpty(this.get("fees.bonus"))},e.prototype.getBonusAmount=function(){return parseFloat(this.get("fees.bonus.value"))},e.prototype.isOperationWithCashback=function(){return!s.isEmpty(this.get("fees.cashback"))},e.prototype.getCashbackAmount=function(){return parseFloat(this.get("fees.cashback.value"))},e.prototype.getGroup=function(){var t;return t=parseFloat(this.get("analyzableAmount.value")),this.get("isDataComplete")?"failed"===this.get("status")?"failed":this.get("isReversal")?"reversal":this.get("isReversed")?"reversed":t>0&&this.get("isAnotherCurrencyOperation")?"anotherCurrencyIncome":t>0?"income":this.get("isAnotherCurrencyOperation")?"anotherCurrency":"expenses":"incomplete"},e}(y),P=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.url=function(){return this.urlRoot+"/recent/"+this.id},e}(y),_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.url=function(){return M.API_URL+"/history/"+this.id+"/current-service"},e}(k),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewContext=function(){return e.__super__.viewContext.apply(this,arguments).filter((function(t){return t.isDisputeAvailable}))},e}(m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=y,e.prototype.queryClass=g,e.prototype.queryUrl="",e.prototype.url=function(){return this.queryUrl},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.query=new this.queryClass,this.on("sync reset",(t=this,function(){return t.each(t.enhanceOperation.bind(t))}));var t},e.prototype.hasChanges=function(){return this.query.getUrl()!==this.queryUrl},e.prototype.update=function(t){return t||this.hasChanges()?(this.queryUrl=this.query.getUrl(),this.fetch()):a.Deferred().resolve()},e.prototype.enhanceOperation=function(t){var e,n;if(n=t.get("contractId")||t.get("payment.remitter.id"),e=window.app.data.contracts.history.get(n))return t.set("contractName",e.get("name"))},e.prototype.asGroups=function(){return this.groupBy((function(t){return t.getGroup()}))},e.prototype.groupByDayContext=function(){var t,e,n,o,i,r,s,a,c,u;if(!(s=this.viewContext()).length)return[];for(c=[],u=null,o=null,t=null,a=function(t){var e,n,o,i,r,s;for(o=[],e=0,n=(r=t.operations).length;e<n;e++)(i=r[e]).merchantData&&(i.merchantData.promoTitle&&(s=i.merchantData.name,d.call(o,s)>=0)?delete i.merchantData.promoTitle:o.push(i.merchantData.name));return t},e=0,n=s.length;e<n;e++)i=s[e],r=T(i.operationTime),null==u&&(u={year:r.toDate(),months:[]}),r.isSame(u.year,"year")||(o.dates.push(a(t)),u.months.push(o),c.push(u),u={year:r.toDate(),months:[]},o=null,t=null),null==o&&(o={month:r.toDate(),dates:[]}),r.isSame(o.month,"month")||(o.dates.push(a(t)),u.months.push(o),o={month:r.toDate(),dates:[]},t=null),null==t&&(t={date:r.toDate(),operations:[]}),r.isSame(t.date,"day")||(o.dates.push(a(t)),t={date:r.toDate(),operations:[]}),t.operations.push(i);return o.dates.push(a(t)),u.months.push(o),c.push(u),c},e.prototype.viewContext=function(){var t,e;return t=this.models,(e=this.query.get("textSearch"))&&(t=this.models.filter((function(t){return t.matchesTextSearch(e)}))),t.map((function(t){return t.viewContext()}))},e}(S)),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=l,e.prototype.queryClass=n,e.prototype.enhanceOperation=function(t){var n,o;return e.__super__.enhanceOperation.apply(this,arguments),"expenses"!==t.getGroup()||t.has("merchantCategory")||t.set("merchantCategory",(null!=(n=window.OW)&&null!=(o=n.historyAnalyticsConfig)?o.groupOfExpensesWithoutMerchantCategory:void 0)||"empty"),this.updateAnotherCurrencyFlag(t),this.setAnalyzableAmount(t)},e.prototype.getBaseCurrency=function(){var t,e;return e=M.DEFAULT_CURRENCY,(t=window.app.data.contracts.history.get(this.query.get("contract")))&&(e=t.get("currency")),e||M.DEFAULT_CURRENCY},e.prototype.setAnalyzableAmount=function(t){var e,n,o,i,r;return r=null!=(n=t.get("transAmount"))?n.currency:void 0,(i=null!=(o=t.get("totalAmount"))?o.currency:void 0)===(e=t.get("isAnotherCurrencyOperation")?i:this.getBaseCurrency())?t.set("analyzableAmount",t.get("totalAmount")):r===e?t.set("analyzableAmount",t.get("transAmount")):t.set("analyzableAmount",t.get("totalAmount"))},e.prototype.updateAnotherCurrencyFlag=function(t){var e,n,o,i,r,s,a;return e=this.getBaseCurrency(),t.get("operationCurrency")?(a=(s=null!=(n=t.get("transAmount"))?n.currency:void 0)&&s!==e,r=(i=null!=(o=t.get("totalAmount"))?o.currency:void 0)&&i!==e,t.set("isAnotherCurrencyOperation",a&&r)):t.set("isAnotherCurrencyOperation",!1)},e.prototype.getFilteredHistory=function(){var t,e,n;if(n=this.models,!this.query.hasOfflineFilters())return n;if((t=this.query.toJSON()).textSearch&&(n=n.filter((function(e){return e.matchesTextSearch(t.textSearch)}))),!(t.category||t.operationGroup||t.bonusOperations))return n;if(t.bonusOperations&&(n=this.getBonusOperations()),t.operationGroup){if("cashback"===t.operationGroup)return n.filter((function(t){return t.isOperationWithCashback()}));if("income"===(e=t.operationGroup)||"anotherCurrencyIncome"===e||"anotherCurrency"===e)return n.filter((function(e){return e.getGroup()===t.operationGroup}));if("notExpenses"===t.operationGroup)return n.filter((function(t){return"expenses"!==t.getGroup()}));if(n=n.filter((function(t){return"expenses"===t.getGroup()})),"spent"===t.operationGroup)return n;switch(t.operationGroup){case"auth":n=n.filter((function(t){return t.get("isAuth")}));break;case"online":n=n.filter((function(t){return t.get("isOnline")}));break;case"cashOut":n=n.filter((function(t){return t.get("merchantCategory")===M.CASH_OUT_CATEGORY}));break;default:console.warn("Unknown history filter: ",t.operationGroup)}return n}return t.category&&(n=n.filter((function(e){return"expenses"===e.getGroup()&&e.get("merchantCategory")===t.category}))),n},e.prototype.getBonusOperations=function(){var t;return(t=this.query.get("bonusOperations"))?"income"===t?this.getOperationsWithBonusIncome():this.getOperationsWithBonusSpent():this.models.filter((function(t){return t.isBonusOperation()}))},e.prototype.getOperationsWithBonusIncome=function(){return this.models.filter((function(t){return t.getBonusAmount()>0}))},e.prototype.getOperationsWithBonusSpent=function(){return this.models.filter((function(t){return t.getBonusAmount()<0}))},e.prototype.viewContext=function(){return this.getFilteredHistory().map((function(t){return t.viewContext()}))},e}(m),B=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.url=function(){var t,e;return t=I(T().subtract(T.duration(M.RECENT_PAYMENTS_PERIOD)).add(1,"day")),e=I(T()),M.API_URL+"/history?filter=isOnline:true&from="+t+"&to="+e+"&limit="+M.RECENT_PAYMENTS_LIMIT},e}(m),h=function(){function t(){this.cache={}}return t.prototype.getFilters=function(){return{period:"P1M"}},t.prototype.get=function(t){var e;return this.cache[t]||((e=new c).query.setFilters(s.extend(this.getFilters(),{contract:t})),this.cache[t]=e),this.cache[t]},t.prototype.reset=function(t){if(!t)return this.cache={};delete this.cache[t]},t}(),{History:m,RecentInteractivePayments:B,DisputableHistory:f,AnalyticHistory:c,HistoryItem:y,AnalyticHistoryItem:l,SrnHistoryItem:P,HistoryItemService:_,HistoryQuery:g,AdvancedHistoryQuery:n,ContractsHistoryCache:h,HISTORY_DATE_FORMAT:"YYYY-MM-DD"}}.call(n,o,n,e))||(e.exports=c)}).call(this,o(384),o(379),o(11),o(14))},,function(t,e,n){(function(t){
// Copyright (c) 2011 Harvest http://getharvest.com
// MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
(function(){var e,n,o,i,r={}.hasOwnProperty;(i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,o,i,r,s;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),s=[],o=0,i=(r=t.childNodes).length;o<i;o++)n=r[o],s.push(this.add_option(n,e,t.disabled));return s},t.prototype.add_option=function(t,e,n){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===n?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,n;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,(function(t){return e[t]||"&amp;"}))):t},t}()).select_to_array=function(t){var e,n,o,r,s;for(n=new i,o=0,r=(s=t.childNodes).length;o<r;o++)e=s[o],n.add_node(e);return n.parsed},n=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.backstroke_delete=null==this.options.backstroke_delete||this.options.backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout((function(){return e.container_mousedown()}),50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout((function(){return e.blur_test()}),100)},t.prototype.results_option_build=function(t){var e,n,o,i,r;for(e="",o=0,i=(r=this.results_data).length;o<i;o++)(n=r[o]).group?e+=this.result_add_group(n):e+=this.result_add_option(n),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text,n));return e},t.prototype.result_add_option=function(t){var e,n;if(!t.search_match)return"";if(!this.include_option_in_results(t))return"";e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=""!==t.style.cssText?' style="'+t.style+'"':"";var o=t.search_text;return this.options.custom_element&&(o=this.options.custom_element(t,!1)),'<li class="'+e.join(" ")+'"'+n+' data-option-array-index="'+t.array_index+'">'+o+"</li>"},t.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&t.active_options>0?'<li class="group-result">'+t.search_text+"</li>":""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,o,i,r,s,a,c,u,l,d,p;for(this.no_results_clear(),i=0,t=(s=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=this.search_contains?"":"^",n=new RegExp(o+t,"i"),u=new RegExp(t,"i"),l=0,d=(p=this.results_data).length;l<d;l++)(e=p[l]).search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(r=this.results_data[e.group_array_index]).active_options&&r.search_match&&(i+=1),r.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(i+=1),e.search_match?(s.length&&(a=e.search_text.search(u),c=e.search_text.substr(0,a+s.length)+"</em>"+e.search_text.substr(a+s.length),e.search_text=c.substr(0,a)+"<em>"+c.substr(a)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),i<1&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var n,o,i,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(o=t.replace(/\[|\]/g,"").split(" ")).length)for(i=0,r=o.length;i<r;i++)if(n=o[i],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,t=0,e=(n=this.form_field.options).length;t<e;t++)n[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),(e=t).fn.extend({chosen:function(t){return n.browser_is_supported()?this.each((function(n){var i,r;r=(i=e(this)).data("chosen"),"destroy"===t&&r?r.destroy():r||i.data("chosen",new o(this,t))})):this}}),o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return(t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.is_multiple?this.container.html('<div class="arrow"><b></b></div><ul class="chosen-choices"><li class="search-field"><input type="text" placeholder="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div class="arrow"><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><b></b><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",(function(e){t.container_mousedown(e)})),this.container.bind("mouseup.chosen",(function(e){t.container_mouseup(e)})),this.container.bind("mouseenter.chosen",(function(e){t.mouse_enter(e)})),this.container.bind("mouseleave.chosen",(function(e){t.mouse_leave(e)})),this.search_results.bind("mouseup.chosen",(function(e){t.search_results_mouseup(e)})),this.search_results.bind("mouseover.chosen",(function(e){t.search_results_mouseover(e)})),this.search_results.bind("mouseout.chosen",(function(e){t.search_results_mouseout(e)})),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",(function(e){t.search_results_mousewheel(e)})),this.form_field_jq.bind("chosen:updated.chosen",(function(e){t.results_update_field(e)})),this.form_field_jq.bind("chosen:activate.chosen",(function(e){t.activate_field(e)})),this.form_field_jq.bind("chosen:open.chosen",(function(e){t.container_mousedown(e)})),this.search_field.bind("blur.chosen",(function(e){t.input_blur(e)})),this.search_field.bind("keyup.chosen",(function(e){t.keyup_checker(e)})),this.search_field.bind("keydown.chosen",(function(e){t.keydown_checker(e)})),this.search_field.bind("focus.chosen",(function(e){t.input_focus(e)})),this.is_multiple?this.search_choices.bind("click.chosen",(function(e){t.choices_click(e)})):this.container.bind("click.chosen",(function(t){t.preventDefault()}))},n.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null==t||!e(t.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.is_multiple||this.results_show()),this.activate_field()},n.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e,n,o;if(null!=(e=-(null!=(n=t.originalEvent)?n.wheelDelta:void 0)||(null!=(o=t.originialEvent)?o.detail:void 0)))return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},n.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){return this.container.is(e(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,o,i,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=(o=parseInt(this.search_results.css("maxHeight"),10))+(r=this.search_results.scrollTop()),(e=(n=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=i)return this.search_results.scrollTop(e-o>0?e-o:0);if(n<r)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},n.prototype.set_label_behavior=function(){var t=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",(function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}))},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;if((n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},n.prototype.search_results_mouseover=function(t){var n;if(n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choice_build=function(t){var n,o,i=this;return n=e("<li />",{class:"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?n.addClass("search-choice-disabled"):((o=e("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",(function(t){return i.choice_destroy_link_click(t)})),n.append(o)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){if(t.preventDefault(),t.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var n,o,i;if(this.result_highlight){if(n=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;if(this.is_multiple)n.removeClass("active-result");else{if(e(".result-selected",this.dropdown).length){var r=e(".result-selected",this.dropdown);r.removeClass("result-selected"),i=r.data("option-array-index"),this.results_data[i].selected=!1}this.result_single_selected=n}return n.addClass("result-selected"),(o=this.results_data[n[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[o.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(o):this.single_set_selected_text(o.text,o),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[o.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()}},n.prototype.single_set_selected_text=function(t,e){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.options.custom_element&&e?this.selected_item.find("span").html(this.options.custom_element(e,!0)):this.selected_item.find("span").text(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},n.prototype.no_results=function(t){var n;return(n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(n)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;if(this.backstroke_delete)return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,o,i,r,s,a,c;if(this.is_multiple){for(0,s=0,i="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,c=(r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<c;a++)i+=(o=r[a])+":"+this.search_field.css(o)+";";return(t=e("<div />",{style:i})).text(this.search_field.val()),e("body").append(t),s=t.width()+25,t.remove(),s>(n=this.container.outerWidth())-10&&(s=n-10),this.search_field.css({width:s+"px"})}},n}(n)}).call(this)}).call(this,n(14))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.getProductColor=function(){switch(!1){case!/\bORANGE\b/g.test(this.get("product.name")||""):return"orange";case!/\bGold\b|\bPremium\b/g.test(this.get("product.brand")||""):return"gold";case!/\bBusiness\b/g.test(this.get("product.brand")||""):return"business";case!/\bPlatinum\b|\bPlatium\b|\bInfinite\b/g.test(this.get("product.brand")||""):return"platinum";case!/\bCirrus\b|\bMaestro\b|\bElectron\b/g.test(this.get("product.brand")||""):return"electron";case!(this.get("card.isCredit")||this.get("card.isForeign")):return"green";default:return"blue"}},e}(n(905))}.call(e,n,e,t))||(t.exports=o)},,,function(t,e,n){var o,i;
/**
 * jquery.switchButton.js v1.0
 * jQuery iPhone-like switch button
 * @author Olivier Lance <olivier.lance@sylights.com>
 *
 * Copyright (c) Olivier Lance - released under MIT License {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:

 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.

 * }}}
 */o=[n(14),n(568),n(408),n(491)],void 0===(i=function(t){t.widget("sylightsUI.switchButton",{options:{checked:void 0,show_labels:!0,labels_placement:"both",on_label:"ON",off_label:"OFF",width:25,height:11,button_width:12,clear:!0,clear_after:null},_create:function(){void 0===this.options.checked&&(this.options.checked=this.element.prop("checked")),this._initLayout(),this._initEvents()},_initLayout:function(){this.element.hide(),this.off_label=t("<span>").addClass("switch-button-label"),this.on_label=t("<span>").addClass("switch-button-label"),this.button_bg=t("<div>").addClass("switch-button-background"),this.button=t("<div>").addClass("switch-button-button"),this.button_bg.toggleClass("switch-button-disabled",this.element.prop("disabled")),this.off_label.insertAfter(this.element),this.button_bg.insertAfter(this.off_label),this.on_label.insertAfter(this.button_bg),this.button_bg.append(this.button),this.options.clear&&(null===this.options.clear_after&&(this.options.clear_after=this.on_label),this.clearEl=t("<div>").css({clear:"left"}).insertAfter(this.options.clear_after)),this._refresh(),this.options.checked=!this.options.checked,this._toggleSwitch({init:!0})},_refresh:function(){switch(this.options.show_labels?(this.off_label.show(),this.on_label.show()):(this.off_label.hide(),this.on_label.hide()),this.options.labels_placement){case"both":this.button_bg.prev()===this.off_label&&this.button_bg.next()===this.on_label||(this.off_label.detach(),this.on_label.detach(),this.off_label.insertBefore(this.button_bg),this.on_label.insertAfter(this.button_bg),this.on_label.addClass(this.options.checked?"on":"off").removeClass(this.options.checked?"off":"on"),this.off_label.addClass(this.options.checked?"off":"on").removeClass(this.options.checked?"on":"off"));break;case"left":this.button_bg.prev()===this.on_label&&this.on_label.prev()===this.off_label||(this.off_label.detach(),this.on_label.detach(),this.off_label.insertBefore(this.button_bg),this.on_label.insertBefore(this.button_bg),this.on_label.addClass("on").removeClass("off"),this.off_label.addClass("off").removeClass("on"));break;case"right":this.button_bg.next()===this.off_label&&this.off_label.next()===this.on_label||(this.off_label.detach(),this.on_label.detach(),this.off_label.insertAfter(this.button_bg),this.on_label.insertAfter(this.off_label),this.on_label.addClass("on").removeClass("off"),this.off_label.addClass("off").removeClass("on"))}this.on_label.html(this.options.on_label),this.off_label.html(this.options.off_label)},_initEvents:function(){var t=this;this.button_bg.click((function(e){return e.preventDefault(),e.stopPropagation(),t.element.prop("disabled")||t._toggleSwitch(),!1})),this.button.click((function(e){return e.preventDefault(),e.stopPropagation(),t.element.prop("disabled")||t._toggleSwitch(),!1})),this.on_label.click((function(e){return t.element.prop("disabled")||t.options.checked&&"both"===t.options.labels_placement||t._toggleSwitch(),!1})),this.off_label.click((function(e){return t.element.prop("disabled")||!t.options.checked&&"both"===t.options.labels_placement||t._toggleSwitch(),!1}))},_setOption:function(t,e){"checked"!==t?(this.options[t]=e,this._refresh()):this._setChecked(e)},_setChecked:function(t){t!==this.options.checked&&(this.options.checked=!t,this._toggleSwitch())},_toggleSwitch:function(t){this.options.checked=!this.options.checked;var e="",n=t&&t.init;this.options.checked?(this.element.prop("checked",!0),n||this.element.change(),e="+="+(this.button_bg.width()-this.button.width()),"both"==this.options.labels_placement?(this.off_label.removeClass("on").addClass("off"),this.on_label.removeClass("off").addClass("on")):(this.off_label.hide(),this.on_label.show()),this.button_bg.addClass("checked")):(this.element.prop("checked",!1),n||this.element.change(),e="-1px","both"==this.options.labels_placement?(this.off_label.removeClass("off").addClass("on"),this.on_label.removeClass("on").addClass("off")):(this.off_label.show(),this.on_label.hide()),this.button_bg.removeClass("checked"));n?this.button.css({left:e}):this.button.animate({left:e},250,"easeInOutCubic")},_destroy:function(){this.off_label.remove(),this.on_label.remove(),this.button_bg.remove(),this.button.remove(),this.clearEl&&this.clearEl.remove()}})}.apply(e,o))||(t.exports=i)},function(e,n,o){(function(i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u,l,d,p,h,f,m,y;return y=o(40),f=o(377),d=o(387).WbFormMixin,r=o(386),n=o(783).AddAuthDialog,l=o(374).TemplateView,m=o(397),c=m.Payment3DProcessing,u=m.PaymentExecution,h=o(791).getRemittanceConfirmationFields,a=o(400).IntraBankTransfer,o(372),(p={}).PaymentConfirmationDialogMixin={errorMessages:i.extend({},d._errorMessages,{INVALID_OPERATION_AMOUNT:t("Invalid operation amount"),INSUFFICIENT_FUNDS:t("Insufficient funds"),AMOUNT_LIMITER_EXCEEDED:t("Amount limit exceeded"),FREQUENCY_LIMITER_EXCEEDED:t("Frequency limit exceeded")}),initConfirmationDialogMixin:function(){return this.once("cancel",(t=this,function(){return t.onPaymentAbort()}));var t},onPaymentAbort:function(){return this.payment.clearPrepareData()},errorMessageFor:function(t){var e;return(null!=(e=this.errorMessages)?e[t.code]:void 0)||t.message||this.defaultErrorMessage},onSubmitSuccess:function(){throw new Error("onSubmitSuccess should be defined for payment confirmation dialog")},onSubmitError:function(t){var e,n;return e=f.parseResponseSafe(t)||{},401===t.status&&"confirmationRequired"===e._status?(t.errorHandled=!0,this.render().then((n=this,function(){if(e._error)return n.showError(n.errorMessageFor(e._error))}))):(this.onPaymentAbort(),e._error&&!e._error.message&&(e._error.message=this.errorMessageFor(e._error)),t.responseText=JSON.stringify(e),this.onError(t),this.close())},onConfirm:function(){return this.model.save().done(this.onSubmitSuccess.bind(this)).fail(this.onSubmitError.bind(this))}},p.PaymentDetailsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template="payments/payment-details",n.prototype.requiredOptions=["model","formMeta"],n.prototype.isFieldVisible=function(t){var e,n;return"N"!==(null!=(e=t.addData)?e.SHOW_ON_CONFIRMATION:void 0)&&!1!==t.visible&&!i.isNull(t.value)&&(!(n=t.isGroup?this.formMeta.fields.get(t.id):this.formMeta.getByAttrPath(t.attrPath)).hasVisibilityCondition()||n.getVisibilityConditionValue(this.model))},n.prototype.getInvoiceFields=function(e){var n,o,r;return r=this,n=function(t,e){return{isAmountField:!0,name:e||t.get("name"),amount:{value:r.model.get(t.get("attr")),currency:t.getMyCurrencyField().resolveValue(null,r.model).id}}},o=i.reject(e.fields,function(t){return function(e){return"group"===e.role||"destination.account.balance"===e.role||!t.isFieldVisible(e)}}(this)),this.formMeta.getInvoiceItemFields().forEach((function(e){if(o.push(n(e.getInvoiceAmountField(),e.get("name"))),e.debtApplied&&o.push(n(e.getInvoiceDebtField(),t("incl. debt"))),e.overpayApplied)return o.push(n(e.getInvoiceOverpayField(),t("incl. overpay")))})),o},n.prototype.context=function(){var t,e,n,o;return t=this.model.viewContext({service:this.formMeta}),this.formMeta.isInvoice()?t.fields=this.getInvoiceFields(t):(n=this.formMeta.fields.subtreeAttr,o=this,e=function(t){return i.filter(t,(function(t){return!!o.isFieldVisible(t)&&(!t.isGroup||(t[n]=e(t[n]),t[n].length>0))}))},t.fields=e(t.fields)),t.name=this.formMeta.get("name"),t.onlyBonusesPayment=!!t.bonusAmount&&Math.abs(Number(t.bonusAmount.value))===Number(t.total.value),t.hideNoFee="Y"===this.formMeta.get("addData.HIDE_NO_FEE"),t.showBaseAmount=!t.bonusAmount&&t.fees||t.bonusAmount&&!t.onlyBonusesPayment,t},n}(l),p.IntraCardTransferDetailsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template="payments/payment-details",n.prototype.requiredOptions=["model","contract"],n.prototype.context=function(){var e,n,o,r;return n={name:t("Intra-card transfer"),showBaseAmount:this.model.has("fee")},e=this.contract.get("card.accounts"),o=i.findWhere(e,{number:this.model.get("remitter.accountNumber")}),r=i.findWhere(e,{number:this.model.get("beneficiary.accountNumber")}),n.fields=[{name:t("Contract"),value:this.contract.get("name")},{name:t("Source currency"),value:t(o.currency+" [text]")},{name:t("Target currency"),value:t(r.currency+" [text]")}],n.baseAmount=this.model.get("amount"),this.model.has("fee")&&(n.fees=[{description:t("Fee"),amount:this.model.get("fee")}]),n.total=this.model.get("total"),n},n}(l),p.IntraBankTransferDetailsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template="payments/payment-details",n.prototype.requiredOptions=["model","remitterContract","beneficiaryContract"],n.prototype.context=function(){var e,n,o;return n=[{name:t("Source"),value:this.remitterContract.get("name")},{name:t("Beneficiary"),value:this.beneficiaryContract.get("name")}],(o=a.getFxRateField(this.model.get("fxRate")))&&n.push(o),n.push.apply(n,a.getDebitAndCreditFields({amount:this.model.get("amount"),convertedAmount:this.model.get("convertedAmount"),sourceContractCurrency:this.remitterContract.get("currency")})),this.model.has("fee")&&(e=[{description:t("Fee"),amount:this.model.get("fee")}]),{name:t("Intra-card transfer"),showBaseAmount:this.model.has("fee"),fields:n,fees:e,hideTotalAmount:this.model.has("convertedAmount"),baseAmount:this.model.get("amount"),total:this.model.get("total")}},n}(l),p.ReceiveMoneyTransferDetailsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template="payments/remittance-details",n.prototype.requiredOptions=["searchMeta","searchModel","remittanceMeta","remittanceModel"],n.prototype.context=function(){return{name:t("Receive money transfer"),fields:h(this.searchMeta,this.searchModel,this.remittanceMeta,this.remittanceModel)}},n}(l),p.SimplePaymentConfirmationDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.id="payment-confirmation-dialog",n.prototype.template="payments/simple-payment-confirmation-dialog",n.prototype.requiredOptions=["model","payment","formMeta","onSuccess","onError"],n.prototype.allowImplicitClose=!1,n.prototype.mixins=[d,p.PaymentConfirmationDialogMixin],n.prototype.paymentDetailsClass=p.PaymentDetailsView,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.initForm(),this.initConfirmationDialogMixin()},n.prototype.getBindings=function(){return this.payment.securityCodeRequired?{securityCode:'input[name="securityCode"]'}:{}},n.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,formMeta:this.formMeta}},n.prototype.onRender=function(){var t,e;return n.__super__.onRender.apply(this,arguments),t=i.extend({el:this.$(".payment-details")},this.getPaymentDetailsOptions()),new this.paymentDetailsClass(t).show().then((e=this,function(){return e.setExplicitDialogHeight(),e.ensureAlignment()}))},n.prototype.dialogOptions=function(){return{title:t("Confirm operation"),closeOnEscape:!1,buttons:[this.cancelButtonOptions(),this.proceedButtonOptions()]}},n.prototype.cancelButtonOptions=function(){return{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})};var e},n.prototype.proceedButtonOptions=function(){return{text:t("Make payment"),class:"wb-button proceed",click:(e=this,function(t){if(!e.processing)return e.$form.submit()})};var e},n.prototype.showFormLoadingIndicator=function(){return this.applyLoadingStateToButton(this._getButton(".proceed"))},n.prototype.beforeSubmit=function(){var t,e;if(this.payment.isExternalCard)return e=y.EGW_WINDOW_WIDTH,t=y.EGW_WINDOW_HEIGHT,this.egwWindow=window.open("about:blank","","width="+e+",height="+t+",resizable=1,scrollbars=1,status=0,menubar=0,toolbar=0")},n.prototype.onSubmitSuccess=function(){var t;return t={model:this.model},this.egwWindow&&i.extend(t,{egwWindow:this.egwWindow}),this.onSuccess(t),this.close()},n.prototype.onSubmitError=function(){return this.egwWindow&&this.egwWindow.close(),p.PaymentConfirmationDialogMixin.onSubmitError.apply(this,arguments)},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{securityCodeRequired:this.payment.securityCodeRequired})},n}(r),p.ProtectedPaymentConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.id="payment-confirmation-dialog",e.prototype.template="payments/protected-payment-confirmation-dialog",e.prototype.requiredOptions=["model","payment","formMeta","onSuccess","onError"],e.prototype.mixins=[p.PaymentConfirmationDialogMixin],e.prototype.paymentDetailsClass=p.PaymentDetailsView,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.initConfirmationDialogMixin()},e.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,formMeta:this.formMeta}},e.prototype.onRender=function(){var t,n;return e.__super__.onRender.apply(this,arguments),t=i.extend({el:this.$(".payment-details")},this.getPaymentDetailsOptions()),this.paymentDetailsView=new this.paymentDetailsClass(t),this.paymentDetailsView.show().then((n=this,function(){return n.setExplicitDialogHeight(),n.ensureAlignment()}))},e.prototype.dialogOptions=function(){var t;return(t=e.__super__.dialogOptions.apply(this,arguments)).classes={"ui-dialog":"payment-confirmation-dialog"},t},e.prototype.onSubmitSuccess=function(){return this.onSuccess({model:this.model}),this.close()},e.prototype.submitAction=function(){return this.onConfirm()},e.prototype.resetModel=function(){return this.payment.unset("confirmation"),this.payment.unset("_status"),this.payment.unset("_error")},e}(n),p.SimpleIntraCardTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","contract"],e.prototype.paymentDetailsClass=p.IntraCardTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,contract:this.contract}},e}(p.SimplePaymentConfirmationDialog),p.ProtectedIntraCardTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","contract"],e.prototype.paymentDetailsClass=p.IntraCardTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,contract:this.contract}},e}(p.ProtectedPaymentConfirmationDialog),p.SimpleIntraBankTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","remitterContract","beneficiaryContract"],e.prototype.paymentDetailsClass=p.IntraBankTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,remitterContract:this.remitterContract,beneficiaryContract:this.beneficiaryContract}},e}(p.SimplePaymentConfirmationDialog),p.ProtectedIntraBankTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","remitterContract","beneficiaryContract"],e.prototype.paymentDetailsClass=p.IntraBankTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{model:this.payment,remitterContract:this.remitterContract,beneficiaryContract:this.beneficiaryContract}},e}(p.ProtectedPaymentConfirmationDialog),p.SimpleReceiveMoneyTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","formMeta"],e.prototype.paymentDetailsClass=p.ReceiveMoneyTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{searchMeta:this.options.searchMeta,searchModel:this.options.searchModel,remittanceMeta:this.formMeta,remittanceModel:this.payment}},e}(p.SimplePaymentConfirmationDialog),p.ProtectedReceiveMoneyTransferConfirmationDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.requiredOptions=["model","payment","onSuccess","onError","formMeta"],e.prototype.paymentDetailsClass=p.ReceiveMoneyTransferDetailsView,e.prototype.getPaymentDetailsOptions=function(){return{searchMeta:this.options.searchMeta,searchModel:this.options.searchModel,remittanceMeta:this.formMeta,remittanceModel:this.payment}},e}(p.ProtectedPaymentConfirmationDialog),p.paymentConfirmationDialog=function(t){return t.payment.isExternalCard?t.model=new c({backUrl:window.location.origin},{executionId:t.payment.get("executionId")}):t.model=new u(t.payment.has("confirmation")?{confirmation:t.payment.get("confirmation")}:void 0,{executionId:t.payment.get("executionId"),service:t.formMeta}),t.model.has("confirmation")?new p.ProtectedPaymentConfirmationDialog(t):new p.SimplePaymentConfirmationDialog(t)},p.intraCardTransferConfirmationDialog=function(t){return t.model=t.payment,t.payment.has("confirmation")?new p.ProtectedIntraCardTransferConfirmationDialog(t):new p.SimpleIntraCardTransferConfirmationDialog(t)},p.intraBankTransferConfirmationDialog=function(t){return t.model=t.payment,t.payment.has("confirmation")?new p.ProtectedIntraBankTransferConfirmationDialog(t):new p.SimpleIntraBankTransferConfirmationDialog(t)},p.receiveMoneyTransferConfirmationDialog=function(t){return t.model=t.payment,t.payment.has("confirmation")?new p.ProtectedReceiveMoneyTransferConfirmationDialog(t):new p.SimpleReceiveMoneyTransferConfirmationDialog(t)},p}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},,,,function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u;return u=n(40),c=n(393),i=c.Template,s=c.Templates,e=c.TEMPLATE_TYPES,(a={}).RecurrentPayment=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.set("type",e.RECURRENT)}return r(n,t),n.prototype.urlRoot=u.API_URL+"/recurrent-payment-templates",n.prototype.defaults=o.extend({},i.prototype.defaults,{schedule:{period:"MONTHLY",periodDay:"1"}}),n.prototype.isActive=function(){return"active"===this.get("status")},n}(i),a.RecurrentPayments=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.model=a.RecurrentPayment,e.prototype.url=u.API_URL+"/recurrent-payment-templates?include=payment",e}(s),a}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(e){var n,r,a;return o(419),a=o(372),r=o(377),{ContractSelectView:n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.template="common/contract-select",n.prototype.showAllCardsItem=!0,n.prototype.canAddExternalCard=!1,n.prototype.canPayWithExternalCard=!1,n.prototype.showNewContractItem=!1,n.prototype.requiredOptions=["collection"],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.processOptions()},n.prototype.processOptions=function(){var t,e,n,o,r;for(r=[],t=0,e=(o=["showAllCardsItem","showNewContractItem","canAddExternalCard","canPayWithExternalCard","selectedContractId","emptyText","allowSearch"]).length;t<e;t++)n=o[t],i.has(this.options,n)?r.push(this[n]=this.options[n]):r.push(void 0);return r},n.prototype.filterCollection=function(){return this.options.filterCollection?this.options.filterCollection(this.collection):this.collection},n.prototype.initSelectedContract=function(){var t,e;return(null!=(t=this.options.dataModel)?t.get(this.options.inputName):void 0)?this.selectedContractId=this.options.dataModel.get(this.options.inputName):!this.showAllCardsItem&&this.collection.length?(this.selectedContractId=this.collection.at(0).id,null!=(e=this.options.dataModel)?e.set(this.options.inputName,this.selectedContractId):void 0):void 0},n.prototype.show=function(){return this.collection.isFetched()?(this.collection=this.filterCollection(),this.initSelectedContract(),this.render().then((t=this,function(){return t.trigger("ready")}))):(this.collection.fetch().then(function(t){return function(){return t.collection=t.filterCollection(),t.initSelectedContract(),t.render().then((function(){return t.trigger("ready")}))}}(this)),this.render({context:{isLoading:!0}}));var t},n.prototype.onRender=function(){var e;return e=this.$("select"),this.selectedContractId&&e.val(this.selectedContractId),e.trigger("change"),e.chosen({width:"100%",disable_search:!this.allowSearch,custom_element:this.buildItem.bind(this),inherit_select_classes:!0,placeholder_text_single:this.emptyText||t("Select contract"),no_results_text:t("No results match:")})},n.prototype.getContractName=function(t){return t.get("name")},n.prototype.buildItem=function(t,e){var n,o,i,s,c,u;return(n=this.collection.get(t.value))?("card"===n.get("type")&&(c=n.get("card.paymentSystem")),s=r.encodeWithHTMLEntities(this.getContractName(n)),u='<span class="payment-system-icon '+c+" "+(o=(i="active"===n.getStatus())?"":"inactive")+'"></span>',i&&(n.get("balances.available")&&(u+='<span class="contract-balance">'+a.filters.money(n.get("balances.available"))+"</span>"),this.options.showBonusBalance&&n.areBonusesSupported()&&n.get("balances.bonus")&&(u+='<span class="contract-balance bonus">'+a.filters.money(n.get("balances.bonus"))+"</span>")),u+='<span class="contract-name '+o+'">'+s+"</span>"):t.html},n.prototype.context=function(){return{contracts:this.canPayWithExternalCard?this.collection.viewContext():this.collection.filter((function(t){return!t.get("card.isForeign")})).map((function(t){return t.viewContext()})),showAllCardsItem:this.showAllCardsItem,canAddExternalCard:this.canAddExternalCard,showNewContractItem:this.showNewContractItem,inputName:this.options.inputName||"contract",required:this.options.required||!1,disabled:this.options.disabled,label:this.options.label}},n.prototype.render=function(){if(this.selectedContractId&&!this.collection.get(this.selectedContractId))throw new Error("Contract with id='"+this.selectedContractId+"' not found");return n.__super__.render.apply(this,arguments)},n}(o(374).TemplateView),CardsOnlyContractSelectView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.filterCollection=function(){return this.collection.getCards()},e}(n),AccountsOnlyContractSelectView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.filterCollection=function(){return this.collection.getAccounts()},e}(n)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(398),s=n(135),a=n(420),c=n(377),u=n(40);!function(t){t.ACCOUNT="account",t.CARD_TYPE="cardType",t.BRAND="brand",t.TARIFF="tariff",t.MAX_PERIOD="maxPeriod",t.CARD_EXPIRY="cardExpiry",t.EMBOSSED_FIRST_NAME="embossedFirstName",t.EMBOSSED_LAST_NAME="embossedLastName",t.CURRENCY="currency",t.FEE="fee",t.ISSUING_FEE="issuingFee",t.NOTIFICATION_FEE="notificationsFee",t.PAYMENT_SYSTEM="paymentSystem",t.CARD_NUMBER="cardNumber",t.ACCOUNT_NUMBER="accountNumber",t.BRANCH="branch",t.BRANCH_ID="branchId",t.DELIVERY_BRANCH_NAME="deliveryBranch"}(o=e.Fields||(e.Fields={}));var l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.prototype.defaults=function(){return{name:s.t("Card ordering"),license:s.t("Accept to the terms of the card issue"),fields:{}}},n.appendOfficeField=function(t,e,n,i){var r;if(i){var a=null===(r=null==e?void 0:e.cardType)||void 0===r?void 0:r.id;if(!a)return;if(i.get(a).get("isDigital"))return}var c=n.get("deliveryBranch");!e[o.BRANCH_ID]&&c&&(e[o.BRANCH_ID]=c.servicePointId),!e[o.BRANCH]&&c&&(e[o.BRANCH]={id:c.id}),t.push({id:o.BRANCH_ID,visible:!1,editable:!1,value:e[o.BRANCH_ID]}),t.push({id:o.BRANCH,name:s.t("Office"),visible:!0,editable:!1,dataSource:{type:"branches",url:"/card-orders/delivery-branches?servicePointId="+encodeURIComponent("${"+o.BRANCH_ID+"}")},addData:{SINGLE_ITEM_SELECT:"AUTO"}})},n.appendAccountField=function(t,e,i,r){var c,u,l=null===(c=null==e?void 0:e.cardType)||void 0===c?void 0:c.id;if(l&&!i.get(l).get("isDigital")){var d=i.getAccountsConfig(e.currency,l),p=d.allowNew,h=d.accountIds;console.assert(h.length>0||p),(null===(u=null==e?void 0:e.account)||void 0===u?void 0:u.id)&&!h.includes(e.account.id)&&(e.account=p?{id:n.NEW_CONTRACT_ITEM_ID}:{id:h[0]});var f=r.filter((function(t){return h.includes(t.id)}));p&&f.unshift(new a({id:n.NEW_CONTRACT_ITEM_ID,name:n.NEW_CONTRACT_ITEM_TEXT})),t.push({id:o.ACCOUNT,name:s.t("Account"),dataSource:{allowNew:p,type:"contracts",values:f},visible:!0,editable:!0})}},n.generateForAccount=function(e,i){var r,a=i.cardTypes,u=i.model,l=i.contracts,d=i.cardOrderSettings,p=u.toJSON(),h=l.get(e),f=[h],m=h.get("currency"),y=[m];t.extend(p,{currency:m,account:{id:e}});var _=a.filter((function(t){var n=t.get("accounts.values");return!!n&&!!n.find((function(t){return t.id===e}))})).map((function(t){return{id:t.get("id"),name:t.get("brand")}}));console.assert(_.length),(null===(r=null==p?void 0:p.cardType)||void 0===r?void 0:r.id)&&_.find((function(t){return t.id===p.cardType.id}))||c.set(p,"cardType.id",_[0].id);var g=[{id:o.CURRENCY,name:s.t("Currency"),inputType:"radioButtonGroupAsTabs",dataSource:{isPlainCatalog:!0,values:y.map((function(t){return{id:t,name:s.t(t)}}))},visible:!0,editable:!0},{id:o.CARD_TYPE,name:s.t("Card type"),dataSource:{values:_},visible:!0,editable:!0},{id:o.ACCOUNT,name:s.t("Account"),dataSource:{type:"contracts",values:f},visible:!0,editable:!0}];return this.appendOfficeField(g,p,d,a),{formMeta:new n({fields:g}),modelAttrs:p}},n.generate=function(t){var e,i=t.cardTypes,r=t.model,a=t.contracts,l=t.cardOrderSettings,d=r.toJSON(),p=i.getCurrencyCodes();console.assert(p.length),d.currency||(d.currency=p.includes(u.DEFAULT_CURRENCY)?u.DEFAULT_CURRENCY:p[0]);var h=i.getCardTypesByCurrencyCode(d.currency);console.assert(h.length),(null===(e=null==d?void 0:d.cardType)||void 0===e?void 0:e.id)&&h.find((function(t){return t.id===d.cardType.id}))||c.set(d,"cardType.id",h[0].id);var f=[{id:o.CURRENCY,name:s.t("Currency"),inputType:"radioButtonGroupAsTabs",dataSource:{isPlainCatalog:!0,values:p.map((function(t){return{id:t,name:s.t(t)}}))}},{id:o.CARD_TYPE,name:s.t("Card type"),dataSource:{values:h},visible:!0,editable:!0}];return this.appendAccountField(f,d,i,a),this.appendOfficeField(f,d,l,i),{formMeta:new n({fields:f}),modelAttrs:d}},n.generateForPlastic=function(t,e){var o=e.model,i=e.cardOrderSettings,r=o.toJSON(),s=[];return this.appendOfficeField(s,r,i),{formMeta:new n({fields:s}),modelAttrs:r}},n.NEW_CONTRACT_ITEM_ID="newContract",n.NEW_CONTRACT_ITEM_TEXT=s.t("New account [select]"),n}(r.FormMeta);e.default=l}).call(this,n(14))},,,function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A;return o(396),A=o(380),P=o(391),C=o(377),n=o(392).AppCache,m=o(378),B=o(411).WbServiceMethodsMixin,k=o(394).WbGenericFormMixin,x=o(424).paymentConfirmationDialog,h=o(417).HistoryItemService,d=o(386),f=o(532).NotificationDialog,a=o(415).Checkbox,v=o(397).ServicePayment,y=o(414).PaymentServiceMeta,T=o(393),b=T.Template,S=T.getTemplateById,w=T.TEMPLATE_TYPES,o(136),u=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/payment-template-page",n.prototype.templateContext={templateType:w.COMMON,submitButtonTitle:t("Create template without payment")},n.prototype.events={"click .cancel-button":"onCancel"},n.prototype.softValidationAllowed=!0,n.prototype.fetchData=function(){if(this.options.operationId)this.formMeta=new h({id:this.options.operationId});else{if(!this.options.serviceId)throw new Error("operationId or serviceId should be provided");this.formMeta=new y({id:this.options.serviceId})}return i.when(n.__super__.fetchData.apply(this,arguments),this.formMeta.fetch()).then((t=this,function(){return t.model=t.serviceModel=new v(t.formMeta.getModelDefaults(),{service:t.formMeta}),window.app.getUniqueTemplateName(t.model.service.get("name"))})).then(function(t){return function(e){return t.templateModel=new b({serviceId:t.formMeta.get("id")}),t.templateModel.set({name:e})}}(this));var t},n}(g=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.pageType=A.mainMenuIds.PAYMENTS_TRANSFERS,o.prototype.mixins=[k,B],o.prototype.errorMessages={INCORRECT_TEMPLATE_NAME:t("Incorrect template name"),DUPLICATE_TEMPLATE_NAME:t("Template with such name already exists"),DUPLICATE_TEMPLATE_CODE:t("Automatic payment for such phone number already exists"),THRESHOLD_ERROR_CLIENT_ID:t("Automatic payment was not created by mobile provider"),THRESHOLD_NOT_ALLOWED:t("Automatic payment was not setup by mobile provider"),THRESHOLD_ERROR_AMOUNT:t("Incorrect threshold amount"),THRESHOLD_ERROR_CURRENCY:t("Incorrect threshold amount currency"),INVALID_P2P_TRANSFER_CONTRACTS:t("Transfer between selected cards is not available"),INVALID_OPERATION_AMOUNT:t("Invalid operation amount")},o.prototype.softValidationAllowed=!1,o.prototype.softValidationMode=!1,o.prototype.newBeneficiaryAllowed=!1,o.prototype.initialize=function(){if(o.__super__.initialize.apply(this,arguments),this.canAddExternalCard=!1,this.canPayWithExternalCard=window.OW.features.PAYMENTS_FOREIGN,this.softValidationAllowed)return this.once("form.ready",(t=this,function(){return t.validator.valid=function(){return t.softValidationMode?null==t.validator.invalid.templateName:0===t.validator.size()},t.validator.numberOfInvalids=function(){return t.validator.invalid.templateName?t.validator.objectLength(t.validator.invalid):0}}));var t},o.prototype.resetCollectionCache=function(){return n.reset(n.KEYS.PAYMENT_TEMPLATES)},o.prototype.fetchData=function(){return n.get(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS).then((t=this,function(){return t.templates=arguments[0],t.rPayments=arguments[1],t.thPayments=arguments[2],arguments}));var t},o.prototype.getTemplate=function(){var e,n;return e=i.Deferred(),S(this.options.templateId).then((n=this,function(o,i){var r;return o?e.resolve(o):i?"SERVICE_UNAVAILABLE"===(null!=(r=C.parseResponseSafe(i)._error)?r.code:void 0)?new f({title:t("Attention"),text:t("This service is no longer available, the template will be deleted."),onProceed:function(){return n.resetCollectionCache(),window.app.router.goBack()}}).show():"HANDBOOK_LOCKED"===(null!=r?r.code:void 0)?new f({title:t("Attention"),text:t("Could not perform operation. Try again later or contact customer support"),onProceed:function(){return window.app.router.goBack()}}).show():e.reject(i):e.resolve(null)})),e.promise()},o.prototype.show=function(){return this.fetchData().then((t=this,function(){return t.options.templateId&&!t.templateModel?window.app.router.navigate("#",{trigger:!0,replace:!0}):t.render()}));var t},o.prototype.onRender=function(){return this.initGenericForm(),this.ensureLicense(),o.__super__.onRender.apply(this,arguments)},o.prototype.showFormLoadingIndicator=function(){return this.$formLoader||(this.$formLoader=i('<div class="wb-spinner-wrapper"></div>').append(window.app.getLoadingIndicator())),this.$el.append(this.$formLoader)},o.prototype.hideFormLoadingIndicator=function(){if(this.$formLoader)return this.$formLoader.detach()},o.prototype.onSubmitError=function(t){var e,n;return this.resetCollectionCache(),e=(n=C.parseResponseSafe(t))._error,401===t.status&&"confirmationRequired"===n._status||(this.model=this.serviceModel),412===t.status&&"MISSING_FIELDS"===(null!=e?e.code:void 0)?B.showMissingFieldsError.apply(this,arguments):k.onSubmitError.apply(this,arguments)},o.prototype.onAddAuthCancel=function(){return this.model=this.serviceModel},o.prototype.submitAction=function(){if(!this.formMeta.get("allowInternational")||this.formIsValid())return this.model instanceof v&&(this.prepareTemplateModelToSubmit(),this.serviceModel=this.model,this.model=this.templateModel),this.isNew=this.model.isNew(),this.model.save()},o.prototype.prepareTemplateModelToSubmit=function(){return this.templateModel.set("payment",this.model.toJSON()),this.templateModel.set("name",this.$("[name=templateName]").val()),this.templateModel.set("payment.SCHEME_ID",this.formMeta.get("sid"))},o.prototype.onSubmitSuccess=function(){return window.app.router.navigate("",{trigger:!1}),this.resetCollectionCache(),window.app.router.showPage(A.mainMenuIds.PAYMENTS_TRANSFERS,_,{type:this.isNew?"create":"update",template:this.templateModel})},o.prototype.getTitle=function(){var e;return e=this.templateModel.get("name")||this.formMeta.get("name"),this.templateModel.isNew()?t("Create template"):t("Edit template '%(templateName)s'",{templateName:e})},o.prototype.onCancel=function(t){return t.preventDefault(),window.app.router.goBack()},o.prototype.onNameEdit=function(t){return this.templateNameModel.rename(t).then((e=this,function(){return e.$(".template-name").text(t),e.$("[name=templateName]").val(t),e.templateModel.set("name",t)})).fail(function(t){return function(e){var n;if(n=JSON.parse(e.responseText)._error,412===e.status&&n.code)return t.showError(t.errorMessageFor(n)),e.errorHandled=!0}}(this));var e},o.prototype.editName=function(t){return t.preventDefault(),this.showInlineEditField(this.$(".template-name-edit-panel"),this.onNameEdit.bind(this),null,this.templateModel.get("name"),{required:!0,uniqueTemplateName:[this.templateModel.id||!0,this.templates,this.rPayments,this.thPayments]})},o.prototype.ensureLicense=function(){var t;if(t=this.formMeta.get("license"))return this.licenseCheckbox=new a({el:this.$("[data-js-license]"),name:"license",className:"licenseAgreement",label:t}),this.licenseCheckbox.show()},o.prototype.context=function(){return{title:this.getTitle(),serviceName:this.formMeta.get("name"),license:this.formMeta.get("license"),templateName:this.templateModel.get("name")||this.formMeta.get("name"),template:this.templateModel.viewContext(),allowExecute:!this.templateModel.isInvalid()&&this.templateModel.get("serviceActive"),allowInternational:this.formMeta.get("allowInternational"),isServiceActive:this.templateModel.get("serviceActive")}},o.prototype.getValidationOptions=function(){return{rules:{templateName:{required:!0,maxlength:50,uniqueTemplateName:[this.templateModel.id||!0,this.templates,this.rPayments,this.thPayments]}}}},o.prototype.onConfirm=function(t){var e;return window.app.data.cachedPayment={formMeta:this.formMeta,model:this.model,templateId:this.templateId,continuationModel:t.model,egwWindow:t.egwWindow},e=this.model.isExternalCard?"processing":"complete",window.app.router.navigate("payment/"+this.formMeta.get("id")+"?"+e,{trigger:!0})},o.prototype.executeTemplate=function(t){var e;if(t.preventDefault(),!i(t.currentTarget).is(".ui-state-disabled")){if(this.clearMessages(),this.templateModel.get("invoiceTemplate"))return(e=new r("invoices/"+this.formMeta.id)).addSearch(C.flattenObject(this.templateModel.get("payment"))),void window.app.router.navigate(e.toString(),{trigger:!0,replace:!1});var n;if(this.softValidationMode=!1,this.$form.valid())return this.balanceEnoughConfirmation().then((n=this,function(){var t;return n.showFormLoadingIndicator(),n.model.set("templateId",n.templateModel.get("id")),n.model.setExternalCardProperties(),(t=n.model.preparePayment()).then((function(){return x({payment:n.model,formMeta:n.formMeta,onSuccess:n.onConfirm.bind(n),onError:function(t){return t.errorHandled=n.onSubmitError(t)}}).show()})),t.fail((function(t){return t.errorHandled=n.onSubmitError(t)})),t.always((function(){return n.hideFormLoadingIndicator()}))}))}},o}(m)),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.requiredOptions=["templateId"],e.prototype.template="payments/payment-template-edit-page",e.prototype.formSelector=".template-form",e.prototype.events={"click .cancel-button":"onCancel","click .delete-link":"showDeleteTemplateConfirmationDialog","click .template-name":"editName","click .submit-template-button":"updateTemplate","click .execute-template-link":"executeTemplate"},e.prototype.softValidationAllowed=!0,e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.$(".wb-tabs").tabs()},e.prototype.fetchData=function(){return i.when(e.__super__.fetchData.apply(this,arguments)).then((t=this,function(){return t.getTemplate()})).then(function(t){return function(e){if(t.templateModel=e,t.templateModel)return t.templateNameModel=t.templateModel.clone(),t.formMeta=t.templateModel.getService(),t.model=t.serviceModel=new v(t.formMeta.getModelDefaults(),{service:t.formMeta})}}(this));var t},e.prototype.showDeleteTemplateConfirmationDialog=function(t){return t.preventDefault(),new l({templateModel:this.templateModel}).show()},e.prototype.handbookLockedHandler=function(){return k.handbookLockedHandler.apply(this,arguments).then((t=this,function(){return t.$(".submit-template-button").hide(),t.$(".execute-template-link").addClass("ui-state-disabled")}));var t},e.prototype.updateTemplate=function(t){return t.preventDefault(),this.softValidationMode=!0,this.$form.submit()},e}(g),l=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.id="delete-payment-template-dialog",o.prototype.requiredOptions=["templateModel"],o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.templateModel=this.options.templateModel},o.prototype.dialogOptions=function(){return{title:t('Are you sure you want to delete template "%(templateName)s"?',{templateName:this.templateModel.get("name")}),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:t("Delete"),class:"wb-button proceed delete-template-button",click:function(t){return function(e){if(!t.processing)return t.showLoadingIndicator(),t.applyLoadingStateToButton(i(e.currentTarget)),t.templateModel.destroy().then((function(){return n.reset(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS),t.close(),window.app.router.navigate("",{trigger:!1}),window.app.router.showPage(A.mainMenuIds.PAYMENTS_TRANSFERS,_,{type:"delete"})}))}}(this)}]};var e},o}(d),_=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/payment-template-complete-page",n.prototype.requireOptions=["type"],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),console.assert(s.indexOf(this.options.type,["create","update","delete"]),'PaymentTemplateCompletePage.type must be one of "create", "update", "delete"'+this.options.type)},n.prototype.getTitle=function(){switch(this.options.type){case"create":return t("Template has been successfully created");case"update":return t("Template has been successfully updated");case"delete":return t("Template has been successfully deleted")}},n.prototype.context=function(){var t;return{template:null!=(t=this.options.template)?t.viewContext():void 0,templateLink:t&&P.getTemplateLink(t),title:this.getTitle(),paymentsMenuLink:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS")}},n}(m),{PaymentTemplatePage:g,CreatePaymentTemplatePage:u,EditPaymentTemplatePage:p,DeleteTemplateConfirmationDialog:l,PaymentTemplateCompletePage:_}}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(379),o(11))},function(e,n,o){(function(i,r,s){var a,c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(e){var n,a,l,d,p,h,f,m;return m=o(40),f=o(375),n=f.BaseModel,h=f.SingleFetchBaseCollection,d=f.CollectionQuery,p=o(395).Contract,l={AWAITING_PARAMS:"awaitingParams",NEW:"new",LOADING:"loading",READY:"ready",FAILED:"failed"},(a=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.url=function(){return this.field.hasParameterReferences()?m.API_URL+this.query.asUrlQuery():m.API_URL+this.field.get("dataSource.url")},o.prototype.whenNew=function(){return new i.Deferred((t=this,function(e){return t.field.hasParameterReferences()&&t.state===l.AWAITING_PARAMS?t.once("state:new",(function(){return e.resolve()})):e.resolve()}));var t},o.prototype.modelUrlRoot=function(){return new r(m.API_URL+this.field.get("dataSource.url")).query("").toString().replace(/\?$/,"")},o.prototype.initialize=function(t,e){var i;return null==e&&(e={}),this.autoSync=!0,this.autoReset=!1,this.failureMessage="",null==this.field&&(this.field=e.field),console.assert(this.field,"catalog.field is required"),this.model="contracts"===this.field.get("dataSource.type")?p:n,this.field.get("dataSource.url")&&(this.urlRoot=this.modelUrlRoot()),this.offline=e.offline,o.__super__.initialize.apply(this,arguments),this.offline&&(this.fetch=this.supressSync,s.defer((i=this,function(){return i.reset=i.supressSync}))),this.required=!this.field.get("optional"),this.field.hasParameterReferences()&&(this.query=d.fromUrl(this.field.get("dataSource.url"))),this.initStateChanges()},o.prototype.supressSync=function(){return(new i.Deferred).resolve()},o.prototype.disableAutoReset=function(){return this.autoReset=!1},o.prototype.enableAutoReset=function(){return this.autoReset=!0},o.prototype.disableAutoSync=function(){return this.autoSync=!1},o.prototype.enableAutoSync=function(){return this.autoSync=!0},o.prototype.manualFetch=function(t){return null==t&&(t={}),(t=t||{}).manualSync=!0,this.fetch(t)},o.prototype.fetch=function(e){return null==e&&(e={}),this.autoSync||e.manualSync?(this.failureMessage="",this.failureErrorCode="",e.error=(n=this,function(e,o,i){var r;return 400!==o.status&&403!==o.status||(r=JSON.parse(o.responseText),400===o.status&&r.respText?(n.failureMessage=r.respText,o.errorHandled=!0):403===o.status&&r._error.code&&(n.failureErrorCode=r._error.code,"HANDBOOK_LOCKED"===n.failureErrorCode&&(n.failureMessage=t("Maximum number of attempts exceeded. Please try again later"),o.errorHandled=!0))),n.setState(l.FAILED)}),o.__super__.fetch.call(this,e)):(this.autoReset&&(this.reset(),this.trigger("autoReset")),this.supressSync());var n},o.prototype.getFailureMessage=function(){return this.failureMessage},o.prototype.getFailureErrorCode=function(){return this.failureErrorCode},o.prototype.initStateChanges=function(){var t;return this.field.hasParameterReferences()?(this.state=l.AWAITING_PARAMS,s.defer((t=this,function(){return t.awaitParameters().done((function(){return t.setState(l.NEW)}))}))):this.field.isStaticCatalog()?this.state=l.READY:this.state=l.NEW,this.on("request",function(t){return function(){return t.setState(l.LOADING)}}(this)),this.on("sync reset",function(t){return function(){return t.setState(l.READY)}}(this))},o.prototype.setState=function(t){return console.assert(u.call(s.values(l),t)>=0,"Unknown state: "+t),this.state=t,this.trigger("state:"+t)},o.prototype.awaitParameters=function(){var t,e,o,r,s,a;for(r=[],s=this.field.getParameterReferences(),a=this,t=function(t){var e,o,s;if(o=a.field.root.getByReference(t.value),console.assert(o,"Failed to find referring field"),o)return o.catalog&&o.catalog.state!==l.READY?(e=new i.Deferred,a.listenToOnce(o.catalog,"state:ready",(function(){return o.catalog.length&&!a.query.get(t.key)?a.listenToOnce(a.query,"change:"+t.key,(function(){return a.query.refValues.whenReady(t.value).then((function(){return e.resolve()}))})):a.query.refValues.whenReady(t.value).then((function(){return e.resolve()}))})),r.push(e.promise())):a.query.get(t.key)?void 0:(s=o.resolveValue())?(o.catalog&&(s=new n(s).get(t.value.split(".")[1])),a.query.updateReferencedParameter(t.key,t.value,s)):(e=new i.Deferred,a.listenToOnce(a.query,"change:"+t.key,(function(){return a.query.refValues.whenReady(t.value).then((function(){return e.resolve()}))})),r.push(e.promise()))},e=0,o=s.length;e<o;e++)t(s[e]);return i.when.apply(i,r).done(function(t){return function(){return console.debug("awaitParams complete for "+t.field.getAttrPath())}}(this))},o}(h)).States=l,a}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(379),o(11))},function(t,e,n){var o=n(372);n(382);!function(t){t.register("templates/partials/payment-info-field",n);var e={attr:S};function n(t,n){return n=n.shiftBlocks(e),t.s(n.get(["contact"],!1),n,{else:o,block:k},{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["object"],!1),n,{else:i,block:g},{})}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isAmountField"],!1),n,{else:r,block:f},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["exchangeRate"],!1),n,{else:s,block:l},{})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:a},{attrName:c,attrValue:u})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h",["s"])}function l(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:d},{attrName:p,attrValue:h})}function d(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["exchangeRate","s"])}function f(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:m},{attrName:y,attrValue:_})}function m(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function y(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["amount"],!1),n,"h",["money","s"])}function g(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:v},{attrName:w,attrValue:b})}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["fieldName"],!1),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h",["s"])}function k(t,n){return n=n.shiftBlocks(e),t.w('<div class="details contact"><div class="name">').f(n.get(["name"],!1),n,"h").w('</div><div class="value contact-info"><div class="row">').s(n.get(["linkAs"],!1),n,{else:B,block:C},{}).w("</div></div></div>")}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function C(t,n){return n=n.shiftBlocks(e),t.w('<a class="phone-link" href="').f(n.getPath(!0,[]),n,"h").w("://").f(n.get(["value"],!1),n,"h").w('">').f(n.get(["value"],!1),n,"h").w("</a>")}function S(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["hideField"],!1),n,{block:P},{})}function P(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/payment-info-field",t,e)};i.templateName="templates/partials/payment-info-field",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.nx(e.get(["hidden"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="').b(e.getBlock("container-class"),e,{},{}).w('">').b(e.getBlock("list-title"),e,{block:o},{}).h("ne",e,{else:i,block:r},{key:_,value:"0",type:"number"},"h").w("</div>")}function o(t,e){return t.w('<h4 class="menu-title">').f(e.get(["title"],!1),e,"h",["s"]).w("</h4>")}function i(t,e){return t.b(e.getBlock("no-items"),e,{},{})}function r(t,e){return t.w('<ul class="menu">').b(e.getBlock("extraItemsBefore"),e,{},{}).s(e.get(["collection"],!1),e,{block:s},{}).b(e.getBlock("extraItemsAfter"),e,{},{}).x(e.get(["limitApplicable"],!1),e,{block:a},{}).w("</ul>")}function s(t,e){return t.w('<li class="menu-item">').b(e.getBlock("list-item"),e,{},{}).w("</li>")}function a(t,e){return t.w('<li class="menu-item">').b(e.getBlock("toggleLink"),e,{block:c},{}).w("</li>")}function c(t,e){return t.w('<a href="#" class="toggle-link"><div class="outer">').x(e.get(["expanded"],!1),e,{else:u,block:d},{}).w("</div><span>").x(e.get(["expanded"],!1),e,{else:h,block:m},{}).w("</span></a>")}function u(t,e){return t.w('<img alt="').h("_",e,{block:l},{},"h").w('" src="').f(e.get(["imagePath"],!1),e,"h").w('/tiles/expand.png"/>')}function l(t,e){return t.w("Expand list")}function d(t,e){return t.w('<img alt="').h("_",e,{block:p},{},"h").w('" src="').f(e.get(["imagePath"],!1),e,"h").w('/tiles/collapse.png">')}function p(t,e){return t.w("Collapse list")}function h(t,e){return t.h("_",e,{block:f},{},"h")}function f(t,e){return t.w("Expand list")}function m(t,e){return t.h("_",e,{block:y},{},"h")}function y(t,e){return t.w("Collapse list")}function _(t,e){return t.f(e.getPath(!1,["collection","length"]),e,"h")}t.register("templates/payments/tiles/payment-items-list",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/payment-items-list",t,e)};i.templateName="templates/payments/tiles/payment-items-list",t.exports=i},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m,y,_,g,v;return o(396),c=o(99),v=o(40),g=o(98),m=o(391),y=o(402),n=o(392).AppCache,u=o(386),_=o(417),l=_.HistoryItem,p=_.SrnHistoryItem,f=o(393).getTemplateById,s=o(474).Certificate,d=o(400).IC_PAYMENT_TYPES,[t("ATM"),t("MB"),t("MWB"),t("WB"),t("KIOSK"),t("success"),t("failed"),t("waiting"),t("expired")],(h={}).SHOW_INVOICE_INFO_ITEMS=!1,h.OperationDetailsDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.historyItemClass=l,o.prototype.printOnly=!1,o.prototype.template="history/operation-details-dialog",o.prototype.id="operation-details-dialog",o.prototype.events={"click .print-link":"printOperationDetails","click .create-template-link":"createTemplateLink","click .create-recurrent-template-link":"createRecurrentTemplate","click .create-threshold-template-link":"createThresholdTemplate","click .open-template-link":"openTemplate","click .disputes-link":"close","click .repeat":"close","click .create-conversion-instalment":"createConversionInstalment"},o.prototype.getValidationOptions=function(){return{errorElement:"p",errorPlacement:function(t,e){return t.insertAfter(e.parent()),t.addClass("error-message")},showErrors:function(){var t;return t=Boolean(this.numberOfInvalids()),i(this.currentForm).find(":submit").prop("disabled",t),t?this.currentElements.trigger("validation:failed"):this.currentElements.trigger("validation:success"),this.defaultShowErrors()},highlight:function(t,e,n){var o;return(o=i(t.parentNode)).length?o.addClass(e).removeClass(n):i.validator.defaults.highlight(t,e,n)},unhighlight:function(t,e,n){var o;return(o=i(t.parentNode)).length?o.removeClass(e).addClass(n):i.validator.defaults.unhighlight(t,e,n)}}},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new this.historyItemClass({id:this.options.itemId}),this.on("render.complete",(t=this,function(){return t.setExplicitDialogHeight()}));var t},o.prototype.fetchData=function(){var t,e,o;return t=window.OW.features.DISPUTE_MANAGEMENT?window.app.getDisputesConfig():i.Deferred().resolve(),e=window.app.userIsManager()?i.Deferred().resolve():n.get(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS),i.when(e,window.app.data.contracts.history.fetchIfEmpty(),this.model.fetch(),t).then((o=this,function(){var t;return t=arguments[0],o.templates=t[0],o.rPayments=t[1],o.thPayments=t[2],t}))},o.prototype.fetchTemplateData=function(){return this.model.get("template.id")?f(this.model.get("template.id")):i.Deferred().resolve()},o.prototype.fetchCertificateDetails=function(){var t,e;return t=new i.Deferred,(e=this.model.get("payment.fields.ORDER_ID"))&&window.OW.features.INCOME_CERTIFICATES?(this.certificateDetails=new s({id:e}),this.certificateDetails.fetch().then((function(){return t.resolve()}))):t.resolve(),t.promise()},o.prototype.show=function(){var e;return this.fetchData().fail((e=this,function(n){return console.warn("Failed to load required data for operation details"),e.close(),window.app.clearMessages(),window.app.showErrorMessage(t("Failed to load operation details")),n.errorHandled=!0})).then(function(t){return function(){return i.when(t.fetchTemplateData(),t.fetchCertificateDetails())}}(this)).then(function(t){return function(e){return t.templateRef=e,t.render()}}(this)).then(function(t){return function(){var e;return y.applyMasks(t.$el),(e=t.$(".save-template-form")).validate(r.extend({},t.getValidationOptions(),{rules:{CP_TEMPLATE_NAME:{required:!0,uniqueTemplateName:[!0,t.templates,t.rPayments,t.thPayments]}}})),e.one("submit",(function(){return e.find(":submit").prop("disabled",!0).addClass("loading-button")}))}}(this)),o.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.$(".accordion").accordion({collapsible:!0,heightStyle:"content",active:!1})},o.prototype.openTemplate=function(t){return this.close()},o.prototype.createTemplateLink=function(t){return t.preventDefault(),this.model.get("allowRest")?this.redirectToCreateObjectPage("paymentTemplates"):(i(t.currentTarget).parent(".action-link").remove(),this.$(".save-template-form").show(),this.$('[name="CP_TEMPLATE_NAME"]').one("keyup",(e=this,function(t){return e.$(".save-template-form").validate().element(t.currentTarget)})));var e},o.prototype.printOperationDetails=function(t){var e,n;return t.preventDefault(),n=(e=i(document)).scrollTop(),window.print(),e.scrollTop(n)},o.prototype.createRecurrentTemplate=function(t){return t.preventDefault(),this.model.get("allowRest")?this.redirectToCreateObjectPage("recurrentPayments"):i(t.currentTarget).closest("form").submit()},o.prototype.createThresholdTemplate=function(t){return t.preventDefault(),this.model.get("allowRest")?this.redirectToCreateObjectPage("thresholdPayments"):i(t.currentTarget).closest("form").submit()},o.prototype.createConversionInstalment=function(t){return t.preventDefault(),this.close(),window.app.router.navigate("#payment-instalments/plans?operationId="+this.model.get("id"),{trigger:!0})},o.prototype.onTemplateSubmit=function(t){},o.prototype.redirectToCreateObjectPage=function(t){var e,n;return this.close(),n=(e=this.model.get("payment.type"))===d.INTRA_BANK_TRANSFER||e===d.CURRENCY_EXCHANGE_TRANSFER?"#intrabank-transfer?pageMode=createFromHistory&operationId="+this.model.get("payment.id"):"#history/"+this.model.id+"/"+t+"/create",window.app.router.navigate(n,{trigger:!0})},o.prototype.context=function(e){var n,i,s,a,u,l,p,f,y,_,g,w,b,k,B,C,S,P;if(null==e&&(e={}),e.isLoading)return o.__super__.context.apply(this,arguments);if(y=this.model.viewContext(),s={name:window.WB.applicationSettings.csrfParameterName,value:c.get("XSRF-TOKEN")},(n=r.extend(o.__super__.context.apply(this,arguments),y,{printOnly:this.printOnly,contextPath:window.WB.contextPath,imagePath:v.IMAGE_PATH,csrf:s,certificateDetails:null!=(_=this.certificateDetails)?_.viewContext():void 0,showInvoiceInfoItems:h.SHOW_INVOICE_INFO_ITEMS})).invoiceDetails)for(u=0,f=(g=n.invoiceDetails.details).length;u<f;u++)(l=g[u]).extendedView="Simple"!==l.type||l.Info&&n.showInvoiceInfoItems;return n.operationDetails&&(n.operationDetails=n.operationDetails.filter((function(t){return null!=t.value}))),i=window.app.data.contracts.history.get(n.contractId),n.contract=null!=i?i.viewContext():void 0,n.template=null!=(w=this.templateRef)?w.toJSON():void 0,p=!(a=!!i)||!0===i.get("card.isForeign"),n.allowTemplate=(null!=(b=n.service)?b.allowTemplate:void 0)&&a,n.allowThreshold=(null!=(k=n.service)?k.allowThreshold:void 0)&&!p,n.allowPeriodic=(null!=(B=n.service)?B.allowPeriodic:void 0)&&!p,n.pdfReceiptsDownload=r.isUndefined(v.PDF_RECEIPTS_DOWNLOAD)||!0===v.PDF_RECEIPTS_DOWNLOAD,n.showPrintLink=!0,(C=this.model.get("payment.type"))===d.INTRA_BANK_TRANSFER||C===d.CURRENCY_EXCHANGE_TRANSFER?P="#intrabank-transfer?pageMode=repeat&operationId="+this.model.get("payment.id"):(P="#history/"+this.model.get("id")+"/repeat",this.model.get("template")&&(P+="?templateId="+this.model.get("template.id"))),n.repeatLink=P,this.templateRef&&(n.templateEditLink=m.getTemplateLink(this.templateRef)),window.OW.features.DISPUTE_MANAGEMENT&&(n.disputesLink="#menu/"+window.app.data.menu.getPath("DISPUTES","NATIVE"),(null!=(S=y.dispute)?S.disputeReason:void 0)&&(n.dispute.disputeReason.name=r.findWhere(window.OW.disputesConfig.reasons,{id:y.dispute.disputeReason.id}).name)),n.isConversionToInstalment=window.OW.features.CONVERSION_TO_INSTALMENT&&Boolean(this.model.get("conversionInstalmentEnabled")),n.statuses={instalmentOverdue:t("Overdue [instalments status]"),instalmentClosed:t("Closed [instalments status]")},n},o}(u),h.SrnOperationDetailsDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.historyItemClass=p,e.prototype.printOnly=!0,e}(h.OperationDetailsDialog),h.CategoryOperationDetailsDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="history/category-operation-details-dialog",e.prototype.fetchData=function(){return i.when(e.__super__.fetchData.apply(this,arguments),g.loadConfig(window.WB.API_URL+"/conf/historyAnalytics.js"))},e.prototype.context=function(){return r.extend(e.__super__.context.apply(this,arguments),m.getAnalyticsColorsContext())},e}(h.OperationDetailsDialog),h.CategorySrnOperationDetailsDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.historyItemClass=p,e.prototype.printOnly=!0,e}(h.CategoryOperationDetailsDialog),h}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},,,,,function(t,e,n){var o;void 0===(o=function(){return{trackEvent:function(t,e,n){var o;return"function"==typeof window.ga&&window.ga("send","event",t,e,n),null!=(o=window.yaCounter23836696)&&"function"==typeof o.reachGoal?o.reachGoal(e.replace(/\s/g,"_")):void 0}}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper captcha-block ').nx(e.get(["showCaptcha"],!1),e,{block:n},{}).w('"><div class="field-caption">').h("_",e,{block:o},{},"h").w('</div><div class="control-container"><div class="expired-overlay">').h("_",e,{block:i},{},"h").w('</div><img class="captcha-image" /><div class="captcha-input-wrapper"><input type="text" name="captcha" ').x(e.get(["captchaMaxLength"],!1),e,{block:r},{}).w(' autocomplete="off" required /></div><a href="#" class="captcha-reload">').h("_",e,{block:s},{},"h").w("</a></div></div>")}function n(t,e){return t.w("hidden")}function o(t,e){return t.w("Captcha")}function i(t,e){return t.w("Expired [captcha]")}function r(t,e){return t.w('maxlength="').f(e.get(["captchaMaxLength"],!1),e,"h").w('"')}function s(t,e){return t.w("Reload image")}t.register("templates/auth/captcha-block",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/captcha-block",t,e)};i.templateName="templates/auth/captcha-block",t.exports=i},function(t,e,n){var o=n(372);n(502),n(503),n(504),n(505);!function(t){function e(t,e){return t.h("select",e,{block:n},{key:a},"h")}function n(t,e){return t.h("eq",e,{block:o},{value:"otp_sms"},"h").h("eq",e,{block:i},{value:"otp_list"},"h").h("eq",e,{block:r},{value:"otp_mma"},"h").h("eq",e,{block:s},{value:"random_auth"},"h").b(e.getBlock("customAddAuthMethods"),e,{},{})}function o(t,e){return t.p("templates/partials/addauth/otp_sms-method",e,e,{})}function i(t,e){return t.p("templates/partials/addauth/otp_list-method",e,e,{})}function r(t,e){return t.p("templates/partials/addauth/otp_mma-method",e,e,{})}function s(t,e){return t.p("templates/partials/addauth/random_auth-method",e,e,{})}function a(t,e){return t.f(e.get(["authType"],!1),e,"h")}t.register("templates/partials/addauth/add-auth-method-switch",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/addauth/add-auth-method-switch",t,e)};i.templateName="templates/partials/addauth/add-auth-method-switch",t.exports=i},function(t,e,n){var o=n(372);n(385),n(444);!function(t){t.register("templates/common/add-auth-without-form-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="add-auth-form block__add-auth">').b(n.getBlock("addContent"),n,{},{}).x(n.get(["challenge"],!1),n,{else:i,block:s},{}).w("</form>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="add-auth-select hidden"><label><span class="action-tooltip">').h("_",n,{block:r},{},"h").w(':</span><span class="select-wrapper"></span></label></div>')}function r(t,n){return n=n.shiftBlocks(e),t.w("Choose a method of one-time password delivery")}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/addauth/add-auth-method-switch",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/add-auth-without-form-dialog",t,e)};i.templateName="templates/common/add-auth-without-form-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.getPath(!1,["balances","available"]),e,{block:n},{}).s(e.getPath(!1,["balances","cr_limit"]),e,{block:o},{})}function n(t,e){return t.w('<div class="primary-balance">').f(e.getPath(!0,[]),e,"h",["money","s"]).w("</div>")}function o(t,e){return t.w('<div class="secondary-balance credit-limit">').f(e.getPath(!0,[]),e,"h",["money","s"]).w("</div>")}t.register("templates/contracts/balances-for-manager",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/balances-for-manager",t,e)};i.templateName="templates/contracts/balances-for-manager",t.exports=i},function(t,e,n){var o=n(372);n(467),n(448);!function(t){t.register("templates/history/simple-history-list",n);var e={operationRow:_,description:W,amountBlock:H,"empty-history-message":q,"state-description":G};function n(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isLoading"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isError"],!1),n,{else:i,block:m},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("history"),n,{block:r},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["operations"],!1),n,{else:s,block:c},{})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:a},{header:"No operations found",description:"Try to change filter settings"})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("empty-history-message"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.s(n.get(["months"],!1),n,{block:u},{})}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="month-delimiter">').f(n.getPath(!0,["month"]),n,"h",["dateMonthYear"]).w("</div>").s(n.get(["dates"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="day-operations"><div class="day-header">').f(n.getPath(!0,["date"]),n,"h",["dateWeekDay"]).w('</div><ul class="operations-list">').s(n.get(["operations"],!1),n,{block:d},{}).w("</ul></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w('<li data-id="').f(n.get(["id"],!1),n,"h").w('" class="history-item ').x(n.get(["isReversed"],!1),n,{else:p,block:h},{}).w(" ").x(n.get(["dispute"],!1),n,{block:f},{}).w('">').b(n.getBlock("operationRow"),n,{},{}).w("</li>")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.w("reversed")}function f(t,n){return n=n.shiftBlocks(e),t.w("under-dispute")}function m(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:y},{header:"Failed to obtain history",description:"Try to change filter settings or try again later"})}function y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("empty-history-message"),n,{},{})}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("operation-row-content"),n,{block:g},{})}function g(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-time">').f(n.get(["operationTime"],!1),n,"h",["dateShortTime"]).w("</span>").b(n.getBlock("beforeInfo"),n,{block:v},{}).w('<span class="history-item-description"><a class="operation-details" href="#">').b(n.getBlock("description"),n,{},{}).w("</a></span>").b(n.getBlock("afterDescription"),n,{},{}).w('<span class="history-item-amount total">').x(n.getPath(!1,["amountDetails","total"]),n,{block:w},{}).w('</span><span class="history-item-amount transaction ').nx(n.get(["isReversal"],!1),n,{block:E},{}).w('">').s(n.getPath(!1,["amountDetails","trans"]),n,{block:N},{}).w("</span>").b(n.getBlock("afterInfo"),n,{block:R},{})}function v(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-state" title="').b(n.getBlock("state-description"),n,{},{}).w('"></span>')}function w(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{else:b,block:P},{key:T,value:A},"h")}function b(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{block:k},{key:C,value:S},"h")}function k(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","total"]),n,{block:B},{})}function B(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("amountBlock"),n,{},{})}function C(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total","value"]),n,"h")}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans","value"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","total"]),n,{block:x},{})}function x(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("amountBlock"),n,{},{})}function T(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total","currency"]),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans","currency"]),n,"h")}function E(t,n){return n=n.shiftBlocks(e),t.h("gt",n,{block:M},{key:I,value:0},"h")}function M(t,n){return n=n.shiftBlocks(e),t.w("income")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans","value"]),n,"h")}function N(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("amountBlock"),n,{},{})}function R(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-repeat">').x(n.get(["allowRepeat"],!1),n,{block:O},{}).w("</span>")}function O(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("repeatLink"),n,{block:D},{})}function D(t,n){return n=n.shiftBlocks(e),t.x(n.get(["payment"],!1),n,{else:F,block:$},{})}function F(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowRest"],!1),n,{else:L,block:V},{})}function L(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["contextPath"],!1),n,"h").w("/history/").f(n.get(["id"],!1),n,"h").w('/repeat" class="repeat-operation"></a>')}function V(t,n){return n=n.shiftBlocks(e),t.w('<a href="#history/').f(n.get(["id"],!1),n,"h").w("/repeat").x(n.get(["template"],!1),n,{block:U},{}).w('" class="repeat-operation"></a>')}function U(t,n){return n=n.shiftBlocks(e),t.w("?templateId=").f(n.getPath(!1,["template","id"]),n,"h")}function $(t,n){return n=n.shiftBlocks(e),t.w('<a href="#intracard-transfer?repeat-payment-id=').f(n.getPath(!1,["payment","id"]),n,"h").w('" class="repeat-operation"></a>')}function W(t,n){return n=n.shiftBlocks(e),t.p("templates/history/operation-description",n,n,{})}function H(t,n){return n=n.shiftBlocks(e),t.h("gt",n,{block:z},{key:Y,value:0},"h").f(n.getPath(!0,[]),n,"h",["absMoney","s"])}function z(t,n){return n=n.shiftBlocks(e),t.w('<span class="amount-sign">+</span>')}function Y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function q(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/empty-message",n,n,{})}function G(t,n){return n=n.shiftBlocks(e),t.x(n.get(["dispute"],!1),n,{else:j,block:at},{})}function j(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:K},{key:st},"h")}function K(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:X},{value:"failed"},"h").h("eq",n,{block:J},{value:"expired"},"h").h("none",n,{block:tt},{},"h")}function X(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:Q},{},"h")}function Q(t,n){return n=n.shiftBlocks(e),t.w("Failed [operation status]")}function J(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:Z},{},"h")}function Z(t,n){return n=n.shiftBlocks(e),t.w("Expired [operation status]")}function tt(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isReversed"],!1),n,{else:et,block:it},{})}function et(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isAuth"],!1),n,{block:nt},{})}function nt(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:ot},{},"h")}function ot(t,n){return n=n.shiftBlocks(e),t.w("Blocked [operation status]")}function it(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:rt},{},"h")}function rt(t,n){return n=n.shiftBlocks(e),t.w("Canceled [operation status]")}function st(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function at(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:ct},{},"h")}function ct(t,n){return n=n.shiftBlocks(e),t.w("This operation is currently under dispute")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/simple-history-list",t,e)};i.templateName="templates/history/simple-history-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="empty-message"><h1>').h("_",e,{block:n},{},"h").w("</h1><h4>").h("_",e,{block:o},{},"h").w("</h4></div>")}function n(t,e){return t.f(e.get(["header"],!1),e,"h")}function o(t,e){return t.f(e.get(["description"],!1),e,"h")}t.register("templates/partials/empty-message",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/empty-message",t,e)};i.templateName="templates/partials/empty-message",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["description"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="hint">').f(e.getPath(!0,[]),e,"h",["s"]).w("</div>")}t.register("templates/form-fields/hint",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/hint",t,e)};i.templateName="templates/form-fields/hint",t.exports=i},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(r=function(t){var e,r,a,u,l,d,p,h,f;return u=n(137),p=n(96),f=n(40),d=n(377),r=(h=n(375)).BaseModel,e=h.BaseCollection,a=n(420),(l={}).INTEREST_OPTIONS_WEIGHTS={at_maturity:0,daily:1,weekly:2,monthly:3,quarterly:4,halfyearly:5,yearly:6},l.DepositsSettings=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.urlRoot=f.API_URL+"/deposits/settings",e.prototype.getDepositOutcome=function(t,e){var n;return n=!1!==t.getInterestReinvestmentFlag(e.currency,e.period)&&e.interestReinvestment?this.get("interest.reinvestCalculation.expression"):this.get("interest.simpleCalculation.expression"),new Function("values","return "+n)(o.extend({},e,{interestRate:t.getInterestRate(e.initialAmount,e.currency,e.period)}))},e}(r),l.DepositProduct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.urlRoot=f.API_URL+"/deposits/products",e.prototype.getByCurrency=function(t,e){return o.findWhere(this.get(t),{code:e})},e.prototype.currencyAvailable=function(t){return c.call(o.pluck(this.get("currencies"),"code"),t)>=0},e.prototype.isHighPriority=function(){return!0===this.get("highPriority")},e.prototype.isPersonalOffer=function(){return!0===this.get("personalOffer")},e.prototype.topupAllowed=function(t){return this.has("topupAmount")&&!!this.getByCurrency("topupAmount.currencies",t)},e.prototype.earlyCloseAllowed=function(){return this.has("earlyClose")},e.prototype.withdrawalAllowed=function(){return this.has("withdrawal")},e.prototype.getInterestReinvestmentFlag=function(t,e){var n,i;return this.has("reinvestInterest")?this.get("reinvestInterest"):!!(n=this.getByCurrency("currencies",t))&&(n.periods?!!(i=o.findWhere(n.periods,{code:e}))&&i.reinvestInterest:(console.warn(n.periods,"Deposit "+this.get("name")+" has no available periods for currency "+t),!1))},e.prototype.interestReinvestmentAvailable=function(t,e){return!1!==this.getInterestReinvestmentFlag(t,e)},e.prototype.autoProlongationAllowed=function(){return!0===this.get("autoProlongationAllowed")},e.prototype.getAvailableCurrencies=function(){return o.pluck(this.get("currencies"),"code")},e.prototype.getAvailablePeriods=function(t){var e;return(e=this.getByCurrency("currencies",t))?e.periods?o.pluck(e.periods,"code"):(console.warn(e.periods,"Deposit "+this.get("name")+" has no available periods for currency "+t),[]):[]},e.prototype.getInterestPaymentOptions=function(){return this.get("interestPayment").sort((function(t,e){return l.INTEREST_OPTIONS_WEIGHTS[t]-l.INTEREST_OPTIONS_WEIGHTS[e]}))},e.prototype.getBoundaries=function(t,e){var n;return(n=this.getByCurrency(t,e))?{min:u.parseFloat(n.minAmount),max:u.parseFloat(n.maxAmount)}:null},e.prototype.getDepositBoundaries=function(t){return this.getBoundaries("currencies",t)},e.prototype.getTopupBoundaries=function(t){return this.getBoundaries("topupAmount.currencies",t)},e.prototype.fitsParams=function(t){var e,n,i,r,s,a,u;return o.has(t,"currency")&&o.has(t,"period")&&o.has(t,"initialAmount")?(s=t.period,!(c.call(this.getAvailablePeriods(t.currency),s)<0)&&(e=this.getByCurrency("currencies",t.currency),(r=t.initialAmount>=e.minAmount&&t.initialAmount<=e.maxAmount)&&3!==o.keys(t).length?(i=!0!==t.interestReinvestment||this.interestReinvestmentAvailable(t.currency,t.period),n=!t.interestPayment||(a=t.interestPayment,c.call(this.getInterestPaymentOptions(),a)>=0),u=!0!==t.topupAllowed||this.topupAllowed(t.currency),r&&i&&n&&u):r)):(console.warn("One or more mandatory params for deposits filtering are missing"),!0)},e.prototype.getInterestRate=function(t,e,n){var i,r,s,a,c,u;if(!(i=this.getByCurrency("currencies",e)))return null;if(!(n=o.findWhere(i.periods,{code:n})))return null;for(r=0,a=(u=n.interestRates).length;r<a&&t>(c=u[r]).minAmount;r++)s=c.value;return s||c.value},e}(r),l.DepositProducts=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=l.DepositProduct,e.prototype.url=f.API_URL+"/deposits/products",e.prototype.getBoundaries=function(t,e){var n;return n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},this.forEach((function(o){var i;if(i="deposit"===t?o.getDepositBoundaries(e):o.getTopupBoundaries(e))return i.min<n.min&&(n.min=i.min),i.max>n.max?n.max=i.max:void 0})),n},e.prototype.getDepositBoundaries=function(t){return this.getBoundaries("deposit",t)},e.prototype.getTopupBoundaries=function(t){return this.getBoundaries("topup",t)},e.prototype.getAvailableCurrencies=function(){return o.union.apply(o,this.map((function(t){return t.getAvailableCurrencies()})))},e.prototype.getAvailablePeriods=function(t){return o.union.apply(o,this.map((function(e){return e.getAvailablePeriods(t)}))).sort((function(t,e){return p.duration(t).asDays()-p.duration(e).asDays()}))},e.prototype.getDurationBoundaries=function(t){var e;return{min:(e=this.getAvailablePeriods(t))[0],max:o.last(e)}},e.prototype.getInterestPaymentOptions=function(t){var e;return e=this.filter((function(e){return e.currencyAvailable(t)})),o.union.apply(o,e.map((function(t){return t.getInterestPaymentOptions()}))).sort((function(t,e){return l.INTEREST_OPTIONS_WEIGHTS[t]-l.INTEREST_OPTIONS_WEIGHTS[e]}))},e.prototype.interestReinvestmentAvailable=function(t,e){return this.any((function(n){return n.currencyAvailable(t)&&n.interestReinvestmentAvailable(t,e)}))},e.prototype.topupAvailable=function(t){return this.any((function(e){return e.topupAllowed(t)}))},e.prototype.getDeposits=function(t){return this.filter((function(e){return e.fitsParams(t)}))},e.prototype.getDepositsByCurrency=function(t){return this.filter((function(e){return e.currencyAvailable(t)}))},e}(e),l.Deposit=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.depositUrl=function(){var t;return t=f.API_URL+"/deposits/contracts",this.isNew()?t:t+"/"+this.id},e.prototype.getDepositJSON=function(){var t;return t=this.isNew()?this.toJSON().deposit:{autoProlongation:this.get("deposit.autoProlongation"),target:this.get("deposit.target")},this.has("confirmation")&&o.extend(t,{confirmation:this.get("confirmation")}),t},e.prototype.save=function(){return i.sync(this.isNew()?"create":"update",this,{url:this.depositUrl(),data:JSON.stringify(d.sanitizeValues(this.getDepositJSON())),contentType:"application/json"}).done((t=this,function(e){return t.set(e),t.trigger("sync")})).fail(function(t){return function(e){return t.onAjaxError(e)}}(this));var t},e.prototype.setDefaults=function(t){var e,n,o,i;return(n=this.get("deposit.currency"))||(console.warn("Deposit currency is not set, taking first available currency from deposit product"),n=t.getAvailableCurrencies()[0]),e=t.getDepositBoundaries(n),(o=this.get("deposit")).currency=n,o.initialAmount=(null!=(i=f.DEPOSIT_CALCULATOR)?i.INITIAL_AMOUNT:void 0)||e.max/2,o.period=t.getAvailablePeriods(n)[0],o.interestPayment=t.getInterestPaymentOptions()[0],o.interestReinvestment=!1,o.topupAllowed=!1,this.set("deposit",o)},e.prototype.setFromDepositProduct=function(t){var e,n;return e=this.get("deposit"),n=this.get("deposit.interestReinvestment")?t.interestReinvestmentAvailable(e.currency,e.period):!0===t.getInterestReinvestmentFlag(e.currency,e.period),e=o.extend(e,{productId:t.id,earlyClose:t.earlyCloseAllowed(),autoProlongation:t.autoProlongationAllowed(),topupAllowed:t.topupAllowed(e.currency),interestRate:t.getInterestRate(e.initialAmount,e.currency,e.period),reinvestInterest:n}),this.set("deposit",e)},e.prototype.toJSON=function(){var t;return(t=e.__super__.toJSON.apply(this,arguments)).deposit.amount={value:t.deposit.initialAmount,currency:t.deposit.currency},t},e}(a),l}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(384))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){return n(396),o.widget("wb.multiAccordion",{options:{heightStyle:"content",collapsible:!0,activeState:[],activate:function(t,e){return e.oldHeader.removeClass("ui-header-active")},create:function(){return o(this).css({visibility:"inherit"})},childSelector:function(){return"*"}},_create:function(){var t;return t=this.options.beforeActivate,i.extend(this.options,{beforeActivate:function(e,n){return n.newHeader.length?o(this).addClass("accordion-section-active"):o(this).removeClass("accordion-section-active"),o(n.newHeader,n.oldHeader).addClass("ui-header-active"),null!=t?t.apply(this,arguments):void 0}}),this.initializeAccordion()},_destroy:function(){return o(this.element).children(this.options.childSelector).each((function(t,e){return o(e).accordion("destroy")}))},refresh:function(t){return t&&(this.options.activeState=t),this.initializeAccordion()},initializeAccordion:function(){var t,e;return t=[],o(this.element).children(this.options.childSelector).each((e=this,function(n,r){var s,a;return s=new o.Deferred,(a=i.omit(e.options,"activeState")).active=!!e.options.activeState[n]&&0,a.create=function(){return s.resolve()},o(r).accordion(a),t.push(s.promise())})),o.when.apply(o,t).then(function(t){return function(){return i.defer((function(){return t.element.trigger("multiAccordionCreated")}))}}(this))},setActiveOption:function(t,e){return o(t).accordion("option","animate",!1).accordion("option","active",e).accordion("option","animate",!0)},getActiveState:function(){return o(this.element).children(this.options.childSelector).map((function(){return 0===o(this).accordion("option","active")}))},setActiveState:function(t){return o(this.element).children(this.options.childSelector).each((e=this,function(n,o){return e.setActiveOption(o,!!t[n]&&0)}));var e},collapseAll:function(){return o(this.element).children(this.options.childSelector).each((t=this,function(e,n){return t.setActiveOption(n,!1)}));var t},expandAll:function(){return o(this.element).children(this.options.childSelector).each((t=this,function(e,n){return t.setActiveOption(n,0)}));var t}})}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(135),r=n(430),s=function(){function t(t){this.model=t}return t.prototype.getAccountField=function(){return{name:i.t("Account"),value:""}},t.prototype.getTariffField=function(){return{name:i.t("Tariff"),value:""}},t.prototype.getCardTypeField=function(){return{name:i.t("Card type"),value:""}},t.prototype.getCardExpiryField=function(){return{name:i.t("Card Expiry"),value:""}},t.prototype.getCardholderNameField=function(){return{name:i.t("Cardholder's name"),value:""}},t.prototype.getCurrencyField=function(){return{name:i.t("Currency"),value:"",raw:!0}},t.prototype.getFeeField=function(){return{name:i.t("Fee"),value:this.getFeeValue(r.Fields.FEE),raw:!0}},t.prototype.getIssuingFeeField=function(){return{name:i.t("Issuing fee"),value:this.getFeeValue(r.Fields.ISSUING_FEE),raw:!0}},t.prototype.getNotificationFeeField=function(){return{name:i.t("Notification fee"),value:this.getFeeValue(r.Fields.NOTIFICATION_FEE),raw:!0}},t.prototype.getPaymentSystemField=function(){return{name:i.t("Payment system"),value:""}},t.prototype.getFeeValue=function(t){return""},t.prototype.getAccountNumberField=function(){return{name:i.t("Account number"),value:""}},t.prototype.getCardNumberField=function(){return{name:i.t("Card number"),value:""}},t.prototype.getDeliveryBranchNameField=function(){return{name:i.t("Branch"),value:""}},t.prototype.value=function(){return o.__assign(o.__assign({},this.model.toJSON()),{fields:[this.getTariffField(),this.getAccountField(),this.getAccountNumberField(),this.getCardNumberField(),this.getCardTypeField(),this.getCardExpiryField(),this.getCardholderNameField(),this.getCurrencyField(),this.getIssuingFeeField(),this.getFeeField(),this.getNotificationFeeField(),this.getDeliveryBranchNameField()].filter((function(t){return Boolean(t.value)}))})},t}();e.default=s},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(r=function(t){var e,o,r,a,u,l,d;return d=n(40),a=n(379),o=(l=n(977)).Menu,r=l.MenuItem,e=n(375).CollectionQuery,u={},d.PAYMENTS_MENU_ICONS_PATH=d.IMAGE_PATH+"/tiles",u.WbMenuItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.isService=function(){return this.has("service")},e.prototype.isNative=function(){return"NATIVE"===this.get("options.type")},e.prototype.viewContext=function(){var t,n,o,r;if((t=i.extend(e.__super__.viewContext.apply(this,arguments),{code:(""+this.id).replace(/^.*\./,"").replace(/\./g,"_").toLowerCase()})).items)for(n=0,o=(r=t.items).length;n<o;n++)r[n].parentId=t.id;return t},e}(r),u.WbPaymentsMenu=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=u.WbMenuItem,e.prototype.allowLimits=!d.USE_TILED_PAYMENTS_PAGE,e.prototype.url=function(){return new a(d.API_URL+"/"+this.baseUrl).normalize().toString()},e.prototype.initialize=function(t,n){return e.__super__.initialize.apply(this,arguments),this.baseUrl=null!=n?n.baseUrl:void 0},e}(o),u.WbMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.model=u.WbMenuItem,n.prototype.baseUrl="menu",n.prototype.defaultQuery={maxDepth:2},n.prototype.url=function(){return this.URI.toString()},n.prototype.initialize=function(t,o){return n.__super__.initialize.apply(this,arguments),this.baseUrl=(null!=o?o.baseUrl:void 0)||this.baseUrl,(null!=o?o.rootId:void 0)&&(this.baseUrl=this.baseUrl+"/"+o.rootId+"/items"),this.URI=new a(d.API_URL+"/"+this.baseUrl),this.query=new e(i.extend({},this.defaultQuery,null!=o?o.query:void 0)),this.query.updateQuery(this.URI)},n.prototype.getAutoStartupItem=function(t){var e,n,o,i,r;if(o=this.models,t){if(!(i=this.get(t)))return;if(!(o=i.get(this.subtreeAttr))||!o.length)return}return 0===(e=o.filter((r=this,function(t){return t instanceof r.model?t.get("autoStartup"):t.autoStartup}))).length?(console.warn("No autoStartup items found, using the first menu item"),n=o[0]):n=e[0],e.length>1&&console.warn("More than one autoStartup item found, using the first of them"),n instanceof this.model?n:new this.model(n)},n.prototype.getPath=function(t,e){var n;return(n=function(t,o){var i,r,s,a,c,u,l;for(s=0,a=(u=o.models).length;s<a;s++){if(c=u[s],l=!e||c.get("options.type")===e,-1!==c.id.indexOf(t)&&l)return c.id;if((i=o.getChildrenOf(c))&&(r=n(t,i)))return c.id+"/"+r}})(t,this)},n.prototype.getItemUrl=function(t){var e,n,o,i;if(e=this.get(t))return n=t.endsWith("CARDS_ACCOUNTS")?"#menu/"+t:t.endsWith("CP_APPLICATIONS")&&!d.USE_REST_APPLICATION_HISTORY?window.WB.contextPath+"/application-history":(i=e.get("service"))?e.isNative()&&(o=i.id,c.call(d.INFORMATION_SERVICES,o)>=0)?"#menu/"+this.getPath(t):window.WB.contextPath+"/"+i.url:"#menu/"+this.getPath(t),new a(n).normalizePath().toString();console.warn("Menu item not found")},n}(o),u}.call(e,n,e,t))||(t.exports=r)}).call(this,n(379),n(11))},,,,,,function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_,g,v,w,b;return b=o(40),g=o(96),y=o(405),s=(v=o(375)).BaseModel,n=v.BaseCollection,m=v.SingleFetchBaseCollection,l=o(398).FormMeta,h=(w=o(414)).ServiceField,p=w.PaymentServiceMeta,c=o(398).Fields,f=o(397).ServicePayment,d={ALL:"ALL",SUBSCRIPTION:"SUBSCRIPTION",NONE:"NONE"},(_={}).InvoicesListMeta=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){return b.API_URL+"/invoices/"+this.billerId},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),!n.billerId)throw new Error("Biller ID is not specified");return this.billerId=n.billerId},e.prototype.getRequiredAttributes=function(){return this.fields.leafs().filter((function(t){return t.get("visible")&&t.get("editable")&&!t.get("optional")})).map((function(t){return t.get("attr")}))},e.prototype.getPredefinedSearchParams=function(){return this.fields.leafs().reduce((function(t,e){var n;return(n=e.resolveValue())&&(t[e.get("attr")]=n),t}),{})},e.prototype.autoSearchEnabled=function(){return"Y"===this.get("addData.AUTO_SEARCH")},e}(l),_.InvoicesList=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){var t;return(t=new i(b.API_URL+"/invoices/"+this.billerId+"/list")).addSearch("customIdt",this.consumerId),this.addParams&&t.addSearch(this.addParams),t.toString()},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),!n.billerId)throw new Error("Biller ID is not specified");if(!n.consumerId)throw new Error("Consumer ID is not specified");return this.billerId=n.billerId,this.consumerId=n.consumerId,this.addParams=n.addParams},e}(n),_.InvoicesSearchIdentifiers=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){var t;return t=new i(b.API_URL+"/invoices/"+this.searchService+"/identifiers"),this.searchParams&&t.addSearch(this.searchParams),t.toString()},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),!n.searchService)throw new Error("Search Service id is not specified");return this.searchService=n.searchService,this.searchParams=n.searchParams},e.prototype.onAjaxError=function(t){return console.log("blah!"),t.errorHandled=!0,e.__super__.onAjaxError.apply(this,arguments)},e}(s),_.InvoiceField=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),this.isInvoiceItemField())return this.set({amountCorrectionApplied:!1,manualAmountEntry:!1})},e.prototype.skipBinding=function(){return e.__super__.skipBinding.apply(this,arguments)||this.isInvoiceTotalAmountField()},e.prototype.isAmountField=function(){return this.isInvoiceAmountField()||e.__super__.isAmountField.apply(this,arguments)},e.prototype.getMyCurrencyField=function(){return this.isInvoiceAmountField()?this.root.searchPredicate((function(t){return"amount.currency"===t.get("role")})).leafs()[0]:e.__super__.getMyCurrencyField.apply(this,arguments)},e.prototype.getConverter=function(){return this.isMeasurementDateField()?y.isoDatepickerConverter:this.isMeasurementField()?y.makeDecimalConverter(this.getPrecision()):e.__super__.getConverter.apply(this,arguments)},e.prototype.getPrecision=function(){var t;if(this.isMeasurementField())switch(t=this.get("inputType"),!0){case/int/i.test(t):return 0;case/float[1-5]/i.test(t):return Number(r.last(t));default:return 3}else console.warn("Attempted to get precision for non-measurement field")},e.prototype.isInvoiceHeaderGroup=function(){return this.isGroup()&&"INVOICE_HEADER"===this.id},e.prototype.isInvoiceItemField=function(){var t;return(t=this.get("parentGroupId"))&&"INVOICE_DETAILS"===t},e.prototype.isInvoiceItemAmountField=function(){return"Amount"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isInvoiceDebtAmountField=function(){return"DebtAmount"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isInvoiceOverpayAmountField=function(){return"OverpayAmount"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isInvoiceItemAmountCorrectionField=function(){return this.isInvoiceDebtAmountField()||this.isInvoiceOverpayAmountField()},e.prototype.isInvoiceAmountField=function(){return this.isInvoiceItemAmountField()||this.isInvoiceItemAmountCorrectionField()},e.prototype.isPreviousMeasurementField=function(){return"Counter.PrevValue"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isCurrentMeasurementField=function(){return"Counter.Value"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isMeasurementField=function(){return this.isPreviousMeasurementField()||this.isCurrentMeasurementField()},e.prototype.isMeasurementDateField=function(){var t;return"Counter.Date"===(t=this.get("addData.INVOICE_PARAM_CODE"))||"Counter.PrevDate"===t},e.prototype.isMeasurementUnitField=function(){return"Counter.Unit"===this.get("addData.INVOICE_PARAM_CODE")},e.prototype.isInvoiceTotalAmountField=function(){return"amount.value"===this.get("role")},e.prototype.isInvoiceItemChild=function(){var t;return(t=this.get("parentGroupId"))&&this.root.get(t).isInvoiceItemField()},e.prototype._getFieldsByInvoiceParamCodes=function(t){var e;return e=this.isInvoiceItemField()?this:this.root.get(this.get("parentGroupId")),this.root.getChildrenOf(e).searchPredicate((function(e){var n;return n=e.get("addData.INVOICE_PARAM_CODE"),u.call(t,n)>=0})).leafs()},e.prototype._getFieldByInvoiceParamCode=function(t){return this._getFieldsByInvoiceParamCodes([t])[0]},e.prototype.getCurrentMeasurementDateField=function(){var t;return this.isInvoiceItemField()?this._getFieldByInvoiceParamCode("Counter.Date"):this.isMeasurementField()?"Counter.Value"===(t=this.get("addData.INVOICE_PARAM_CODE"))?this._getFieldByInvoiceParamCode("Counter.Date"):"Counter.PrevValue"===t?this._getFieldByInvoiceParamCode("Counter.PrevDate"):void 0:void console.warn("Attempted to get measurement date field for non-measurement field")},e.prototype.getOppositeMeasurementDateField=function(){if(this.isMeasurementDateField())return"Counter.Date"===this.get("addData.INVOICE_PARAM_CODE")?this._getFieldByInvoiceParamCode("Counter.PrevDate"):this._getFieldByInvoiceParamCode("Counter.Date");console.warn("Attempted to get opposite measurement date field for non-measurement-date field")},e.prototype.getCurrentMeasurementField=function(){if(this.isInvoiceItemField())return this._getFieldByInvoiceParamCode("Counter.Value");console.warn("Attempted to get measurement field from non-invoice-item field")},e.prototype.getOppositeMeasurementField=function(){if(this.isMeasurementField())return"Counter.Value"===this.get("addData.INVOICE_PARAM_CODE")?this._getFieldByInvoiceParamCode("Counter.PrevValue"):this._getFieldByInvoiceParamCode("Counter.Value");console.warn("Attempted to get opposite measurement field for non-measurement field")},e.prototype.getMeasurementUnitField=function(){return this._getFieldByInvoiceParamCode("Counter.Unit")},e.prototype.getTariffUnitField=function(){return this._getFieldByInvoiceParamCode("Counter.TariffUnit")},e.prototype.getInvoiceAmountField=function(){return this._getFieldByInvoiceParamCode("Amount")},e.prototype.getInvoiceDebtField=function(){return this._getFieldByInvoiceParamCode("DebtAmount")},e.prototype.getInvoiceOverpayField=function(){return this._getFieldByInvoiceParamCode("OverpayAmount")},e.prototype.getTariffFields=function(){return this.isInvoiceItemField()?r.compact(this._getFieldsByInvoiceParamCodes(["Counter.MinTariff","Counter.MidTariff","Counter.MaxTariff","Counter.MinTariffThreshold","Counter.MaxTariffThreshold"])):(console.warn("Attempted to get tariffs from non-invoice-item field"),[])},e.prototype.getInvoiceItemType=function(){if(this.isInvoiceItemField())return this.root.getChildrenOf(this).get("INVOICE_ITEM").get("addData.INVOICE_ITEM_TYPE");console.warn("Attempted to get type of non-invoice-item field")},e.prototype.invoiceItemHasEditableChildren=function(){if(this.isInvoiceItemField())return r.filter(this.root.getChildrenOf(this).models,(function(t){if(t)return t.get("editable")})).length>0;console.warn("Attempted to get children of non-invoice-item field")},e.prototype.hasAmountCorrectionFields=function(){if(this.isInvoiceItemField())return this.getInvoiceDebtField()||this.getInvoiceOverpayField();console.warn("Method hasAmountCorrectionFields is only applicable to invoice-item fields")},e.prototype.viewContext=function(){var t;return(t=e.__super__.viewContext.apply(this,arguments))&&!0===this.get("hideDescription")&&delete t.description,t},e}(h),_.InvoiceFields=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=_.InvoiceField,e.prototype.initialize=function(t,n){var o;return e.__super__.initialize.apply(this,arguments),this.noDescriptionFields=(null!=n?n.noDescriptionFields:void 0)||[],this.on("sync reset",(o=this,function(){return o.enhanceFields()})),this.enhanceFields()},e.prototype.enhanceFields=function(){var t;if(0!==this.length&&0!==this.noDescriptionFields.length)return this.noDescriptionFields.forEach((t=this,function(e){var n;return null!=(n=t.get(e))?n.set("hideDescription",!0):void 0}))},e}(c),_.InvoicePaymentMeta=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){var t;return(t=new i(b.API_URL+"/invoices/"+this.billerId+"/pay")).addSearch(this.getUrlParams()),t.toString()},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),!n.invoiceId)throw new Error("Invoice ID is not specified");if(!n.billerId)throw new Error("Biller ID is not specified");if(!n.consumerId)throw new Error("Consumer ID is not specified");return this.invoiceId=n.invoiceId,this.billerId=n.billerId,this.consumerId=n.consumerId,this.addParams=n.addParams,this.set("allowTemplate",this.get("allowTemplate")&&window.OW.features.PAYMENT_TEMPLATES&&window.OW.features.INVOICE_TEMPLATES)},e.prototype.getUrlParams=function(){return r.extend({},this.addParams||{},{customIdt:this.consumerId,invoiceId:this.invoiceId})},e.prototype.getRequiredTemplateFieldsAttrs=function(){return this.getFields({_filter:function(t){var e;return"source"===(e=t.get("role"))||"destination.account"===e}}).map((function(t){return t.getAttrPath()})).concat(r.keys(this.addParams))},e.prototype.createFields=function(t){return new _.InvoiceFields(t,{noDescriptionFields:["CUSTOM_IDT"].concat(r.keys(this.addParams))})},e.prototype.getInvoiceItemField=function(t){return this.getInvoiceItemFields().get(t)},e.prototype.getInvoiceItemFields=function(){return this.fields.getChildrenOf(this.fields.get("INVOICE_DETAILS"))},e.prototype.isInvoice=function(){return!0},e.prototype.getCustomAttributes=function(){var t;return t={},this.getInvoiceItemFields().forEach((function(e){return e.get("manualAmountEntry")&&(t[e.id+"$manualAmountEntry"]=!0),e.get("amountCorrectionApplied")?t[e.id+"$amountCorrectionApplied"]=!0:"Simple"===e.getInvoiceItemType()&&e.hasAmountCorrectionFields()?t[e.id+"$amountCorrectionApplied"]=!1:void 0})),t},e.prototype.getInvoiceFootprint=function(){var t,e,n;if(!(t=this.getField({role:"destination.provider"})))throw new Error("Biller code is missing");return e=t.resolveValue(),n={billerCode:r.isObject(e)?e.id:e,serviceCode:this.id,customIdt:this.consumerId},r.isEmpty(this.addParams)||(n.addParams=this.addParams),n},e.prototype.getSubscriptionModel=function(){var t,e,n,o,i;return o=this.get("invoice.mode"),t=(t=(t=[this.getField({role:"destination.account"})]).concat(this.getFields({_filter:(i=this,function(t){var e;return e=t.get("attr"),u.call(r.keys(i.addParams),e)>=0})}).leafs())).map((function(t){return t.viewContext()})),t=r.compact(t),e={},(n=this.fields.get("INVOICE_HEADER"))&&this.fields.getChildrenOf(n).forEach((function(t){return e[t.get("name")]=t.resolveValue()})),new _.InvoiceSubscription(r.extend(this.getInvoiceFootprint(),{invoiceMode:o,fields:t,info:e}))},e.prototype.subscriptionAllowed=function(){return this.get("invoice.mode")!==d.NONE},e.prototype.autoPaymentAllowed=function(){return this.get("invoice.mode")===d.ALL},e}(p),_.InvoicePayment=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.url=function(){throw new Error("Unexpected invoice payment url usage")},n.prototype.prepareUrl=function(){var t;return(t=new i(b.API_URL+"/invoices/"+this.billerId+"/pay")).addSearch({customIdt:this.consumerId,invoiceId:this.id}),this.addParams&&t.addSearch(this.addParams),t.toString()},n.prototype.initialize=function(t,e){if(n.__super__.initialize.apply(this,arguments),!e.billerId)throw new Error("Biller ID is not specified");if(!e.consumerId)throw new Error("Consumer ID is not specified");return this.billerId=e.billerId,this.consumerId=e.consumerId,this.addParams=e.addParams,this.calculations={},this.amountFields=this.service.getFields({_filter:function(t){return t.isInvoiceItemAmountField()}}).leafs(),this.amountCorrectionFields=this.service.getFields({_filter:function(t){return t.isInvoiceItemAmountCorrectionField()}}).leafs(),this.invoiceItems=this.service.getInvoiceItemFields(),this.initTariffs(),this.initEvents()},n.prototype.initTariffs=function(){return this.tariffs={},this.invoiceItems.forEach((t=this,function(e){var n,o,i,r,s;if("Simple"!==e.getInvoiceItemType()){for(s=e.getTariffFields(),t.tariffs[e.id]={},r=[],o=0,i=s.length;o<i;o++)n=s[o],r.push(t.tariffs[e.id][n.get("addData.INVOICE_PARAM_CODE")]=t.get(n.get("attr")));return r}}));var t},n.prototype.initEvents=function(){var t,e;return this.service.getFields({_filter:function(t){return t.isMeasurementDateField()||t.isMeasurementField()}}).leafs().forEach((e=this,function(t){return e.on("change:"+t.get("attr"),(function(){var n,o;if((n="Simple"!==(o=e.invoiceItems.get(t.get("parentGroupId"))).getInvoiceItemType())&&e.recalculate(o),e.applyAmountCorrection(o),n)return e.trigger("calculation:"+o.id)}))})),t=(t=(t=[]).concat(this.amountFields.map((function(t){return"change:"+t.get("attr")})))).concat(this.amountCorrectionFields.map((function(t){return"change:"+t.get("attr")}))),this.on(t.join(" "),function(t){return function(){var e;return e=t.service.getField({role:"amount.value"}),t.set(e.get("attr"),t.calculateTotal())}}(this)),this.invoiceItems.forEach(function(t){return function(e){return e.on("change:manualAmountEntry",(function(){if(!e.get("manualAmountEntry"))return t.applyAmountCorrection(e)})),e.on("change:amountCorrectionApplied",(function(){return t.applyAmountCorrection(e)}))}}(this))},n.prototype.normalizeMeasurementValues=function(){return this.service.getFields({_filter:function(t){return t.isMeasurementField()}}).leafs().forEach((t=this,function(e){var n;if(n=t.get(e.get("attr")))return t.set(e.get("attr"),Number(n).toFixed(e.getPrecision()),{silent:!0})}));var t},n.prototype.initCalculations=function(){return this.calculations={},this.normalizeMeasurementValues(),this.invoiceItems.forEach((t=this,function(e){return"Simple"!==e.getInvoiceItemType()?t.recalculate(e):(t.calculations[e.id]={amount:Number(t.get(e.getInvoiceAmountField().get("attr")))},e.hasAmountCorrectionFields()?e.set("amountCorrectionApplied",!0,{silent:!0}):void 0)}));var t},n.prototype.calculateTotal=function(){return this.amountFields.reduce((t=this,function(e,n){var o;return e+((o=Number(t.get(n.get("attr"))))<0?0:o)}),0).toFixed(2);var t},n.prototype.getTariffs=function(t){return this.tariffs[t.id]},n.prototype.getCurrentCalculation=function(t){return this.calculations[t.id]},n.prototype.applyAmountCorrection=function(t){var e,n,o,i,r,s;if(e=this.calculations[t.id].amount,o=t.getInvoiceAmountField().get("attr"),(i=t.getInvoiceDebtField())?(n=i,r=1):(n=t.getInvoiceOverpayField(),r=-1),n)return s=t.get("amountCorrectionApplied")?1:0,"Simple"===t.getInvoiceItemType()&&(s-=1),(e+=s*r*this.get(n.get("attr")))<0&&(e=0),this.set(o,e.toFixed(2));this.set(o,e.toFixed(2))},n.prototype.getTariffMultiplier=function(t){var e,n,o,i,r;return r=(e=t.getCurrentMeasurementDateField()).getOppositeMeasurementDateField(),n=g(this.get(e.get("attr"))),o=g(this.get(r.get("attr"))),i=n.diff(o,"M",!0),Number.isInteger(i)?i:n.diff(o,"d",!0)/30.5},n.prototype.recalculate=function(t){var e,n,o,i,r;if(o=(n=t.getCurrentMeasurementField()).getOppositeMeasurementField(),r=this.tariffs[n.get("parentGroupId")],e=this.get(n.get("attr")),i=this.get(o.get("attr")),r.hasOwnProperty("Counter.MidTariff")?this.calculations[t.id]=this.getThreeTariffCalculation(t,e,i,r):r.hasOwnProperty("Counter.MaxTariff")?this.calculations[t.id]=this.getTwoTariffCalculation(t,e,i,r):this.calculations[t.id]=this.getMonoTariffCalculation(t,e,i,r),!t.get("manualAmountEntry"))return this.set(t.getInvoiceAmountField().get("attr"),this.calculations[t.id].amount.toFixed(2))},n.prototype.getMonoTariffCalculation=function(t,e,n,o){var i,r;return{minTariff:r=e-n,amount:(i=r*o["Counter.MinTariff"])<0?0:i}},n.prototype.getTwoTariffCalculation=function(t,e,n,o){var i,r,s,a;return s=o["Counter.MinTariffThreshold"],(a=e-n)<=(r=Math.ceil(s*this.getTariffMultiplier(t)))?{minTariff:a,amount:(i=a*o["Counter.MinTariff"])<0?0:i}:{minTariff:r,maxTariff:a-r,amount:(i=r*o["Counter.MinTariff"]+(a-r)*o["Counter.MaxTariff"])<0?0:i}},n.prototype.getThreeTariffCalculation=function(t,e,n,o){var i,r,s,a,c,u,l;return l=this.getTariffMultiplier(t),c=o["Counter.MinTariffThreshold"],a=o["Counter.MaxTariffThreshold"],r=Math.ceil(c*l),s=Math.ceil(a*l),(u=e-n)<=r?{minTariff:u,amount:(i=u*o["Counter.MinTariff"])<0?0:i}:u>r&&u<=s?{minTariff:r,midTariff:u-r,amount:(i=r*o["Counter.MinTariff"]+(u-r)*o["Counter.MidTariff"])<0?0:i}:{minTariff:r,midTariff:s-r,maxTariff:u-s,amount:(i=r*o["Counter.MinTariff"]+(s-r)*o["Counter.MidTariff"]+(u-s)*o["Counter.MaxTariff"])<0?0:i}},n.prototype.viewContextForConfirmation=function(e){var n,o,i;return i=this,n=function(t,e){return{isAmountField:!0,name:e||t.get("name"),amount:{value:i.get(t.get("attr")),currency:t.getMyCurrencyField().resolveValue(null,i).id}}},(o=this.viewContext()).fields=r.reject(o.fields,(function(t){var e;return"group"===t.role||"destination.account.balance"===t.role||!("N"===(null!=t&&null!=(e=t.addData)?e.SHOW_ON_CONFIRMATION:void 0)||!1===t.visible)})),e.getInvoiceItemFields().forEach((function(e){if(o.fields.push(n(e.getInvoiceAmountField(),e.get("name"))),e.debtApplied&&o.fields.push(n(e.getInvoiceDebtField(),t("incl. debt"))),e.overpayApplied)return o.fields.push(n(e.getInvoiceOverpayField(),t("incl. overpay")))})),o},n}(f),_.InvoiceSubscription=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.enhanceModel()}return a(e,t),e.prototype.urlRoot=b.API_URL+"/invoice-subscriptions",e.prototype.defaults={autoPaymentEnabled:!1},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("sync reset",(t=this,function(){return t.enhanceModel()}));var t},e.prototype.clone=function(){var t;return t=e.__super__.clone.apply(this,arguments),this.fields&&(t.fields=this.fields.clone()),this.info&&(t.info=this.info.map((function(t){return r.clone(t)}))),t},e.prototype.enhanceModel=function(){var t,e,n,o;if((t=this.get("fields"))&&(this.fields=new c(t),delete this.attributes.fields),this.get("info")){for(e in this.info=[],n=this.get("info"))o=n[e],this.info.push({key:e,value:o});return delete this.attributes.info}},e.prototype.autoPaymentAllowed=function(){return this.get("invoiceMode")===d.ALL},e.prototype.getInvoiceFootprint=function(){var t,e,n,o,i,r;if(!(e=this.fields.searchPredicate((function(t){return"destination.account"===t.get("role")})).leafs()[0]))throw new Error("Field with role=destination.account is missing");if(r={billerCode:this.get("billerCode"),serviceCode:this.get("serviceCode"),customIdt:e.resolveValue()},1===this.fields.length)return r;for(r.addParams={},o=0,i=(t=this.fields.searchPredicate((function(t){return"destination.account"!==t.get("role")})).leafs()).length;o<i;o++)n=t[o],r.addParams[n.getAttrPath()]=n.resolveValue();return r},e.prototype.rename=function(t){var e,n,o;if(t)return n={path:"/name",op:"replace",value:t=t.trim()},e=this.get("name"),this.set("name",t),this.sendPatch([n]).fail((o=this,function(){return o.set("name",e)}))},e.prototype.getInfoViewContext=function(){var t,e,n,o;for(e in n=[],t=this.get("info"))o=t[e],n.push({key:e,value:o});return n},e.prototype.hasUnsavedChanges=function(){var t,e,n;return n=this.savedValue.name!==this.get("name"),t=this.savedValue.autoPaymentEnabled!==this.get("autoPaymentEnabled"),e=!0===this.get("autoPaymentEnabled")&&!r.isEqual(this.savedValue.autoPaymentSource,this.get("autoPaymentSource")),n||t||e},e.prototype.prepareBillerCode=function(){if(this._originalBillerCode=this.get("billerCode"),r.isObject(this._originalBillerCode))return console.debug("Convert billerCode to string"),this.set("billerCode",this._originalBillerCode.id)},e.prototype.restoreBillerCode=function(){return r.isObject(this._originalBillerCode)&&(console.debug("Restore billerCode to object"),this.set("billerCode",this._originalBillerCode)),delete this._originalBillerCode},e.prototype.save=function(){var t,n;return this.prepareBillerCode(),(t=e.__super__.save.apply(this,arguments)).always((n=this,function(){return n.restoreBillerCode()})),t},e.prototype.viewContext=function(){return r.extend(e.__super__.viewContext.apply(this,arguments),{fields:this.fields.viewContext(),info:this.info})},e}(s),_.InvoiceSubscriptions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=_.InvoiceSubscription,e.prototype.url=b.API_URL+"/invoice-subscriptions",e.prototype.exists=function(t){return this.any((function(e){return r.isEqual(t,e.getInvoiceFootprint())}))},e.prototype.getSubscriptionByInvoice=function(t){return this.find((function(e){return r.isEqual(t,e.getInvoiceFootprint())}))},e.prototype.getUnpaidCount=function(){return this.models.reduce((function(t,e){return t+e.get("unpaidTotalCount")}),0)},e.prototype.search=function(t){var e,n;return n=new RegExp(RegExp.escape(t),"i"),e=this.filter((function(t){return n.test(t.get("name"))})),new this.constructor(e)},e.prototype.fetch=function(){return this.reset(),e.__super__.fetch.apply(this,arguments)},e}(m),_.SubscriptionInvoices=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){return b.API_URL+"/invoice-subscriptions/"+this.id+"/invoice-payments"},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),this.id=n.id,!this.id)throw new Error("Missing subscription id")},e}(n),_}.call(n,o,n,e))||(e.exports=s)}).call(this,o(379),o(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(394),i=n(392).AppCache;!function(t){t.DEFAULT="default",t.CREATE="create",t.EDIT="edit",t.PAYMENT_CART="paymentCart",t.UNSUPPORTED="unsupported"}(e.StrategyType||(e.StrategyType={}));var r=function(){function t(){}return t.prototype.cleanTemplateCache=function(){i.reset(i.KEYS.PAYMENT_TEMPLATES,i.KEYS.RECURRENT_PAYMENTS,i.KEYS.THRESHOLD_PAYMENTS)},t.prototype.onSubmitError=function(t){return o.WbGenericFormMixin.onSubmitError.call(this.page,t)},t.prototype.getValidationOptions=function(){return{}},t.prototype.onRender=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.page.initGenericForm(),this.page.ensureLicense(),!1},t}();e.default=r},,function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A;return T=o(40),C=o(96),B=o(402),k=o(377),n=o(392).AppCache,p=o(378),a=o(415).Checkbox,y=o(387).WbFormMixin,g=o(411).WbServiceMethodsMixin,v=o(416).WbWizard,_=o(394).WbGenericFormMixin,S=o(424).paymentConfirmationDialog,d=o(532).NotificationDialog,l=o(417).HistoryItemService,P=o(397),h=o(414).PaymentServiceMeta,x=o(393),m=x.Template,b=x.getTemplateById,u=o(420),f=o(937).PromptDialog,A=o(380),o(136),(w={}).PaymentPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/payment-page",n.prototype.pageType=A.mainMenuIds.PAYMENTS_TRANSFERS,n.prototype.requiredOptions=["model","formMeta","done"],n.prototype.mixins=[_,g],n.prototype.formSelector=".wb-form",n.prototype.errorMessages=i.extend({},_._errorMessages,{INTERNATIONAL_TRANSFER:t('It`s the international transfer. Please choose the "International transfer" option on the transfer screen and fill in the required fields.'),INVALID_P2P_TRANSFER_CONTRACTS:t("Transfer between selected cards is not available"),NO_SUCH_CARD:t("Card doesn't exist"),CARD_BLOCKED:t("Card blocked"),CARD_EXPIRED:t("Card has expired"),HANDBOOK_LOCKED:t("Maximum number of attempts exceeded. Please try again later"),RESOURCE_LOCKED:t("Maximum number of attempts exceeded. Please try again later"),INVALID_OPERATION_AMOUNT:t("Invalid operation amount"),DEPOSIT_MIN_AMOUNT_NOT_REACHED:t("Minimum deposit amount is not reached"),DEPOSIT_MAX_AMOUNT_EXCEEDED:t("Maximum deposit amount is exceeded"),DEPOSIT_TOPUP_NOT_ALLOWED:t("Deposit topup is not allowed"),DEPOSIT_MIN_TOPUP_NOT_REACHED:t("Minimum deposit topup amount is not reached"),DEPOSIT_MAX_TOPUP_EXCEEDED:t("Maximum deposit topup amount is exceeded"),DEPOSIT_WITHDRAWAL_NOT_ALLOWED:t("Deposit withdrawal is not allowed")}),n.prototype.events={"click .create-payment-template-link":"redirectToCreatePaymentTemplatePage","click .create-recurrent-template-link":"redirectToCreateRecurrentPaymentPage","click .create-threshold-template-link":"redirectToCreateThresholdPaymentPage"},n.prototype.newBeneficiaryAllowed=!0,n.prototype.initialize=function(){var t;return n.__super__.initialize.apply(this,arguments),this.canAddExternalCard=this.canPayWithExternalCard=window.OW.features.PAYMENTS_FOREIGN,this.formMeta=this.options.formMeta,this.formMeta.isLicenseAccepted=i.isUndefined(this.formMeta.isLicenseAccepted)?"true"===(null!=(t=this.options.urlParams)?t.licenseAccepted:void 0):this.formMeta.isLicenseAccepted,this.templateModel=this.options.templateModel},n.prototype.getTitle=function(){return this.formMeta.get("name")},n.prototype.ensureLicense=function(){var t;if(this.formMeta.has("license"))return this.licenseCheckbox=new a({el:this.$(".license-block"),name:"license",className:"licenseAgreement",label:this.formMeta.get("license"),onChange:(t=this,function(e){return t.formMeta.isLicenseAccepted=e}),checked:this.formMeta.isLicenseAccepted}),this.licenseCheckbox.show()},n.prototype.getBonusPaymentCheckboxLabel=function(){return t("Pay with bonuses")},n.prototype.initBonusPaymentCheckbox=function(){var t,e,n,o;if(this.allowBonusPayment=window.OW.features.BONUS_PAYMENT&&this.formMeta.get("allowBonusPayment")&&(e=this.formMeta.getSourceField()),this.allowBonusPayment)return o=this,n=function(){var t,e;if(t=!!((e=o.model.getSource())&&e.areBonusesSupported()&&e.hasBonuses()),o.$(".bonus-payment-block").toggle(t),!t)return o.model.set("bonusPayment",!1)},new a({el:this.$(".bonus-payment-block"),model:this.model,name:"bonusPayment",label:this.getBonusPaymentCheckboxLabel(),checked:"true"===(null!=(t=this.options.urlParams)?t.bonusPayment:void 0)}).show({hidden:!0}).then(function(t){return function(){return t.model.on("change:"+e.get("attr"),(function(){return n()})),n()}}(this))},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),this.initGenericForm(),this.ensureLicense(),this.once("form.ready",(t=this,function(){var e;if(t.initBonusPaymentCheckbox(),t.showMissingMandatoryFieldsWarning(),!1===t.formMeta.get("active")&&t.$(":input").each((function(){var t;if((t=r(this)).prop("disabled",!0),t.is("select"))return t.trigger("chosen:updated")})),e=t.formMeta.getSourceField())return t.listenTo(t.model,"change:"+e.get("attr"),(function(){return t.onContractChange()})),t.onContractChange()})),this.$(".page-content").toggleClass("inactive",!1===this.formMeta.get("active")),!1},n.prototype.onContractChange=function(){var t,e;if((e=this.model.getSource())instanceof u)return t=!(!e||!0===e.get("card.isForeign")),this.$(".create-recurrent-template-link").toggle(t)},n.prototype.showFormLoadingIndicator=function(){return this.$formLoader||(this.$formLoader=r('<div class="wb-spinner-wrapper"></div>').append(window.app.getLoadingIndicator())),this.$el.append(this.$formLoader)},n.prototype.hideFormLoadingIndicator=function(){if(this.$formLoader)return this.$formLoader.detach()},n.prototype.redirectToCreateObjectPage=function(t,e){var n;if(t.preventDefault(),!this.formMeta.get("allowInternational")||this.formIsValid())return this.model.ensureBeneficiary().then((n=this,function(){var t,o;return n.updateUrl(),o=new s((new s).fragment()),t=e+"/"+n.formMeta.get("id")+"/create",window.app.router.navigate(t+"?"+o.query(),{trigger:!0})}))},n.prototype.redirectToCreatePaymentTemplatePage=function(t){return this.redirectToCreateObjectPage(t,"paymentTemplates")},n.prototype.redirectToCreateRecurrentPaymentPage=function(t){return this.redirectToCreateObjectPage(t,"recurrentPayments")},n.prototype.redirectToCreateThresholdPaymentPage=function(t){return this.redirectToCreateObjectPage(t,"thresholdPayments")},n.prototype.onSubmitError=function(e){var n,o,r,a,c,u,l,d,p,h,f,m,y,g,v,w,b,B,C;if(a=(g=k.parseResponseSafe(e))._error,400===e.status)return(f=g.respText)||(f=a&&this.errorMessageFor(a)),this.showError(f||this.defaultErrorMessage),!0;if(412===e.status&&"INVITATION_NOT_SENT"===(null!=a?a.code:void 0))return this.model.response=g,this.done({model:this.model}),!0;if(412===e.status&&"INVALID_TRANSFER_REFERENCE"===(null!=a?a.code:void 0))return this.showError(this.getInvalidTransferErrorMessage(g)),!0;if(412===e.status&&"MISSING_FIELDS"===(null!=a?a.code:void 0)){for(h=[],l=0,d=(y=g.fields).length;l<d;l++)c=y[l],(u=this.formMeta.getByAttrPath(c.id))?(r=u.getEmptyMessage(),"P2P_BY_PHONE"===this.formMeta.id&&(v=u.get("addData.SERVICE_SEND_TO_FRIEND"))&&(this.updateUrl(),n=new s,o=new s(n.fragment()),w=i.indexOf(o.segment(),this.formMeta.id),o.segment(w,v),m=s.parseQuery(o.search()),o.search(i.extend(i.omit(m,"DESTINATION"),{CONTACT_TO_PHONE:m.DESTINATION})),n.fragment(o),b=n.valueOf(),r+=" "+t('You can send money by service <a href="%(serviceUrl)s">Send to friend</a>.',{serviceUrl:b})),B=u.id,!u.get("visible")&&u.hasParameterReferences()&&(B=u.getParameterReferences()[0].value),this.validator.findByName(B).length?((C={})[B]=r,this.validator.showErrors(C)):window.app.showErrorMessage(r)):((p=c.message)||(p=t("Field %(fieldId)s is missing",{fieldId:c.id})),h.push(p));return h.length&&this.showError(h),!0}return _.onSubmitError.apply(this,arguments)},n.prototype.getInvalidTransferErrorMessage=function(e){var n;return(n=e._maxFailQuantity-e._failQuantity)>0?t("Entered reference number is invalid. Tries left: %(triesLeft)s",{triesLeft:n}):t("Exceeded number of attempts to enter valid reference number. Please contact the bank to receive money transfer.")},n.prototype.updateModelFromUrl=function(){return window.OW.features.BONUS_PAYMENT&&s.parseQuery(new s((new s).fragment()).search()).bonusPayment&&this.model.set("bonusPayment",!0),_.updateModelFromUrl.apply(this,arguments)},n.prototype.context=function(){var t;return t=i.extend(n.__super__.context.apply(this,arguments),this.formMeta.viewContext()),this.templateModel&&(t.template=this.templateModel.viewContext()),t.allowInternational=!0===t.allowInternational&&window.OW.features.BENEFICIARY_CLIENT,t},n.prototype.beforeSubmit=function(){return this.model.setExternalCardProperties()},n.prototype.submit=function(){return!this.isZeroAmountAllowed()&&this.isZeroAmount()?(window.app.showErrorMessage(t("Unable to execute payment with zero amount")),void(this.processing=!1)):this.balanceEnoughConfirmation().then((e=this,function(){return y.submit.apply(e,arguments)})).fail(function(t){return function(){return t.processing=!1}}(this));var e},n.prototype.submitAction=function(){return this.$(".error-message-container").hide(),this.model.preparePayment(null,{error:function(t,e){return e.errorHandled=!0}})},n.prototype.onSubmitSuccess=function(){return this.updateUrl(this.templateModel?{templateId:this.templateModel.id}:void 0),this.showPaymentConfirmation()},n.prototype.showPaymentConfirmation=function(){var t;return S({payment:this.model,formMeta:this.formMeta,onSuccess:this.done.bind(this),onError:(t=this,function(e){return e.errorHandled=t.onSubmitError(e)})}).show()},n.prototype.handbookLockedHandler=function(){return _.handbookLockedHandler.apply(this,arguments).then((t=this,function(){return t.$(".service-actions").hide()}));var t},n.prototype.toggleSubmit=function(){if(this.formMeta.get("active"))return _.toggleSubmit.apply(this,arguments)},n}(p),w.Payment3DProcessingPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/payment-3d-processing-page",n.prototype.pageType=A.mainMenuIds.PAYMENTS_TRANSFERS,n.prototype.requiredOptions=["model","formMeta","done","egwWindow"],n.prototype.errorMessages={NO_SUCH_CARD:t("Card doesn't exist"),CARD_BLOCKED:t("Card blocked"),CARD_EXPIRED:t("Card has expired")},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return t.showLoadingIndicator(),t.egwWindow.location=t.model.getContinuationUrl(),r(window).on("message.3d",t.onEgwResponse.bind(t))}));var t},n.prototype.onSubmitError=function(){return this.egwWindow&&(this.egwWindow.close(),this.egwWindow=null),y.onSubmitError.apply(this,arguments)},n.prototype.showUnrecoverableError=function(e){var n;return n=t("Failed to perform operation. Try again later or contact support"),e.respText?n=e.respText:(null!=e?e._error:void 0)&&((n=this.errorMessages[e._error.code])||(n=y.errorMessageFor.call(this,e._error)||n)),window.app.showErrorPage({errorText:n})},n.prototype.getEgwOrigin=function(){return T.EGW_URL?new s(T.EGW_URL).origin():window.location.origin},n.prototype.onEgwResponse=function(e){var n;if(this.egwWindow.close(),this.egwWindow=null,r(window).off("message.3d"),(e.origin||e.originalEvent.origin)!==this.getEgwOrigin())return window.app.showErrorPage();if(n=e.data||e.originalEvent.data,this.egwResponse=JSON.parse(n),this.egwResponse.RC>0)window.app.showErrorPage({errorText:t("Operation has been declined by your bank. Try again later or contact support")});else{if(!(this.egwResponse.RC<0))return this.model.set(this.egwResponse),this.model.setStage(P.STAGES_3D.CONFIRM),this.finalizePayment();"ENROLL"===this.egwResponse.DIAG?window.app.showErrorPage({errorText:t("E-commerce operations are not permitted. Please contact bank office for more information.")}):window.app.showErrorPage({errorText:t("Failed to perform operation. Try again later or contact support")})}},n.prototype.finalizePayment=function(){var t,e;return t=this.model,this.model=new P.PaymentExecution(null,{executionId:t.executionId,service:this.formMeta}),t.save().then((e=this,function(){return e.model.save()})).then(function(t){return function(){return t.done(t.model)}}(this)).fail(function(t){return function(e){return t.showUnrecoverableError(k.parseResponseSafe(e))}}(this))},n}(p),w.PaymentCompletePage=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return c(r,e),r.prototype.template="payments/payment-complete-page",r.prototype.pageType=A.mainMenuIds.PAYMENTS_TRANSFERS,r.prototype.afterCardSaved=!1,r.prototype.afterTemplateCreated=!1,r.prototype.mixins=[g],r.prototype.events={"click .show-details-link":"showDetails","click .save-card-link":"showSaveExternalCardForm","click .create-payment-template-link":"showSaveTemplateForm","click .create-recurrent-payment-link":"redirectToCreateRecurrentPaymentPage","click .create-threshold-payment-link":"redirectToCreateThresholdPaymentPage"},r.prototype.onRender=function(){return this.$(".hide-details-link").hide(),B.applyMasks(this.$el),r.__super__.onRender.apply(this,arguments)},r.prototype.getTitle=function(){var e;return(e=this.model.service.get("subType"))?"CASH_CODE_REVERSAL"===e?t("Code cancelled"):"GENERATED_CODE"===e?t("Operation successful"):void 0:t("Payment successful")},r.prototype.onTemplateSave=function(t){var e,o,i;return o=new m({serviceId:this.model.service.id,name:t}),delete(e=this.model.toJSON()).confirmation,delete e.executionId,o.set("payment",e),o.set("payment.SCHEME_ID",this.options.formMeta.get("sid")),o.save().then((i=this,function(){return n.reset(n.KEYS.PAYMENT_TEMPLATES),i.afterTemplateCreated=!0,i.templateModel=o,i.render()})).always((function(){return window.app.hideLoadingIndicator()}))},r.prototype.showSaveTemplateForm=function(t){return t.preventDefault(),window.app.showLoadingIndicator(),n.get(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS).then((e=this,function(){return e.templates=arguments[0],e.rPayments=arguments[1],e.thPayments=arguments[2],window.app.getUniqueTemplateName(e.model.service.get("name")).then((function(t){return window.app.hideLoadingIndicator(),e.showInlineEditField(e.$(".template-name-edit-panel"),e.onTemplateSave.bind(e),null,t,{uniqueTemplateName:[!0,e.templates,e.rPayments,e.thPayments]})}))}));var e},r.prototype.showSaveExternalCardForm=function(e){var n;return e.preventDefault(),new f({required:!1,title:t("Save external card"),message:t("Card name"),onProceed:(n=this,function(e){var o;return o={paymentId:n.options.paymentExecutionModel.id},e.value&&(o.name=e.value),new P.ExternalCard(o).save().then((function(){return n.afterCardSaved=!0,n.render()})).fail((function(){return window.app.showErrorPage({errorText:t("Failed to perform operation. Try again later or contact support")})}))})}).show()},r.prototype.redirectToCreateRecurrentPaymentPage=function(t){var e;return t.preventDefault(),e=this.urlSearchFromModel(),window.app.router.navigate("recurrentPayments/"+this.options.formMeta.get("id")+"/create?"+e.query(),{trigger:!0})},r.prototype.redirectToCreateThresholdPaymentPage=function(t){var e;return t.preventDefault(),e=this.urlSearchFromModel(),window.app.router.navigate("thresholdPayments/"+this.options.formMeta.get("id")+"/create?"+e.query(),{trigger:!0})},r.prototype.showDetails=function(t){var e;return t.preventDefault(),e=o(437),new(window.OW.features.TRANSACTION_PIECHART?e.CategorySrnOperationDetailsDialog:e.SrnOperationDetailsDialog)({itemId:this.options.paymentExecutionModel.get("srn")}).show()},r.prototype.urlSearchFromModel=function(t){var e,n,o,i;for(t=new s(""),n=0,o=(i=this.options.formMeta.fields.toJSON()).length;n<o;n++)"securityCode"!==(e=i[n].attr)&&"number"!==e&&this.model.get(e)&&t.addSearch(e,this.model.get(e));return t},r.prototype.context=function(){var t,e,n,o,s,a,c,u,l,d,p,h,f,m,y,_,g;return _=this.model.service.viewContext(),a=this.model.getSource(),e=this.model.isExternalCard&&!a&&!this.afterCardSaved,n=!this.options.templateId&&_.allowTemplate&&(a||this.afterCardSaved),t=!this.options.templateId&&_.allowPeriodic&&!this.model.isExternalCard,o=!this.options.templateId&&_.allowThreshold&&!this.model.isExternalCard,s=i.extend(r.__super__.context.apply(this,arguments),{service:_,afterTemplateCreated:this.afterTemplateCreated,afterCardSaved:this.afterCardSaved,template:null!=(c=this.templateModel)?c.viewContext():void 0,imagePath:T.IMAGE_PATH,showEditPanel:n,allowSaveCard:e,allowTemplate:n,allowPeriodic:t,allowThreshold:o,paymentsMenuLink:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS")}),(g=this.model.service.get("subType"))&&(s.serviceSubType=g),s.message=this.options.paymentExecutionModel.get("message"),s.reference=this.options.paymentExecutionModel.get("reference"),y=this.options.paymentExecutionModel.get("referenceLifetime"),s.referenceLifetimeDays=y?C.duration(1*y,"seconds").days():1,s.isSmsNotSent="INVITATION_NOT_SENT"===(null!=(u=this.model)&&null!=(l=u.response)&&null!=(d=l._error)?d.code:void 0)&&"SEND_TO_FRIEND"===s.serviceSubType,s.isSmsNotSent&&(s.reference=(null!=(p=this.model)&&null!=(h=p.response)?h.reference:void 0)||(null!=(f=this.model)&&null!=(m=f.response)?m.acceptUrl:void 0)),s},r}(p),w.PaymentWizard=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.menuSectionId=A.mainMenuIds.PAYMENTS_TRANSFERS,n.prototype.isEditablePayment=!0,n.prototype.initialize=function(t){var e,n;return this.options=t,this.isEditablePayment=null!=(e=this.options)?e.isEditablePayment:void 0,null==this.isEditablePayment&&(this.isEditablePayment=!0),this.urlParams=(null!=(n=this.options)?n.urlParams:void 0)||s.parseQuery(new s((new s).fragment()).search()),this.serviceAttrs=this.urlParams.serviceAttrs,this.templateId=this.urlParams.templateId},n.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getPaymentRouterOptions();case 1:return this.get3DProcessingRouterOptions();case 2:return this.getCompleteRouterOptions();default:return this.throwStepNotSupported(t)}},n.prototype.showFirstStep=function(){var t,e;return(t=new s((new s).fragment())).removeSearch("confirm"),t.removeSearch("complete"),window.app.router.navigate(t.toString(),{trigger:!1,replace:!0}),this.createPaymentModel().then((e=this,function(){return e.showStep(0)}))},n.prototype.createPaymentModel=function(){var e,n;if(this.options.serviceId)this.formMeta=new h({id:this.options.serviceId,templateId:this.templateId},{serviceAttrs:this.serviceAttrs});else{if(!this.options.operationId)throw new Error("operationId or serviceId should be provided");this.formMeta=new l({id:this.options.operationId,templateId:this.templateId})}return e=this.templateId?b(this.templateId).then((n=this,function(t){return n.templateModel=t})):r.Deferred().resolve(),r.when(this.formMeta.fetchIfEmpty(),e).done(function(t){return function(){return t.templateId&&!t.templateModel&&delete t.templateId,t.model=new P.ServicePayment(t.formMeta.getModelDefaults(),{service:t.formMeta,serviceId:t.options.serviceId,templateId:t.templateId})}}(this)).fail((function(e){var n;if("SERVICE_UNAVAILABLE"===(null!=(n=k.parseResponseSafe(e)._error)?n.code:void 0))return e.errorHandled=!0,new d({title:t("Attention"),text:t("This payment service is no longer available and could not be repeated."),onProceed:function(){return window.app.router.goBack()}}).show()}))},n.prototype.restorePaymentFromCache=function(){var t;return t=window.app.data.cachedPayment,this.model=t.model,this.formMeta=t.formMeta,this.templateId=t.templateId,this.continuationModel=t.continuationModel,this.egwWindow=t.egwWindow},n.prototype.onPaymentExecuted=function(t){var e;return this.continuationModel=t,(e=new s((new s).fragment())).search("complete"),this.templateId&&e.addSearch("templateId",this.templateId),window.app.router.navigate(e.toString(),{trigger:!1}),window.app.data.cachedPayment={formMeta:this.formMeta,model:this.model,templateId:this.templateId,continuationModel:this.continuationModel},this.showStep(2)},n.prototype.getPaymentRouterOptions=function(){return[w.PaymentPage,{urlParams:this.urlParams,formMeta:this.formMeta,model:this.model,templateModel:this.templateModel,done:(t=this,function(e){var n;return t.model.isExternalCard?((n=new s((new s).fragment())).addSearch("processing",null),window.app.router.navigate(n.toString(),{trigger:!1}),t.continuationModel=e.model,t.egwWindow=e.egwWindow,t.showNextStep()):t.onPaymentExecuted(e.model)})}];var t},n.prototype.get3DProcessingRouterOptions=function(){return[w.Payment3DProcessingPage,{formMeta:this.formMeta,model:this.continuationModel,templateId:this.templateId,egwWindow:this.egwWindow,done:this.onPaymentExecuted.bind(this)}]},n.prototype.getCompleteRouterOptions=function(){return window.app.trigger("change:contracts"),[w.PaymentCompletePage,{formMeta:this.formMeta,model:this.model,templateId:this.templateId,paymentExecutionModel:this.continuationModel}]},n}(v),w.paymentWizard=function(t,e,n){var o,r;return o=s.parseQuery(new s((new s).fragment()).search()),i.has(o,"complete")&&window.app.data.cachedPayment?((r=new w.PaymentWizard).restorePaymentFromCache(),r.showStep(2)):(window.app.router.showEmptyPage(w.PaymentWizard.prototype.menuSectionId),new w.PaymentWizard({serviceId:t,operationId:e,urlParams:n}).showFirstStep())},w}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(14),o(379))},function(t,e,n){var o,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;void 0===(o=function(t){var e,o,r,s,a;return a=n(40),e=(s=n(393)).Template,o=s.Templates,(r={}).ThresholdPayment=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.urlRoot=a.API_URL+"/threshold-payment-templates",e}(e),r.ThresholdPayments=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.model=r.ThresholdPayment,e.prototype.url=a.API_URL+"/threshold-payment-templates",e}(o),r}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){var o=n(372);!function(t){t.register("templates/contracts/details-attr",n);var e={attrValueText:l};function n(t,n){return n=n.shiftBlocks(e),t.w("<tr ").x(n.get(["className"],!1),n,{block:o},{}).w('><td class="name">').x(n.get(["label"],!1),n,{else:i,block:r},{}).w('</td><td class="value">').s(n.get(["linkAs"],!1),n,{else:s,block:u},{}).w("</td></tr>")}function o(t,n){return n=n.shiftBlocks(e),t.w('class="').f(n.get(["className"],!1),n,"h").w('"')}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["label_notrans"],!1),n,"h")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["label"],!1),n,"h",["t"])}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["attrValue"],!1),n,{else:a,block:c},{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attrValueText"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.getPath(!0,[]),n,"h").w("://").f(n.get(["value"],!1),n,"h").w('">').b(n.getBlock("attrValueText"),n,{},{}).w("</a>")}function l(t,n){return n=n.shiftBlocks(e),t.x(n.get(["translateValue"],!1),n,{else:d,block:p},{})}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["attrValue"],!1),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:h},{},"h")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["attrValue"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/details-attr",t,e)};i.templateName="templates/contracts/details-attr",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/contracts/cards-list",n);var e={cardItem:d,contractBalance:_,card:v};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__cardlist"><div class="contracts active-cards">').s(n.getPath(!1,["cards","active"]),n,{else:o,block:s},{}).w("</div>").x(n.getPath(!1,["cards","inactive"]),n,{block:a},{}).w("</div>")}function o(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["cards","inactive"]),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="no-data-error">').h("_",n,{block:r},{},"h").w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("No active cards")}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("cardItem"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="toggle-inactive visible">').h("_",n,{},{singular:"Show %(num)s old card",plural:"Show %(num)s old cards",num:c},"h").w('</a><div class="contracts inactive-cards" style="display: none"><a href="#" class="toggle-inactive">').h("_",n,{block:u},{},"h").w("</a>").s(n.getPath(!1,["cards","inactive"]),n,{block:l},{}).w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["additionalCards","inactive","length"]),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.w("Hide old cards")}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("cardItem"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("cardRow"),n,{block:p},{})}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract ').s(n.get(["card"],!1),n,{block:h},{}).w('"><div class="main-info">').s(n.get(["card"],!1),n,{block:m},{}).w('<a class="name" href="#contracts/').f(n.getPath(!0,["id"]),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</a>").nx(n.getPath(!1,["card","isMultiCurrency"]),n,{block:y},{}).w("</div></div>")}function h(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isActive"],!1),n,{block:f},{})}function f(t,n){return n=n.shiftBlocks(e),t.w("inactive-card")}function m(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card"),n,{},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<span class="balance">').b(n.getBlock("contractBalance"),n,{},{}).w("</span>")}function _(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["balances","available"]),n,{block:g},{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["money","s"])}function v(t,n){return n=n.shiftBlocks(e),t.w('<div title="').f(n.get(["name"],!1),n,"h").w('" class="card status-').f(n.get(["status"],!1),n,"h").w(" color-").f(n.get(["wbProductColor"],!1),n,"h").w(" ").x(n.get(["isVirtual"],!1),n,{else:w,block:b},{}).w('"><span class="card-number">').f(n.get(["number"],!1),n,"h",["cardNumberMask"]).w("</span></div>")}function w(t,n){return n=n.shiftBlocks(e),t.w("icon-").f(n.get(["paymentSystem"],!1),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.w("icon-virtual")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/cards-list",t,e)};i.templateName="templates/contracts/cards-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper cardNumber"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container"><input type="text" name="number" class="cardNumber" data-mask="cardNumber"  placeholder="').h("_",e,{block:o},{},"h").w('" required /></div></div><div class="field-wrapper embossedName"><div class="field-caption">').h("_",e,{block:i},{},"h").w('</div><div class="control-container"><input type="text" name="embossedName" placeholder="').h("_",e,{block:r},{},"h").w('" required maxlength="255"/></div></div><div class="field-wrapper security"><div class="field-caption">').h("_",e,{block:s},{},"h").w('</div><div class="control-container"><input type="text" name="expiryDate" class="expiryDate" data-mask="expiryDate" placeholder="').h("_",e,{block:a},{},"h").w('" required /></div><div class="field-caption">').h("_",e,{block:c},{},"h").w('</div><div class="control-container"><input type="password" name="securityCode" minlength="3" maxlength="5" required /></div></div>')}function n(t,e){return t.w("Card number")}function o(t,e){return t.w("e.g. 4242424242424242")}function i(t,e){return t.w("Embossed name")}function r(t,e){return t.w("e.g. IVAN IVANOV")}function s(t,e){return t.w("Expires")}function a(t,e){return t.w("MM/YY")}function c(t,e){return t.w("Security code")}t.register("templates/contracts/external-card-form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/external-card-form",t,e)};i.templateName="templates/contracts/external-card-form",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["operationDescription"],!1),e,{block:n},{})}function n(t,e){return t.h("select",e,{block:o},{key:u},"h")}function o(t,e){return t.h("eq",e,{block:i},{value:"plain"},"h").h("eq",e,{block:r},{value:"servicePlain"},"h").h("eq",e,{block:s},{value:"transfer"},"h").h("eq",e,{block:a},{value:"payment"},"h").h("eq",e,{block:c},{value:"mobileTopUp"},"h").b(e.getBlock("customTypes"),e,{},{})}function i(t,e){return t.f(e.get(["text"],!1),e,"h")}function r(t,e){return t.f(e.get(["text"],!1),e,"h")}function s(t,e){return t.f(e.get(["service"],!1),e,"h").w(" ").f(e.get(["destination"],!1),e,"h")}function a(t,e){return t.f(e.get(["text"],!1),e,"h")}function c(t,e){return t.f(e.get(["service"],!1),e,"h").w('&nbsp;<span data-mask="').f(e.getPath(!1,["phoneNumber","mask"]),e,"h").w('">').f(e.getPath(!1,["phoneNumber","value"]),e,"h").w("</span>")}function u(t,e){return t.f(e.get(["type"],!1),e,"h")}t.register("templates/history/operation-description",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/operation-description",t,e)};i.templateName="templates/history/operation-description",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.f(e.get(["firstName"],!1),e,"h").w(" ").f(e.get(["lastName"],!1),e,"h").w(" (").f(e.get(["cardNumber"],!1),e,"h").w(")")}t.register("templates/partials/beneficiary-title",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/beneficiary-title",t,e)};i.templateName="templates/partials/beneficiary-title",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.nx(e.get(["existingBeneficiary"],!1),e,{block:n},{}).w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:i},{},"h").w('</div><div class="control-container"><input type="text" name="beneficiary.firstName" required maxlength="255"/></div></div><div class="field-wrapper"><div class="field-caption">').h("_",e,{block:r},{},"h").w('</div><div class="control-container"><input type="text" name="beneficiary.lastName" class="lastName" required maxlength="255"/></div></div>').b(e.getBlock("extraFields"),e,{},{})}function n(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:o},{},"h").w('</div><div class="control-container"><input type="text" name="beneficiary.cardNumber" class="cardNumber" required/></div></div>')}function o(t,e){return t.w("Card number")}function i(t,e){return t.w("First name")}function r(t,e){return t.w("Last name")}t.register("templates/payments/beneficiary-info",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/beneficiary-info",t,e)};i.templateName="templates/payments/beneficiary-info",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/payments/tiles/payments-menu-item",n);var e={link:G,icon:et};function n(t,n){return n=n.shiftBlocks(e),t.x(n.get(["service"],!1),n,{else:o,block:E},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["items"]),n,{else:i,block:S},{})}function i(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["options","invoiceCode"]),n,{block:r},{}).x(n.get(["nativeCode"],!1),n,{block:l},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:s},{href:a,icon:c,name:u})}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/#invoices/").f(n.getPath(!1,["options","invoiceCode"]),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["options","invoiceCode"]),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:d},{key:C},"h")}function d(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:p},{value:"INTRA_CARD_TRANSFER"},"h").h("eq",n,{block:y},{value:"INTRA_BANK_TRANSFER"},"h").h("eq",n,{block:w},{value:"RETRIEVE_MONEY_TRANSFER"},"h")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{href:"#intracard-transfer",icon:f,name:m})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:_},{href:"#intrabank-transfer",icon:g,name:v})}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:b},{href:"#retrieve-money",icon:k,name:B})}function b(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function k(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function C(t,n){return n=n.shiftBlocks(e),t.f(n.get(["nativeCode"],!1),n,"h")}function S(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:P},{href:x,icon:T,name:A})}function P(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function x(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/#payments/").f(n.get(["id"],!1),n,"h")}function T(t,n){return n=n.shiftBlocks(e),t.f(n.get(["id"],!1),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function E(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowRest"],!1),n,{else:M,block:D},{})}function M(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:I},{href:N,icon:R,name:O})}function I(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function N(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/services/").f(n.getPath(!1,["service","id"]),n,"h")}function R(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function O(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function D(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["attrs","serviceAttrs"]),n,{else:F,block:W},{})}function F(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:L},{href:V,icon:U,name:$})}function L(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function V(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/#payment/").f(n.getPath(!1,["service","id"]),n,"h")}function U(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function $(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function W(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:H},{href:z,icon:Y,name:q})}function H(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/#payment/").f(n.getPath(!1,["service","id"]),n,"h").w("?serviceAttrs=").f(n.getPath(!1,["attrs","serviceAttrs"]),n,"h")}function Y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","id"]),n,"h")}function q(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function G(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("item-link"),n,{block:j},{})}function j(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["href"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('" class="has-icon" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="outer">').x(n.getPath(!1,["options","icon"]),n,{else:K,block:J},{}).w('</div><div class="menu-item-name"><span>').f(n.get(["name"],!1),n,"h").w("</span></div></a>")}function K(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:X},{iconLink:Q})}function X(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("icon"),n,{},{})}function Q(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/tiles/services/").f(n.get(["icon"],!1),n,"h").w(".png")}function J(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Z},{iconLink:tt})}function Z(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("icon"),n,{},{})}function tt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["options","icon"]),n,"h")}function et(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("item-icon"),n,{block:nt},{})}function nt(t,n){return n=n.shiftBlocks(e),t.w('<img alt="').f(n.get(["name"],!1),n,"h").w('" />')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/payments-menu-item",t,e)};i.templateName="templates/payments/tiles/payments-menu-item",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="limiter-title ').x(e.get(["isGroup"],!1),e,{else:n,block:i},{}).w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</div>")}function n(t,e){return t.x(e.get(["parent"],!1),e,{block:o},{})}function o(t,e){return t.w("limiter-child-title")}function i(t,e){return t.w("limiter-group-title")}t.register("templates/security/limiter-title",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/limiter-title",t,e)};i.templateName="templates/security/limiter-title",t.exports=i},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a;return a=n(40),e=n(375).BaseModel,i=n(784).CountriesList,(s={}).ContactInfoCountries=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=a.API_URL+"/user/contact/countries",e}(i),s.ContactInfo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=a.API_URL+"/user/contact",e.prototype.isNew=function(){return!1},e.prototype.toJSON=function(){var t;return t=e.__super__.toJSON.apply(this,arguments),o.omit(t,["_status","_error"])},e}(e),s}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){return{},{ConfirmActionDialog:function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.id="confirm-action-dialog",n.prototype.template="common/simple-dialog",n.prototype.allowImplicitClose=!1,n.prototype.requiredOptions=["actionText","onConfirm"],n.prototype.getCancelButtonText=function(){return this.options.cancelButtonText?this.options.cancelButtonText:t("Cancel")},n.prototype.getConfirmButtonText=function(){return this.options.confirmButtonText?this.options.confirmButtonText:t("OK")},n.prototype.dialogOptions=function(){return{buttons:[{text:this.getCancelButtonText(),class:"link-button cancel",click:(t=this,function(e){if(!t.processing)return t.options.onCancel&&t.options.onCancel(),t.close()})},{text:this.getConfirmButtonText(),class:"wb-button proceed",click:function(t){return function(e){if(!t.processing)return t.processing=!0,t.showLoadingIndicator(),i.when(t.onConfirm()).then((function(){return t.processing=!1,t.hideLoadingIndicator(),t.close()}))}}(this)}]};var t},n.prototype.context=function(){return r.extend(n.__super__.context.apply(this,arguments),{dialogText:this.actionText})},n}(o(386))}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(e){var i,r,s,a,c,u,l,d=function(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},p={}.hasOwnProperty;r=(c=o(375)).BaseModel,i=c.BaseCollection,a=o(398).FormMeta,s=o(395).Contracts,u=o(40),l=o(573),n.CertificateTypes=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.url=u.API_URL+"/income-certificates/types",e}(i),n.Certificate=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.urlRoot=u.API_URL+"/income-certificates",e.prototype.hasPdfFile=function(){return"complete"===this.get("status")&&!this.get("isExpired")},e}(r),n.CertificateFormMetaDescription=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return d(o,n),o.prototype.url=function(){return u.API_URL+"/income-certificates/meta?type="+this.get("type")},o.prototype.getContractsUrl=function(t){var n;return n=new s(null,{urlQuery:"?"+t}),"/"+new e(n.url()).relativeTo(u.API_URL+"/").toString()},o.prototype.getAccountField=function(){return{id:"account",name:t("By account"),dataSource:{type:"contracts",url:this.getContractsUrl(this.get("account.query")),allowEntry:!1},visible:!0,editable:!0,optional:!1}},o.prototype.getDateRangeField=function(){return{id:"date_range",name:t("Date from, to"),components:[{id:"from",name:t("Date from"),inputType:"DATE",role:"date.from",visible:!0,editable:!0,optional:!1,htmlAttrs:{"data-datebox-format":"%d %b %Y"}},{id:"to",name:t("Date to"),inputType:"DATE",role:"date.to",visible:!0,editable:!0,optional:!1,htmlAttrs:{"data-datebox-format":"%d %b %Y"}}],inputType:"dateRange",role:"group"}},o.prototype.getLanguageField=function(){return{id:"language",name:t("Language"),dataSource:{type:"catalog",values:this.get("languages"),allowEntry:!1},visible:!0,editable:!0,optional:!1}},o.prototype.getFeeField=function(){return{id:"fee",editable:!1,value:t("The certificate will be ready within 3 days and will be available in the “History” section.\n<br />\nFee for the production of certificates - %(fee)s",{fee:l.money(this.get("fee"))})}},o.prototype.getRemitterField=function(){return{id:"remitter",name:t("Source"),dataSource:{type:"contracts",url:this.getContractsUrl(this.get("remitter.query")),allowEntry:!1},visible:!0,editable:!0,optional:!1}},o.prototype.getEmailFields=function(){return[{id:"sendToEmail",role:"checkbox",value:!1,additionalTitle:{active:t("Send certificate to email"),inactive:t("Send certificate to email")},converterMapping:{true:"active",false:"inactive"}},{id:"email",name:t("Email"),input:"text",inputType:"email",optional:!1,visibilityCondition:{parameters:["sendToEmail"],expression:"values.sendToEmail"}}]},o.prototype.toFormMeta=function(){var t;return t=[],this.get("account")&&t.push(this.getAccountField()),this.get("byPeriod")&&t.push(this.getDateRangeField()),this.get("languages")&&t.push(this.getLanguageField()),this.get("email")&&(t=t.concat(this.getEmailFields())),this.get("fee")&&t.push(this.getFeeField()),this.get("remitter")&&t.push(this.getRemitterField()),new a({fields:t})},o}(r)}).call(this,o(379))},function(e,n,o){(function(i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u,l,d,p,h,f,m,y;return f=o(96),y=o(40),h=o(494).ServiceRequest,l=(m=o(417)).History,d=m.HistoryQuery,u=o(375).BaseModel,p={Waiting:t("Waiting"),Posted:t("Posted"),Suspended:t("Suspended"),Rejected:t("Rejected"),Declined:t("Declined"),Expired:t("Expired")},n={INCOME_CERTIFICATE:"INCOME_CERTIFICATE",CP_SERVICE:"CP_SERVICE",CARD_ORDER:"CARD_ORDER"},r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.preventAuthStart=!1,e.prototype.url=function(){return y.API_URL+"/applications/"+this.service.id},e}(h),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.urlRoot=y.API_URL+"/application-history",e.prototype.defaults={from:f().subtract(1,"year").add(1,"day").toDate(),to:f().toDate(),period:"",textSearch:""},e}(d),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.urlRoot=y.API_URL+"/application-history",e.prototype.url=function(){return this.urlRoot+"/"+this.id},e.prototype.getDescription=function(){return this.get("description")},e.prototype.matchesTextSearch=function(t){var e;return!!(e=this.getDescription())&&new RegExp(""+t,"gi").test(e)},e.prototype.getServiceDetails=function(){var t;return(t=this.get("service.fields"))?t.map((function(t){return{name:t.name,value:t.value,mask:t.inputType,rawMask:t.mask}})):[]},e.prototype.viewContext=function(){return i.extend(e.__super__.viewContext.apply(this,arguments),{description:this.getDescription(),statusName:p[this.get("postingStatus")],serviceDetails:this.getServiceDetails()})},e}(u),{Application:r,ApplicationHistory:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=a,e.prototype.queryClass=c,e}(l),ApplicationHistoryItem:a,APPLICATION_HISTORY_ITEM_TYPES:n}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){(function(o){var i;void 0===(i=function(t){var e;return n(396),e=n(535),o.widget("wb.searchCompact",e,{cssClass:"search-input search-compact",options:{expandOnSearch:!0},_create:function(){return this._superApply(arguments),this.element.on("change",(t=this,function(e){if(t.options.expandOnSearch)return t.element.parent().toggleClass("expanded",!!t.element.val())}));var t}})}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(386),r=n(387),s=n(381),a=n(135),c=n(528),u=n(529),l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.preinitialize=function(){this.addAuthDialog=this},n.prototype.onRender=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.initForm(),e.prototype.onRender.apply(this,o.__spread(t))},n.prototype.onSubmitSuccess=function(){this.options.onSubmitSuccess()},n.prototype.showFormLoadingIndicator=function(){this.applyLoadingStateToButton(this._getButton(".proceed"))},n.prototype.dialogOptions=function(){return{title:a.t("Confirmation"),classes:{"ui-dialog":"add-auth-dialog "+this.id},closeOnEscape:!1,buttons:[this.cancelButtonOptions(),this.proceedButtonOptions()]}},n.prototype.proceedButtonOptions=function(){var t=this;return{text:a.t("Proceed"),class:"wb-button proceed",click:function(){t.processing||t.handleProceedButtonClick()}}},n.prototype.cancelButtonOptions=function(){var t=this;return{text:a.t("Cancel"),class:"link-button cancel",click:function(){t.processing||t.handleCancelButtonClick()}}},n.prototype.handleCancelButtonClick=function(){this.resetModel(),this.close()},n.prototype.handleProceedButtonClick=function(){this.$form.submit()},n.prototype.handleAddAuth=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this.processing=!1,[4,this.render()];case 1:return e.sent(),this.model.get("confirmation.challenge")?(this.addAuthInputView=new u({el:this.$(".control-container"),model:this.model,onOtpResend:function(){t.proceedAction({requestOtpResend:!0})}}),this.addAuthInputView.show()):(this.$(".add-auth-select").removeClass("hidden"),this.addAuthSelectorView=new c({el:this.$(".select-wrapper"),model:this.model}),this.addAuthSelectorView.show()),[2]}}))}))},n.prototype.showError=function(e){var n=this,o=this.$(".error-message");o.length||(o=t('<div class="error-message hidden"></div>'),this.$(".field-wrapper").after(o)),o.text(e).slideDown((function(){n.$el.one("focus",":input",(function(){o.slideUp()}))}))},n.prototype.proceedAction=function(t){this.processing||(this.processing=!0,this.showLoadingIndicator(),this.applyLoadingStateToButton(this._getButton(".proceed")),this.submit(t))},n.prototype.resetModel=function(){this.model.unset("confirmation"),this.model.unset("_status"),this.model.unset("_error")},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),this.model.get("confirmation"))},n=o.__decorate([s.mixins([r.WbFormMixin]),s.template("common/add-auth-without-form-dialog")],n)}(i);e.AddAuthWithoutFormDialogView=l}).call(this,n(14))},,,,,,,,,,function(t,e,n){(function(o){var i;void 0===(i=function(t){var e,i;return i=n(1061),e={SMS:"PHONEALL"},o.extend(i,{CHANNELS_MASKS:e})}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e;return e=n(40),n(808),n(391),{PaymentItemsListView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/tiles/payment-items-list",n.prototype.limit=5,n.prototype.expanded=!1,n.prototype.hideIfEmpty=!0,n.prototype.events={"click .toggle-link":"toggleList"},n.prototype.initialize=function(){if("payments/payment-items-list"===this.template)throw new Error("Abstract payment items list template should be overriden");return n.__super__.initialize.apply(this,arguments)},n.prototype.fetchData=function(){return this.collection.fetchIfEmpty()},n.prototype.show=function(){return this.fetchData().done((t=this,function(){if(!t.collection)throw new Error("Payments items collection is missing");return t.render()}));var t},n.prototype.onRender=function(){return this.initIcons()},n.prototype.initIcons=function(){},n.prototype.toggleList=function(t){return t.preventDefault(),this.expanded=!this.expanded,this.render()},n.prototype.filtersChanged=function(t){return o.has(t,"searchQuery")&&this.searchQuery!==t.searchQuery||o.has(t,"region")&&this.region!==t.region},n.prototype.renderWithFilters=function(t){if(this.filtersChanged(t))return o.has(t,"searchQuery")&&(this.searchQuery=t.searchQuery),o.has(t,"region")&&(this.region=t.region),this.render()},n.prototype.getFilteredCollectionContext=function(){throw new Error("getFilteredCollectionContext is not implemented")},n.prototype.getCollectionContext=function(){return this.searchEnabled()?this.getFilteredCollectionContext():this.collection.viewContext()},n.prototype.getTitle=function(){return""},n.prototype.searchEnabled=function(){return!(!this.searchQuery&&!this.region)},n.prototype.context=function(){var t,n,o;return t=this.getCollectionContext(),n=this.limit&&t.length>this.limit,o=!this.expanded&&n?t.slice(0,this.limit-1):t,{hidden:0===t.length&&this.hideIfEmpty,title:this.getTitle(),collection:o,hasSearch:this.searchEnabled(),expanded:this.expanded,limit:this.limit,limitApplicable:n,contextPath:window.WB.contextPath,imagePath:e.IMAGE_PATH}},n}(n(374).TemplateView)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(11),s=n(135),a=n(400),c=n(40),u=n(377),l=n(397).ServicePayment,d=n(414).PaymentServiceMeta,p=n(459),h=p.InvoicePaymentMeta,f=p.InvoicePayment,m=n(398).FormMeta,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return c.API_URL+"/payment-carts/check-availability"},e}return o.__extends(e,t),e}(i.BaseModel);e.PaymentCartAvailability=y;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(i.BaseModel);e.PaymentCartAvailableItem=_;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=c.API_URL+"/payment-carts/available-items",e.model=_,e}return o.__extends(e,t),e.prototype.getViewContextAsGroups=function(){return r.chain(this.viewContext()).groupBy("type").map((function(t,e){return{items:t,type:e}})).value()},e.prototype.getTypeByItemId=function(t){return this.get(t).get("type")},e}(i.BaseCollection);e.PaymentCartAvailableItems=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brokenItems=new Map,e}return o.__extends(e,t),e.prototype.getItemById=function(t){return this.get("items").find((function(e){return e.id===t}))},e.prototype.setReasonOfBlocking=function(t,e){this.brokenItems.set(t,e)},e.prototype.getReasonOfBlocking=function(t){return this.brokenItems.get(t)},e.prototype.getErrorsInformation=function(){var t=this.get("items"),e=t.filter((function(t){return!u.get(t,"response._error")})).length;return{hasErrors:e!==t.length,countItemsWithoutErrors:e,countItemsWithErrors:t.length-e,isAllItemsWithoutErrors:e===t.length,isAllItemsWithErrors:0===e}},e.prototype.getErrorMessageByItemId=function(t){var e=this.getReasonOfBlocking(t);if(e)return this.getErrorMessageByErrorCode(e);var n=this.getItemById(t),o=u.get(n,"response");return this.getErrorMessageByResponse(o)},e.prototype.getErrorMessageByErrorCode=function(t){return e.errorMessages[t]||e.defaultErrorMessage},e.prototype.getErrorMessageByResponse=function(t){if(!t)return"";if(t.respText)return t.respText;var n=u.get(t,"_error.code");return n?this.getErrorMessageByErrorCode(n):t._error?e.defaultErrorMessage:""},e.prototype.viewContext=function(){var e=this,n=t.prototype.viewContext.apply(this,o.__spread(Array.from(arguments)));return n.errorMessage=this.getErrorMessageByResponse(n.response),n.items.forEach((function(t){t.errorMessage=e.getErrorMessageByItemId(t.id)})),n},e.errorMessages={UNSUPPORTED_PAYMENT_CART_CURRENCY:s.t("Unsupported payment cart currency"),INVALID_P2P_TRANSFER_CONTRACTS:s.t("Transfer between selected cards is not available"),PAYMENT_CART_WITHOUT_ITEMS:s.t("Your payment cart is empty"),CANNOT_PAY_ITEM_FROM_PAYMENT_CART_REMITTER:s.t("Cannot pay item from this source"),INVALID_OPERATION_AMOUNT:s.t("Invalid operation amount"),NO_SUCH_CARD:s.t("Card doesn't exist"),CARD_BLOCKED:s.t("Card blocked"),INSUFFICIENT_FUNDS:s.t("Insufficient funds"),CARD_EXPIRED:s.t("Card has expired"),AMOUNT_LIMITER_EXCEEDED:s.t("Amount limit exceeded"),FREQUENCY_LIMITER_EXCEEDED:s.t("Frequency limit exceeded"),OPERATION_REJECTED:s.t("Operation rejected"),ACCOUNT_BLOCKED:s.t("Exceeded number of attempts to enter one-time password"),NO_AUTH_METHODS:s.t("There're no available methods to confirm operation.  Please contact support"),"3D_PREPARE_FAILED":"",SECURITY_POLICY_VIOLATION:"",ISSUER_REJECTED_OPERATION:s.t("Operation has been declined by your bank. Try again later or contact support"),OPERATION_FAILED:"",PAYMENT_FINALIZATION_FAILED:"",HANDBOOK_LOCKED:s.t("Payment locked. Please try again later"),RESOURCE_LOCKED:s.t("Payment locked. Please try again later"),UNKNOWN_PAYMENT_TYPE:s.t("Wrong type of payment"),MISSING_FIELDS:s.t("Necessary to fill the fields")},e.defaultErrorMessage=s.t("Could not perform operation. Try again later or contact customer support"),e}(i.BaseModel);e.BasePaymentCart=v;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return c.API_URL+"/payment-carts/create"},e}return o.__extends(e,t),e.prototype.defaults=function(){return{items:[]}},e.prototype.getBrokenItems=function(){return this.get("items").filter((function(t){return u.get(t,"response._error")&&!t.payment})).map((function(t){return t.id}))},e.prototype.getItemsIds=function(){return this.get("items").map((function(t){return r.isObject(t)?t.id:t}))},e}(i.BaseModel);e.PaymentCartDraft=w;var b=function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,o.__spread(t))||this;return i.url=function(){return c.API_URL+"/payment-carts/"+i.get("id")},i.prepareUrl=function(){return c.API_URL+"/payment-carts/"+i.get("id")+"/prepare"},i.cache={},i.on("sync",(function(){i.clearCache()})),i}return o.__extends(n,e),n.prototype.clearCache=function(){var t=this,e=this.get("items").map((function(t){return t.id}));Object.keys(this.cache).forEach((function(n){e.includes(n)||delete t.cache[n]}))},n.prototype.getAmount=function(){var t=this.get("amount");return t.value=Number(t.value),t},n.prototype.preparePayment=function(){var e=this;this.cleanAttributes();var o=t.ajax({url:this.prepareUrl(),data:{},type:"POST",dataType:"json",contentType:"application/json"});return o.done((function(t){e.prepared=new n,e.prepared.set(t)})),o},n.prototype.removeItem=function(t){var e=this.get("items").filter((function(e){return e.id!==t}));this.set("items",e)},n.prototype.updateItem=function(t,e){this.getItemById(t).payment=e},n.prototype.getItemModel=function(t,e,n){if(this.cache[t])return this.cache[t].model;var o,r=this.getItemById(t);return[a.IC_PAYMENT_TYPES.INTRA_BANK_TRANSFER,a.IC_PAYMENT_TYPES.CURRENCY_EXCHANGE_TRANSFER].includes(u.get(r,"payment.type"))?o=new a.IntraBankTransfer(r.payment):r.payment?"invoice"===e?o=new f(r.payment,{billerId:n.billerId,consumerId:n.consumerId,service:n}):"template"===e&&(o=new l(r.payment,{service:n})):(o=new i.BaseModel,this.setReasonOfBlocking(t,"UNKNOWN_PAYMENT_TYPE")),this.cache[t]={model:o,type:e,formMeta:n},o},n.prototype.updateRemitterOnItems=function(t){var e=this;this.get("items").forEach((function(n){if(e.cache[n.id]){var o=e.cache[n.id],i=o.model,r=o.formMeta.getField({role:"source"});if(r){var s=r.getAttrPath();i.set(s+".id",t),e.updateItem(n.id,i.toJSON())}}else console.debug("Cache must exist for each element of payment cart")}))},n}(v);e.PaymentCart=b;var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return c.API_URL+"/payment-carts/executions/"+e.get("executionId")},e}return o.__extends(e,t),e}(v);e.PaymentCartExecution=k;var B=function(e){function n(t){var n=e.apply(this,o.__spread(Array.from(arguments)))||this;if(n.url=function(){return c.API_URL+"/payment-carts/"+n.get("paymentCartId")+"/meta"},n.cache={},n.on("sync",(function(){n.clearCache()})),!t.paymentCartId)throw new Error("paymentCartId is required property");return n}return o.__extends(n,e),n.prototype.complementItemsWithoutFields=function(e){var n=this.get("items").map((function(n){var o=e.getItemById(n.id),i=u.get(o,"payment.type");switch(n.paymentType=i,i){case a.IC_PAYMENT_TYPES.INTRA_BANK_TRANSFER:case a.IC_PAYMENT_TYPES.CURRENCY_EXCHANGE_TRANSFER:var r=u.get(o,"payment.amount.currency");n.service=t.extend(!0,a.IntraBankTransferMeta.getDefaults(),{type:"payment",fields:{currency:{dataSource:{values:[{id:r,name:r}]},value:r}}})}return n}));this.set("items",n)},n.prototype.clearCache=function(){var t=this,e=this.get("items").map((function(t){return t.id}));Object.keys(this.cache).forEach((function(n){e.includes(n)||delete t.cache[n]})),delete this.fetchCatalogsPromise},n.prototype.getItemMetaModel=function(t,e){if(this.cache[t])return this.cache[t];var n,o=this.get("items").find((function(e){return e.id===t}));if([a.IC_PAYMENT_TYPES.INTRA_BANK_TRANSFER,a.IC_PAYMENT_TYPES.CURRENCY_EXCHANGE_TRANSFER].includes(o.paymentType))n=new a.IntraBankTransferMeta(o.service);else if("invoice"===e){var i=new m(o.service),r=i.getField({role:"destination.account"}).get("value"),s=i.getField({role:"destination.provider"}).get("value"),c=i.get("invoice.id");n=new h(o.service,{consumerId:r,billerId:s,invoiceId:c})}else"template"===e&&(n=new d(o.service));return this.cache[t]=n,n},n.prototype.fetchCatalogs=function(t,e){var n=this;if(this.fetchCatalogsPromise)return this.fetchCatalogsPromise;var o=[];return t.get("items").forEach((function(i){var r=e.get(i.id),s=r.get("type"),a=n.getItemMetaModel(i.id,s);a.set("name",r.get("name"));var c=t.getItemModel(i.id,s,a);a.bindChangeListeners(c);var l=u.get(i,"response._error.code"),d=new Promise((function(e){if(["HANDBOOK_LOCKED","RESOURCE_LOCKED"].includes(l))return t.setReasonOfBlocking(i.id,l),void e();Promise.all(a.fetchCatalogs()).then(e).catch((function(){t.setReasonOfBlocking(i.id,"HANDBOOK_LOCKED"),e()}))}));o.push(d)})),this.fetchCatalogsPromise=Promise.all(o),this.fetchCatalogsPromise},n.prototype.allLicensesAccepted=function(){return Object.values(this.cache).every((function(t){return!t.get("license")||t.isLicenseAccepted}))},n.prototype.markAllLicenses=function(t){Object.values(this.cache).forEach((function(e){e.get("license")&&(e.isLicenseAccepted=t)}))},n.prototype.hasLicenses=function(){return Object.values(this.cache).some((function(t){return t.get("license")}))},n}(i.BaseModel);e.PaymentCartMeta=B}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(375),s=n(40);!function(t){t.ACTIVE="active",t.OVERDUE="overdue",t.PAID="paid",t.CLOSED="closed"}(o=e.OperationInstalmentStatus||(e.OperationInstalmentStatus={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlRoot=s.API_URL+"/payment-instalments",e}return i.__extends(e,t),e.prototype.isActive=function(){return[o.ACTIVE,o.OVERDUE].includes(this.get("status"))},e}(r.BaseModel);e.default=a},,,,function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a;return i=n(372),a=n(40),e=n(375).BaseModel,s=n(402),{ServiceRequest:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.useDefaultSource=!0,e.prototype.initialize=function(t,n){var i,r;if(n.templateId&&this.set("templateId",n.templateId),!(null!=n?n.service:void 0))throw new Error("options.service is required");return this.service=n.service,t=o.defaults(t,this.service.getModelDefaults()),this.set(t,{silent:!0}),(i=this.service.getSourceField())&&this.useDefaultSource?(i.isCatalog()&&"contracts"===i.get("dataSource.type")&&this.listenToOnce(i.catalog,"sync",(r=this,function(){var t;if(!r.has(i.get("attr")))return(t=i.catalog.find((function(t){return t.isDefault()})))?r.set(i.get("attr"),t.id):void 0})),e.__super__.initialize.apply(this,arguments)):e.__super__.initialize.apply(this,arguments)},e.prototype.viewContext=function(t){var n,r,s,a,c,u,l;return null==t&&(t={}),u=t.service||this.service,a=t.maskDestinationCardNumber||!1,c=t.remoteModels,l=this,n=function(t){var e,n,r,s,d,p,h,f;if(t.fieldName=t.name,t.externalCardAllowed&&!l.getSource())t.object=o.extend({},l.get(t.attrPath),{isExternalCard:!0});else if(t.dataSource){if(f=l.get(t.attr)||t.value){if(f=f.id||f,t.dataSource.url){if(h=null!=c?c[t.attrPath]:void 0)t.object=h.viewContext();else if(u.catalogs){if(!(e=u.catalogs[t.attrPath]))throw new Error("Unknown catalog: "+t.attrPath);(r=e.get(f))&&(t.object=r.viewContext())}}else t.dataSource.values&&(t.object=o.findWhere(t.dataSource.values,{id:f}));t.object||(t.value=f)}}else(null!=(s=t.value)?s.name:void 0)?t.value=t.value.name:(null!=(f=l.get(t.attrPath))?f.id:void 0)?t.value=f.id:a&&"cardNumber"===t.inputType?t.value=i.filters.maskedCardNumber(f):t.value=l.formatFieldValue(t,f),(null!=(d=t.inputType)?d.match(/phone/i):void 0)?t.linkAs="tel":(null!=(p=t.inputType)?p.match(/email/i):void 0)&&(t.linkAs="mailto");if(t.isAmountField)return n=u.getByAttrPath(t.attrPath).getMyCurrencyField(),console.assert(n,"Failed to find currency field"),t.amount={value:t.value,currency:l.get(n.get("attr"))}},r=function(t){var e,o,i,s;for(s=[],o=0,i=t.length;o<i;o++)(e=t[o]).isGroup?s.push(r(e[u.fields.subtreeAttr])):s.push(n(e));return s},s=u.getFields({_reject:function(e){return"amount.value"===e.get("role")||e.isCurrencyField()&&!e.isCatalog()||("function"==typeof t._reject?t._reject(e):void 0)}}).viewContext(),r(s),o.extend(e.__super__.viewContext.apply(this,arguments),{fields:s})},e.prototype.formatFieldValue=function(t,e){var n;return(n=t.mask?{mask:t.mask,maskOptions:{translation:s.MBILLING_MASK_TRANSLATION}}:a.MASKS[t.type]||a.MASKS[t.inputType])?s.formatWithMask(e,n):e},e.prototype.asFormValues=function(){var t,e,n,o,i;for(i={},e=0,n=(o=this.service.getFields({editable:!0}).leafs()).length;e<n;e++)i[(t=o[e]).get("attr")]=this.get(t.get("attr"));return i},e.prototype.getEmptyAttributeError=function(){var t,e,n,i,r;for(e=0,n=(i=this.service.getFields({_filter:function(t){return t.getEmptyMessage()}}).leafs()).length;e<n;e++)if(t=i[e],r=this.get(t.get("attr")),!1===t.get("optional")&&!1===t.get("editable")&&o.isEmpty(r))return t.getEmptyMessage();return!1},e.prototype.getSource=function(){var t;return t=this.service.getSourceField(),this.resolveFieldValue(t)},e.prototype.getDestination=function(){var t;return t=this.service.getDestnationField(),this.resolveFieldValue(t)},e.prototype.resolveFieldValue=function(t){var e,n;return t?(e=this.get(t.getAttrPath()),(n=t.get("reference"))?this.service.fields.getByReference(n).resolveValue(null,this):(null!=e?e.id:void 0)?t.resolveValue(e):null):null},e}(e)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},,function(t,e,n){var o=n(372);n(376);!function(t){t.register("base-templates/contracts/cards-accounts-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("cards-accounts")}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("beforeContracts"),n,{},{}).w('<div class="block__cards-accounts"><div class="contracts"></div><div class="instalment-section"></div><div class="actions"><div class="archive-toggle action-wrapper"></div>').b(n.getBlock("extendedActions"),n,{block:s},{}).b(n.getBlock("actions"),n,{block:h},{}).w("</div></div>").b(n.getBlock("afterContracts"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.x(n.get(["externalCardsSupported"],!1),n,{block:a},{}).x(n.get(["incomeCertificatesSupported"],!1),n,{block:u},{}).x(n.get(["onlineDepositsSupported"],!1),n,{block:d},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-wrapper add-external"><a href="#contracts/add-external">').h("_",n,{block:c},{},"h").w("</a></div>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Add another bank's card")}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-wrapper income-certificates"><a href="#certificates">').h("_",n,{block:l},{},"h").w("</a></div>")}function l(t,n){return n=n.shiftBlocks(e),t.w("Income certificates")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-wrapper open-deposit"><a href="#deposits/create">').h("_",n,{block:p},{},"h").w("</a></div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Open deposit")}function h(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-wrapper"><a href="').f(n.get(["contextPath"],!1),n,"h").w('/services/APPLICATION_FOR_CREDIT">').h("_",n,{block:f},{},"h").w("</a></div>")}function f(t,n){return n=n.shiftBlocks(e),t.w("New credit")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/contracts/cards-accounts-page",t,e)};i.templateName="base-templates/contracts/cards-accounts-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("base-templates/contracts/contract-list",n);var e={sectionTitle:h,contract:m,"foreign-card":Y,"contract-label-content":q,"contract-row-icon":X,"card-icon":st,"contract-balance":pt};function n(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("sectionTitle"),n,{},{}).nx(n.get(["isLoading"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["error"],!1),n,{else:i,block:p},{})}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["groups"],!1),n,{else:r,block:s},{})}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="section-title no-data-error">').f(n.get(["emptyMessage"],!1),n,"h").w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["groups"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{else:c,block:l},{key:d,value:"foreign-cards"},"h")}function c(t,n){return n=n.shiftBlocks(e),t.s(n.get(["children"],!1),n,{block:u},{})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("foreign-card"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("contract"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["contract","id"]),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="load-error">').f(n.getPath(!1,["error","message"]),n,"h").w("</div>")}function h(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["noTitle"],!1),n,{block:f},{})}function f(t,n){return n=n.shiftBlocks(e),t.w('<div class="section-title h-small">').f(n.get(["title"],!1),n,"h").w("</div>")}function m(t,n){return n=n.shiftBlocks(e),t.s(n.get(["contract"],!1),n,{block:y},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract status-').f(n.get(["status"],!1),n,"h").w(" ").x(n.getPath(!0,["inArchive"]),n,{block:_},{}).w('"><div class="main-info">').b(n.getBlock("contractIcon"),n,{block:g},{}).b(n.getBlock("contractDetailsLink"),n,{block:B},{}).w('<div class="contract-cards ').h("gt",n,{block:A},{key:n.get(["nCards"],!1),value:4},"h").w('">').h("lte",n,{else:E,block:L},{key:n.get(["nCards"],!1),value:4},"h").w('</div><div class="balance"><div class="primary-balance">').b(n.getBlock("contract-balance"),n,{},{}).w("</div>").s(n.getPath(!1,["balances","bonus"]),n,{block:U},{}).w('</div></div><div class="add-info">').h("eq",n,{block:$},{key:z,value:"mccCardAccount"},"h").w("</div></div>")}function _(t,n){return n=n.shiftBlocks(e),t.w("archive-contract")}function g(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:v,block:b},{key:k,value:"card"},"h")}function v(t,n){return n=n.shiftBlocks(e),t.w('<div class="icon ').b(n.getBlock("contract-row-icon"),n,{},{}).w(" ").x(n.getPath(!0,["inArchive"]),n,{block:w},{}).w('"></div>')}function w(t,n){return n=n.shiftBlocks(e),t.w("icon-archive")}function b(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card-icon"),n,{},{})}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:C},{key:T},"h")}function C(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:S},{value:"mccCardAccount"},"h").h("eq",n,{block:P},{value:"aggregateCardAccount"},"h").h("none",n,{block:x},{},"h")}function S(t,n){return n=n.shiftBlocks(e),t.w('<div title="').f(n.get(["name"],!1),n,"h").w('" class="name">').b(n.getBlock("contract-label-content"),n,{},{}).w("</div>")}function P(t,n){return n=n.shiftBlocks(e),t.w('<a href="#contracts/additional-cards/cards" title="').f(n.get(["name"],!1),n,"h").w('" class="name">').b(n.getBlock("contract-label-content"),n,{},{}).w("</a>")}function x(t,n){return n=n.shiftBlocks(e),t.w('<a href="#contracts/').f(n.get(["id"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('" class="name">').b(n.getBlock("contract-label-content"),n,{},{}).w("</a>")}function T(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.w("collapsed")}function E(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("contract-cards-many"),n,{block:M},{})}function M(t,n){return n=n.shiftBlocks(e),t.w('<a class="cards-link"').h("select",n,{block:I},{key:D},"h").w(">").h("_",n,{},{singular:"%(num)s card",plural:"%(num)s cards",num:F},"h").w("</a>")}function I(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:N},{value:"mccCardAccount"},"h").h("eq",n,{block:R},{value:"aggregateCardAccount"},"h").h("none",n,{block:O},{},"h")}function N(t,n){return n=n.shiftBlocks(e),t.w('href="#contracts/').f(n.get(["id"],!1),n,"h").w('/cards"')}function R(t,n){return n=n.shiftBlocks(e),t.w('href="#contracts/additional-cards/cards"')}function O(t,n){return n=n.shiftBlocks(e),t.w('href="#contracts/').f(n.get(["id"],!1),n,"h").w('/additional-cards"')}function D(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function F(t,n){return n=n.shiftBlocks(e),t.f(n.get(["nCards"],!1),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.s(n.get(["children"],!1),n,{block:V},{})}function V(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card-icon"),n,{},{})}function U(t,n){return n=n.shiftBlocks(e),t.w('<div class="secondary-balance bonus">').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</div>")}function $(t,n){return n=n.shiftBlocks(e),t.x(n.get(["balances"],!1),n,{block:W},{})}function W(t,n){return n=n.shiftBlocks(e),t.w('<div class="additional-balances">').s(n.get(["additionalBalances"],!1),n,{block:H},{}).w("</div>")}function H(t,n){return n=n.shiftBlocks(e),t.w('<div class="additional-balances-item"><div class="title">').f(n.get(["currency"],!1),n,"h",["currencyText"]).w('</div><div class="value">').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</div></div>")}function z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function Y(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract"><div class="main-info">').b(n.getBlock("card-icon"),n,{},{}).w('<a href="#contracts/').f(n.get(["id"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('" class="name">').f(n.get(["name"],!1),n,"h").w("</a></div></div>")}function q(t,n){return n=n.shiftBlocks(e),t.nx(n.getPath(!1,["balances","bonus"]),n,{else:G,block:K},{})}function G(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract-label primary">').f(n.get(["name"],!1),n,"h").w('</div><div class="contract-label secondary">').h("_",n,{block:j},{},"h").w("</div>")}function j(t,n){return n=n.shiftBlocks(e),t.w("Bonuses")}function K(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function X(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("custom-contract-row-icon"),n,{block:Q},{})}function Q(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:J},{key:rt},"h")}function J(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:Z},{value:"cardAccount"},"h").h("eq",n,{block:tt},{value:"current"},"h").h("eq",n,{block:et},{value:"mccCardAccount"},"h").h("eq",n,{block:nt},{value:"credit"},"h").h("eq",n,{block:ot},{value:"deposit"},"h").h("none",n,{block:it},{},"h")}function Z(t,n){return n=n.shiftBlocks(e),t.w("icon-account")}function tt(t,n){return n=n.shiftBlocks(e),t.w("icon-account")}function et(t,n){return n=n.shiftBlocks(e),t.w("icon-account")}function nt(t,n){return n=n.shiftBlocks(e),t.w("icon-credit")}function ot(t,n){return n=n.shiftBlocks(e),t.w("icon-deposit")}function it(t,n){return n=n.shiftBlocks(e),t.w("icon-account")}function rt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function st(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("custom-card-icon"),n,{block:at},{})}function at(t,n){return n=n.shiftBlocks(e),t.w('<a href="#contracts/').f(n.get(["id"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('"class="card status-').f(n.getPath(!1,["card","status"]),n,"h").w(" ").x(n.getPath(!1,["card","isForeign"]),n,{block:ct},{}).s(n.getPath(!1,["card","wbProductColor"]),n,{block:ut},{}).x(n.getPath(!1,["card","isVirtual"]),n,{else:lt,block:dt},{}).w('"><span class="card-number">').f(n.get(["number"],!1),n,"h",["cardNumberMask"]).w("</span></a>")}function ct(t,n){return n=n.shiftBlocks(e),t.w("foreign-card ")}function ut(t,n){return n=n.shiftBlocks(e),t.w("color-").f(n.getPath(!0,[]),n,"h").w(" ")}function lt(t,n){return n=n.shiftBlocks(e),t.w("icon-").f(n.getPath(!1,["card","paymentSystem"]),n,"h")}function dt(t,n){return n=n.shiftBlocks(e),t.w("icon-virtual")}function pt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["balances","available"]),n,{block:ht},{})}function ht(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["money","s"])}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/contracts/contract-list",t,e)};i.templateName="base-templates/contracts/contract-list",t.exports=i},function(t,e,n){var o=n(372);n(499);!function(t){t.register("templates/contracts/information-tab",n);var e={cardAttrs:o,currentExtraAttrs:R,depositExtraAttrs:z,creditAttrs:j};function n(t,n){return n=n.shiftBlocks(e),t.p("base-templates/contracts/information-tab",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{block:i},{key:a,value:"active"},"h").s(n.getPath(!0,[]),n,{block:c},{label:"Card Number",value:u}).s(n.get(["parent"],!1),n,{block:l},{}).x(n.getPath(!1,["card","productionStatusName"]),n,{block:B},{}).s(n.getPath(!0,[]),n,{block:P},{label:"Open date",value:x}).h("ne",n,{block:T},{key:M,value:"in_production"},"h").s(n.getPath(!0,[]),n,{block:I},{label:"Embossed name",value:N})}function i(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:r},{label:"Status",value:s})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","statusName"]),n,"h")}function a(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","status"]),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h",["bulletMask","s"])}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("parentLink"),n,{block:d},{})}function d(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="name">').h("eq",n,{else:p,block:f},{key:y,value:"card"},"h").w('</td><td class="value"><a href="#contracts/').f(n.getPath(!0,["id"]),n,"h").w('">').x(n.get(["userIsManager"],!1),n,{else:_,block:k},{}).w("</a></td></tr>")}function p(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:h},{},"h")}function h(t,n){return n=n.shiftBlocks(e),t.w("Main account")}function f(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:m},{},"h")}function m(t,n){return n=n.shiftBlocks(e),t.w("Main card")}function y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["type"]),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:g,block:v},{key:w,value:b},"h")}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h").w(" / ").f(n.get(["number"],!1),n,"h")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:C},{label:"Production status",value:S})}function C(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","productionStatusName"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function x(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","openDate"]),n,"h",["date"])}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{label:"Expires",value:E})}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","expiryDate"]),n,"h",["cardExpDate"])}function M(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","productionStatus"]),n,"h")}function I(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function N(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","embossing","fullName"]),n,"h")}function R(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["addData","IBAN"]),n,{block:O},{}).x(n.getPath(!1,["addData","INT_RATE"]),n,{block:L},{}).x(n.getPath(!1,["addData","PRODUCT_NAME"]),n,{block:$},{}).w("\t\t\t")}function O(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:D},{label:"IBAN",value:F})}function D(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function F(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","IBAN"]),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:V},{label:"Interest rate",value:U})}function V(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function U(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","INT_RATE"]),n,"h")}function $(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:W},{label:"Product name",value:H})}function W(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function H(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","PRODUCT_NAME"]),n,"h")}function z(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["addData","IBAN"]),n,{block:Y},{})}function Y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:q},{label:"IBAN",value:G})}function q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function G(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","IBAN"]),n,"h")}function j(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:K},{label:"Credit #",value:X}).x(n.getPath(!1,["credit","openedOn"]),n,{block:Q},{}).x(n.getPath(!1,["credit","closedOn"]),n,{block:tt},{}).w("\t  ").x(n.getPath(!1,["credit","expiresOn"]),n,{block:ot},{}).w("\t \t  ").s(n.getPath(!0,[]),n,{block:st},{label:"Amount",value:at}).x(n.getPath(!1,["addData","IBAN"]),n,{block:ct},{}).x(n.getPath(!1,["addData","INT_RATE"]),n,{block:dt},{}).x(n.getPath(!1,["addData","PRODUCT_NAME"]),n,{block:ft},{})}function K(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function X(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function Q(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:J},{label:"Date open",value:Z})}function J(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Z(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","openedOn"]),n,"h",["date"])}function tt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:et},{label:"Date close",value:nt})}function et(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function nt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","closedOn"]),n,"h",["date"])}function ot(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:it},{label:"Date expire",value:rt})}function it(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function rt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","expiresOn"]),n,"h",["date"])}function st(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function at(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["balances","available"]),n,"h",["money","s"])}function ct(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:ut},{label:"IBAN",value:lt})}function ut(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function lt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","IBAN"]),n,"h")}function dt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:pt},{label:"Interest rate",value:ht})}function pt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ht(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","INT_RATE"]),n,"h")}function ft(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:mt},{label:"Product name",value:yt})}function mt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function yt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["addData","PRODUCT_NAME"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0,ft.__dustBody=!0,mt.__dustBody=!0,yt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/information-tab",t,e)};i.templateName="templates/contracts/information-tab",t.exports=i},function(t,e,n){var o=n(372);n(464),n(500);!function(t){t.register("base-templates/contracts/information-tab",n);var e={instalmentListItem:Xe,attr:en,balanceAttr:nn};function n(t,n){return n=n.shiftBlocks(e),t.w('<h2 class="print-header">').h("_",n,{},{key:"%(contractName)s: information",contractName:o},"h").w("</h2><table>").x(n.get(["card"],!1),n,{block:i},{}).x(n.get(["cardAccount"],!1),n,{block:wt},{}).x(n.get(["current"],!1),n,{block:Tt},{}).x(n.get(["credit"],!1),n,{block:Ut},{}).x(n.get(["deposit"],!1),n,{block:re},{}).w('</table><div class="online-deposit-management"></div>').b(n.getBlock("cardInstalmentsLists"),n,{block:Ue},{})}function o(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h",["encodeHtml","s"])}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("importantCardAttrs"),n,{},{}).b(n.getBlock("cardAttrs"),n,{block:r},{}).b(n.getBlock("cardBalances"),n,{block:$},{}).b(n.getBlock("cardExtraAttrs"),n,{block:j},{}).b(n.getBlock("cardInstalmentsSummary"),n,{block:K},{})}function r(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{block:s},{key:l,value:"active"},"h").x(n.get(["isShowRevealCardNumber"],!1),n,{else:d,block:f},{}).x(n.get(["isShowResendParams"],!1),n,{block:y},{}).x(n.get(["showParent"],!1),n,{block:g},{}).x(n.getPath(!1,["card","productionStatusName"]),n,{block:I},{}).s(n.getPath(!0,[]),n,{block:O},{label:"Open date",value:D}).s(n.getPath(!0,[]),n,{block:F},{label:"Expires",value:L}).s(n.getPath(!0,[]),n,{block:V},{label:"Embossed name",value:U})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:a},{label:"Status",value:u})}function a(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["card","statusName"]),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","statusName"]),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","status"]),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:p},{label:"Card Number",value:h})}function p(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h",["bulletMask","s"])}function f(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="name">').h("_",n,{block:m},{},"h").w('</td><td class="value" data-js-digital-card-reveal-card-number-container></td></tr>')}function m(t,n){return n=n.shiftBlocks(e),t.w("Card Number")}function y(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="name">').h("_",n,{block:_},{},"h").w('</td><td class="value" data-js-digital-card-resend-params-container></td></tr>')}function _(t,n){return n=n.shiftBlocks(e),t.w("CVV2")}function g(t,n){return n=n.shiftBlocks(e),t.s(n.get(["parent"],!1),n,{block:v},{})}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("parentLink"),n,{block:w},{})}function w(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="name">').h("eq",n,{else:b,block:B},{key:S,value:"card"},"h").w('</td><td class="value"><a href="#contracts/').f(n.getPath(!0,["id"]),n,"h").w('">').x(n.get(["userIsManager"],!1),n,{else:P,block:M},{}).w("</a></td></tr>")}function b(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:k},{},"h")}function k(t,n){return n=n.shiftBlocks(e),t.w("Main account")}function B(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:C},{},"h")}function C(t,n){return n=n.shiftBlocks(e),t.w("Main card")}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["type"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:x,block:T},{key:A,value:E},"h")}function x(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h").w(" / ").f(n.get(["number"],!1),n,"h")}function T(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function I(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:N},{label:"Production status",value:R})}function N(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function R(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","productionStatusName"]),n,"h")}function O(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function D(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","openDate"]),n,"h",["date"])}function F(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function L(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","expiryDate"]),n,"h",["cardExpDate"])}function V(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function U(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["card","embossing","fullName"]),n,"h")}function $(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:W},{label:"Available amount",value:H}).s(n.getPath(!1,["balances","blocked"]),n,{block:z},{label:"Blocked amount"}).s(n.getPath(!1,["balances","cr_limit"]),n,{block:Y},{label:"Credit limit"}).s(n.getPath(!1,["balances","minpay"]),n,{block:q},{label:"Minimal payment"}).s(n.getPath(!1,["balances","overdue"]),n,{block:G},{label:"Overdue amount"})}function W(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function H(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["balances","available"]),n,"h",["money","s"])}function z(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function Y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function G(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function j(t,n){return n=n.shiftBlocks(e),t}function K(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["instalments","instalmentsSummary"]),n,{block:X},{})}function X(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Q},{label:"Instalments limit",value:J,className:"section-separator"}).x(n.getPath(!0,["count"]),n,{block:Z},{}).s(n.getPath(!0,[]),n,{block:nt},{label:"Current arrears",value:ot}).s(n.getPath(!0,[]),n,{block:it},{label:"Monthly fee",value:rt}).x(n.getPath(!0,["isActive"]),n,{block:st},{}).x(n.getPath(!0,["isOverdue"]),n,{block:dt},{})}function Q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function J(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["limitAmount"]),n,"h",["money","s"])}function Z(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:tt},{label:"Instalments number",value:et})}function tt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function et(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["count"]),n,"h")}function nt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ot(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["fullRepaymentAmount"]),n,"h",["money","s"])}function it(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function rt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["monthlyFee"]),n,"h",["money","s"])}function st(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:at},{label:"Date to pay",value:ct,className:"section-separator"}).s(n.getPath(!0,[]),n,{block:ut},{label:"Payment amount",value:lt})}function at(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ct(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["nextPaymentDate"]),n,"h",["instalmentDateToPay"])}function ut(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function lt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["nextPaymentAmount"]),n,"h",["money","s"])}function dt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:pt},{label:"Date to pay",value:ht,className:"section-separator"}).s(n.getPath(!0,[]),n,{block:ft},{label:"Payment amount",value:mt}).s(n.getPath(!0,[]),n,{block:yt},{label:"Status",className:"instalment-payment-status_overdue",value:_t}).s(n.getPath(!0,[]),n,{block:gt},{label:"Fine",className:"instalment-payment-fine",value:vt})}function pt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ht(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["overduePaymentDate"]),n,"h",["instalmentDateToPay"])}function ft(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function mt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["overdueAmount"]),n,"h",["money","s"])}function yt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function _t(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["statuses","overdue"]),n,"h")}function gt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function vt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["overdueFee"]),n,"h",["money","s"])}function wt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("importantCardAccountAttrs"),n,{},{}).b(n.getBlock("cardAccountAttrs"),n,{block:bt},{}).b(n.getBlock("cardAccountExtraAttrs"),n,{block:xt},{})}function bt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:kt},{label:"Account #",value:Bt}).s(n.getPath(!0,[]),n,{block:Ct},{label:"Available amount",value:St}).s(n.getPath(!1,["balances","bonus"]),n,{block:Pt},{label:"Bonus amount"})}function kt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Bt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function Ct(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function St(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["balances","available"]),n,"h",["money","s"])}function Pt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function xt(t,n){return n=n.shiftBlocks(e),t}function Tt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("importantCurrentAttrs"),n,{},{}).b(n.getBlock("currentAttrs"),n,{block:At},{}).b(n.getBlock("currentExtraAttrs"),n,{block:Vt},{})}function At(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Et},{label:"Account #",value:Mt}).s(n.getPath(!0,[]),n,{block:It},{label:"Available amount",value:Nt}).s(n.getPath(!0,[]),n,{block:Rt},{label:"Open Date",value:Ot}).x(n.getPath(!1,["current","closedOn"]),n,{block:Dt},{})}function Et(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Mt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function It(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Nt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["balances","available"]),n,"h",["money","s"])}function Rt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ot(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["current","openedOn"]),n,"h",["date"])}function Dt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Ft},{label:"Close Date",value:Lt})}function Ft(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Lt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["current","closedOn"]),n,"h",["date"])}function Vt(t,n){return n=n.shiftBlocks(e),t}function Ut(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("importantCreditAttrs"),n,{},{}).b(n.getBlock("creditAttrs"),n,{block:$t},{}).b(n.getBlock("creditExtraAttrs"),n,{block:ie},{})}function $t(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Wt},{label:"Credit #",value:Ht}).s(n.getPath(!0,[]),n,{block:zt},{label:"Interest",value:Yt}).s(n.getPath(!1,["credit","nextPayment"]),n,{block:qt},{}).s(n.getPath(!0,[]),n,{block:Xt},{label:"Open Date",value:Qt}).x(n.getPath(!1,["credit","closedOn"]),n,{elese:Jt,block:ee},{})}function Wt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ht(t,n){return n=n.shiftBlocks(e),t.f(n.get(["number"],!1),n,"h")}function zt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Yt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","interest"]),n,"h",["percentage"])}function qt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,["amount"]),n,{block:Gt},{label:"Next Payment [amount]"}).s(n.getPath(!0,["dueOn"]),n,{block:jt},{label:"Next Payment Date",value:Kt})}function Gt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function jt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Kt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["date"])}function Xt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Qt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","openedOn"]),n,"h",["date"])}function Jt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Zt},{label:"Planned Settlement Date",value:te})}function Zt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function te(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["deposit","expiresOn"]),n,"h",["date"])}function ee(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:ne},{label:"Close Date",value:oe})}function ne(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function oe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["credit","closedOn"]),n,"h",["date"])}function ie(t,n){return n=n.shiftBlocks(e),t}function re(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("importantDepositAttrs"),n,{},{}).b(n.getBlock("depositAttrs"),n,{block:se},{}).b(n.getBlock("depositExtraAttrs"),n,{block:Ve},{})}function se(t,n){return n=n.shiftBlocks(e),t.s(n.get(["number"],!1),n,{block:ae},{label:"Deposit number",value:ce}).s(n.get(["defaultName"],!1),n,{block:ue},{label:"Deposit name",value:le}).s(n.getPath(!1,["deposit","period"]),n,{block:de},{label:"Duration",value:pe}).s(n.getPath(!1,["deposit","openedOn"]),n,{block:he},{label:"Open date",value:fe}).x(n.getPath(!1,["deposit","closedOn"]),n,{else:me,block:ge},{}).s(n.getPath(!1,["balances","available"]),n,{block:be},{label:"Deposit balance"}).s(n.getPath(!1,["balances","interest"]),n,{block:ke},{label:"Interest amount"}).s(n.getPath(!1,["addData","DEPOSIT_NUMBER"]),n,{block:Be},{label:"Deposit account",value:Ce}).s(n.getPath(!1,["deposit","interestRate"]),n,{block:Se},{label:"Interest",value:Pe}).s(n.getPath(!1,["deposit","interestPaymentLabel"]),n,{block:xe},{label:"Interest period",value:Te}).s(n.getPath(!1,["deposit","reinvestInterest"]),n,{block:Ae},{label:"Interest reinvestment",value:Ee}).s(n.getPath(!1,["deposit","topupAllowed"]),n,{block:Me},{label:"Replenishment",value:Ie}).s(n.getPath(!1,["deposit","withdrawal"]),n,{block:Ne},{label:"Withdrawal",value:Re}).s(n.getPath(!1,["deposit","autoProlongation"]),n,{block:Oe},{label:"Autoprolongation",value:De}).s(n.getPath(!1,["deposit","earlyClose"]),n,{block:Fe},{label:"Early close",value:Le})}function ae(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ce(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function ue(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function le(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function de(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function pe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["periodToMonth"])}function he(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function fe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["date"])}function me(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["deposit","expiresOn"]),n,{block:ye},{label:"Expiration Date",value:_e})}function ye(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function _e(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["date"])}function ge(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["deposit","closedOn"]),n,{block:ve},{label:"Close Date",value:we})}function ve(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function we(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["date"])}function be(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function ke(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("balanceAttr"),n,{},{})}function Be(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ce(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function Se(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Pe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["percentage"])}function xe(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Te(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function Ae(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ee(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["boolToStr"])}function Me(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ie(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["boolToStr"])}function Ne(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Re(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["boolToStr"])}function Oe(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function De(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["boolToStr"])}function Fe(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Le(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["boolToStr"])}function Ve(t,n){return n=n.shiftBlocks(e),t}function Ue(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["instalments","instalmentsList"]),n,{block:$e},{})}function $e(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["hasCurrentInstalments"]),n,{block:We},{}).x(n.getPath(!0,["hasPaidOrClosedInstalments"]),n,{block:Ye},{})}function We(t,n){return n=n.shiftBlocks(e),t.w('<div class="instalments-list instalments-list_active"><h3 class="instalments-list-title h-small">').h("_",n,{block:He},{},"h").w('</h3><ul class="instalments-list-content">').s(n.getPath(!0,["currentInstalments"]),n,{block:ze},{}).w("</ul></div>")}function He(t,n){return n=n.shiftBlocks(e),t.w("Current Instalments")}function ze(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("instalmentListItem"),n,{},{})}function Ye(t,n){return n=n.shiftBlocks(e),t.w('<div class="instalments-list instalments-list_paid"><div class="instalments-list-action instalments-list-show">').h("_",n,{block:qe},{},"h").w(" (").f(n.getPath(!0,["paidOrClosedInstalmentsCount"]),n,"h").w(')</div><div class="instalments-list-title-wrap"><h4 class="instalments-list-title h-small">').h("_",n,{block:Ge},{},"h").w('</h4><div class="instalments-list-action instalments-list-hide">').h("_",n,{block:je},{},"h").w('</div></div><ul class="instalments-list-content">').s(n.getPath(!0,["paidOrClosedInstalments"]),n,{block:Ke},{}).w("</ul></div>")}function qe(t,n){return n=n.shiftBlocks(e),t.w("Show Paid Instalments")}function Ge(t,n){return n=n.shiftBlocks(e),t.w("Paid Instalments")}function je(t,n){return n=n.shiftBlocks(e),t.w("Hide")}function Ke(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("instalmentListItem"),n,{},{})}function Xe(t,n){return n=n.shiftBlocks(e),t.w('<li class="instalments-item instalments-item-').f(n.getPath(!0,["status"]),n,"h").w('" data-id="').f(n.getPath(!0,["id"]),n,"h").w('"><div class="instalments-item_description"><a class="instalments-item-details" href="#">').f(n.getPath(!0,["description"]),n,"h").w('</a></div><div class="instalments-item_date">').nx(n.getPath(!0,["isClosed"]),n,{block:Qe},{}).w('</div><div class="instalments-item_totalAmount">').f(n.getPath(!0,["totalAmount"]),n,"h",["absMoney","s"]).w("</div></li>")}function Qe(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["isPaid"]),n,{else:Je,block:Ze},{})}function Je(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["createdAt"]),n,"h",["date"])}function Ze(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:tn},{},"h").w(" ").f(n.getPath(!0,["paidAt"]),n,"h",["date"])}function tn(t,n){return n=n.shiftBlocks(e),t.w("Instalment paid at")}function en(t,n){return n=n.shiftBlocks(e),t.p("templates/contracts/details-attr",n,n,{})}function nn(t,n){return n=n.shiftBlocks(e),t.p("templates/contracts/balance-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0,ft.__dustBody=!0,mt.__dustBody=!0,yt.__dustBody=!0,_t.__dustBody=!0,gt.__dustBody=!0,vt.__dustBody=!0,wt.__dustBody=!0,bt.__dustBody=!0,kt.__dustBody=!0,Bt.__dustBody=!0,Ct.__dustBody=!0,St.__dustBody=!0,Pt.__dustBody=!0,xt.__dustBody=!0,Tt.__dustBody=!0,At.__dustBody=!0,Et.__dustBody=!0,Mt.__dustBody=!0,It.__dustBody=!0,Nt.__dustBody=!0,Rt.__dustBody=!0,Ot.__dustBody=!0,Dt.__dustBody=!0,Ft.__dustBody=!0,Lt.__dustBody=!0,Vt.__dustBody=!0,Ut.__dustBody=!0,$t.__dustBody=!0,Wt.__dustBody=!0,Ht.__dustBody=!0,zt.__dustBody=!0,Yt.__dustBody=!0,qt.__dustBody=!0,Gt.__dustBody=!0,jt.__dustBody=!0,Kt.__dustBody=!0,Xt.__dustBody=!0,Qt.__dustBody=!0,Jt.__dustBody=!0,Zt.__dustBody=!0,te.__dustBody=!0,ee.__dustBody=!0,ne.__dustBody=!0,oe.__dustBody=!0,ie.__dustBody=!0,re.__dustBody=!0,se.__dustBody=!0,ae.__dustBody=!0,ce.__dustBody=!0,ue.__dustBody=!0,le.__dustBody=!0,de.__dustBody=!0,pe.__dustBody=!0,he.__dustBody=!0,fe.__dustBody=!0,me.__dustBody=!0,ye.__dustBody=!0,_e.__dustBody=!0,ge.__dustBody=!0,ve.__dustBody=!0,we.__dustBody=!0,be.__dustBody=!0,ke.__dustBody=!0,Be.__dustBody=!0,Ce.__dustBody=!0,Se.__dustBody=!0,Pe.__dustBody=!0,xe.__dustBody=!0,Te.__dustBody=!0,Ae.__dustBody=!0,Ee.__dustBody=!0,Me.__dustBody=!0,Ie.__dustBody=!0,Ne.__dustBody=!0,Re.__dustBody=!0,Oe.__dustBody=!0,De.__dustBody=!0,Fe.__dustBody=!0,Le.__dustBody=!0,Ve.__dustBody=!0,Ue.__dustBody=!0,$e.__dustBody=!0,We.__dustBody=!0,He.__dustBody=!0,ze.__dustBody=!0,Ye.__dustBody=!0,qe.__dustBody=!0,Ge.__dustBody=!0,je.__dustBody=!0,Ke.__dustBody=!0,Xe.__dustBody=!0,Qe.__dustBody=!0,Je.__dustBody=!0,Ze.__dustBody=!0,tn.__dustBody=!0,en.__dustBody=!0,nn.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/contracts/information-tab",t,e)};i.templateName="base-templates/contracts/information-tab",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.h("ne",e,{block:n},{key:o,value:0,type:"number"},"h")}function n(t,e){return t.w('<tr class="').f(e.get(["className"],!1),e,"h").w('"><td class="name">').f(e.get(["label"],!1),e,"h",["t"]).w('</td><td class="value">').f(e.getPath(!0,[]),e,"h",["money","s"]).w("</td></tr>")}function o(t,e){return t.f(e.getPath(!0,["value"]),e,"h")}t.register("templates/contracts/balance-attr",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/balance-attr",t,e)};i.templateName="templates/contracts/balance-attr",t.exports=i},function(t,e,n){var o=n(372);n(385),n(444);!function(t){t.register("templates/add-auth-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="add-auth-form block__add-auth">').b(n.getBlock("addAuthAdditionalInfo"),n,{},{}).x(n.get(["challenge"],!1),n,{else:i,block:s},{}).w("</form>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="add-auth-select submit"><label><span class="action-tooltip">').h("_",n,{block:r},{},"h").w(':</span><span class="select-wrapper"></span></label></div>')}function r(t,n){return n=n.shiftBlocks(e),t.w("Choose a method of one-time password delivery")}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/addauth/add-auth-method-switch",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/add-auth-dialog",t,e)};i.templateName="templates/add-auth-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["challenge"],!1),e,{block:n},{})}function n(t,e){return t.w('<div id="add-auth-check" class="otp_sms"><p class="action-tooltip">').h("_",e,{},{key:"SMS with one-time password has been sent to your mobile phone number (%(phoneNumber)s). Please enter it to the field below:",phoneNumber:o},"h").w('</p><div class="field-wrapper"><div class="field-caption"></div><div class="control-container"></div></div>').x(e.get(["triesLeft"],!1),e,{block:i},{}).w("</div>")}function o(t,e){return t.w("<span class='phone-number'>").f(e.get(["phone"],!1),e,"h").w("</span>")}function i(t,e){return t.w('<div class="action-data"><p>').h("_",e,{block:r},{},"h").w(": ").f(e.get(["triesLeft"],!1),e,"h").w("</p></div>")}function r(t,e){return t.w("Tries left")}t.register("templates/partials/addauth/otp_sms-method",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/addauth/otp_sms-method",t,e)};i.templateName="templates/partials/addauth/otp_sms-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["challenge"],!1),e,{block:n},{})}function n(t,e){return t.w('<div id="add-auth-check" class="otp_list"><p class="action-tooltip">').h("_",e,{},{key:"Please enter password #%(passwordNumber)s from the password list receipt your have got at ATM",passwordNumber:o},"h").w(':</p><div class="field-wrapper"><div class="field-caption"></div><div class="control-container"></div></div><div class="action-data"><p>').h("_",e,{block:i},{},"h").w(": ").f(e.get(["chequeNumber"],!1),e,"h").w("</p><p>").h("_",e,{block:r},{},"h").w(": ").f(e.get(["otpLeft"],!1),e,"h").w("</p>").x(e.get(["triesLeft"],!1),e,{block:s},{}).w("</div></div>")}function o(t,e){return t.f(e.get(["otpNumber"],!1),e,"h")}function i(t,e){return t.w("Check number")}function r(t,e){return t.w("Unused passwords left")}function s(t,e){return t.w("<p>").h("_",e,{block:a},{},"h").w(": ").f(e.get(["triesLeft"],!1),e,"h").w("</p>")}function a(t,e){return t.w("Tries left")}t.register("templates/partials/addauth/otp_list-method",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/addauth/otp_list-method",t,e)};i.templateName="templates/partials/addauth/otp_list-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["challenge"],!1),e,{block:n},{})}function n(t,e){return t.w('<div id="add-auth-check" class="otp_mma"><p class="action-tooltip">').h("_",e,{block:o},{},"h").w(':</p><div class="field-wrapper"><div class="field-caption"></div><div class="control-container"></div></div><div class="action-data"><p>').h("_",e,{block:i},{},"h").w(": ").f(e.get(["challengeCode"],!1),e,"h").w("</p>").x(e.get(["triesLeft"],!1),e,{block:r},{}).w("</div></div>")}function o(t,e){return t.w("Use the mobile banking application to generate one-time password for the code below. Please enter generated password to the field below")}function i(t,e){return t.w("Code for password generation")}function r(t,e){return t.w("<p>").h("_",e,{block:s},{},"h").w(": ").f(e.get(["triesLeft"],!1),e,"h").w("</p>")}function s(t,e){return t.w("Tries left")}t.register("templates/partials/addauth/otp_mma-method",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/addauth/otp_mma-method",t,e)};i.templateName="templates/partials/addauth/otp_mma-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["challenge"],!1),e,{block:n},{})}function n(t,e){return t.w('<div id="add-auth-check" class="random_auth"><p class="action-tooltip">').h("_",e,{block:o},{},"h").w(':</p><div class="field-wrapper"><div class="field-caption"></div><div class="control-container"></div></div><div class="action-data">').x(e.get(["triesLeft"],!1),e,{block:i},{}).w("</div></div>")}function o(t,e){return t.w("Your card has been charged for the random amount. Please enter this amount to the field below")}function i(t,e){return t.w("<p>").h("_",e,{block:r},{},"h").w(": ").f(e.get(["triesLeft"],!1),e,"h").w("</p>")}function r(t,e){return t.w("Tries left")}t.register("templates/partials/addauth/random_auth-method",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/partials/addauth/random_auth-method",t,e)};i.templateName="templates/partials/addauth/random_auth-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container"><input type="password" name="new-password" required').x(e.get(["minLength"],!1),e,{block:o},{}).x(e.get(["maxLength"],!1),e,{block:i},{}).x(e.get(["characters"],!1),e,{block:r},{}).x(e.get(["regex"],!1),e,{block:s},{}).w('/><div class="hint">').h("_",e,{block:a},{},"h").w('</div></div></div><div class="field-wrapper"><div class="field-caption">').h("_",e,{block:c},{},"h").w('</div><div class="control-container"><input type="password" name="new-password-confirmation" required/></div></div>')}function n(t,e){return t.w("Password")}function o(t,e){return t.w(' minlength="').f(e.get(["minLength"],!1),e,"h").w('"')}function i(t,e){return t.w(' maxlength="').f(e.get(["maxLength"],!1),e,"h").w('"')}function r(t,e){return t.w(' passwordchars="').f(e.get(["characters"],!1),e,"h").w('"')}function s(t,e){return t.w(' passwordregex="').f(e.get(["regex"],!1),e,"h").w('"')}function a(t,e){return t.w("[WB_PWA policy description]")}function c(t,e){return t.w("Repeat password")}t.register("templates/auth/password-input",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/password-input",t,e)};i.templateName="templates/auth/password-input",t.exports=i},function(t,e,n){var o=n(372);n(465);!function(t){function e(t,e){return t.s(e.getPath(!0,[]),e,{block:n},{cards:e.get(["additionalCards"],!1)})}function n(t,e){return t.p("templates/contracts/cards-list",e,e,{})}t.register("templates/contracts/additional-cards-tab",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/additional-cards-tab",t,e)};i.templateName="templates/contracts/additional-cards-tab",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<ul class="additional-balances"l>').s(e.getPath(!1,["card","accounts"]),e,{block:n},{}).w("</ul>").x(e.get(["allowIntraCardTransfer"],!1),e,{block:o},{})}function n(t,e){return t.w('<li class="additional-balances-item"><div class="title">').f(e.get(["currency"],!1),e,"h",["currencyText"]).w('</div><div class="converted-value"></div><div class="value">').f(e.getPath(!1,["balances","available"]),e,"h",["money","s"]).w("</div></li>")}function o(t,e){return t.w('<a href="#contracts/').f(e.get(["id"],!1),e,"h").w('/intracard-transfer">').h("_",e,{block:i},{},"h").w("</a>")}function i(t,e){return t.w("Transfer between card accounts")}t.register("templates/contracts/balance-tab",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/balance-tab",t,e)};i.templateName="templates/contracts/balance-tab",t.exports=i},function(t,e,n){var o=n(372);n(376),n(508),n(510),n(511),n(498),n(512),n(513),n(507),n(514),n(446),n(446);!function(t){t.register("templates/contracts/contract-details-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s,ownContractHeader:Y,divisionMainContractHeader:tt,employeeContractHeader:nt,card:ct};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("contract-details")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["contract"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__contract-details"><div class="page-messages"></div><div class="content-header ').x(n.get(["editable"],!1),n,{block:c},{}).w(" ").x(n.get(["userIsManager"],!1),n,{block:u},{}).w('">').x(n.get(["userIsManager"],!1),n,{else:l,block:d},{}).w('</div><div class="contract-info wb-tabs">').b(n.getBlock("contractInfo"),n,{block:f},{}).w("</div></div>")}function c(t,n){return n=n.shiftBlocks(e),t.w("editable")}function u(t,n){return n=n.shiftBlocks(e),t.w("employee-contract-header")}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("ownContractHeader"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isDivisionMainContract"],!1),n,{else:p,block:h},{})}function p(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("employeeContractHeader"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("divisionMainContractHeader"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.w("<ul>").b(n.getBlock("contractDetailsTabs"),n,{block:m},{}).w("</ul>").x(n.get(["showBalanceTab"],!1),n,{block:O},{}).x(n.get(["showServicesTab"],!1),n,{block:D},{}).x(n.get(["showLimitsTab"],!1),n,{block:F},{}).x(n.get(["showInformationTab"],!1),n,{block:L},{}).x(n.get(["showSecurityTab"],!1),n,{block:V},{}).x(n.get(["showHistoryTab"],!1),n,{block:U},{}).x(n.get(["hasAdditionalCards"],!1),n,{block:$},{}).b(n.getBlock("additionalContractDetailsSections"),n,{},{}).x(n.get(["showRequisitesTab"],!1),n,{block:H},{}).x(n.get(["showContactInfoTab"],!1),n,{block:z},{})}function m(t,n){return n=n.shiftBlocks(e),t.x(n.get(["showBalanceTab"],!1),n,{block:y},{}).x(n.get(["showServicesTab"],!1),n,{block:g},{}).x(n.get(["showInformationTab"],!1),n,{block:w},{}).x(n.get(["showHistoryTab"],!1),n,{block:k},{}).x(n.get(["hasAdditionalCards"],!1),n,{block:C},{}).x(n.get(["showSecurityTab"],!1),n,{block:x},{}).x(n.get(["showLimitsTab"],!1),n,{block:A},{}).b(n.getBlock("additionalContractDetailsTabs"),n,{},{}).x(n.get(["showRequisitesTab"],!1),n,{block:M},{}).x(n.get(["showContactInfoTab"],!1),n,{block:N},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-balance">').h("_",n,{block:_},{},"h").w("</a></li>")}function _(t,n){return n=n.shiftBlocks(e),t.w("Balance")}function g(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-services">').h("_",n,{block:v},{},"h").w("</a></li>")}function v(t,n){return n=n.shiftBlocks(e),t.w("Services")}function w(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-information">').h("_",n,{block:b},{},"h").w("</a></li>")}function b(t,n){return n=n.shiftBlocks(e),t.w("Information")}function k(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-history">').h("_",n,{block:B},{},"h").w("</a></li>")}function B(t,n){return n=n.shiftBlocks(e),t.w("History")}function C(t,n){return n=n.shiftBlocks(e),t.x(n.get(["showAdditionalCardsTab"],!1),n,{block:S},{})}function S(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#additional-cards">').h("_",n,{block:P},{},"h").w("</a></li>")}function P(t,n){return n=n.shiftBlocks(e),t.w("Cards")}function x(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-security">').h("_",n,{block:T},{},"h").w("</a></li>")}function T(t,n){return n=n.shiftBlocks(e),t.w("Security")}function A(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-limits">').h("_",n,{block:E},{},"h").w("</a></li>")}function E(t,n){return n=n.shiftBlocks(e),t.w("Limits")}function M(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#payment-info">').h("_",n,{block:I},{},"h").w("</a></li>")}function I(t,n){return n=n.shiftBlocks(e),t.w("Payment requisites")}function N(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contact-info">').h("_",n,{block:R},{},"h").w("</a></li>")}function R(t,n){return n=n.shiftBlocks(e),t.w("Contact info")}function O(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-balance">').p("templates/contracts/balance-tab",n,n,{}).w("</div>")}function D(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-services">').p("templates/contracts/services-tab",n,n,{}).w("</div>")}function F(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-limits">').p("templates/contracts/limits-tab",n,n,{}).w("</div>")}function L(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-information">').p("templates/contracts/information-tab",n,n,{}).w("</div>")}function V(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-security">').p("templates/contracts/security-tab",n,n,{}).w("</div>")}function U(t,n){return n=n.shiftBlocks(e),t.w('<div id="contract-history">').p("templates/contracts/history-tab",n,n,{}).w("</div>")}function $(t,n){return n=n.shiftBlocks(e),t.x(n.get(["showAdditionalCardsTab"],!1),n,{block:W},{})}function W(t,n){return n=n.shiftBlocks(e),t.w('<div id="additional-cards">').p("templates/contracts/additional-cards-tab",n,n,{}).w("</div>")}function H(t,n){return n=n.shiftBlocks(e),t.w('<div id="payment-info">').p("templates/contracts/payment-info-tab",n,n,{}).w("</div>")}function z(t,n){return n=n.shiftBlocks(e),t.w('<div id="contact-info"></div>')}function Y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("own-contract-header"),n,{block:q},{})}function q(t,n){return n=n.shiftBlocks(e),t.s(n.get(["card"],!1),n,{block:G},{}).w('<a href="#" class="title">').f(n.get(["name"],!1),n,"h").w('</a><div class="balances ').x(n.getPath(!1,["balances","bonus"]),n,{block:j},{}).w('">').s(n.getPath(!1,["balances","bonus"]),n,{block:K},{}).w('<div class="balance available">').s(n.getPath(!1,["balances","available"]),n,{block:X},{}).w("</div></div>").x(n.get(["editable"],!1),n,{block:Q},{})}function G(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card"),n,{},{})}function j(t,n){return n=n.shiftBlocks(e),t.w("with-bonus")}function K(t,n){return n=n.shiftBlocks(e),t.w('<div class="balance bonus">').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</div>")}function X(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["money","s"])}function Q(t,n){return n=n.shiftBlocks(e),t.w('<div class="inline-edit-panel ui-front contract-name-edit-panel">').s(n.get(["card"],!1),n,{block:J},{}).w('<div class="input-wrapper"><input type="text" value="').f(n.get(["name"],!1),n,"h").w('" maxlength="35"/></div><div class="buttons"><button class="link-button cancel">').h("_",n,{block:Z},{},"h").w('</button><button class="wb-button icon-ok save"></button></div></div>')}function J(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card"),n,{},{})}function Z(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function tt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("divisionMainContractTitle"),n,{block:et},{}).w('<div class="balances">').p("templates/contracts/balances-for-manager",n,n,{}).w("</div>")}function et(t,n){return n=n.shiftBlocks(e),t.w('<div class="account-number primary-title">').f(n.getPath(!0,["number"]),n,"h").w("</div>")}function nt(t,n){return n=n.shiftBlocks(e),t.s(n.get(["card"],!1),n,{block:ot},{}).w('<span class="cardholder">').b(n.getBlock("employeeContractTitle"),n,{block:it},{}).b(n.getBlock("employeeContractSecondaryTitle"),n,{block:rt},{}).w('</span><div class="balances">').p("templates/contracts/balances-for-manager",n,n,{}).w("</div>")}function ot(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card"),n,{},{})}function it(t,n){return n=n.shiftBlocks(e),t.w('<div class="cardholder-name">').f(n.getPath(!1,["owner","fullName"]),n,"h").w("</div>")}function rt(t,n){return n=n.shiftBlocks(e),t.x(n.get(["card"],!1),n,{else:st,block:at},{})}function st(t,n){return n=n.shiftBlocks(e),t.w('<div class="account-number secondary-title">').f(n.get(["number"],!1),n,"h").w("</div>")}function at(t,n){return n=n.shiftBlocks(e),t.w('<div class="product-name secondary-title">').f(n.getPath(!1,["product","name"]),n,"h").w("</div>")}function ct(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("cardBlock"),n,{block:ut},{})}function ut(t,n){return n=n.shiftBlocks(e),t.w('<div title="').f(n.get(["name"],!1),n,"h").w('" class="card status-').f(n.get(["status"],!1),n,"h").w(" color-").f(n.get(["wbProductColor"],!1),n,"h").w(" ").x(n.get(["isVirtual"],!1),n,{else:lt,block:dt},{}).w('"><span class="card-number">').f(n.get(["number"],!1),n,"h",["cardNumberMask"]).w("</span></div>")}function lt(t,n){return n=n.shiftBlocks(e),t.w("icon-").f(n.get(["paymentSystem"],!1),n,"h")}function dt(t,n){return n=n.shiftBlocks(e),t.w("icon-virtual")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/contract-details-page",t,e)};i.templateName="templates/contracts/contract-details-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/contracts/services-tab",n);var e={actionHref:c};function n(t,n){return n=n.shiftBlocks(e),t.x(n.get(["actions"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<ul class="contract-actions">').nx(n.get(["hideActions"],!1),n,{else:i,block:s},{}).w("</ul>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<li><a class="action-remove" href="#">').h("_",n,{block:r},{},"h").w("</a></li>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Remove card")}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["actions"],!1),n,{block:a},{contractId:n.get(["id"],!1)})}function a(t,n){return n=n.shiftBlocks(e),t.w('<li><a class="action-').f(n.get(["id"],!1),n,"h").w(" type-").f(n.getPath(!1,["service","type"]),n,"h").w('" href="').b(n.getBlock("actionHref"),n,{},{}).w('">').f(n.get(["name"],!1),n,"h",["s"]).w("</a></li>")}function c(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:u},{key:_},"h")}function u(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:l},{value:"native"},"h").h("eq",n,{block:d},{value:"report"},"h").h("eq",n,{block:p},{value:"plain"},"h").h("eq",n,{block:h},{value:"payment"},"h").h("eq",n,{block:f},{value:"application"},"h").h("eq",n,{block:m},{value:"notLink"},"h").h("none",n,{block:y},{},"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("#contracts/").f(n.get(["contractId"],!1),n,"h").w("/").f(n.getPath(!0,["id"]),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.w("#contracts/").f(n.get(["contractId"],!1),n,"h").w("/reports/").f(n.getPath(!1,["service","link","reportId"]),n,"h").w("?contractType=").f(n.get(["type"],!1),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["link"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.w("#payment/").f(n.get(["link"],!1),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("#application/").f(n.get(["link"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.w("#")}function y(t,n){return n=n.shiftBlocks(e),t.f(n.get(["serviceUrlPrefix"],!1),n,"h").f(n.get(["link"],!1),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["service","type"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/services-tab",t,e)};i.templateName="templates/contracts/services-tab",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/limits-tab",n);var e={title:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("limiters-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__contract-limiters"><div class="limiters-panel"></div></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/limits-tab",t,e)};i.templateName="templates/contracts/limits-tab",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="contract-subscriptions"><div class="big-loading-icon" /></div>')}t.register("templates/contracts/security-tab",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/security-tab",t,e)};i.templateName="templates/contracts/security-tab",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="block__history"></div>')}t.register("templates/contracts/history-tab",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/history-tab",t,e)};i.templateName="templates/contracts/history-tab",t.exports=i},function(t,e,n){var o=n(372);n(515);!function(t){function e(t,e){return t.w('<h2 class="print-header">').h("_",e,{},{key:"%(contractName)s: payment requisites",contractName:n},"h").w("</h2>").s(e.get(["bankDetails"],!1),e,{block:o},{}).b(e.getBlock("additionalInfo"),e,{},{}).w('<a class="noprint" href="javascript:window.print()">').h("_",e,{block:i},{},"h").w("</a>")}function n(t,e){return t.f(e.get(["name"],!1),e,"h",["encodeHtml","s"])}function o(t,e){return t.p("templates/contracts/payment-requisites-section",e,e,{})}function i(t,e){return t.w("Print requisites")}t.register("templates/contracts/payment-info-tab",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/payment-info-tab",t,e)};i.templateName="templates/contracts/payment-info-tab",t.exports=i},function(t,e,n){var o=n(372);n(464);!function(t){t.register("templates/contracts/payment-requisites-section",n);var e={attr:a};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="currency-info section-').f(n.get(["id"],!1),n,"h").w('"><div class="title h-small">').f(n.get(["title"],!1),n,"h").w('</div><div class="payment-requisites"><table>').s(n.get(["fields"],!1),n,{block:o},{}).w("</table></div></div>")}function o(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:i},{label_notrans:r,value:s})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function r(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("detailsAttr"),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.p("templates/contracts/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/payment-requisites-section",t,e)};i.templateName="templates/contracts/payment-requisites-section",t.exports=i},function(t,e,n){var o=n(372);n(449);!function(t){t.register("templates/form-fields/collection-select",n);var e={loading:w};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="select-wrapper"><select name="').x(n.get(["inputName"],!1),n,{else:o,block:i},{}).w('" id="').f(n.get(["name"],!1),n,"h").w('-select"class="').x(n.get(["inactive"],!1),n,{block:r},{}).w(' control-s"data-icon="carat-d" ').nx(n.get(["optional"],!1),n,{block:s},{}).w(" ").x(n.get(["disabled"],!1),n,{block:a},{}).w(">").x(n.get(["loading"],!1),n,{else:c,block:v},{}).w("</select></div>").p("templates/form-fields/hint",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["inputName"],!1),n,"h")}function r(t,n){return n=n.shiftBlocks(e),t.w("ui-disabled")}function s(t,n){return n=n.shiftBlocks(e),t.w("required")}function a(t,n){return n=n.shiftBlocks(e),t.w("disabled")}function c(t,n){return n=n.shiftBlocks(e),t.x(n.get(["inactive"],!1),n,{else:u,block:m},{}).s(n.get(["extraOptions"],!1),n,{block:g},{})}function u(t,n){return n=n.shiftBlocks(e),t.x(n.get(["collection"],!1),n,{else:l,block:d},{})}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("loading"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["noDefaultOption"],!1),n,{block:p},{}).s(n.get(["collection"],!1),n.rebase(n.get(["collection"],!1)),{block:h},{})}function p(t,n){return n=n.shiftBlocks(e),t.w('<option value="">').f(n.get(["defaultOptionTitle"],!1),n,"h").w("</option>")}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("collectionItem"),n,{block:f},{})}function f(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</option>")}function m(t,n){return n=n.shiftBlocks(e),t.w('<option value="">').s(n.get(["emptyMessage"],!1),n,{else:y,block:_},{}).w("</option>")}function y(t,n){return n=n.shiftBlocks(e),t.w("-")}function _(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function g(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</option>")}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("loading"),n,{},{})}function w(t,n){return n=n.shiftBlocks(e),t.w('<option value="">').h("_",n,{block:b},{},"h").w("</option>")}function b(t,n){return n=n.shiftBlocks(e),t.w("Loading...")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/collection-select",t,e)};i.templateName="templates/form-fields/collection-select",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/text",n);var e={input:o,htmlAttrs:u};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<input id="').f(n.get(["attr"],!1),n,"h").w('" type="').f(n.get(["htmlInputType"],!1),n,"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('"class="').f(n.get(["inputType"],!1),n,"h").w(" ").f(n.get(["cssClass"],!1),n,"h").w(" ").x(n.get(["shouldShowContactSelector"],!1),n,{block:i},{}).x(n.get(["description"],!1),n,{block:r},{}).w('"data-mask="').f(n.get(["inputType"],!1),n,"h").w('"autocorrect="off" autocapitalize="off"placeholder="').f(n.get(["placeholder"],!1),n,"h").w('" ').x(n.get(["autocomplete"],!1),n,{block:s},{}).w(" ").x(n.get(["isDateField"],!1),n,{block:a},{}).nx(n.get(["optional"],!1),n,{block:c},{}).b(n.getBlock("htmlAttrs"),n,{},{}).w("/>")}function i(t,n){return n=n.shiftBlocks(e),t.w("contact-input")}function r(t,n){return n=n.shiftBlocks(e),t.w(" has-tooltip")}function s(t,n){return n=n.shiftBlocks(e),t.w('autocomplete="on" ')}function a(t,n){return n=n.shiftBlocks(e),t.w("readonly ")}function c(t,n){return n=n.shiftBlocks(e),t.w("required ")}function u(t,n){return n=n.shiftBlocks(e),t.s(n.get(["htmlAttrs"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["0"]),n,"h").w('="').f(n.getPath(!0,["1"]),n,"h").w('"')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/text",t,e)};i.templateName="templates/form-fields/text",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/readonly",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="static-value">').f(n.get(["displayValue"],!1),n,"h",["s"]).w("</div>")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/readonly",t,e)};i.templateName="templates/form-fields/readonly",t.exports=i},function(t,e,n){var o=n(372);n(385),n(520),n(522),n(467);!function(t){t.register("templates/history/operation-details-dialog",n);var e={content:o,description:W};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("header"),n,{block:i},{}).b(n.getBlock("beforeDetails"),n,{},{}).w('<div class="operation-details-body">').s(n.get(["dispute"],!1),n,{block:r},{}).p("templates/history/operation-details",n,n,{}).p("templates/history/certificate-details",n,n,{}).b(n.getBlock("additional-details"),n,{},{}).w('</div><div class="operation-actions noprint"><div class="action-links">').x(n.get(["showPrintLink"],!1),n,{block:d},{}).x(n.get(["pdfReceiptsDownload"],!1),n,{block:h},{}).x(n.get(["isConversionToInstalment"],!1),n,{block:m},{}).nx(n.get(["printOnly"],!1),n,{block:_},{}).b(n.getBlock("additionalActions"),n,{},{}).w("</div>").nx(n.get(["printOnly"],!1),n,{block:L},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="operation-details-header"><h1>').b(n.getBlock("description"),n,{},{}).w("</h1></div>")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section dispute-warning">').x(n.get(["disputeReason"],!1),n,{else:s,block:c},{}).w(', <a href="').f(n.get(["disputesLink"],!1),n,"h").w('" class="disputes-link">').h("_",n,{block:l},{},"h").w("</a>.</div>")}function s(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:a},{},"h")}function a(t,n){return n=n.shiftBlocks(e),t.w("This operation is currently under dispute")}function c(t,n){return n=n.shiftBlocks(e),t.h("_",n,{},{key:'This operation is currently under dispute as "%(reason)s"',reason:u},"h")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["disputeReason","name"]),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("See details")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link print"><a href="#" class="print-link">').h("_",n,{block:p},{},"h").w("</a></div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Print")}function h(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link pdf-download"><a href="').f(n.getPath(!1,["settings","API_URL"]),n,"h").w("/history/").f(n.get(["id"],!1),n,"h").w('/pdf">').h("_",n,{block:f},{},"h").w("</a></div>")}function f(t,n){return n=n.shiftBlocks(e),t.w("Download receipt")}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link create-conversion-instalment"><a href="#">').h("_",n,{block:y},{},"h").w("</a></div>")}function y(t,n){return n=n.shiftBlocks(e),t.w("Create instalment")}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("templateLink"),n,{block:g},{})}function g(t,n){return n=n.shiftBlocks(e),t.x(n.get(["template"],!1),n,{else:v,block:T},{})}function v(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowPeriodic"],!1),n,{block:w},{}).x(n.get(["allowThreshold"],!1),n,{block:B},{}).x(n.get(["allowTemplate"],!1),n,{block:P},{})}function w(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link create-recurrent"><form action="').f(n.get(["contextPath"],!1),n,"h").w("/history/").f(n.get(["id"],!1),n,"h").w('/savePeriodic" method="post">').x(n.getPath(!1,["csrf","name"]),n,{block:b},{}).w('<a href="#" class="create-recurrent-template-link">').h("_",n,{block:k},{},"h").w("</a></form></div>")}function b(t,n){return n=n.shiftBlocks(e),t.w('<input type="hidden" name="').f(n.getPath(!1,["csrf","name"]),n,"h").w('" value="').f(n.getPath(!1,["csrf","value"]),n,"h").w('" />')}function k(t,n){return n=n.shiftBlocks(e),t.w("Create recurrent payment")}function B(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link create-threshold"><form action="').f(n.get(["contextPath"],!1),n,"h").w("/history/").f(n.get(["id"],!1),n,"h").w('/savePeriodic" method="post">').x(n.getPath(!1,["csrf","name"]),n,{block:C},{}).w('<a href="#" class="create-threshold-template-link">').h("_",n,{block:S},{},"h").w("</a></form></div>")}function C(t,n){return n=n.shiftBlocks(e),t.w('<input type="hidden" name="').f(n.getPath(!1,["csrf","name"]),n,"h").w('" value="').f(n.getPath(!1,["csrf","value"]),n,"h").w('" />')}function S(t,n){return n=n.shiftBlocks(e),t.w("Create auto payment")}function P(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link create-template"><a href="#" class="create-template-link">').h("_",n,{block:x},{},"h").w("</a></div>")}function x(t,n){return n=n.shiftBlocks(e),t.w("Create template")}function T(t,n){return n=n.shiftBlocks(e),t.x(n.get(["templateEditLink"],!1),n,{block:A},{})}function A(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link open-template">').h("select",n,{block:E},{key:F},"h").w("</div>")}function E(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:M},{value:"COMMON"},"h").h("eq",n,{block:N},{value:"RECURRENT"},"h").h("eq",n,{block:O},{value:"THRESHOLD"},"h")}function M(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["templateEditLink"],!1),n,"h").w('" class="open-template-link">').h("_",n,{},{key:'Template "%(templateName)s"',templateName:I},"h").w("</a>")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function N(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["templateEditLink"],!1),n,"h").w('" class="open-template-link">').h("_",n,{},{key:'Recurrent payment "%(templateName)s"',templateName:R},"h").w("</a>")}function R(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function O(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["templateEditLink"],!1),n,"h").w('" class="open-template-link">').h("_",n,{},{key:'Auto payment "%(templateName)s"',templateName:D},"h").w("</a>")}function D(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function F(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowTemplate"],!1),n,{block:V},{})}function V(t,n){return n=n.shiftBlocks(e),t.w('<form class="save-template-form" action="').f(n.get(["contextPath"],!1),n,"h").w("/history/").f(n.get(["id"],!1),n,"h").w('/createTemplate" method="post" style="display: none">').x(n.getPath(!1,["csrf","name"]),n,{block:U},{}).w('<div class="template-name-container"><input name="CP_TEMPLATE_NAME" required placeholder="').h("_",n,{block:$},{},"h").w('..." type="text"/></div><button type="submit" disabled class="wb-button icon-ok save-template"></button></form>')}function U(t,n){return n=n.shiftBlocks(e),t.w('<input type="hidden" name="').f(n.getPath(!1,["csrf","name"]),n,"h").w('" value="').f(n.getPath(!1,["csrf","value"]),n,"h").w('" />')}function $(t,n){return n=n.shiftBlocks(e),t.w("Enter template name")}function W(t,n){return n=n.shiftBlocks(e),t.p("templates/history/operation-description",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/operation-details-dialog",t,e)};i.templateName="templates/history/operation-details-dialog",t.exports=i},function(t,e,n){var o=n(372);n(521),n(382);!function(t){t.register("templates/history/operation-details",n);var e={attr:en};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').s(n.getPath(!0,[]),n,{block:o},{attrName:"Date",attrValue:i}).x(n.get(["isReversed"],!1),n,{else:r,block:C},{}).x(n.get(["channel"],!1),n,{block:x},{}).x(n.get(["rrn"],!1),n,{else:X,block:Z},{}).w("</div>").s(n.get(["invoiceDetails"],!1),n,{else:nt,block:It},{}).x(n.get(["transAmountDetails"],!1),n,{block:Nt},{}).w('<div class="details-section amounts">').s(n.getPath(!1,["amountDetails","trans"]),n,{block:Lt},{attrName:"Operation amount",attrValue:Vt}).s(n.getPath(!1,["amountDetails","parts"]),n,{block:Ut},{}).x(n.getPath(!1,["amountDetails","settl"]),n,{block:zt},{}).x(n.getPath(!1,["amountDetails","fees"]),n,{else:qt,block:Kt},{}).x(n.getPath(!1,["amountDetails","total"]),n,{block:le},{}).w("</div>").x(n.get(["instalment"],!1),n,{block:ke},{}).b(n.getBlock("extraDetails"),n,{},{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["operationTime"],!1),n,"h",["datetime"])}function r(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:s},{key:B},"h")}function s(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:a},{value:"failed"},"h").h("eq",n,{block:d},{value:"waiting"},"h").h("eq",n,{block:m},{value:"success"},"h").h("eq",n,{block:v},{value:"expired"},"h")}function a(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:c},{attrName:"Status",attrValue:u,iconPath:l,translateValue:"true"})}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function d(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:p},{attrName:"Status",attrValue:h,iconPath:f,translateValue:"true"})}function p(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/waiting.svg")}function m(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:y},{attrName:"Status",attrValue:_,iconPath:g,translateValue:"true"})}function y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/success.svg")}function v(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:w},{attrName:"Status",attrValue:b,iconPath:k,translateValue:"true"})}function w(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function b(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/expired.svg")}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function C(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:S},{attrName:"Status",attrValue:"reversed",iconPath:P,translateValue:"true"})}function S(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function P(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/canceled.svg")}function x(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:T},{key:K},"h")}function T(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:A},{value:"ATM"},"h").h("eq",n,{block:N},{value:"WB"},"h").h("eq",n,{block:F},{value:"MB"},"h").h("eq",n,{block:$},{value:"MWB"},"h").h("eq",n,{block:Y},{value:"KIOSK"},"h")}function A(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:E},{attrName:"Channel",attrValue:M,iconPath:I,translateValue:"true"})}function E(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function M(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/atm.svg")}function N(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:R},{attrName:"Channel",attrValue:O,iconPath:D,translateValue:"true"})}function R(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function O(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function D(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/web.svg")}function F(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:L},{attrName:"Channel",attrValue:V,iconPath:U,translateValue:"true"})}function L(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function V(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function U(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/mobile.svg")}function $(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:W},{attrName:"Channel",attrValue:H,iconPath:z,translateValue:"true"})}function W(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function H(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/mobile.svg")}function Y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:q},{attrName:"Channel",attrValue:G,iconPath:j,translateValue:"true"})}function q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function G(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function j(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/kiosk.svg")}function K(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function X(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Q},{attrName:"Authorization code",attrValue:J})}function Q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function J(t,n){return n=n.shiftBlocks(e),t.f(n.get(["authCode"],!1),n,"h")}function Z(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:tt},{attrName:"Operation number",attrValue:et})}function tt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function et(t,n){return n=n.shiftBlocks(e),t.f(n.get(["rrn"],!1),n,"h")}function nt(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{else:ot,block:ht},{key:Mt,value:"0",type:"number"},"h")}function ot(t,n){return n=n.shiftBlocks(e),t.x(n.get(["contract"],!1),n,{block:it},{}).s(n.get(["location"],!1),n,{block:at},{})}function it(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').s(n.getPath(!0,[]),n,{block:rt},{attrName:"Contract",attrValue:st}).w("</div>")}function rt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function st(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["contract","name"]),n,"h")}function at(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').x(n.get(["merchant"],!1),n,{block:ct},{}).s(n.getPath(!0,[]),n,{block:dt},{attrName:"Location",attrValue:pt}).w("</div>")}function ct(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:ut},{attrName:"Merchant",attrValue:lt})}function ut(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function lt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["merchant"],!1),n,"h")}function dt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function pt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["city"],!1),n,"h").w(" ").f(n.get(["region"],!1),n,"h").w(" ").f(n.get(["country"],!1),n,"h")}function ht(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').s(n.get(["operationDetails"],!1),n,{block:ft},{}).w("</div>")}function ft(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:mt},{key:Et},"h")}function mt(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:yt},{value:"group"},"h").h("eq",n,{block:_t},{value:"raw"},"h").h("none",n,{block:bt},{},"h")}function yt(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-title">').f(n.get(["name"],!1),n,"h").w("</div>")}function _t(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:gt},{attrName:vt,attrValue:wt,attrMask:n.get(["mask"],!1),rawMask:n.get(["rawMask"],!1)})}function gt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function vt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function wt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h",["s"])}function bt(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["value","currency"]),n,{else:kt,block:Pt},{})}function kt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Bt},{attrName:Ct,attrValue:St,attrMask:n.get(["mask"],!1),rawMask:n.get(["rawMask"],!1)})}function Bt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ct(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function St(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function Pt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:xt},{attrName:Tt,attrValue:At})}function xt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Tt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function At(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h",["absMoney","s"])}function Et(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function Mt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["operationDetails","length"]),n,"h")}function It(t,n){return n=n.shiftBlocks(e),t.p("templates/history/invoice-details-section",n,n,{})}function Nt(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section amounts">').s(n.get(["transAmountDetails"],!1),n,{block:Rt},{}).w("</div>")}function Rt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Ot},{attrName:Dt,attrValue:Ft})}function Ot(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Dt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["description"]),n,"h",["t"])}function Ft(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["amount"]),n,"h",["absMoney","s"])}function Lt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Vt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans"]),n,"h",["absMoney","s"])}function Ut(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:$t},{attrName:Wt,attrValue:Ht})}function $t(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Wt(t,n){return n=n.shiftBlocks(e),t.w("From contract in ").f(n.get(["currency"],!1),n,"h")}function Ht(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["absMoney","s"])}function zt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("settlementAmount"),n,{block:Yt},{})}function Yt(t,n){return n=n.shiftBlocks(e),t}function qt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("noFee"),n,{block:Gt},{})}function Gt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","fees","total"]),n,{block:jt},{attrName:"Fee amount",attrValue:"No fee",translateValue:"true"})}function jt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Kt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","fees","total"]),n,{block:Xt},{attrName:"Fee amount",attrValue:Qt}).s(n.getPath(!1,["amountDetails","fees","surcharge"]),n,{block:Jt},{attrName:"Fee amount",attrValue:Zt}).s(n.getPath(!1,["amountDetails","fees","cashback"]),n,{block:te},{attrName:"Cashback",attrValue:ee}).x(n.getPath(!1,["amountDetails","fees","bonus"]),n,{block:ne},{})}function Xt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Qt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","fees","total"]),n,"h",["absMoney","s"])}function Jt(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Zt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["fees","surcharge","trans"]),n,"h",["absMoney","s"])}function te(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ee(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","fees","cashback"]),n,"h",["absMoney","s"])}function ne(t,n){return n=n.shiftBlocks(e),t.h("gt",n,{else:oe,block:se},{key:ue,value:"0",type:"number"},"h")}function oe(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","fees","bonus"]),n,{block:ie},{attrName:"Bonuses spent",attrValue:re})}function ie(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function re(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","fees","bonus"]),n,"h",["absMoney","s"])}function se(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","fees","bonus"]),n,{block:ae},{attrName:"Bonuses earned",attrValue:ce})}function ae(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ce(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","fees","bonus"]),n,"h",["absMoney","s"])}function ue(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","fees","bonus","value"]),n,"h")}function le(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{else:de,block:_e},{key:we,value:be},"h")}function de(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{block:pe},{key:me,value:ye,type:"number"},"h")}function pe(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","total"]),n,{block:he},{attrName:"Operation total",attrValue:fe})}function he(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function fe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total"]),n,"h",["absMoney","s"])}function me(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total","value"]),n,"h")}function ye(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans","value"]),n,"h")}function _e(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","total"]),n,{block:ge},{attrName:"Operation total",attrValue:ve})}function ge(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function ve(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total"]),n,"h",["absMoney","s"])}function we(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","total","currency"]),n,"h")}function be(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["amountDetails","trans","currency"]),n,"h")}function ke(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:Be},{key:tn},"h")}function Be(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:Ce},{value:"active"},"h").h("eq",n,{block:Oe},{value:"overdue"},"h").h("eq",n,{block:je},{value:"paid"},"h").h("eq",n,{block:Qe},{value:"closed"},"h")}function Ce(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section instalment-summary">').s(n.getPath(!0,[]),n,{block:Se},{attrName:"Instalment arrears",attrValue:Pe}).s(n.getPath(!0,[]),n,{block:xe},{attrName:"Instalment period",attrValue:Te}).w('</div><div class="details-section instalment-monthly">').s(n.getPath(!0,[]),n,{block:Ae},{attrName:"Monthly fee",attrValue:Ee}).s(n.getPath(!0,[]),n,{block:Me},{attrName:"Date to pay",attrValue:Ie}).s(n.getPath(!0,[]),n,{block:Ne},{attrName:"Amount",attrValue:Re}).w("</div>")}function Se(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Pe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","fullRepaymentAmount"]),n,"h",["money","s"])}function xe(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Te(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","period"]),n,"h",["duration"])}function Ae(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ee(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","monthlyFee"]),n,"h",["money","s"])}function Me(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ie(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","nextPaymentDate"]),n,"h",["instalmentDateToPay"])}function Ne(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Re(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","nextPaymentAmount"]),n,"h",["money","s"])}function Oe(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section instalment-summary">').s(n.getPath(!0,[]),n,{block:De},{attrName:"Instalment arrears",attrValue:Fe}).s(n.getPath(!0,[]),n,{block:Le},{attrName:"Instalment period",attrValue:Ve}).w('</div><div class="details-section instalment-monthly">').s(n.getPath(!0,[]),n,{block:Ue},{attrName:"Monthly fee",attrValue:$e}).s(n.getPath(!0,[]),n,{block:We},{attrName:"Date to pay",attrValue:He}).s(n.getPath(!0,[]),n,{block:ze},{attrName:"Amount",attrValue:Ye}).s(n.getPath(!0,[]),n,{block:qe},{attrName:"Status",className:"instalment-payment-status instalment-payment-status_overdue",attrValue:Ge}).w("</div>")}function De(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Fe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","fullRepaymentAmount"]),n,"h",["money","s"])}function Le(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ve(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","period"]),n,"h",["duration"])}function Ue(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function $e(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","monthlyFee"]),n,"h",["money","s"])}function We(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function He(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","overduePaymentDate"]),n,"h",["instalmentDateToPay"])}function ze(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ye(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","overdueAmount"]),n,"h",["money","s"])}function qe(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ge(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["statuses","instalmentOverdue"]),n,"h")}function je(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section instalment-summary">').s(n.getPath(!0,[]),n,{block:Ke},{attrName:"Instalment paid at",attrValue:Xe}).w("</div>")}function Ke(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Xe(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","paidAt"]),n,"h",["date"])}function Qe(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section instalment-summary">').s(n.getPath(!0,[]),n,{block:Je},{attrName:"Status",className:"instalment-payment-status",attrValue:Ze}).w("</div>")}function Je(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Ze(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["statuses","instalmentClosed"]),n,"h")}function tn(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","status"]),n,"h")}function en(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0,ft.__dustBody=!0,mt.__dustBody=!0,yt.__dustBody=!0,_t.__dustBody=!0,gt.__dustBody=!0,vt.__dustBody=!0,wt.__dustBody=!0,bt.__dustBody=!0,kt.__dustBody=!0,Bt.__dustBody=!0,Ct.__dustBody=!0,St.__dustBody=!0,Pt.__dustBody=!0,xt.__dustBody=!0,Tt.__dustBody=!0,At.__dustBody=!0,Et.__dustBody=!0,Mt.__dustBody=!0,It.__dustBody=!0,Nt.__dustBody=!0,Rt.__dustBody=!0,Ot.__dustBody=!0,Dt.__dustBody=!0,Ft.__dustBody=!0,Lt.__dustBody=!0,Vt.__dustBody=!0,Ut.__dustBody=!0,$t.__dustBody=!0,Wt.__dustBody=!0,Ht.__dustBody=!0,zt.__dustBody=!0,Yt.__dustBody=!0,qt.__dustBody=!0,Gt.__dustBody=!0,jt.__dustBody=!0,Kt.__dustBody=!0,Xt.__dustBody=!0,Qt.__dustBody=!0,Jt.__dustBody=!0,Zt.__dustBody=!0,te.__dustBody=!0,ee.__dustBody=!0,ne.__dustBody=!0,oe.__dustBody=!0,ie.__dustBody=!0,re.__dustBody=!0,se.__dustBody=!0,ae.__dustBody=!0,ce.__dustBody=!0,ue.__dustBody=!0,le.__dustBody=!0,de.__dustBody=!0,pe.__dustBody=!0,he.__dustBody=!0,fe.__dustBody=!0,me.__dustBody=!0,ye.__dustBody=!0,_e.__dustBody=!0,ge.__dustBody=!0,ve.__dustBody=!0,we.__dustBody=!0,be.__dustBody=!0,ke.__dustBody=!0,Be.__dustBody=!0,Ce.__dustBody=!0,Se.__dustBody=!0,Pe.__dustBody=!0,xe.__dustBody=!0,Te.__dustBody=!0,Ae.__dustBody=!0,Ee.__dustBody=!0,Me.__dustBody=!0,Ie.__dustBody=!0,Ne.__dustBody=!0,Re.__dustBody=!0,Oe.__dustBody=!0,De.__dustBody=!0,Fe.__dustBody=!0,Le.__dustBody=!0,Ve.__dustBody=!0,Ue.__dustBody=!0,$e.__dustBody=!0,We.__dustBody=!0,He.__dustBody=!0,ze.__dustBody=!0,Ye.__dustBody=!0,qe.__dustBody=!0,Ge.__dustBody=!0,je.__dustBody=!0,Ke.__dustBody=!0,Xe.__dustBody=!0,Qe.__dustBody=!0,Je.__dustBody=!0,Ze.__dustBody=!0,tn.__dustBody=!0,en.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/operation-details",t,e)};i.templateName="templates/history/operation-details",t.exports=i},function(t,e,n){var o=n(372);n(382),n(382),n(382),n(382),n(382),n(382);!function(t){t.register("templates/history/invoice-details-section",n);var e={"invoice-item-header-content":N};function n(t,n){return n=n.shiftBlocks(e),t.x(n.get(["header"],!1),n,{block:o},{}).s(n.get(["details"],!1),n,{block:u},{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="accordion invoice-item"><h4 class="accordion-title invoice-item-header">').h("_",n,{block:i},{},"h").w('</h4><div class="accordion-content">').s(n.get(["header"],!1),n,{block:r},{}).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Invoice information")}function r(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:s},{attrName:a,attrValue:c,attrMask:n.get(["inputType"],!1),rawMask:n.get(["mask"],!1)})}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h",["s"])}function u(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["extendedView"],!1),n,{else:l,block:I},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="accordion invoice-item"><h4 class="accordion-title invoice-item-header">').b(n.getBlock("invoice-item-header-content"),n,{},{}).w('</h4><div class="accordion-content">').x(n.getPath(!1,["Counter","PrevValueObj"]),n,{block:d},{}).x(n.getPath(!1,["Counter","ValueObj"]),n,{block:v},{}).x(n.get(["showInvoiceInfoItems"],!1),n,{block:x},{}).w("</div></div>")}function d(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["Counter","PrevDate"]),n,{else:p,block:m},{})}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:"Previous value [invoices]",attrValue:f})}function h(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","PrevValueObj"]),n,"h",["moneyUnsafe","s"])}function m(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:y},{attrName:_,attrValue:g})}function y(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function _(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","PrevDate","value"]),n,"h",["date"])}function g(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","PrevValueObj"]),n,"h",["moneyUnsafe","s"])}function v(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["Counter","Date"]),n,{else:w,block:B},{})}function w(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:b},{attrName:"Current value [invoices]",attrValue:k})}function b(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function k(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","ValueObj"]),n,"h",["moneyUnsafe","s"])}function B(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:C},{attrName:S,attrValue:P})}function C(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","Date","value"]),n,"h",["date"])}function P(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["Counter","ValueObj"]),n,"h",["moneyUnsafe","s"])}function x(t,n){return n=n.shiftBlocks(e),t.s(n.get(["Info"],!1),n,{block:T},{})}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{attrName:E,attrValue:M})}function A(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function I(t,n){return n=n.shiftBlocks(e),t.w('<div class="invoice-item"><div class="invoice-item-header">').b(n.getBlock("invoice-item-header-content"),n,{},{}).w("</div></div>")}function N(t,n){return n=n.shiftBlocks(e),t.w('<div class="invoice-item-name">').f(n.get(["name"],!1),n,"h").w('</div><div class="invoice-item-amount">').f(n.get(["Amount"],!1),n,"h",["money","s"]).w("</div>")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/invoice-details-section",t,e)};i.templateName="templates/history/invoice-details-section",t.exports=i},function(t,e,n){var o=n(372);n(382),n(382),n(382),n(382),n(382),n(382),n(382),n(382),n(382);!function(t){function e(t,e){return t.s(e.get(["certificateDetails"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="details-section">').s(e.getPath(!0,[]),e,{block:o},{attrName:"Certificate type",attrValue:i,translateValue:"true"}).x(e.get(["dateFrom"],!1),e,{block:r},{}).x(e.get(["dateTo"],!1),e,{block:c},{}).x(e.get(["language"],!1),e,{block:d},{}).h("select",e,{block:f},{key:b},"h").x(e.get(["isExpired"],!1),e,{else:k,block:C},{}).w("</div>")}function o(t,e){return t.p("templates/partials/details-attr",e,e,{})}function i(t,e){return t.f(e.get(["certificateType"],!1),e,"h")}function r(t,e){return t.s(e.getPath(!0,[]),e,{block:s},{attrName:"Date from",attrValue:a})}function s(t,e){return t.p("templates/partials/details-attr",e,e,{})}function a(t,e){return t.f(e.get(["dateFrom"],!1),e,"h",["date","s"])}function c(t,e){return t.s(e.getPath(!0,[]),e,{block:u},{attrName:"Date to",attrValue:l})}function u(t,e){return t.p("templates/partials/details-attr",e,e,{})}function l(t,e){return t.f(e.get(["dateTo"],!1),e,"h",["date","s"])}function d(t,e){return t.s(e.getPath(!0,[]),e,{block:p},{attrName:"Language",attrValue:h,translateValue:"true"})}function p(t,e){return t.p("templates/partials/details-attr",e,e,{})}function h(t,e){return t.f(e.get(["language"],!1),e,"h")}function f(t,e){return t.h("eq",e,{block:m},{value:"in_progress"},"h").h("eq",e,{block:_},{value:"complete"},"h").h("eq",e,{block:v},{value:"failed"},"h")}function m(t,e){return t.s(e.getPath(!0,[]),e,{block:y},{attrName:"Status",attrValue:"In progress",translateValue:"true"})}function y(t,e){return t.p("templates/partials/details-attr",e,e,{})}function _(t,e){return t.s(e.getPath(!0,[]),e,{block:g},{attrName:"Status",attrValue:"Complete",translateValue:"true"})}function g(t,e){return t.p("templates/partials/details-attr",e,e,{})}function v(t,e){return t.s(e.getPath(!0,[]),e,{block:w},{attrName:"Status",attrValue:"Failed",translateValue:"true"})}function w(t,e){return t.p("templates/partials/details-attr",e,e,{})}function b(t,e){return t.f(e.get(["status"],!1),e,"h")}function k(t,e){return t.s(e.getPath(!0,[]),e,{block:B},{attrName:"Expired",attrValue:"No",translateValue:"true"})}function B(t,e){return t.p("templates/partials/details-attr",e,e,{})}function C(t,e){return t.s(e.getPath(!0,[]),e,{block:S},{attrName:"Expired",attrValue:"Yes",translateValue:"true"})}function S(t,e){return t.p("templates/partials/details-attr",e,e,{})}t.register("templates/history/certificate-details",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/certificate-details",t,e)};i.templateName="templates/history/certificate-details",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<a class="instalment-info-row" href="#contracts/').f(e.get(["contractId"],!1),e,"h").w('"><div class="name">').h("_",e,{block:n},{},"h").w('</div><div class="value">').f(e.getPath(!1,["contract","name"]),e,"h").w('</div></a><div class="instalment-info-row"><div class="name">').h("_",e,{block:o},{},"h").w('</div><div class="value">').f(e.get(["createdAt"],!1),e,"h",["operationInstalmentDateToPay"]).w("</div></div>").s(e.get(["lastPaymentDate"],!1),e,{block:i},{}).s(e.get(["paidAt"],!1),e,{block:s},{}).s(e.get(["interestRate"],!1),e,{block:c},{}).s(e.get(["principalAmount"],!1),e,{block:l},{}).w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:p},{},"h").w('</div><div class="value">').f(e.get(["period"],!1),e,"h",["periodToMonth"]).w("</div></div>").s(e.get(["nextPaymentDate"],!1),e,{block:h},{}).s(e.get(["nextPaymentAmount"],!1),e,{block:m},{}).h("eq",e,{block:_},{key:B,value:"overdue"},"h").s(e.get(["earlyRepayment"],!1),e,{block:C},{}).w('<div class="instalment-operation"><div class="title">').h("_",e,{block:I},{},"h").w('</div><div class="instalment-history-row"><div class="instalment-operation__link">').f(e.getPath(!1,["history","description"]),e,"h").w('</div><div class="instalment-operation__data"><div class="instalment-operation-data__info"><div class="instalment-status-data__amount">').f(e.getPath(!1,["history","totalAmount"]),e,"h",["absMoney","s"]).w('</div><img src="').f(e.get(["imagePath"],!1),e,"h").w("/").f(e.getPath(!1,["history","status"]),e,"h").w('.svg" /></div></div></div></div>')}function n(t,e){return t.w("Account")}function o(t,e){return t.w("Create Date")}function i(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:r},{},"h").w('</div><div class="value">').f(e.get(["lastPaymentDate"],!1),e,"h",["operationInstalmentDateToPay"]).w("</div></div>")}function r(t,e){return t.w("Finish Date")}function s(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:a},{},"h").w('</div><div class="value">').f(e.get(["paidAt"],!1),e,"h",["operationInstalmentDateToPay"]).w("</div></div>")}function a(t,e){return t.w("Paid At")}function c(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:u},{},"h").w('</div><div class="value">').f(e.get(["interestRate"],!1),e,"h").w(" %</div></div>")}function u(t,e){return t.w("Interest Rate")}function l(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:d},{},"h").w('</div><div class="value">').f(e.get(["principalAmount"],!1),e,"h",["money","s"]).w("</div></div>")}function d(t,e){return t.w("Principal Amount")}function p(t,e){return t.w("Period")}function h(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:f},{},"h").w('</div><div class="value">').f(e.get(["nextPaymentDate"],!1),e,"h",["operationInstalmentDateToPay"]).w("</div></div>")}function f(t,e){return t.w("Next Payment")}function m(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:y},{},"h").w('</div><div class="value">').f(e.get(["nextPaymentAmount"],!1),e,"h",["money","s"]).w("</div></div>")}function y(t,e){return t.w("Next Payment Amount")}function _(t,e){return t.w('<div class="instalment-operation overDueAmount"><div class="title">').h("_",e,{block:g},{},"h").w('</div><div class="instalment-info-row"><div class="name">').h("_",e,{block:v},{},"h").w('</div><div class="value">').f(e.get(["overduePaymentDate"],!1),e,"h",["operationInstalmentDateToPay"]).w('</div></div><div class="instalment-info-row"><div class="name">').h("_",e,{block:w},{},"h").w('</div><div class="value">').f(e.get(["overdueAmount"],!1),e,"h",["money","s"]).w("</div></div>").x(e.get(["monthlyFee"],!1),e,{block:b},{}).w("</div>")}function g(t,e){return t.w("Overdue Payment")}function v(t,e){return t.w("Overdue Payment Date")}function w(t,e){return t.w("Overdue Payment Amount")}function b(t,e){return t.w('<div class="instalment-info-row"><div class="name">').h("_",e,{block:k},{},"h").w('</div><div class="value">').f(e.get(["monthlyFee"],!1),e,"h",["money","s"]).w("</div></div>")}function k(t,e){return t.w("Overdue Fee")}function B(t,e){return t.f(e.get(["status"],!1),e,"h")}function C(t,e){return t.w('<div class="instalment-operation"><div class="title">').h("_",e,{block:S},{},"h").w('</div><div class="instalment-info-row"><div class="name">').h("_",e,{block:P},{},"h").w('</div><div class="value">').f(e.getPath(!1,["earlyRepayment","amount"]),e,"h",["money","s"]).w('</div></div><div class="instalment-info-row"><div class="name">').h("_",e,{block:x},{},"h").w('</div><div class="value">').h("_",e,{block:T},{},"h").w('</div></div><div class="instalment-info-row"><div class="name">').h("_",e,{block:A},{},"h").w('</div><div class="value">').h("_",e,{block:E},{},"h").w('</div></div><div class="instalment-info-row"><div class="name">').h("_",e,{block:M},{},"h").w('</div><div class="value">').f(e.getPath(!1,["earlyRepayment","date"]),e,"h",["operationInstalmentDateToPay"]).w("</div></div></div>")}function S(t,e){return t.w("Early Repayment")}function P(t,e){return t.w("Early Repayment Amount")}function x(t,e){return t.w("Early Repayment Type")}function T(t,e){return t.f(e.getPath(!1,["earlyRepayment","type"]),e,"h")}function A(t,e){return t.w("Early Repayment Status")}function E(t,e){return t.f(e.getPath(!1,["earlyRepayment","status"]),e,"h")}function M(t,e){return t.w("Early Repayment Date")}function I(t,e){return t.w("Instalment operation")}t.register("templates/instalment/operation-instalment-data-info",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/operation-instalment-data-info",t,e)};i.templateName="templates/instalment/operation-instalment-data-info",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w("<div data-js-slider-view></div>")}t.register("templates/instalment/slider",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/slider",t,e)};i.templateName="templates/instalment/slider",t.exports=i},function(t,e,n){var o=n(372);n(526);!function(t){t.register("templates/payments/invoices/invoice-payment-page",n);var e={preContent:o,extraActions:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/payment-page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowSubscription"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<form class="subscription-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="').f(n.get(["name"],!1),n,"h").w('" name="name" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function r(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowSubscription"],!1),n,{block:s},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" data-js-setup-subscription href="#">').h("_",n,{block:a},{},"h").w("</a>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Create subscription")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoice-payment-page",t,e)};i.templateName="templates/payments/invoices/invoice-payment-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header">').x(n.get(["template"],!1),n,{else:a,block:d},{}).w('</div><div class="page-messages"></div><div class="block__payments-transfers">').b(n.getBlock("preContent"),n,{},{}).w('<form class="wb-form" autocomplete="off">').s(n.get(["comment"],!1),n,{block:h},{}).w('<div class="form-fields"></div><div class="error-message-container field-wrapper error hidden"><div class="error error-message"></div></div>').x(n.get(["allowBonusPayment"],!1),n,{block:f},{}).x(n.get(["license"],!1),n,{block:m},{}).w('<div class="button-group"><button type="submit" class="wb-button" ').nx(n.get(["active"],!1),n,{block:y},{}).w(">").h("_",n,{block:_},{},"h").w('</button></div><div class="service-actions">').x(n.get(["template"],!1),n,{else:g,block:x},{}).x(n.get(["allowInternational"],!1),n,{block:D},{}).b(n.getBlock("extraActions"),n,{},{}).w("</div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title">').x(n.get(["active"],!1),n,{else:c,block:l},{}).w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.h("_",n,{},{key:"Sorry, the payment for the &laquo;%(paymentName)s&raquo; temporarily&nbsp;unavailable",paymentName:u},"h")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title first-row">').f(n.getPath(!1,["template","name"]),n,"h").w('</div><div class="title service-title sec-row">').h("_",n,{block:p},{},"h").w("</div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Template")}function h(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-description">').f(n.getPath(!0,[]),n,"h",["s"]).w("</div>")}function f(t,n){return n=n.shiftBlocks(e),t.w('<div class="bonus-payment-block" style="display: none"></div>')}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="license-block control-container"></div>')}function y(t,n){return n=n.shiftBlocks(e),t.w("disabled")}function _(t,n){return n=n.shiftBlocks(e),t.w("Continue")}function g(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowTemplate"],!1),n,{block:v},{}).x(n.get(["allowPeriodic"],!1),n,{block:b},{}).x(n.get(["allowThreshold"],!1),n,{block:C},{})}function v(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-payment-template-link">').h("_",n,{block:w},{},"h").w("</a>")}function w(t,n){return n=n.shiftBlocks(e),t.w("Save as template")}function b(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-recurrent-template-link"title="').h("_",n,{block:k},{},"h").w('">').h("_",n,{block:B},{},"h").w("</a>")}function k(t,n){return n=n.shiftBlocks(e),t.w("Subscription to make payments according to schedule")}function B(t,n){return n=n.shiftBlocks(e),t.w("Create recurrent payment")}function C(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-threshold-template-link"title="').h("_",n,{block:S},{},"h").w('">').h("_",n,{block:P},{},"h").w("</a>")}function S(t,n){return n=n.shiftBlocks(e),t.w("Subscription to refill your phone account automatically when balance of corresponding account reaches threshold amount")}function P(t,n){return n=n.shiftBlocks(e),t.w("Setup auto payment")}function x(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:T},{key:O},"h")}function T(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:A},{value:"COMMON"},"h").h("eq",n,{block:M},{value:"RECURRENT"},"h").h("eq",n,{block:N},{value:"THRESHOLD"},"h")}function A(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="#paymentTemplates/').f(n.getPath(!1,["template","id"]),n,"h").w('/edit">').h("_",n,{},{key:'Template "%(templateName)s"',templateName:E},"h").w("</a>")}function E(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="#recurrentPayments/').f(n.getPath(!1,["template","id"]),n,"h").w('/edit">').h("_",n,{},{key:'Recurrent payment "%(templateName)s"',templateName:I},"h").w("</a>")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function N(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="#thresholdPayments/').f(n.getPath(!1,["template","id"]),n,"h").w('/edit">').h("_",n,{},{key:'Auto payment "%(templateName)s"',templateName:R},"h").w("</a>")}function R(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function O(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function D(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="#payment/beneficiaries">').h("_",n,{block:F},{},"h").w("</a>")}function F(t,n){return n=n.shiftBlocks(e),t.w("Beneficiaries management")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-page",t,e)};i.templateName="templates/payments/payment-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-complete-page",n);var e={subMenu:o,pageClass:i,content:r,sendToFriend:j};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payment-complete-page">').x(n.get(["showEditPanel"],!1),n,{block:s},{}).x(n.get(["afterTemplateCreated"],!1),n,{else:c,block:d},{}).w('<h1 class="owwb-cs-main-title owwb-ws-operation-result_title align-center">').x(n.get(["afterTemplateCreated"],!1),n,{else:p,block:E},{}).w("</h1>").b(n.getBlock("extraContent"),n,{},{}).nx(n.get(["afterTemplateCreated"],!1),n,{block:I},{}).w('<div class="back-link-container"><a href="').f(n.get(["paymentsMenuLink"],!1),n,"h").w('">').h("_",n,{block:O},{},"h").w('</a></div><div class="service-actions">').nx(n.get(["isSmsNotSent"],!1),n,{block:D},{}).b(n.getBlock("extraActions"),n,{},{}).w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("templateNamePanel"),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<form class="template-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="" name="objectName" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="text-icon ').x(n.get(["isSmsNotSent"],!1),n,{else:u,block:l},{}).w('"></div>')}function u(t,n){return n=n.shiftBlocks(e),t.w("success")}function l(t,n){return n=n.shiftBlocks(e),t.w("error")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="text-icon success"></div>')}function p(t,n){return n=n.shiftBlocks(e),t.x(n.get(["message"],!1),n,{else:h,block:x},{})}function h(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:f},{key:P},"h")}function f(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:m},{value:"CASH_CODE_REVERSAL"},"h").h("eq",n,{block:_},{value:"GENERATED_CODE"},"h").h("eq",n,{block:w},{value:"SEND_TO_FRIEND"},"h").h("none",n,{block:b},{},"h")}function m(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:y},{},"h")}function y(t,n){return n=n.shiftBlocks(e),t.w("Code cancelled")}function _(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:g},{},"h").w("<br/><strong>").f(n.get(["reference"],!1),n,"h").w("</strong><br/>").h("_",n,{block:v},{},"h")}function g(t,n){return n=n.shiftBlocks(e),t.w("Use the code below to perform requested operation")}function v(t,n){return n=n.shiftBlocks(e),t.w("Please note that code cannot be restored if lost")}function w(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("sendToFriend"),n,{},{})}function b(t,n){return n=n.shiftBlocks(e),t.x(n.get(["afterCardSaved"],!1),n,{else:k,block:C},{})}function k(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:B},{},"h")}function B(t,n){return n=n.shiftBlocks(e),t.w("Payment successfully completed")}function C(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:S},{},"h")}function S(t,n){return n=n.shiftBlocks(e),t.w("Card successfully saved")}function P(t,n){return n=n.shiftBlocks(e),t.f(n.get(["serviceSubType"],!1),n,"h")}function x(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isSmsNotSent"],!1),n,{else:T,block:A},{})}function T(t,n){return n=n.shiftBlocks(e),t.f(n.get(["message"],!1),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("sendToFriend"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:M},{},"h")}function M(t,n){return n=n.shiftBlocks(e),t.w("Template successfully created")}function I(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isSmsNotSent"],!1),n,{block:N},{})}function N(t,n){return n=n.shiftBlocks(e),t.w('<div class="button-group"><button type="button" class="wb-button show-details-link">').h("_",n,{block:R},{},"h").w("</button></div>")}function R(t,n){return n=n.shiftBlocks(e),t.w("Show operation details")}function O(t,n){return n=n.shiftBlocks(e),t.w("Back to Payment and Transfers")}function D(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["afterTemplateCreated"],!1),n,{else:F,block:V},{})}function F(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="#paymentTemplates/').f(n.getPath(!1,["template","id"]),n,"h").w('/edit">').h("_",n,{},{key:'Open template "%(templateName)s"',templateName:L},"h").w("</a>")}function L(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}function V(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowSaveCard"],!1),n,{block:U},{}).x(n.get(["allowTemplate"],!1),n,{block:W},{}).x(n.get(["allowPeriodic"],!1),n,{block:z},{}).x(n.get(["allowThreshold"],!1),n,{block:q},{})}function U(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action save-card-link">').h("_",n,{block:$},{},"h").w("</a>")}function $(t,n){return n=n.shiftBlocks(e),t.w("Save external card")}function W(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-payment-template-link">').h("_",n,{block:H},{},"h").w("</a>")}function H(t,n){return n=n.shiftBlocks(e),t.w("Save as template")}function z(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-recurrent-payment-link">').h("_",n,{block:Y},{},"h").w("</a>")}function Y(t,n){return n=n.shiftBlocks(e),t.w("Create recurrent payment")}function q(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-threshold-payment-link">').h("_",n,{block:G},{},"h").w("</a>")}function G(t,n){return n=n.shiftBlocks(e),t.w("Setup auto payment")}function j(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isSmsNotSent"],!1),n,{else:K,block:Q},{}).w('<div class="owwb-ws-operation-result_sub_title">').h("_",n,{},{singular:"It can be used by recipient in %(num)s day.",plural:"It can be used by recipient in %(num)s days.",num:Z},"h").w('</div><div class="owwb-ws-operation-result_sub_title">').h("_",n,{block:tt},{},"h").w('</div><div class="owwb-ws-operation-result_sub_title"><a href="').f(n.get(["reference"],!1),n,"h").w('" target="_blank">').f(n.get(["reference"],!1),n,"h").w("</a></div>")}function K(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:X},{},"h")}function X(t,n){return n=n.shiftBlocks(e),t.w("Unique link was sent to the specified phone number for receiving money.")}function Q(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:J},{},"h")}function J(t,n){return n=n.shiftBlocks(e),t.w("Sorry, an error occurred sending SMS")}function Z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["referenceLifetimeDays"],!1),n,"h")}function tt(t,n){return n=n.shiftBlocks(e),t.w("If it doesn`t happen the transfer amount will be unblocked.")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-complete-page",t,e)};i.templateName="templates/payments/payment-complete-page",t.exports=i},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return n(419),n(406),e=n(374).TemplateView,i=n(406).Constants.ViewToModel,function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="common/add-auth-method-selector",e.prototype.bindings={"confirmation.authMethod":'[name="authType"]'},e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),!this.model.get("confirmation.authTypes"))throw new Error("Add auth types not found");return this.modelBinder=new o.ModelBinder,this.model.on("change:confirmation.authMethod",(t=this,function(){return t.setAuthMethod()}));var t},e.prototype.setAuthMethod=function(){var t,e;return e=(t=this.model.get("confirmation.authMethod").split(";"))[0],this.model.set({"confirmation.authType":e}),-1!==e.indexOf("otp_sms")?this.model.set({"confirmation.phoneId":t[1]}):-1!==e.indexOf("otp_mma")?this.model.set({"confirmation.deviceId":t[1]}):void 0},e.prototype.onRender=function(){return this.modelBinder.bind(this.model,this.$el,this.bindings,{initialCopyDirection:i}),this.$('[name="authType"]').chosen({disable_search:!0,width:"100%"})},e.prototype.context=function(){return{authMethods:this.model.getAddAuthMethods()}},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(384))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r;return n(406),r=n(40),e=n(377),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="common/add-auth-confirmation-input",n.prototype.events={"click .resend-otp-password":"onOtpResendClick","keypress input":"validateInput"},n.prototype.bindings={"confirmation.response":'[name="response"]'},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),this.allowOtpResend()&&!this.options.onOtpResend)throw new Error("onOtpResend option is not set, but authType requires it");return this.modelBinder=new o.ModelBinder,this.isNumeric=this.isNumeric()},n.prototype.onRender=function(){return this.modelBinder.bind(this.model,this.$el,this.bindings),this.$("input").focus()},n.prototype.onOtpResendClick=function(t){return t.preventDefault(),this.options.onOtpResend()},n.prototype.validateInput=function(t){if(this.isNumeric)return e.checkNumberSymbol(t,"random_auth"===this.model.get("confirmation.authType"))?void 0:t.preventDefault()},n.prototype.allowOtpResend=function(){return"otp_sms"===this.model.get("confirmation.authType")},n.prototype.isNumeric=function(){var t;return"otp_sms"===(t=this.model.get("confirmation.authType"))&&r.AUTH_OTP_SMS_IS_NUMERIC||"otp_list"===t&&r.AUTH_OTP_LIST_IS_NUMERIC||"otp_mma"===t||"random_auth"===t},n.prototype.getMaxLength=function(){switch(this.model.get("confirmation.authType")){case"otp_sms":return r.AUTH_OTP_SMS_MAXLENGTH;case"otp_list":return r.AUTH_OTP_LIST_MAXLENGTH;case"otp_mma":return r.AUTH_OTP_MMA_MAXLENGTH}},n.prototype.context=function(){var t;return t=this.model.get("confirmation.authType"),i.extend(n.__super__.context.apply(this,arguments),{authType:t,allowOtpResend:this.allowOtpResend(),maxLength:this.getMaxLength()})},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(384),n(11))},function(t,e,n){(function(e,o){var i,r,s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(374).TemplateView,s=n(391),(r={}).InlineEditView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.events={"click .save":"onSave","click .cancel":"onCancel",submit:"onSave"},n.prototype.initialize=function(t,e){return n.__super__.initialize.apply(this,arguments),this.$el.click((function(t){return t.preventDefault()})),this.options=e||{},this.options.validationRules&&this.initValidation(),this.options.defaultValue&&this.$("input").val(this.options.defaultValue),this.$("input").keyup((o=this,function(t){13!==t.keyCode?27===t.keyCode&&o.onCancel(t):o.onSave(t)}));var o},n.prototype.initValidation=function(){var t;return this.$form="FORM"===this.$el.prop("tagName")?this.$el:this.$("form"),console.assert(this.$form.length,"Can not find form element for InlineEditView with validation"),(t={})[this.$("input").attr("name")]=this.options.validationRules,this.validator=this.$form.validate({rules:t,showErrors:function(){var t;return this.defaultShowErrors(),Boolean(this.numberOfInvalids())?(t=e(this.currentForm),e(".save",t).attr("disabled","disabled")):e(".save",t).removeAttr("disabled")}})},n.prototype.setValue=function(t){return this.$("input").val(t)},n.prototype.show=function(){var t;return this.$el.addClass("visible"),o.defer((t=this,function(){var e;if((e=t.$("input:text:first")).length)return e.blur().focus(),e[0].selectionStart=e[0].selectionEnd=e.val().length})),(this.$overlay=s.createOverlay(this.$el.parent())).click(function(t){return function(e){return t.onCancel(e)}}(this))},n.prototype.onSave=function(t){var e;if(t.preventDefault(),!this.$form||this.$form.valid())return(e=this.$("input")).trigger("change"),this.trigger("save",e.val()),this.close()},n.prototype.onCancel=function(t){return t.preventDefault(),this.trigger("cancel"),this.close()},n.prototype.close=function(){return this.$("input").blur(),this.$el.removeClass("visible"),this.$overlay.remove()},n}(i),r.BlockingInlineEditView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.onCancel=function(){if(!this.isProcessing)return e.__super__.onCancel.apply(this,arguments)},e.prototype.onSave=function(t){var e;if(t.preventDefault(),!this.isProcessing)return!this.$form||this.$form.valid()?(this.isProcessing=!0,this.$el.addClass("loading"),(e=this.$("input")).trigger("change").prop("disabled",!0),this.trigger("save",e.val())):void 0},e.prototype.close=function(){return e.__super__.close.apply(this,arguments),this.$el.removeClass("loading"),this.isProcessing=!1,this.$("input").prop("disabled",!1)},e}(r.InlineEditView),t.exports=r}).call(this,n(14),n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(40),r=n(790),s=n(375),a=n(11),c=n(135),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(s.BaseModel);e.ServicePoint=u;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return i.API_URL+"/atms"},e.model=u,e}return o.__extends(e,t),e.prototype.parse=function(t,e){var n=this;return Array.from(t).map((function(t){var e=n.toServicePoint(t);return a.isEmpty(null!=e?e.info:void 0)&&console.warn("Service point info is not specified",e),e}))},e.prototype.getPointTitleByType=function(t){return["atm","atm24"].includes(t)?c.t("ATM"):["branch"].includes(t)?c.t("Branch"):["kiosk"].includes(t)?c.t("Kiosk"):["bonus"].includes(t)?c.t("Bonus club partner"):(console.assert(!0,"Unknown service point type: ",t),t)},e.prototype.toServicePoint=function(t){var e,n,o,s=t.lat,u=t.lng;if(null==s||null==u)return this.parseOldFormat(t);var l=t.info;null!=l&&null==(n=l[i.LOCALE])&&(n=null===(e=a.values(l))||void 0===e?void 0:e[0]),o=t.maxDiscount?t.maxDiscount+"%":"",n&&(n.id=t.id);var d={lat:s,lng:u,type:"atm"===t.type&&t.is24h?"atm24":t.type,maxDiscount:t.maxDiscount||0,maxDiscountLabel:o,info:a.isEmpty(n)?{}:n};t.merchantCategory&&a.extend(d,{merchantCategory:r.getAnalyticsCategoryLocalizedName(t.merchantCategory)});var p=d.info.notes;if(!a.isEmpty(p))for(var h in d.info.notes=[],p)d.info.notes.push({name:h,value:p[h]});return null!=t.is24h&&(d.info.is24h=t.is24h),null!=t.cashIn&&(d.info.cashIn=t.cashIn),null!=t.currencies&&(d.info.currencies=t.currencies),d.info.barCodeScanner=!0===t.barCodeScanner,d.info.type=d.type,d.info.textType=this.getPointTitleByType(d.type),t.maxDiscount&&(d.info.discount=c.t("up to %(value)s&#37;",{value:t.maxDiscount}),d.info.discountValue=t.maxDiscount),d},e.prototype.parseOldFormat=function(t){var e,n,o=null!=t.location?t.location.lat:void 0,r=null!=t.location?t.location.lng:void 0;if(null==o||null==r)return console.warn("Service point location is not specified",t),null;var s=t.info;null!=s&&null==(n=s[i.LOCALE])&&(n=null===(e=a.values(s))||void 0===e?void 0:e[0]),n&&(n.id=t.id);var c={lat:o,lng:r,type:t.type,address:t.address||{},info:a.isEmpty(n)?{}:n};null!=t.cashIn&&(c.info.cashIn=t.cashIn),null!=t.currencies&&(c.info.currencies=t.currencies);var u=null!=t.address?t.address.streetAddress:void 0;return a.has(c.info,"title")||a.isEmpty(u)||(c.info.title=u),c.info.barCodeScanner=!0===t.barCodeScanner,c.info.type=c.type,c.info.textType=this.getPointTitleByType(c.type),c},e}(s.BaseCollection);e.ServicePoints=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.defaults=function(){return{title:null,type:null,currencies:null,cashIn:null,barCodeScanner:null,notes:null}},e}(s.BaseModel);e.ServicePointInfo=d;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=d,e}return o.__extends(e,t),e}(s.BaseCollection);e.ServicePointsInfo=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.defaults=function(){return{textsearch:"",servicePoint:"",currency:"",category:"",cashIn:!1,barCodeScanner:!1}},e}(s.BaseModel);e.ServicePointsFilters=h},function(e,n,o){(function(n,i){var r,s,a={}.hasOwnProperty;r=o(386),(s={}).NotificationDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.id="notification-dialog",o.prototype.template="common/simple-dialog",o.prototype.requiredOptions=["text","onProceed"],o.prototype.dialogOptions=function(){return{title:this.options.title||"",buttons:[{text:t("OK"),class:"wb-button proceed",click:(e=this,function(t){if(!e.processing)return e.applyLoadingStateToButton(n(t.currentTarget)),e.processing=!0,n.when(e.onProceed()).then((function(){return e.close()}))})}]};var e},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),{dialogText:this.text})},o}(r),e.exports=s}).call(this,o(14),o(11))},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d,p,h,f,m,y,_,g,v,w;return w=n(98),y=n(374).TemplateView,g=n(417),u=g.History,e=g.AnalyticHistory,r=n(475).ApplicationHistory,p=n(949),v=n(796),m=v.SimpleHistoryListView,l=v.HistoryAnalyticsListView,a=v.ApplicationHistoryList,d=n(953),c=n(803).ContractFilterView,f=n(804).PeriodFilterView,_=n(805).TextSearchFilterView,{HistoryPanel:h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template="history/history-panel",e.prototype.historyClass=u,e.prototype.historyListClass=m,e.prototype.filters=[c,f,_],e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),this.history=new this.historyClass,!0===this.options.singleContract)return this.filters=this.filters.filter((function(t){return t!==c})),this.history.query.set("contract",this.getRequiredOption("contractId"),{silent:!0})},e.prototype.show=function(){return this.render().then((t=this,function(){return t.initializeChildViews()})).then(function(t){return function(){return t.updateHistory()}}(this)).then(function(t){return function(){return t.history.query.on("change",(function(){return t.updateHistory()}))}}(this));var t},e.prototype.showResultsLoadingIndicator=function(){return this.historyView.render({context:{isLoading:!0}})},e.prototype.updateHistory=function(){return this.history.hasChanges()&&this.showResultsLoadingIndicator(),this.history.update().done((t=this,function(){return t.renderHistory()})).fail(function(t){return function(e){if(e.errorHandled=!0,0!==e.readyState)return t.historyView.render({context:{isError:!0}})}}(this));var t},e.prototype.renderHistory=function(){return this.historyView.renderWith(this.history)},e.prototype.initializeChildViews=function(){return this.filtersView=new p({el:this.$(".filters"),query:this.history.query,filters:this.filters}),this.historyView=new this.historyListClass({el:this.$(".operations"),history:this.history}),o.when(this.filtersView.show(),this.historyView.show())},e}(y),HistoryAnalyticsPanel:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.template="history/history-analytics-panel",n.prototype.historyClass=e,n.prototype.historyListClass=l,n.prototype.show=function(){var t,e;return(t=w.loadConfig(window.WB.API_URL+"/conf/historyAnalytics.js")).catch((function(){throw new Error("historyAnalytics.js is missing")})),t.then((e=this,function(){return n.__super__.show.apply(e,arguments)}))},n.prototype.showResultsLoadingIndicator=function(){return this.$(".analytics").empty(),n.__super__.showResultsLoadingIndicator.apply(this,arguments)},n.prototype.renderHistory=function(){var t,e,o;return this.analyticsView.clear(),t=window.OW.historyAnalyticsConfig.isAnalyzableContract,(o=this.history.query.get("contract"))&&i.isFunction(t)?(e=window.app.data.contracts.dashboard.get(o))&&t(e)&&this.analyticsView.render():this.analyticsView.render(),n.__super__.renderHistory.apply(this,arguments)},n.prototype.initializeChildViews=function(){return this.analyticsView=new d({el:this.$(".analytics"),history:this.history}),o.when(n.__super__.initializeChildViews.apply(this,arguments),this.analyticsView.show())},n}(h),ApplicationHistoryPanel:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.historyClass=r,e.prototype.historyListClass=a,e.prototype.filters=[f,_],e}(h)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(t){var o,i,r={}.hasOwnProperty;i=n(40),o=n(386),e.AbstractApplicationDetailsDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="history/application-details-dialog",n.prototype.id="operation-details-dialog",n.prototype.requiredOptions=["applicationId"],n.prototype.dialogOptions={width:500},n.prototype.events={"click .print-link":"printApplicationDetails"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.initModel(),this.on("render.complete",(t=this,function(){return t.setExplicitDialogHeight()}));var t},n.prototype.initModel=function(){throw new Error("Method `initModel` must be defined in subclass")},n.prototype.printApplicationDetails=function(t){return t.preventDefault(),window.print()},n.prototype.context=function(e){return null==e&&(e={}),e.isLoading?n.__super__.context.apply(this,arguments):t.extend(n.__super__.context.apply(this,arguments),this.model.viewContext(),{contextPath:window.WB.contextPath,imagePath:i.IMAGE_PATH,pdfReceiptsDownload:t.isUndefined(i.PDF_RECEIPTS_DOWNLOAD)||!0===i.PDF_RECEIPTS_DOWNLOAD})},n}(o)}).call(this,n(11))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){return n(396),o.widget("wb.search",{cssClass:"search-input",options:{wrapperClass:"",searchOnKeyUp:!0,keyUpDebounceTime:500},_create:function(){var t,e,n;return this.element.addClass(this.cssClass),this.element.wrap("<div class='search-block "+this.options.wrapperClass+"'></div>"),t=o('<a href="#" class="clear-search"></div>'),this.element.after(t),e="",this.options.searchOnKeyUp&&this.element.keyup(i.debounce((n=this,function(){if(n.element.val()!==e)return e=n.element.val(),n.element.trigger("change")}),this.options.keyUpDebounceTime)),t.on("click",function(t){return function(e){return e.preventDefault(),t.element.val("").trigger("change")}}(this))}})}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty,s=[].slice;void 0===(i=function(t){var e,i;return e=n(392).AppCache,i=n(374).TemplateView,n(393).Templates,function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/payment-templates",n.prototype.expandedByDefault=!0,n.prototype.events={"click .ui-accordion-header":"onSectionToggle"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.expanded=this.expandedByDefault},n.prototype.onRender=function(){var t;return this.$el.on("search",(t=this,function(){var e;return e=1<=arguments.length?s.call(arguments,0):[],t.onSearch.apply(t,e)})),this.$el.accordion({active:!!this.expandedByDefault&&0,collapsible:!0,heightStyle:"content"})},n.prototype.fetchData=function(){return e.get(e.KEYS.PAYMENT_TEMPLATES).then((t=this,function(e){return t.collection=e}));var t},n.prototype.show=function(){return this.fetchData().then((t=this,function(){return t.render()}));var t},n.prototype.onSearch=function(t,e){var n;return o("a",this.$el).removeHighlight(),this.$(".menu-item").show(),e?(this.$(".menu-item").hide(),this.$("a").highlight(e),this.$(".highlight").closest(".menu-item").show(),n=!!this.$el.find(".highlight").length,this.toggleExpanded(n),this.$el.toggle(n)):(this.toggleExpanded(this.expanded),this.$el.show())},n.prototype.toggleExpanded=function(t){return this.$el.accordion("option","animate",!1),this.$el.accordion("option","active",!!t&&0),this.$el.accordion("option","animate",!0)},n.prototype.onSectionToggle=function(){return this.expanded=0===this.$el.accordion("option","active")},n.prototype.context=function(){return{collection:this.collection.viewContext(),currentMenuId:this.options.menuId,contextPath:window.WB.contextPath}},n}(i)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u;return u=o(377),r=o(137),a=o(399),n=a.DOM,(c={}).ReactMoney=function(e){var o,i;return u.checkAmount(e),i=u.formatMoneyValue(e.value),o=e.currency.slice(0,3),n.span({className:"react-amount"},n.span({className:"amount"},i)," ",n.span({className:"amount currency "+o,dangerouslySetInnerHTML:{__html:t(o)}}))},c.ReactEditableAmount=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.state={value:this.props.value,editMode:!1,invalid:!1}}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.enterEditMode=function(){return this.setState({editMode:!0})},o.prototype.isValid=function(t){return i.isNumeric(r.parseFloat(t))},o.prototype.onAmountChange=function(t){if(t=r.parseFloat(t),this.isValid(t))return this.props.minValue&&t<this.props.minValue&&(t=this.props.minValue),this.props.maxValue&&t>this.props.maxValue&&(t=this.props.maxValue),this.props.onChange(t),this.setState({value:t,editMode:!1,invalid:!1});this.setState({invalid:!0})},o.prototype.handleBlur=function(){return this.state.invalid?this.onAmountChange(this.state.value):this.onAmountChange(this.refs.input.value)},o.prototype.handleKeyDown=function(t){if(13===t.which&&this.onAmountChange(this.refs.input.value),27===t.which)return this.onAmountChange(this.state.value)},o.prototype.handleKeyUp=function(){return this.setState({invalid:!this.isValid(this.refs.input.value)})},o.prototype.handleKeyPress=function(t){if(!u.checkNumberSymbol(t))return t.preventDefault()},o.prototype.render=function(){return this.state.editMode?n.div({className:"react-amount-input-wrapper "+(this.state.invalid?"error":"")},n.input({type:"text",onKeyPress:this.handleKeyPress.bind(this),onKeyUp:this.handleKeyUp.bind(this),onKeyDown:this.handleKeyDown.bind(this),onBlur:this.handleBlur.bind(this),onPaste:function(t){return u.sanitizePastedAmount(t)},ref:"input",defaultValue:this.state.value}),n.span({className:"currency"},t(this.props.currency))):n.div({className:"react-editable-amount-wrapper",onClick:this.enterEditMode.bind(this)},c.ReactMoney({value:this.state.value,currency:this.props.currency}))},o.prototype.componentDidUpdate=function(){if(this.state.editMode)return this.refs.input.focus()},o.prototype.componentWillReceiveProps=function(t){return this.setState({value:t.value})},o}(a.Component),c}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return i=n(399),e=i.DOM,{ReactCheckbox:function(t){function n(){n.__super__.constructor.apply(this,arguments),this.state={checked:!!this.props.checked}}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.render=function(){return e.div({className:"checkbox-wrapper "+(this.props.cssClass||"")},e.label({className:"checkbox "+(this.state.checked?"checked":"")},e.input({type:"checkbox",checked:this.state.checked,ref:"checkbox",onChange:this.onChange.bind(this)})),this.props.label?e.div({className:"checkbox-label",onClick:this.toggleCheckbox.bind(this)},this.props.label):void 0)},n.prototype.toggleCheckbox=function(){return o(this.refs.checkbox).trigger("click")},n.prototype.onChange=function(){var t;return t=this.refs.checkbox.checked,this.setState({checked:t}),this.props.onChange(t)},n.prototype.componentWillReceiveProps=function(t){return this.setState({checked:t.checked})},n}(i.Component)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m,y,_,g,v,w,b;return o(396),n=o(392).AppCache,p=o(378),o(424).paymentConfirmationDialog,f=(w=o(433)).PaymentTemplatePage,u=w.DeleteTemplateConfirmationDialog,v=o(393).TEMPLATE_TYPES,g=o(397).ServicePayment,h=o(414).PaymentServiceMeta,d=o(417).HistoryItemService,b=o(380),m=o(428).RecurrentPayment,o(136),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/payment-template-page",n.prototype.templateContext={templateType:v.RECURRENT,submitButtonTitle:t("Create recurrent payment")},n.prototype.events={"click .cancel-button":"onCancel"},n.prototype.fetchData=function(){if(this.options.operationId)this.formMeta=new d({id:this.options.operationId});else{if(!this.options.serviceId)throw new Error("operationId or serviceId should be provided");this.formMeta=new h({id:this.options.serviceId})}return r.when(n.__super__.fetchData.apply(this,arguments),this.formMeta.fetch()).then((t=this,function(){return t.templateModel=new m({serviceId:t.formMeta.get("id")}),t.addRecurrentFieldsToFormMeta(),t.model=t.serviceModel=new g(t.formMeta.getModelDefaults(),{service:t.formMeta}),window.app.getUniqueTemplateName(t.model.service.get("name"))})).then(function(t){return function(e){return t.templateModel.set({name:e})}}(this));var t},n}(_=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.paymentPeriodFieldName="paymentPeriod",o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.canAddExternalCard=!1,this.canPayWithExternalCard=!1},o.prototype.resetCollectionCache=function(){return n.reset(n.KEYS.RECURRENT_PAYMENTS)},o.prototype.prepareTemplateModelToSubmit=function(){var t,e;return e={period:(t=this.model.toJSON()).paymentPeriod.period,periodDay:t.paymentPeriod.day},this.templateModel.set("schedule",e),delete t.paymentPeriod,this.templateModel.set("payment",t),this.templateModel.set("name",this.$("[name=templateName]").val())},o.prototype.onSubmitSuccess=function(){return window.app.router.navigate("",{trigger:!1}),this.resetCollectionCache(),window.app.router.showPage(b.mainMenuIds.PAYMENTS_TRANSFERS,y,{type:this.isNew?"create":"update",template:this.templateModel})},o.prototype.addRecurrentFieldsToFormMeta=function(){return this.formMeta.set("fields",i.union(this.formMeta.get("fields"),this.getPaymentPeriodFields()))},o.prototype.getPaymentPeriodFields=function(e){return[{id:this.paymentPeriodFieldName+".period",name:t("Payment period"),role:"paymentPeriod.period",visible:!0,editable:!0,optional:!1,value:this.templateModel.get("schedule.period"),addData:{SHOW_ON_CONFIRMATION:"N"}},{id:this.paymentPeriodFieldName+".day",name:t("Period day"),role:"paymentPeriod.day",htmlAttrs:{number:!0},visible:!0,editable:!0,optional:!1,value:this.templateModel.get("schedule.periodDay"),addData:{SHOW_ON_CONFIRMATION:"N"}}]},o.prototype.getTitle=function(){var e;return e=this.templateModel.get("name")||this.formMeta.get("name"),this.templateModel.isNew()?t("Create recurrent payment"):t("Edit recurrent payment '%(templateName)s'",{templateName:e})},o.prototype.getValidationOptions=function(){var t;return t=o.__super__.getValidationOptions.apply(this,arguments),i.extend(t.rules,{"paymentPeriod.day":{required:!0,digits:!0,validPeriodDay:'[name="'+this.paymentPeriodFieldName+'.period"]'}}),t},o}(f)),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.requiredOptions=["templateId"],n.prototype.template="payments/payment-template-edit-page",n.prototype.formSelector=".template-form",n.prototype.events={"click .cancel-button":"onCancel","click .delete-link":"showDeleteTemplateConfirmationDialog","click .template-name":"editName","click .execute-template-link":"executeTemplate"},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.$(".wb-tabs").tabs()},n.prototype.fetchData=function(){return r.when(n.__super__.fetchData.apply(this,arguments)).then((t=this,function(){return t.getTemplate()})).then(function(t){return function(e){if(t.templateModel=e,t.templateModel)return t.templateNameModel=t.templateModel.clone(),t.formMeta=t.templateModel.getService(),t.addRecurrentFieldsToFormMeta(),t.model=t.serviceModel=new g(t.formMeta.getModelDefaults(),{service:t.formMeta})}}(this));var t},n.prototype.addRecurrentFieldsToFormMeta=function(){if(n.__super__.addRecurrentFieldsToFormMeta.apply(this,arguments),!this.templateModel.isInvalid())return this.formMeta.set("fields",i.union([{id:"status",role:"switch",visible:!0,editable:!0,optional:!1,value:this.templateModel.get("status"),additionalTitle:{active:t("Active, next payment: %(nextPayment)s",{nextPayment:this.templateModel.get("schedule.nextPaymentOn")}),inactive:t("Inactive")},converterMapping:{true:"active",false:"inactive"},addData:{SHOW_ON_CONFIRMATION:"N"}}],this.formMeta.get("fields")))},n.prototype.prepareTemplateModelToSubmit=function(){var t;return n.__super__.prepareTemplateModelToSubmit.apply(this,arguments),t=this.templateModel.isInvalid()?"active":this.model.get("status"),this.templateModel.set("status",t)},n.prototype.showDeleteTemplateConfirmationDialog=function(t){return t.preventDefault(),new c({templateModel:this.templateModel}).show()},n}(_),c=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.dialogOptions=function(){return{title:t('Are you sure you want to delete recurrent payment "%(templateName)s"?',{templateName:this.templateModel.get("name")}),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:t("Delete"),class:"wb-button proceed delete-template-button",click:function(t){return function(e){if(!t.processing)return t.showLoadingIndicator(),t.applyLoadingStateToButton(r(e.currentTarget)),t.templateModel.destroy().then((function(){return n.reset(n.KEYS.RECURRENT_PAYMENTS),t.close(),window.app.router.navigate("",{trigger:!1}),window.app.router.showPage(b.mainMenuIds.PAYMENTS_TRANSFERS,y,{type:"delete"})}))}}(this)}]};var e},o}(u),{CreateRecurrentPaymentPage:s,EditRecurrentPaymentPage:l,RecurrentPaymentCompletePage:y=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/payment-template-complete-page",n.prototype.requireOptions=["type"],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),console.assert(i.indexOf(this.options.type,["create","update","delete"]),'RecurrentPaymentCompletePage.type must be one of "create", "update", "delete"'+this.options.type)},n.prototype.context=function(){var e;return{template:null!=(e=this.options.template)?e.viewContext():void 0,title:function(){switch(this.options.type){case"create":return t("Recurrent payment has been successfully created");case"update":return t("Recurrent payment has been successfully updated");case"delete":return t("Recurrent payment has been successfully deleted")}}.call(this),paymentsMenuLink:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS")}},n}(p)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m,y,_,g,v,w,b;return o(396),p=o(378),b=o(380),n=o(392).AppCache,o(424).paymentConfirmationDialog,f=(w=o(433)).PaymentTemplatePage,c=w.DeleteTemplateConfirmationDialog,m=o(397).ServicePayment,h=o(414).PaymentServiceMeta,d=o(417).HistoryItemService,y=o(393).TEMPLATE_TYPES,_=o(463).ThresholdPayment,o(136),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/payment-template-page",n.prototype.templateContext={templateType:y.THRESHOLD,submitButtonTitle:t("Create auto payment")},n.prototype.events={"click .cancel-button":"onCancel"},n.prototype.fetchData=function(){if(this.options.operationId)this.formMeta=new d({id:this.options.operationId});else{if(!this.options.serviceId)throw new Error("operationId or serviceId should be provided");this.formMeta=new h({id:this.options.serviceId})}return r.when(n.__super__.fetchData.apply(this,arguments),this.formMeta.fetch()).then((t=this,function(){return t.templateModel=new _({serviceId:t.formMeta.get("id")}),t.generateThresholdFields(),t.model=t.serviceModel=new m(t.formMeta.getModelDefaults(),{service:t.formMeta}),window.app.getUniqueTemplateName(t.model.service.get("name"))})).then(function(t){return function(e){return t.templateModel.set({name:e})}}(this));var t},n}(v=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.canAddExternalCard=!1,this.canPayWithExternalCard=!1},o.prototype.resetCollectionCache=function(){return n.reset(n.KEYS.THRESHOLD_PAYMENTS)},o.prototype.prepareTemplateModelToSubmit=function(){var t,e;return e={value:(t=this.model.toJSON()).threshold_AMOUNT,currency:t.threshold_CURRENCY.id},this.templateModel.set("threshold",e),delete t.threshold_AMOUNT,delete t.threshold_CURRENCY,this.templateModel.set("payment",t),this.templateModel.set("name",this.$("[name=templateName]").val())},o.prototype.onSubmitSuccess=function(){return window.app.router.navigate("",{trigger:!1}),this.resetCollectionCache(),window.app.router.showPage(b.mainMenuIds.PAYMENTS_TRANSFERS,g,{type:this.isNew?"create":"update",template:this.templateModel})},o.prototype.generateThresholdFields=function(){return this.formMeta.set("fields",i.union(this.formMeta.get("fields"),this.generateAmountCurrencyPairFields("threshold",{amount:{name:"Threshold amount",value:this.templateModel.get("threshold.value")},currency:{value:"RUR"}})))},o.prototype.generateAmountCurrencyPairFields=function(e,n){return[{id:e+"_AMOUNT",name:n.amount.name,inputType:"AMOUNT",value:n.amount.value,role:"amount.value",visible:!0,editable:!0,optional:!1,addData:{SHOW_ON_CONFIRMATION:"N"}},{id:e+"_CURRENCY",name:t("Currency"),value:{id:n.currency.value},role:"amount.currency",dataSource:{type:"catalog",values:[{name:t("RUR"),id:n.currency.value}],allowEntry:!1},visible:!0,editable:!1,optional:!1,addData:{SHOW_ON_CONFIRMATION:"N"}}]},o.prototype.getTitle=function(){var e;return e=this.templateModel.get("name")||this.formMeta.get("name"),this.templateModel.isNew()?t("Create auto payment"):t("Edit auto payment '%(templateName)s'",{templateName:e})},o}(f)),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.requiredOptions=["templateId"],e.prototype.template="payments/payment-template-edit-page",e.prototype.formSelector=".template-form",e.prototype.events={"click .cancel-button":"onCancel","click .delete-link":"showDeleteTemplateConfirmationDialog","click .template-name":"editName","click .execute-template-link":"executeTemplate"},e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.$(".wb-tabs").tabs()},e.prototype.fetchData=function(){return r.when(e.__super__.fetchData.apply(this,arguments)).then((t=this,function(){return t.getTemplate()})).then(function(t){return function(e){if(t.templateModel=e,t.templateModel)return t.templateNameModel=t.templateModel.clone(),t.formMeta=t.templateModel.getService(),t.generateThresholdFields(),t.model=new m(t.formMeta.getModelDefaults(),{service:t.formMeta})}}(this));var t},e.prototype.prepareTemplateModelToSubmit=function(){if(e.__super__.prepareTemplateModelToSubmit.apply(this,arguments),this.templateModel.isInvalid())return this.templateModel.set("status","active")},e.prototype.showDeleteTemplateConfirmationDialog=function(t){return t.preventDefault(),new u({templateModel:this.templateModel}).show()},e}(v),u=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.dialogOptions=function(){return{title:t('Are you sure you want to delete threshold payment "%(templateName)s"?',{templateName:this.templateModel.get("name")}),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:t("Delete"),class:"wb-button proceed delete-template-button",click:function(t){return function(e){if(!t.processing)return t.showLoadingIndicator(),t.applyLoadingStateToButton(r(e.currentTarget)),t.templateModel.destroy().then((function(){return n.reset(n.KEYS.THRESHOLD_PAYMENTS),t.close(),window.app.router.navigate("",{trigger:!1}),window.app.router.showPage(b.mainMenuIds.PAYMENTS_TRANSFERS,g,{type:"delete"})}))}}(this)}]};var e},o}(c),{CreateThresholdPaymentPage:s,EditThresholdPaymentPage:l,ThresholdPaymentCompletePage:g=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/payment-template-complete-page",n.prototype.requireOptions=["type"],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),console.assert(i.indexOf(this.options.type,["create","update","delete"]),'ThresholdPaymentCompletePage.type must be one of "create", "update", "delete"'+this.options.type)},n.prototype.context=function(){var e;return{template:null!=(e=this.options.template)?e.viewContext():void 0,title:function(){switch(this.options.type){case"create":return t("Auto payment has been successfully created");case"update":return t("Auto payment has been successfully updated");case"delete":return t("Auto payment has been successfully deleted")}}.call(this),paymentsMenuLink:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS")}},n}(p)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(460),r=n(135),s=n(404),a=n(392).AppCache,c=n(380),u=n(393),l=u.Template,d=u.getUniqueTemplateName,p=n(433).PaymentTemplateCompletePage,h=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.TemplateModelClass=l,t}return o.__extends(n,e),n.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return this.templateModel=new this.TemplateModelClass,this.paymentModel=this.page.getPaymentModel(),this.page.events=o.__assign(o.__assign({},this.page.events),{"click .cancel-button":this.handleCancelButtonClick}),this.page.delegateEvents(),t=this,[4,d(this.page.getPaymentName())];case 1:return t.proposedTemplateName=n.sent(),[4,Promise.all([a.get(a.KEYS.PAYMENT_TEMPLATES),a.get(a.KEYS.RECURRENT_PAYMENTS),a.get(a.KEYS.THRESHOLD_PAYMENTS)])];case 2:return e=o.__read.apply(void 0,[n.sent(),3]),this.templates=e[0],this.rPayments=e[1],this.thPayments=e[2],[2]}}))}))},n.prototype.getValidationOptions=function(){return t.extend(!0,{},e.prototype.getValidationOptions.call(this),{rules:{templateName:{required:!0,maxlength:50,uniqueTemplateName:[!0,this.templates,this.rPayments,this.thPayments]}}})},n.prototype.submitAction=function(){return this.templateModel.set({name:this.page.$("[name=templateName]").val(),payment:this.page.getPaymentModel().toJSON()}),this.templateModel.save()},n.prototype.onSubmitSuccess=function(){window.app.router.navigate("",{trigger:!1}),this.cleanTemplateCache(),window.app.router.showPage(c.mainMenuIds.PAYMENTS_TRANSFERS,p,{type:"create",template:this.templateModel})},n.prototype.handleCancelButtonClick=function(t){t.preventDefault(),window.app.router.goBack()},n.prototype.context=function(){return{proposedTemplateName:this.proposedTemplateName,strategyType:i.StrategyType.CREATE,pageTitle:r.t("Create template"),submitButtonTitle:r.t("Create template without payment")}},o.__decorate([s.autobind],n.prototype,"handleCancelButtonClick",null),n}(i.default);e.default=h}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(377),i=n(394).WbGenericFormMixin;e.default={submitAction:function(){var e=this,n=this.options,i=n.formMeta,r=n.paymentCart,s=n.editedItemId,a=n.model,c=r.getValueToSave();return i.isLicenseAccepted=!0,r.updateItem(s,a.toJSON()),r.save().then((function(n,i,a){if(200===a.status){var u=r.getItemById(s);if("MISSING_FIELDS"===o.get(u,"response._error.code")){var l=o.get(u,"response.fields").map((function(t){return e.getMissingFieldError(t.id,t.message)}));if(l.length)return window.app.clearMessages(),e.showMissingFieldsError(l),a.errorHandled=!0,r.set(c),r.saveValue(),t.Deferred().reject(a)}else{var d=r.getErrorMessageByResponse(u.response);if(d)return r.set(c),r.saveValue(),e.showError(d),t.Deferred().reject(a)}}return t.Deferred().resolve(a)}))},onSubmitError:function(t){return!!t.errorHandled||i.onSubmitError.call(this,t)},balanceEnoughConfirmation:function(){return t.Deferred().resolve()}}}).call(this,n(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(s=function(e){var n,s,c,l,d,p;return d=o(40),p=o(97),s=o(405),n=o(375).BaseModel,l=o(1106).getBrowserName,(c={}).CLIENT_BROWSER_HEADER="OW-Client-Browser","csrfToken",c.Session=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/session",e.prototype.initialize=function(){var t;return e.__super__.initialize.apply(this,arguments),this.on("change:status",(t=this,function(){return t.onStatusChanged()})),this.on("logout:implicit",function(t){return function(){return t.makeLoggedOut()}}(this))},e.prototype.onStatusChanged=function(){if(this.updateCsrfToken(),this.isAuthenticated())return this.checkSessionExpiry(),this.trigger("login")},e.prototype.updateCsrfToken=function(){if(this.has("csrfToken"))return p.set("csrfToken",this.get("csrfToken"))},e.prototype.isAuthenticated=function(){return"authenticated"===this.get("status")},e.prototype.isOffline=function(){return!1},e.prototype.initWith=function(t,e){return null==e&&(e={}),console.assert(!e.success,"options.success not supported, use promise API"),t.done((n=this,function(t,o,i){return n.set(n.parse(t,e),e),n.trigger("sync",n,t,e)})).fail(function(t){return function(n){return t.trigger("error",t,n,e)}}(this));var n},e.prototype.isNew=function(){return!1},e.prototype.logout=function(){return this.logoutPromise?this.logoutPromise:(this.isLoggingOut=!0,(this.logoutPromise=this.destroy()).done((t=this,function(){return t.logoutPromise=null,t.isLoggingOut=!1,t.makeLoggedOut()})).fail((function(t,e){return t.errorHandled=!0,console.log("logout error",t,e)})));var t},e.prototype.makeLoggedOut=function(){return Modernizr.localstorage&&window.localStorage.removeItem("sessionExpiresAt"),this.clear(),this.trigger("logout"),this.set({status:"not_authenticated"}),this.stopExpiryCheck()},e.prototype.checkSessionExpiry=function(){var t,e,n,o;if(3e3,o=this,e=function(){var t,n,r;return Modernizr.localstorage&&(n=Date.now(),(r=window.localStorage.getItem("sessionExpiresAt"))&&r>n)?(t=r-n+3e3+1e3,console.debug(o.logTime(),"ensure session expired at",o.logTime(t)),void i.delay(e,t)):o.fetch().done((function(){return o.isAuthenticated()?o.checkSessionExpiry():o.trigger("logout:implicit")}))},n=this.get("expiresInMsec"))return this.stopExpiryCheck(),Modernizr.localstorage&&window.localStorage.setItem("sessionExpiresAt",Date.now()+n),t=n+3e3,console.debug(this.logTime(),"check session expired at",this.logTime(t)),this.expirationTimeout=i.delay(e,t)},e.prototype.stopExpiryCheck=function(){return clearTimeout(this.expirationTimeout)},e.prototype.logTime=function(t){var e,n,o,i,r;return t=t||0,r=Date.now()+t,n=(e=new Date(r)).getHours(),o="0"+e.getMinutes(),i="0"+e.getSeconds(),n+":"+o.substr(-2)+":"+i.substr(-2)},e.prototype.getUserId=function(){return this.get("userId")?this.get("userId"):(null==this.userId&&(this.userId=(new Date).getTime()),this.userId)},e.prototype.getLoginMethodsList=function(){var t;return this.loginMethods?this.loginMethods:((t=this.get("loginMethods"))||(this.set("loginMethods",{LOGIN_PW:{default:!0}}),t=this.get("loginMethods")),this.loginMethods=r.map(t,(function(t,e){return i.extend({},{name:e},t)})))},e.prototype.getDefaultLoginMethod=function(){var t;return t=this.getLoginMethodsList(),i.findWhere(t,{default:!0})||t[0]},e.prototype.isLoginMethodAvailable=function(t){return!!i.find(this.getLoginMethodsList(),(function(e){return e.name===t}))},e.prototype.isCaptchaRequired=function(t){return this.get("captchaRequired")&&u.call(this.get("captchaEnabledFor"),t)>=0},e}(n),c.AuthSession=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/session",e.prototype.destroy=function(){return this.isNew=function(){return!1},e.__super__.destroy.apply(this,arguments)},e.prototype.save=function(t,n){var o;return null==n&&(n={}),o=n.beforeSend,i.extend(n,{beforeSend:function(t){return"function"==typeof o&&o(t),t.setRequestHeader(c.CLIENT_BROWSER_HEADER,l())}}),e.__super__.save.call(this,t,n)},e.prototype.toJSON=function(){var t,n;return(null!=(t=(n=e.__super__.toJSON.apply(this,arguments)).confirmation)?t.authMethod:void 0)&&delete n.confirmation.authMethod,n},e}(n),c.EnrollmentSession=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.url=d.API_URL+"/check-user",n.prototype.fieldsConfig={cardNumber:{attr:"cardNumber",name:t("Enter Card Number"),hint:t("cardNumber [enrollment hint]"),placeholder:"",mask:"cardNumber",class:"cardNumber",widget:"",type:"tel"},BIRTHDAY:{attr:"birthDate",name:t("BIRTHDAY"),hint:t("birthDate [enrollment hint]"),placeholder:"",mask:"birthDateNonIso",class:"birthDate",widget:"datepicker",type:"text"},CVC2:{attr:"cvc2",name:t("CVC2"),hint:t("cvc2 [enrollment hint]"),placeholder:"",mask:"cvv",class:"cvv",widget:"",type:"text"},EMBOSSED_NAME:{attr:"embossingName",name:t("EMBOSSED_NAME"),hint:t("embossingName [enrollment hint]"),placeholder:t("EMBOSSED_NAME placeholder"),mask:"",class:"embossingName",widget:"",type:"text"},CARD_EXPIRY:{attr:"expiryDate",name:t("CARD_EXPIRY"),hint:t("expiryDate [enrollment hint]"),placeholder:t("CARD_EXPIRY placeholder"),mask:"expiryDate",class:"expiryDate",widget:"",type:"text"},PHONE:{attr:"phoneNumber",name:t("PHONE"),hint:t("phoneNumber [enrollment hint]"),placeholder:"",mask:"PHONE_E164_RU",class:"",widget:"",type:"text"}},n.prototype.userFields=function(){return i.union(["cardNumber"],this.get("fields"))},n.prototype.getBindings=function(){var t,e,n,o,i,r,s;for(e={},o=0,i=(r=this.userFields()).length;o<i;o++)n=r[o],(t=null!=(s=this.fieldsConfig[n])?s.attr:void 0)&&(e[t]={selector:"[name='"+t+"']",converter:this.getConverter(n)});return e},n.prototype.getConverter=function(t){return"BIRTHDAY"===t?s.birthDateConverter:s.defaultConverter},n.prototype.toJSON=function(){var t,e;return(null!=(t=(e=n.__super__.toJSON.apply(this,arguments)).confirmation)?t.authMethod:void 0)&&delete e.confirmation.authMethod,e},n.prototype.viewContext=function(){var t,e;return(t=this.toJSON()).userFields=i.compact(i.map(this.userFields(),(e=this,function(t){return e.fieldsConfig[t]}))),t},n}(n),c.WalletSession=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/wallet/session",e}(c.AuthSession),c.WalletEnrollmentSession=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.url=d.API_URL+"/wallet/enroll",n.prototype.fieldsConfig={phone:{attr:"phone",name:t("Phone number"),hint:"",placeholder:t("Enter phone number"),mask:"PHONEBE",class:"phone",widget:"",type:"tel"}},n.prototype.userFields=function(){return["phone"]},n}(c.EnrollmentSession),c.newAuthSession=function(t,e){return new c.AuthSession(t,e)},c}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(1163),r=n(141);function s(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,(e=window.app.data.cardOrderSettings).fetchIfNeedAndPossible()];case 1:return o.sent(),e.get("enabled")?((n=i.default.instance(t)).showStep(n.currentStep),[2]):(window.app.router.navigate("/",{trigger:!0,replace:!0}),[2])}}))}))}e.index=s,e.addCard=function(t){var e,n,i;return o.__awaiter(this,void 0,void 0,(function(){var s,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,window.app.data.contracts.dashboard.fetchIfEmpty(null===(i=null===(n=null===(e=null===window||void 0===window?void 0:window.OW)||void 0===e?void 0:e.contractsConfig)||void 0===n?void 0:n.wbCardsAccountsPage)||void 0===i?void 0:i.sections)];case 1:return o.sent(),s=window.app.data.contracts.dashboard.get(t),a=s&&r.isCard(s)?s.get("parentId"):t,window.app.router.navigate("/card-orders?accountId="+a,{replace:!0,trigger:!0}),[2]}}))}))},e.orderPlastic=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return[2,s({cardId:t})]}))}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=r.APP_PATH+"/"+r.RESOURCES_PATH+"/card-orders",a=s+"/fragments/"+r.LOCALE,c=s+"/images",u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.getFragmentPath=function(){return e.getFragmentPath(this.id)},e.prototype.getImagePath=function(t){return e.getImagePath(this.id,t)},e.getFragmentPath=function(t){return a+"/"+encodeURIComponent(t)+".html"},e.getImagePath=function(t,e){return t=encodeURIComponent(t),e?c+"/"+t+"."+encodeURIComponent(e)+".png":c+"/"+t+".png"},e}(i.BaseModel);e.default=u},,,,,,,,,function(e,n,o){(function(i,r){var s;void 0===(s=function(e){var n,s,a,c,u,l,d,p,h;return p=o(40),d=o(96),a=o(372),o(574),n=o(137),h=o(377),u=o(575),s={VND:0,default:2},a.utils={getMinimumFractionDigits:function(t){return void 0!==s[t]?s[t]:s.default},formatDate:function(t,e){return n.formatDate(d(t).toDate(),{raw:e})},formatMoneyValue:function(t,e,o,r){var s,c,u;return null==o&&(o=!1),null==r&&(r=!1),c=i.isNumber(t)?t:parseFloat(t),r&&(c=Math.abs(c)),o?u=n.formatNumber(c,{maximumFractionDigits:0}):(s=a.utils.getMinimumFractionDigits(e),u=n.formatNumber(c,{minimumFractionDigits:s,maximumFractionDigits:s})),"+"===t[0]?"+"+u:u},checkAmount:function(t){return console.assert(!i.isEmpty(t.currency),"amount.currency required"),console.assert(t.currency.length>=3,"amount.currency.length must be at least 3"),console.assert(i.isNumber(t.value)||!i.isEmpty(t.value),"amount.value required")}},l={each:function(t,e,n,o){var r;return r=e.current(),i.each(r,(function(o,i){return t.render(n.block,e.push({key:i,value:o}))})),t},settings:function(t,e,n,o){var i;if(!o||!o.key)throw new Error("Settings helper requires `key` param");return i=a.helpers.tap(o.key,t,e),t.write(p[i]),t},context:function(e,n,o,r){var s,a;for(s in r)a=r[s],n.stack.head[s]||("undefined"==typeof t||null===t||i.isEmpty(t(a))||(a=t(a)),n.stack.head[s]=a);return e},_:function(e,n,o,r){var s,c,u;if(u=function(){return i.each(r,(function(t,o){return r[o]=a.helpers.tap(t,e,n)}))},s=function(t){return i.each(r.filter?r.filter.split("|"):[],(function(e){return t=a.filters[e](t)})),e.write(t)},r&&r.singular)u(),c=Number(r.num),console.assert(!i.isNaN(c),"tn num argument must be a valid number, not '"+r.num+"'"),s(tn(r.singular,r.plural,c));else if(r&&r.key)u(),s(t(r.key,i.omit(r,"key","filter")));else{if(!o.block)throw new Error("Translation helper requires body or `key` param");"",e.tap((function(e){return t(e)})).render(o.block,n).untap()}return e},some:function(t,e,n,o){var r,s,a,c;if(!(s=o.keys))throw new Error("`some` helper requires `keys` param");return c=s.split(",").map((function(t){return e.resolve(e.get(t.trim()))})),r=n.block,a=n.else,i.some(c)?t.render(r,e):a&&t.render(a,e),t}},a.helpers=i.extend(a.helpers,l),c={CARD_MASK_COUNT_SYMBOLS:4,lowercase:function(t){return t.toLowerCase()},uppercase:function(t){return t.toUpperCase()},datetime:function(t){return a.utils.formatDate(t,"d MMMM yyyy HH:mm")},capitalizeFirst:function(t){return t.charAt(0).toUpperCase()+t.substring(1)},recurrentDate:function(t){return a.utils.formatDate(t,"d MMMM, EEEE")},datetimeSections:function(t){return'<span class="date">'+a.utils.formatDate(t,"d MMMM yyyy")+'\n</span> <span class="time">'+a.utils.formatDate(t,"HH:mm")+"</span>"},date:function(t){return a.utils.formatDate(t,"d MMMM yyyy")},instalmentDateToPay:function(e){return t("until")+" "+a.utils.formatDate(d(e),"d MMMM yyyy")},instalmentDateToPayWithoutYear:function(e){return t("until")+" "+a.utils.formatDate(d(e),"d MMMM")},operationInstalmentDateToPay:function(t){return""+a.utils.formatDate(d(t),"d MMMM yyyy")},operationInstalmentDateToPayWithoutYear:function(t){return""+a.utils.formatDate(d(t),"d MMMM")},dmyDate:function(t){var e;return(e=n.parseDate(t,{raw:"dd.MM.yyyy"}))?n.formatDate(e,{raw:"d MMMM yyyy"}):(console.error("Could not parse date: ",t),"")},dateDayTime:function(t){return a.utils.formatDate(t,"d MMMM HH:mm")},dateWithoutYear:function(t){return a.utils.formatDate(t,"d MMMM")},dateShort:function(t){return a.utils.formatDate(t,"d")},dateMonthYear:function(t){return a.utils.formatDate(t,"LLLL yyyy")},dateWeekDay:function(t){return a.utils.formatDate(t,"d E")},dateShortTime:function(t){return a.utils.formatDate(t,"HH:mm")},dateShortMonth:function(t){return a.utils.formatDate(t,"d MMM yyyy")},dateDigits:function(t){return a.utils.formatDate(t,"dd.MM.yyyy")},messageDate:function(t){var e,n;return e=(n=d(t)).isSame(d(),"day")?"HH:mm":"d MMMM, HH:mm",a.utils.formatDate(n.toDate(),e)},remainingTime:function(t){return'<span class="timeago" title="'+t+'"></span>'},cardExpDate:function(t){var e,n;return n=t.split("."),e=new Date(n[1],parseInt(n[0],10)-1),a.utils.formatDate(e,"MM/YYYY")},cardExpDateShort:function(t){var e,n;return n=t.split("."),e=new Date(n[1],parseInt(n[0],10)-1),a.utils.formatDate(e,"MM/YY")},maskedCardNumber:function(t){var e;return e=/^(\d{4})(.*?)(\d{4})$/,(t=r.trim(t.replace(/\s/,""))).replace(e,(function(t,e,n,o){return[e,n.replace(/./g,"*"),o].join("")}))},money:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount">'+a.utils.formatMoneyValue(e.value,e.currency)+'</span>&nbsp;<span class="amount currency '+e.currency+'">'+t(e.currency)+"</span>"},absMoney:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount">'+a.utils.formatMoneyValue(e.value,e.currency,!1,!0)+'</span>&nbsp;<span class="amount currency '+e.currency+'">'+t(e.currency)+"</span>"},absMoneyWithHighlight:function(e){var n;return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount '+((n=e.value>0)?"income":"")+'">'+(n?"+":"")+a.utils.formatMoneyValue(e.value,e.currency,!1,!0)+'</span>&nbsp;<span class="amount currency '+e.currency+" "+(n?"income":"")+'">'+t(e.currency)+"</span>"},moneyInline:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),a.utils.formatMoneyValue(e.value,e.currency)+"&nbsp;"+t(e.currency)},moneyShort:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount-value">'+a.utils.formatMoneyValue(e.value,e.currency,!0)+'</span>&nbsp;<span class="currency '+e.currency+'">'+t(e.currency)+"</span>"},moneyRaw:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount-value">'+e.value+'</span>&nbsp;<span class="currency '+e.currency+'">'+t(e.currency)+"</span>"},moneyText:function(e){return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),a.utils.formatMoneyValue(e.value,e.currency)+" "+t(e.currency+" [text]")},moneyUnsafe:function(e){var n;return e?(i.isNaN(n=a.utils.formatMoneyValue(e.value,e.currency))?"":'<span class="amount">'+n+"</span>")+"&nbsp;"+(e.currency?'<span class="amount currency '+e.currency+'">'+t(e.currency)+"</span>":""):""},duration:function(t){return h.getReadableDuration(t)},periodToMonth:function(t){return tn("%(num)s month","%(num)s months",d.duration(t,"month").asMonths())},bonuses:function(e){var n;return a.utils.checkAmount(e),e.currency=e.currency.slice(0,3),'<span class="amount '+((n=e.value>0)?"income":"")+'">'+(n?"+":"&ndash;")+a.utils.formatMoneyValue(e.value,e.currency,!1,!0)+'</span>&nbsp;<span class="amount currency '+e.currency+"  "+(n?"income":"")+'">'+t(e.currency)+"</span>"},exchangeRate:function(e){return console.assert(e.rate,"exchangeRate.amount is defined"),console.assert(e.currency1,"exchangeRate.currency1 is defined"),console.assert(e.currency2,"exchangeRate.currency2 is defined"),e.rate+" "+t(e.currency1)+"/"+t(e.currency2)},currency:function(e){return'<span class="amount currency '+(e=e.slice(0,3))+'">'+t(e)+"</span>"},percentage:function(t){return u.formatPercentage(t,2,2)},percentageShort:function(t){return u.formatPercentage(t,0,1)},classname:function(t){return t.replace(".","-")},last3:function(t){return console.warn("dust.filters.last3 is deprecated. Use dust.filters.cardNumberMask"),"●"+String(t).slice(-3)},cardNumberMask:function(t){return"●"+String(t).slice(-a.filters.CARD_MASK_COUNT_SYMBOLS).replace(/\*/g,"")},cardNumberMaskOnlyDigit:function(t){return String(t).slice(-a.filters.CARD_MASK_COUNT_SYMBOLS).replace(/\*/g,"")},hcePanMask:function(t){return"...."+String(t).slice(-4).replace(/\*/g,"")},panMaskWithBull:function(t){return"····"+String(t).slice(-4).replace(/\*/g,"")},prettyPanMask:function(t){return String(t).replace(/\*/g,"●")},t:function(e){return t(e)},currencyText:function(e){return t(e+" [text]")},currencyTextLong:function(e){return t(e+" [long]")},pan:function(t){return h.maskSensitiveData(t,p.CARD_NUMBER_MASK)},countryName:function(t){return h.getCountryName(t)},encodeHtml:h.encodeWithHTMLEntities,boolToStr:function(e){return e?t("Yes"):t("No")}},a.filters=i.extend(a.filters,c)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(137),i=n(96),r=n(11);e.formatDate=function(t,e){return t=t instanceof Date?t:i(t).toDate(),o.formatDate(t,{raw:e})},e.formatNumber=function(t,e,n){void 0===n&&(n=!1);var i=r.isNumber(t)?t:parseFloat(t);n&&(i=Math.abs(i));var s=o.formatNumber(i,{maximumFractionDigits:e});return"+"===t[0]?"+"+s:s},e.formatPercentage=function(t,e,n){return t=t.toString().replace(",","."),o.formatNumber(parseFloat(t)/100,{style:"percent",minimumFractionDigits:e,maximumFractionDigits:n}).replace(/\s/g,"")}},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="action-tooltip">').x(e.get(["login"],!1),e,{else:n,block:i},{}).w('</div><div class="field-wrapper"><div class="control-container">').x(e.get(["login"],!1),e,{else:s,block:c},{}).w('</div></div><div class="password-block"></div>')}function n(t,e){return t.h("_",e,{block:o},{},"h")}function o(t,e){return t.w("Please enter username and password you will be using to enter the system")}function i(t,e){return t.h("_",e,{block:r},{},"h")}function r(t,e){return t.w("Please enter new password")}function s(t,e){return t.w('<div class="field-caption">').h("_",e,{block:a},{},"h").w('</div>\t<input type="text" name="login" class="username" maxlength="32" autocomplete="off" required />')}function a(t,e){return t.w("Username")}function c(t,e){return t.w('<span class="static-value"></span>')}t.register("templates/auth/enrollment-form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/enrollment-form",t,e)};i.templateName="templates/auth/enrollment-form",t.exports=i},function(t,e,n){var o=n(372);n(376),n(443);!function(t){t.register("templates/auth/login-page",n);var e={title:o,subMenu:i,banner:x,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__auth"><form class="wb-form"><div class="base-fields">').h("gt",n,{block:s},{key:w,value:"1",type:"number"},"h").w('<div class="auth-fields"></div>').p("templates/auth/captcha-block",n,n,{}).w('</div><div class="next-step"></div><button type="submit" class="wb-button">').h("_",n,{block:b},{},"h").w('</button></form><div class="modes-wrapper"><a href="#enrollment">').h("_",n,{block:k},{},"h").w(" / ").h("_",n,{block:B},{},"h").w("</a>").b(n.getBlock("additional-links"),n,{},{}).w("</div></div>").s(n.get(["banner"],!1),n,{block:C},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container"><select class="login-method-select">').s(n.get(["availableLoginMethods"],!1),n,{block:c},{}).w("</select></div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Authorization method")}function c(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["name"],!1),n,"h").w('" ').h("eq",n,{block:u},{key:l,value:d},"h").w(">").h("select",n,{block:p},{key:v},"h").w("</option>")}function u(t,n){return n=n.shiftBlocks(e),t.w("selected")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["selectedLoginMethod"],!1),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:h},{value:"LOGIN_PW"},"h").h("eq",n,{block:m},{value:"LOGIN"},"h").h("eq",n,{block:_},{value:"CARD"},"h").b(n.getBlock("customAuthMethods"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:f},{},"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("Login with username and password")}function m(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:y},{},"h")}function y(t,n){return n=n.shiftBlocks(e),t.w("Login with username and one-time password")}function _(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:g},{},"h")}function g(t,n){return n=n.shiftBlocks(e),t.w("Login with card number and one-time password")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["availableLoginMethods","length"]),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.w("Login")}function k(t,n){return n=n.shiftBlocks(e),t.w("Registration")}function B(t,n){return n=n.shiftBlocks(e),t.w("Password recovery")}function C(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["link"]),n,{else:S,block:P},{})}function S(t,n){return n=n.shiftBlocks(e),t.w('<div class="banner-container">').b(n.getBlock("banner"),n,{},{}).w("</div>")}function P(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.getPath(!0,["link"]),n,"h").w('" target="_blank" class="banner-container">').b(n.getBlock("banner"),n,{},{}).w("</a>")}function x(t,n){return n=n.shiftBlocks(e),t.w('<img src="').f(n.getPath(!0,["image"]),n,"h").w('" />')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/login-page",t,e)};i.templateName="templates/auth/login-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.x(e.get(["actions"],!1),e,{block:n},{})}function n(t,e){return t.w('<a href="#" class="add-link" data-js-add-link title="').h("_",e,{block:o},{},"h").w('"></a>')}function o(t,e){return t.w("Add product")}t.register("templates/contracts/add-product",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/add-product",t,e)};i.templateName="templates/contracts/add-product",t.exports=i},function(t,e,n){var o=n(372);n(496);!function(t){t.register("templates/contracts/cards-accounts-page",n);var e={actions:o};function n(t,n){return n=n.shiftBlocks(e),t.p("base-templates/contracts/cards-accounts-page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/cards-accounts-page",t,e)};i.templateName="templates/contracts/cards-accounts-page",t.exports=i},function(t,e,n){var o=n(372);n(497);!function(t){t.register("templates/contracts/contract-list",n);var e={contractIcon:o};function n(t,n){return n=n.shiftBlocks(e),t.p("base-templates/contracts/contract-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="icon ').x(n.getPath(!0,["inArchive"]),n,{block:i},{}).w('"><div class="currency-icon">').f(n.getPath(!1,["balances","available","currency"]),n,"h",["t","s"]).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("icon-archive")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/contract-list",t,e)};i.templateName="templates/contracts/contract-list",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/contracts-actions-popup",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["actions"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<ul data-role="listview" data-icon="false">').s(n.get(["actions"],!1),n,{block:r},{}).w("</ul>")}function r(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["name"]),n,{block:s},{})}function s(t,n){return n=n.shiftBlocks(e),t.w("<li><a ").x(n.get(["actionUrl"],!1),n,{else:a,block:c},{}).w(' class="ui-btn ').x(n.get(["icon"],!1),n,{block:u},{}).w('" data-js-action-link>').h("_",n,{},{key:l},"h").w("</a></li>")}function a(t,n){return n=n.shiftBlocks(e),t.w('href="#"')}function c(t,n){return n=n.shiftBlocks(e),t.w('href="').f(n.get(["actionUrl"],!1),n,"h").w('"')}function u(t,n){return n=n.shiftBlocks(e),t.w("ui-icon-").f(n.get(["icon"],!1),n,"h").w(" ui-btn-icon-right")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/contracts-actions-popup",t,e)};i.templateName="templates/contracts/contracts-actions-popup",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/history/report-dialog",n);var e={content:o,dateControls:c,emailControls:d};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="block__report-form wb-form">').s(n.get(["description"],!1),n,{block:i},{}).w('<input type="hidden" autofocus/>').b(n.getBlock("statementControls"),n,{block:r},{}).w("</form>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<p class="report-description">').f(n.getPath(!0,[]),n,"h").w("</p>")}function r(t,n){return n=n.shiftBlocks(e),t.x(n.get(["editablePeriod"],!1),n,{block:s},{}).x(n.get(["email"],!1),n,{block:a},{})}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("dateControls"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("emailControls"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="date-controls control-group"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:u},{},"h").w('</div><div class="control-container"><input id="dateFrom-input" type="text" name="dateFrom" class="datepicker maxDateToday" required readonly/></div></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:l},{},"h").w('</div><div class="control-container"><input id="dateTo-input" type="text" name="dateTo" class="datepicker maxDateToday" required readonly/></div></div></div>')}function u(t,n){return n=n.shiftBlocks(e),t.w("From [statememt date]")}function l(t,n){return n=n.shiftBlocks(e),t.w("To [statememt date]")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="email-controls control-group"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:p},{},"h").w('</div><div class="control-container"><input id="email-input" type="email" name="email" class="email" value="').f(n.get(["emailAddress"],!1),n,"h").w('" maxlength="255" readonly/></div></div><button class="wb-button email-link">').f(n.getPath(!1,["BUTTON_TITLES","email"]),n,"h").w("</button></div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Email [statement]")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/report-dialog",t,e)};i.templateName="templates/history/report-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/applications/application-conditions-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["comment"],!1),n,{block:i},{}).b(n.getBlock("customConditions"),n,{},{}).s(n.get(["license"],!1),n,{block:r},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="comment">').f(n.getPath(!0,[]),n,"h",["s"]).w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.w('<form class="license-form"></form>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/applications/application-conditions-dialog",t,e)};i.templateName="templates/applications/application-conditions-dialog",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/applications/application-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("application-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__applications ').nx(n.get(["isTabs"],!1),n,{block:a},{}).w('">').nx(n.get(["hasMissingMandatoryFields"],!1),n,{else:c,block:p},{}).w("</div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("no-tabs")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="missing-fields-warning">').h("_",n,{block:u},{},"h").w(':<ul class="missing-fields-list">').s(n.get(["missingMandatoryFields"],!1),n,{block:l},{}).w("</ul>").h("_",n,{block:d},{},"h").w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("To submit this application the following fields should be filled")}function l(t,n){return n=n.shiftBlocks(e),t.w("<li>").f(n.get(["name"],!1),n,"h").w("</li>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Please visit bank office to fill in the missing information.")}function p(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form"><div class="form-fields ').x(n.get(["isTabs"],!1),n,{block:h},{}).w('">').x(n.get(["isTabs"],!1),n,{block:f},{}).w('</div><div class="error-message-container field-wrapper error hidden"><div class="error error-message"></div></div><div class="button-group">').x(n.get(["isTabs"],!1),n,{block:y},{}).w('<button type="submit" class="wb-button hidden" ').x(n.get(["isTabs"],!1),n,{block:v},{}).w(">").h("_",n,{block:w},{},"h").w("</button></div></form>")}function h(t,n){return n=n.shiftBlocks(e),t.w("wb-tabs")}function f(t,n){return n=n.shiftBlocks(e),t.w('<ul class="service-nav">').s(n.get(["tabs"],!1),n,{block:m},{}).w("</ul>")}function m(t,n){return n=n.shiftBlocks(e),t.w('<li data-id="').f(n.get(["id"],!1),n,"h").w('"><a href="#').f(n.get(["id"],!1),n,"h").w('"><span class="step-indicator">').f(n.get(["index"],!1),n,"h").w('</span><span class="step-name">').f(n.get(["name"],!1),n,"h").w("</span></a></li>")}function y(t,n){return n=n.shiftBlocks(e),t.w('<button type="button" class="wb-button prev-step">').h("_",n,{block:_},{},"h").w('</button><button type="button" class="wb-button next-step">').h("_",n,{block:g},{},"h").w("</button>")}function _(t,n){return n=n.shiftBlocks(e),t.w("Back")}function g(t,n){return n=n.shiftBlocks(e),t.w("Continue")}function v(t,n){return n=n.shiftBlocks(e),t.w("formnovalidate")}function w(t,n){return n=n.shiftBlocks(e),t.w("Submit application")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0}(o);var i=function(t,e){o.render("templates/applications/application-page",t,e)};i.templateName="templates/applications/application-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container"><input type="text" name="card" class="cardNumber" data-mask="cardNumber" autocomplete="off" required /></div></div>')}function n(t,e){return t.w("Card number")}t.register("templates/auth/auth-card-method",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/auth-card-method",t,e)};i.templateName="templates/auth/auth-card-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container"><input type="text" name="login" class="username" maxlength="32" autocomplete="off" required/></div></div>')}function n(t,e){return t.w("Username")}t.register("templates/auth/auth-login-method",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/auth-login-method",t,e)};i.templateName="templates/auth/auth-login-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container"><input type="text" name="login" class="username" maxlength="32" autocomplete="off" required /></div></div><div class="field-wrapper"><div class="field-caption">').h("_",e,{block:o},{},"h").w('</div><div class="control-container"><input type="password" class="fakePassword" tabindex="-1"><input type="text" autocomplete="off" maxlength="32" id="password" name="password" required/><input type="text" autocomplete="off" required name="realpassword" class="hidden"/><input type="password" class="fakePassword" tabindex="-1"></div></div>')}function n(t,e){return t.w("Username")}function o(t,e){return t.w("Password")}t.register("templates/auth/auth-login-pw-method",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/auth-login-pw-method",t,e)};i.templateName="templates/auth/auth-login-pw-method",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="action-tooltip">').x(e.get(["login"],!1),e,{else:n,block:i},{}).w('</div><div class="field-wrapper"><div class="field-caption">').h("_",e,{block:s},{},"h").w('</div><div class="control-container">').x(e.get(["login"],!1),e,{else:a,block:c},{}).w('</div></div><div class="password-block"></div>')}function n(t,e){return t.h("_",e,{block:o},{},"h")}function o(t,e){return t.w("Please enter username and password you will be using to enter the system")}function i(t,e){return t.h("_",e,{block:r},{},"h")}function r(t,e){return t.w("Please enter new password")}function s(t,e){return t.w("Username")}function a(t,e){return t.w('<input type="text" name="login" class="username" maxlength="32" autocomplete="off" required />')}function c(t,e){return t.w('<span class="static-value">').f(e.get(["login"],!1),e,"h").w("</span>")}t.register("base-templates/auth/enrollment-form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/auth/enrollment-form",t,e)};i.templateName="base-templates/auth/enrollment-form",t.exports=i},function(t,e,n){var o=n(372);n(376),n(443);!function(t){t.register("templates/auth/enrollment-page",n);var e={title:o,subMenu:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__auth"><form class="wb-form"><div class="base-fields"><div class="action-tooltip">').h("_",n,{block:s},{},"h").w("</div>").s(n.get(["userFields"],!1),n,{block:a},{}).p("templates/auth/captcha-block",n,n,{}).w('</div><div class="next-step"></div><button type="submit" class="wb-button">').h("_",n,{block:m},{},"h").w('</button></form><div class="modes-wrapper"><a href="#login">').h("_",n,{block:y},{},"h").w("</a></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Please enter card number of one of your cards. After that, SMS with one-time password will be sent to you for confirmation.")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:c},{},"h").w('</div><div class="control-container ').x(n.get(["widget"],!1),n,{block:u},{}).w('"><input type="').h("eq",n,{else:l,block:d},{key:p,value:"cvv"},"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('" required class="').f(n.get(["class"],!1),n,"h").w('" autocomplete="off"').x(n.get(["placeholder"],!1),n,{block:h},{}).w(" ").x(n.get(["mask"],!1),n,{block:f},{}).w(' /><div class="hint hidden ').f(n.get(["attr"],!1),n,"h").w('-hint">').f(n.get(["hint"],!1),n,"h").w("</div></div></div>")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.w("has-").f(n.get(["widget"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("text")}function d(t,n){return n=n.shiftBlocks(e),t.w("password")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["mask"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.w('placeholder="').f(n.get(["placeholder"],!1),n,"h").w('"')}function f(t,n){return n=n.shiftBlocks(e),t.w('data-mask="').f(n.get(["mask"],!1),n,"h").w('"')}function m(t,n){return n=n.shiftBlocks(e),t.w("Proceed")}function y(t,n){return n=n.shiftBlocks(e),t.w("Login")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/enrollment-page",t,e)};i.templateName="templates/auth/enrollment-page",t.exports=i},function(t,e,n){var o=n(372);n(444);!function(t){function e(t,e){return t.s(e.get(["confirmation"],!1),e,{block:n},{})}function n(t,e){return t.p("templates/partials/addauth/add-auth-method-switch",e,e,{})}t.register("templates/auth/login-add-auth-confirmation",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/login-add-auth-confirmation",t,e)};i.templateName="templates/auth/login-add-auth-confirmation",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w(':</div><div class="control-container"></div></div>')}function n(t,e){return t.w("Select confirmation method")}t.register("templates/auth/login-add-auth-method-selector",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/login-add-auth-method-selector",t,e)};i.templateName="templates/auth/login-add-auth-method-selector",t.exports=i},function(t,e,n){var o=n(372);n(506);!function(t){function e(t,e){return t.w('<div class="action-tooltip">').h("_",e,{block:n},{},"h").w("</div>").p("templates/auth/password-input",e,e,{})}function n(t,e){return t.w("Password change required, please enter new password to be able to login into the system")}t.register("templates/auth/login-change-password",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/login-change-password",t,e)};i.templateName="templates/auth/login-change-password",t.exports=i},function(t,e,n){var o=n(372);n(376),n(443);!function(t){t.register("base-templates/auth/login-page",n);var e={title:o,subMenu:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__auth"><form class="wb-form"><div class="base-fields">').h("gt",n,{block:s},{key:w,value:"1",type:"number"},"h").w('<div class="auth-fields"></div>').p("templates/auth/captcha-block",n,n,{}).w('</div><div class="next-step"></div><button type="submit" class="wb-button">').h("_",n,{block:b},{},"h").w('</button></form><div class="modes-wrapper"><a href="#enrollment">').h("_",n,{block:k},{},"h").w(" / ").h("_",n,{block:B},{},"h").w("</a>").b(n.getBlock("additional-links"),n,{},{}).w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container"><select class="login-method-select">').s(n.get(["availableLoginMethods"],!1),n,{block:c},{}).w("</select></div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Authorization method")}function c(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["name"],!1),n,"h").w('" ').h("eq",n,{block:u},{key:l,value:d},"h").w(">").h("select",n,{block:p},{key:v},"h").w("</option>")}function u(t,n){return n=n.shiftBlocks(e),t.w("selected")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["selectedLoginMethod"],!1),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:h},{value:"LOGIN_PW"},"h").h("eq",n,{block:m},{value:"LOGIN"},"h").h("eq",n,{block:_},{value:"CARD"},"h").b(n.getBlock("customAuthMethods"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:f},{},"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("Login with username and password")}function m(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:y},{},"h")}function y(t,n){return n=n.shiftBlocks(e),t.w("Login with username and one-time password")}function _(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:g},{},"h")}function g(t,n){return n=n.shiftBlocks(e),t.w("Login with card number and one-time password")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["availableLoginMethods","length"]),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.w("Login")}function k(t,n){return n=n.shiftBlocks(e),t.w("Registration")}function B(t,n){return n=n.shiftBlocks(e),t.w("Password recovery")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/auth/login-page",t,e)};i.templateName="base-templates/auth/login-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/auth/set-login-page",n);var e={title:o,content:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__set-password"><form class="wb-form" autocomplete="off"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:r},{},"h").w('</div><div class="control-container"><input type="text" name="oldLogin" disabled /></div></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:s},{},"h").w('</div><div class="control-container"><input type="text" name="login" class="username" /><div class="hint">').h("_",n,{block:a},{},"h").w('</div></div></div><button type="submit" class="wb-button">').h("_",n,{block:c},{},"h").w("</button></form></div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Current login")}function s(t,n){return n=n.shiftBlocks(e),t.w("New login")}function a(t,n){return n=n.shiftBlocks(e),t.w("[Login policy description]")}function c(t,n){return n=n.shiftBlocks(e),t.w("Change login")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/set-login-page",t,e)};i.templateName="templates/auth/set-login-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/auth/set-password-page",n);var e={title:o,content:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__set-password"><form class="wb-form" autocomplete="off"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:r},{},"h").w('</div><div class="control-container"><input type="password" id="password-input" name="password"required maxlength="').f(n.getPath(!1,["policy","maxLength"]),n,"h").w('" minlength="').f(n.getPath(!1,["policy","minLength"]),n,"h").w('"/><div class="hint">').h("_",n,{block:s},{},"h").w('</div></div></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container"><input type="password" id="passwordConfirmation-input" name="passwordConfirmation"required maxlength="').f(n.getPath(!1,["policy","maxLength"]),n,"h").w('"/></div></div><button type="submit" class="wb-button">').h("_",n,{block:c},{},"h").w("</button></form></div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("New password")}function s(t,n){return n=n.shiftBlocks(e),t.w("[WB_PWA policy description]")}function a(t,n){return n=n.shiftBlocks(e),t.w("Repeat password")}function c(t,n){return n=n.shiftBlocks(e),t.w("Save password")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/auth/set-password-page",t,e)};i.templateName="templates/auth/set-password-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/card-orders/complete-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("card-orders-page card-orders-complete-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__complete"><div class="complete__icon ').x(n.get(["isError"],!1),n,{else:s,block:a},{}).w('"></div>').x(n.get(["isDigital"],!1),n,{else:c,block:m},{}).nx(n.get(["isError"],!1),n,{block:g},{}).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--success")}function a(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--failed")}function c(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isPlasticCardOrder"],!1),n,{else:u,block:p},{})}function u(t,n){return n=n.shiftBlocks(e),t.w('<h1 class="complete__title">').h("_",n,{block:l},{},"h").w('</h1><div class="complete__desc">').h("_",n,{block:d},{},"h").w("</div>")}function l(t,n){return n=n.shiftBlocks(e),t.w("Card ordered [title]")}function d(t,n){return n=n.shiftBlocks(e),t.w("Card ordered [description]")}function p(t,n){return n=n.shiftBlocks(e),t.w('<h1 class="complete__title">').h("_",n,{block:h},{},"h").w('</h1><div class="complete__desc">').h("_",n,{block:f},{},"h").w("</div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Plastic card ordered [title]")}function f(t,n){return n=n.shiftBlocks(e),t.w("Plastic card ordered [description]")}function m(t,n){return n=n.shiftBlocks(e),t.w('<h1 class="complete__title">').h("_",n,{block:y},{},"h").w('</h1><div class="complete__desc">').h("_",n,{},{key:"Digital card with number %(pureCardNumber)s ordered [description]",pureCardNumber:_},"h").w("</div>")}function y(t,n){return n=n.shiftBlocks(e),t.w("Digital card ordered [title]")}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["pureCardNumber"],!1),n,"h")}function g(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isPlasticCardOrder"],!1),n,{else:v,block:b},{})}function v(t,n){return n=n.shiftBlocks(e),t.w('<a class="wb-button complete__details-btn" data-js-details href="#">').h("_",n,{block:w},{},"h").w("</a>")}function w(t,n){return n=n.shiftBlocks(e),t.w("Operation details")}function b(t,n){return n=n.shiftBlocks(e),t.w('<a class="wb-button complete__details-btn" data-js-go-back href="#contracts/').f(n.get(["cardId"],!1),n,"h").w('">').h("_",n,{block:k},{},"h").w("</a>")}function k(t,n){return n=n.shiftBlocks(e),t.w("Return to card")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0}(o);var i=function(t,e){o.render("templates/card-orders/complete-page",t,e)};i.templateName="templates/card-orders/complete-page",t.exports=i},function(t,e,n){var o=n(372);n(445),n(382),n(382);!function(t){t.register("templates/card-orders/confirmation-dialog",n);var e={addContent:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/add-auth-without-form-dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').s(n.get(["fields"],!1),n,{block:i},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["raw"]),n,{else:r,block:u},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:s},{attrName:a,attrValue:c})}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:l},{attrName:d,attrValue:p})}function l(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function d(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h",["s"])}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/card-orders/confirmation-dialog",t,e)};i.templateName="templates/card-orders/confirmation-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<form class="wb-form card-orders-form-page__form" autocomplete="off"><div class="form-fields"></div>').x(e.get(["license"],!1),e,{block:n},{}).w('<div class="button-group"><button type="submit" class="wb-button">').h("_",e,{block:o},{},"h").w("</button></div></form>")}function n(t,e){return t.w('<div class="license-block control-container" data-js-license></div>')}function o(t,e){return t.w("Continue")}t.register("templates/card-orders/form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/card-orders/form",t,e)};i.templateName="templates/card-orders/form",t.exports=i},function(t,e,n){var o=n(372);n(376),n(382);!function(t){t.register("templates/card-orders/form-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,title:s,content:a,attr:g};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("card-orders-page card-orders-form-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header content-header--with-back-button"><a href="#" class="content-header__back-button"></a><div class="title">').f(n.get(["pageTitle"],!1),n,"h").w("</div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="page-messages"></div><div class="card-orders-form-page__card card-orders-page__card" data-js-card><div class="card-orders-page__card-info"><div class="card-orders-page__card-expired" data-js-card-expired-date></div><div class="card-orders-page__card-cardholder-name" data-js-cardholder-name>').f(n.get(["cardholderName"],!1),n,"h").w("</div></div></div>").x(n.get(["orderDetails"],!1),n,{block:c},{}).w("<div data-js-form-wrapper></div>")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="card-orders-form-page__order-details">').s(n.get(["orderDetails"],!1),n,{block:u},{}).w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["raw"]),n,{else:l,block:f},{})}function l(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:d},{attrName:p,attrValue:h})}function d(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function p(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:m},{attrName:y,attrValue:_})}function m(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h",["s"])}function g(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0}(o);var i=function(t,e){o.render("templates/card-orders/form-page",t,e)};i.templateName="templates/card-orders/form-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/card-orders/index-page",n);var e={subMenu:o,pageClass:i,title:r,content:s,slide:c};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("card-orders-page card-orders-index-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header content-header--with-back-button"><a href="#" class="content-header__back-button"></a><div class="title">').f(n.get(["pageTitle"],!1),n,"h").w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="card-orders-index-page__slider">').s(n.get(["collection"],!1),n,{block:a},{}).w("</div>")}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("slide"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="card-orders-index-page__slide card-orders-index-page__slide--loading" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="card-orders-index-page__slide-content"><div class="card-orders-index-page__card card-orders-page__card"><div class="card-orders-page__card-info"><div class="card-orders-page__card-expired">').h("_",n,{block:u},{},"h").w('</div><div class="card-orders-page__card-cardholder-name">').h("_",n,{block:l},{},"h").w('</div></div></div><div class="card-orders-index-page__description"></div></div><div class="card-orders-index-page__slide-actions"><a href="#" data-js-group-type-id="').f(n.getPath(!0,["id"]),n,"h").w('" data-js-order-button class="wb-button">').h("_",n,{block:d},{},"h").w("</a></div></div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("VALID THRU")}function l(t,n){return n=n.shiftBlocks(e),t.w("CARDHOLDER NAME")}function d(t,n){return n=n.shiftBlocks(e),t.w("Order card")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/card-orders/index-page",t,e)};i.templateName="templates/card-orders/index-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<form class="wb-form"><div class="form-fields"></div><button type="submit" class="wb-button hidden">').h("_",e,{block:n},{},"h").w("</button></form>")}function n(t,e){return t.w("Submit")}t.register("templates/certificates/certificate-form",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/certificates/certificate-form",t,e)};i.templateName="templates/certificates/certificate-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/certificates/certificate-form-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__certificate-form"><div class="wb-form"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:s},{},"h").w('</div><div class="control-container"><div class="certificates-types-wrapper"></div></div></div></div><div class="certificates-form-wrapper"></div></div>')}function s(t,n){return n=n.shiftBlocks(e),t.w("Type")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/certificates/certificate-form-page",t,e)};i.templateName="templates/certificates/certificate-form-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/certificates/certificate-success-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__complete"><div class="complete__icon complete__icon--success"></div><h1 class="complete__title">').h("_",n,{block:s},{},"h").w('</h1><div class="complete__desc">').h("_",n,{block:a},{},"h").w('</div><a class="wb-button complete__details-btn" data-js-details href="#">').h("_",n,{block:c},{},"h").w("</a></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Certificate ordered")}function a(t,n){return n=n.shiftBlocks(e),t.w("When the certificate will be ready - you will receive SMS")}function c(t,n){return n=n.shiftBlocks(e),t.w("Operation details")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/certificates/certificate-success-page",t,e)};i.templateName="templates/certificates/certificate-success-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.h("eq",e,{else:n,block:r},{key:a,value:"random_auth"},"h").x(e.get(["allowOtpResend"],!1),e,{block:c},{})}function n(t,e){return t.w('<input name="response" type="text" placeholder="').h("_",e,{block:o},{},"h").w('..." autocomplete="off" required ').s(e.get(["maxLength"],!1),e,{block:i},{}).w(" />")}function o(t,e){return t.w("Enter one-time password")}function i(t,e){return t.w('maxlength="').f(e.getPath(!0,[]),e,"h").w('"')}function r(t,e){return t.w('<input class="money" name="response" type="text" placeholder="').h("_",e,{block:s},{},"h").w('..." autocomplete="off" required />')}function s(t,e){return t.w("Enter amount")}function a(t,e){return t.f(e.get(["authType"],!1),e,"h")}function c(t,e){return t.b(e.getBlock("resendOtpLink"),e,{block:u},{})}function u(t,e){return t.w('<a href="#" class="resend-otp-password" title="').h("_",e,{block:l},{},"h").w('"></a>')}function l(t,e){return t.w("Resend one-time password")}t.register("templates/common/add-auth-confirmation-input",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/add-auth-confirmation-input",t,e)};i.templateName="templates/common/add-auth-confirmation-input",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<select name="authType">').s(e.get(["authMethods"],!1),e,{block:n},{}).w("</select>")}function n(t,e){return t.w('<option value="').f(e.get(["type"],!1),e,"h").x(e.get(["phoneId"],!1),e,{block:o},{}).x(e.get(["deviceId"],!1),e,{block:i},{}).w('">').s(e.get(["steps"],!1),e,{block:r},{}).w("</option>")}function o(t,e){return t.w(";").f(e.get(["phoneId"],!1),e,"h")}function i(t,e){return t.w(";").f(e.get(["deviceId"],!1),e,"h")}function r(t,e){return t.h("select",e,{block:s},{key:y},"h").h("sep",e,{block:_},{},"h")}function s(t,e){return t.h("eq",e,{block:a},{value:"otp_sms"},"h").h("eq",e,{block:u},{value:"otp_list"},"h").h("eq",e,{block:d},{value:"otp_mma"},"h").b(e.getBlock("additionalMethodsDescription"),e,{},{})}function a(t,e){return t.h("_",e,{},{key:"SMS to %(phoneNumber)s",phoneNumber:c},"h")}function c(t,e){return t.f(e.get(["phoneNumber"],!1),e,"h")}function u(t,e){return t.h("_",e,{block:l},{},"h")}function l(t,e){return t.w("ATM Receipt")}function d(t,e){return t.x(e.get(["deviceName"],!1),e,{else:p,block:f},{})}function p(t,e){return t.h("_",e,{block:h},{},"h")}function h(t,e){return t.w("Mobile phone")}function f(t,e){return t.h("_",e,{},{key:"Mobile phone (%(deviceName)s)",deviceName:m},"h")}function m(t,e){return t.f(e.get(["deviceName"],!1),e,"h")}function y(t,e){return t.f(e.getPath(!0,[]),e,"h")}function _(t,e){return t.w(", ").h("_",e,{block:g},{},"h").w(" ")}function g(t,e){return t.w("then")}t.register("templates/common/add-auth-method-selector",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/add-auth-method-selector",t,e)};i.templateName="templates/common/add-auth-method-selector",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/app-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.f(n.get(["text"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/app-dialog",t,e)};i.templateName="templates/common/app-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="attachments-panel"><label class="file-input-trigger" data-js-file-input-container>').h("_",e,{block:n},{},"h").w('<input type="file" data-role="none" data-js-file-input ').x(e.get(["multipleAllowed"],!1),e,{block:o},{}).w(" ").s(e.get(["supportedFiles"],!1),e,{block:i},{}).w(' /></label><div class="attachments-list" data-js-attachments-container></div><div class="error-message" data-js-error-message></div></div>')}function n(t,e){return t.w("Add file")}function o(t,e){return t.w("multiple")}function i(t,e){return t.w('accept="').f(e.getPath(!0,[]),e,"h").w('"')}t.register("templates/common/attachments-panel",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/attachments-panel",t,e)};i.templateName="templates/common/attachments-panel",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="checkbox-wrapper"><label class="checkbox ').x(e.get(["checked"],!1),e,{block:n},{}).w('"><input type="checkbox" ').s(e.get(["inputName"],!1),e,{block:o},{}).w(" ").s(e.get(["className"],!1),e,{block:i},{}).w(" ").x(e.get(["checked"],!1),e,{block:r},{}).w(" /></label>").s(e.get(["label"],!1),e,{block:s},{}).w("</div>")}function n(t,e){return t.w("checked")}function o(t,e){return t.w('name="').f(e.getPath(!0,[]),e,"h").w('"')}function i(t,e){return t.w('class="').f(e.getPath(!0,[]),e,"h").w('"')}function r(t,e){return t.w("checked")}function s(t,e){return t.w('<div class="checkbox-label">').f(e.getPath(!0,[]),e,"h",["s"]).w("</div>")}t.register("templates/common/checkbox",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/checkbox",t,e)};i.templateName="templates/common/checkbox",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["label"],!1),e,{block:n},{}).w('<select class="contract-select" ').x(e.get(["disabled"],!1),e,{block:o},{}).w(' name="').f(e.get(["inputName"],!1),e,"h").w('" ').x(e.get(["required"],!1),e,{block:i},{}).w(">").x(e.get(["isLoading"],!1),e,{else:r,block:v},{}).w("</select>")}function n(t,e){return t.w('<div class="contract-select-label">').f(e.getPath(!0,[]),e,"h").w("</div>")}function o(t,e){return t.w("disabled")}function i(t,e){return t.w("required")}function r(t,e){return t.h("ne",e,{else:s,block:c},{key:g,value:"0",type:"number"},"h")}function s(t,e){return t.w('<option value="">').h("_",e,{block:a},{},"h").w("</option>")}function a(t,e){return t.w("No contracts available")}function c(t,e){return t.x(e.get(["showAllCardsItem"],!1),e,{block:u},{}).x(e.get(["showNewContractItem"],!1),e,{block:d},{}).s(e.get(["contracts"],!1),e,{block:h},{}).x(e.get(["canAddExternalCard"],!1),e,{block:y},{})}function u(t,e){return t.w('<option value="">').h("_",e,{block:l},{},"h").w("</option>")}function l(t,e){return t.w("All cards/accounts")}function d(t,e){return t.w('<option value="newContract">').h("_",e,{block:p},{},"h").w("</option>")}function p(t,e){return t.w("New account [select]")}function h(t,e){return t.w('<option value="').f(e.get(["id"],!1),e,"h").w('" ').x(e.get(["isDisabled"],!1),e,{block:f},{}).w(">").b(e.getBlock("contractName"),e,{block:m},{}).w("</option>")}function f(t,e){return t.w("disabled")}function m(t,e){return t.f(e.get(["name"],!1),e,"h")}function y(t,e){return t.w('<option value="externalCard">').h("_",e,{block:_},{},"h").w("</option>")}function _(t,e){return t.w("Another bank's card")}function g(t,e){return t.f(e.getPath(!1,["contracts","length"]),e,"h")}function v(t,e){return t.w('<option value="">').h("_",e,{block:w},{},"h").w("...</option>")}function w(t,e){return t.w("Loading")}t.register("templates/common/contract-select",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/contract-select",t,e)};i.templateName="templates/common/contract-select",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/currency-rates-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["baseQuotes"],!1),n,{block:i},{}).s(n.get(["crossQuotes"],!1),n,{block:l},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<h2 class="currency-rates-group-title">').h("_",n,{},{key:"Base quotes at %(date)s",date:r},"h").w('</h2><table class="currency-rates-table"><thead><tr><th class="currency-column">').h("_",n,{block:s},{},"h").w('</th><th class="price-column">').h("_",n,{block:a},{},"h").w('</th><th class="price-column">').h("_",n,{block:c},{},"h").w("</th></tr></thead><tbody>").s(n.get(["baseRates"],!1),n,{block:u},{}).w("</tbody></table>")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["timestamp"],!1),n,"h",["datetime"])}function s(t,n){return n=n.shiftBlocks(e),t.w("Currency")}function a(t,n){return n=n.shiftBlocks(e),t.w("Buy at")}function c(t,n){return n=n.shiftBlocks(e),t.w("Sell at")}function u(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="currency-column">').f(n.get(["currency"],!1),n,"h").w('</td><td class="price-column">').f(n.get(["buyAt"],!1),n,"h").w('</td><td class="price-column">').f(n.get(["sellAt"],!1),n,"h").w("</td></tr>")}function l(t,n){return n=n.shiftBlocks(e),t.w('<h2 class="currency-rates-group-title">').h("_",n,{},{key:"Cross quotes at %(date)s",date:d},"h").w('</h2><table class="currency-rates-table"><thead><tr><th class="currency-column">').h("_",n,{block:p},{},"h").w('</th><th class="price-column">').h("_",n,{block:h},{},"h").w("</th></tr></thead><tbody>").s(n.get(["crossRates"],!1),n,{block:f},{}).w("</tbody></table>")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["timestamp"],!1),n,"h",["datetime"])}function p(t,n){return n=n.shiftBlocks(e),t.w("Currencies pair")}function h(t,n){return n=n.shiftBlocks(e),t.w("Sell at")}function f(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="currency-column"><span>').f(n.get(["sourceCurrency"],!1),n,"h").w('</span><span class="currency-pair-delimiter">→</span><span>').f(n.get(["targetCurrency"],!1),n,"h").w('</span></td><td class="price-column">').f(n.get(["rate"],!1),n,"h").w("</td></tr>")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/currency-rates-dialog",t,e)};i.templateName="templates/common/currency-rates-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t}t.register("templates/common/empty",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/empty",t,e)};i.templateName="templates/common/empty",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/common/empty-page",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/empty-page",t,e)};i.templateName="templates/common/empty-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/error-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="error-text">').f(n.get(["errorText"],!1),n,"h").w("</div>")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/error-dialog",t,e)};i.templateName="templates/common/error-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/feedback-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="block__feedback-form"><div class="form-fields"></div>').x(n.get(["allowAttachments"],!1),n,{block:i},{}).w('</form><div class="success-message"><div class="text"><div class="result-icon"></div>').h("_",n,{block:r},{},"h").w(".</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div data-js-attachments-panel-container></div></div>')}function r(t,n){return n=n.shiftBlocks(e),t.w("Message successfully sent")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/feedback-dialog",t,e)};i.templateName="templates/common/feedback-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<ul class="footer-links"><li class="footer-link"><a target="_blank" href="').h("_",e,{block:n},{},"h").w('">').h("_",e,{block:o},{},"h").w("</a></li>").x(e.get(["showFeedback"],!1),e,{block:i},{}).x(e.get(["showCurrencyRates"],!1),e,{block:s},{}).b(e.getBlock("additionalLinks"),e,{block:c},{}).w('</ul><div class="phone-info">').h("_",e,{block:u},{},"h").w('</div><div class="footer-bottom">').x(e.get(["copyrightLinkUrl"],!1),e,{else:l,block:p},{}).x(e.get(["isAuthenticated"],!1),e,{block:f},{}).w("</div>")}function n(t,e){return t.w("Help [link][footer]")}function o(t,e){return t.w("Help [footer]")}function i(t,e){return t.w('<li class="footer-link"><a id="show-feedback-dialog" href="#">').h("_",e,{block:r},{},"h").w("</a></li>")}function r(t,e){return t.w("Feedback")}function s(t,e){return t.w('<li class="footer-link"><a id="show-currency-rates" href="#">').h("_",e,{block:a},{},"h").w("</a></li>")}function a(t,e){return t.w("Currency rates")}function c(t,e){return t}function u(t,e){return t.w("Phone list [footer]")}function l(t,e){return t.w('<div class="copyright-note">').h("_",e,{block:d},{},"h").w("</div>")}function d(t,e){return t.w("Copyright [footer]")}function p(t,e){return t.w('<a href="').f(e.get(["copyrightLinkUrl"],!1),e,"h").w('" target="_blank" class="copyright-note copyright-link">').h("_",e,{block:h},{},"h").w("</a>")}function h(t,e){return t.w("Copyright [footer]")}function f(t,e){return t.w('<div class="language-switch invert"></div>')}t.register("templates/common/footer",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/footer",t,e)};i.templateName="templates/common/footer",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/common/header",n);var e={logoHeader:m};function n(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isErrorPage"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isAuthenticated"],!1),n,{else:i,block:a},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("anonymousHeader"),n,{block:r},{})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("logoHeader"),n,{block:s},{}).w('<div class="language-switch"></div>')}function s(t,n){return n=n.shiftBlocks(e),t}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("authenticatedHeader"),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("logoHeader"),n,{block:u},{}).s(n.get(["user"],!1),n,{block:l},{})}function u(t,n){return n=n.shiftBlocks(e),t}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="user-info ').x(n.get(["lastLogonTime"],!1),n,{block:d},{}).w('"><span class="user-name">').f(n.getPath(!0,["displayName"]),n,"h").w('</span><span class="logout-link-wrapper"><a href="javascript:void(0)" id="logout" class="logout-link" title="').h("_",n,{block:p},{},"h").w('"></a></span>').s(n.get(["lastLogonTime"],!1),n,{block:h},{}).w("</div>")}function d(t,n){return n=n.shiftBlocks(e),t.w("has-last-entry")}function p(t,n){return n=n.shiftBlocks(e),t.w("Sign out")}function h(t,n){return n=n.shiftBlocks(e),t.w('<span class="last-entry">').h("_",n,{block:f},{},"h").w(": ").f(n.getPath(!0,[]),n,"h",["datetime"]).w("</span>")}function f(t,n){return n=n.shiftBlocks(e),t.w("Last login")}function m(t,n){return n=n.shiftBlocks(e),t.x(n.get(["logoLinkUrl"],!1),n,{else:y,block:_},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<div class="header-logo"></div>')}function _(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["logoLinkUrl"],!1),n,"h").w('" target="_blank" class="header-logo header-logo-link"></a>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/header",t,e)};i.templateName="templates/common/header",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/map/map-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w("<div data-js-map-dialog-content></div>")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/map/map-dialog",t,e)};i.templateName="templates/common/map/map-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="map-filters-panel__search"><input class="map-filters-panel__search-input" type="text" name="textsearch" required placeholder="').h("_",e,{block:n},{},"h").w('" value="').f(e.get(["textSearch"],!1),e,"h").w('" /><div class="map-filters-panel__search-clear"></div></div><div class="map-filters-panel__search-result hidden"></div>')}function n(t,e){return t.w("Search for something...")}t.register("templates/common/map/map-filters-panel",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/map/map-filters-panel",t,e)};i.templateName="templates/common/map/map-filters-panel",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="map-dialog__header"><div class="map-dialog__title">').h("_",e,{block:n},{},"h").w("</div>").x(e.get(["isShowTextSearch"],!1),e,{block:o},{}).w("</div>").x(e.get(["isShowTextSearch"],!1),e,{block:i},{}).w('<div class="map-dialog__map-canvas"></div><div title="').h("_",e,{block:r},{},"h").w('" class="map-dialog__locate-me"></div><div class="map-dialog__info-panel"></div>')}function n(t,e){return t.w("Choose branch")}function o(t,e){return t.w('<div class="map-dialog__search"></div>')}function i(t,e){return t.w('<div class="map-dialog__filters-panel hidden"></div>')}function r(t,e){return t.w("Locate me")}t.register("templates/common/map/map-view",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/map/map-view",t,e)};i.templateName="templates/common/map/map-view",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/common/map/service-points-info-panel",n);var e={"service-point-info":d};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__wrapper service-point-info__wrapper--hidden" data-js-info-panel-wrapper><div class="service-point-info__header">').h("eq",n,{block:o},{key:r,value:"1",type:"number"},"h").w('<h2 class="service-point-info__title">').f(n.get(["title"],!1),n,"h").w('</h2><a href="#" class="service-point-info__close" data-js-close></a></div>').h("gt",n,{else:s,block:c},{key:l,value:"1",type:"number"},"h").w("</div>")}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["servicePoints"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__icon ui-icon-marker ui-icon-marker--').f(n.get(["type"],!1),n,"h").w('"></div>')}function r(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["servicePoints","length"]),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["servicePoints"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__item-content">').b(n.getBlock("service-point-info"),n,{},{}).w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__list" data-js-service-point-list>').s(n.get(["servicePoints"],!1),n,{block:u},{}).w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__item-header"><div class="ui-icon-marker ui-icon-marker--').f(n.get(["type"],!1),n,"h").w('"></div><div class="service-point-info__item-title">').f(n.get(["textType"],!1),n,"h").w('</div></div><div class="service-point-info__item-content">').b(n.getBlock("service-point-info"),n,{},{}).w("</div>")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["servicePoints","length"]),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.x(n.get(["cashIn"],!1),n,{block:p},{}).x(n.get(["barCodeScanner"],!1),n,{block:m},{}).x(n.get(["currencies"],!1),n,{block:g},{}).x(n.get(["streetAddress"],!1),n,{block:k},{}).x(n.get(["site"],!1),n,{block:C},{}).x(n.get(["phone"],!1),n,{block:P},{}).s(n.get(["notes"],!1),n,{block:T},{}).x(n.get(["discount"],!1),n,{block:A},{}).x(n.get(["isAllowedSelection"],!1),n,{block:M},{})}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:h},{},"h").w('</div><div class="value">').h("_",n,{block:f},{},"h").w("</div></div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Cash-in")}function f(t,n){return n=n.shiftBlocks(e),t.w("Available")}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:y},{},"h").w('</div><div class="value">').h("_",n,{block:_},{},"h").w("</div></div>")}function y(t,n){return n=n.shiftBlocks(e),t.w("Barcode scanner")}function _(t,n){return n=n.shiftBlocks(e),t.w("Available")}function g(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:v},{},"h").w('</div><div class="value">').s(n.get(["currencies"],!1),n,{block:w},{}).w("</div></div>")}function v(t,n){return n=n.shiftBlocks(e),t.w("Currencies")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["currencyText","s"]).h("sep",n,{block:b},{},"h")}function b(t,n){return n=n.shiftBlocks(e),t.w(", ")}function k(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:B},{},"h").w('</div><div class="value">').f(n.get(["streetAddress"],!1),n,"h").w("</div></div>")}function B(t,n){return n=n.shiftBlocks(e),t.w("Address")}function C(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:S},{},"h").w('</div><div class="value"><a href="').f(n.get(["site"],!1),n,"h").w('" target="_blank" rel=”noopener noreferrer”>').f(n.get(["site"],!1),n,"h").w("</a></div></div>")}function S(t,n){return n=n.shiftBlocks(e),t.w("Site")}function P(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:x},{},"h").w('</div><div class="value"><a href="tel:').f(n.get(["phone"],!1),n,"h").w('">').f(n.get(["phone"],!1),n,"h").w("</a></div></div>")}function x(t,n){return n=n.shiftBlocks(e),t.w("Phone")}function T(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').f(n.getPath(!0,["name"]),n,"h").w('</div><div class="value">').f(n.getPath(!0,["value"]),n,"h").w("</div></div>")}function A(t,n){return n=n.shiftBlocks(e),t.w('<div class="details"><div class="name">').h("_",n,{block:E},{},"h").w('</div><div class="value">').f(n.get(["discount"],!1),n,"h",["s"]).w("</div></div>")}function E(t,n){return n=n.shiftBlocks(e),t.w("Discount")}function M(t,n){return n=n.shiftBlocks(e),t.h("ne",n,{block:I},{key:R,value:O},"h")}function I(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-point-info__select"><a class="wb-button service-point-info__select-button" data-js-select data-id="').f(n.getPath(!0,["id"]),n,"h").w('"  href="#">').h("_",n,{block:N},{},"h").w("</a></div>")}function N(t,n){return n=n.shiftBlocks(e),t.w("Select")}function R(t,n){return n=n.shiftBlocks(e),t.f(n.get(["selected"],!1),n,"h")}function O(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["id"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/map/service-points-info-panel",t,e)};i.templateName="templates/common/map/service-points-info-panel",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="block__payments-transfers operation-result owwb-cs-operation-result"><div class="text-icon error"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title">').f(e.get(["message"],!1),e,"h").w("</h1>").s(e.get(["backLink"],!1),e,{block:n},{}).w("</div>")}function n(t,e){return t.w('<div class="service-actions"><a class="service-action" href="').f(e.getPath(!0,["url"]),e,"h").w('">').f(e.getPath(!0,["text"]),e,"h").w("</a></div>")}t.register("templates/common/operation-error-message",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/operation-error-message",t,e)};i.templateName="templates/common/operation-error-message",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="block__payments-transfers operation-result owwb-cs-operation-result"><div class="text-icon success"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title">').f(e.get(["message"],!1),e,"h").w("</h1>").s(e.get(["backLink"],!1),e,{block:n},{}).w("</div>")}function n(t,e){return t.w('<div class="service-actions"><a class="service-action" href="').f(e.getPath(!0,["url"]),e,"h").w('">').f(e.getPath(!0,["text"]),e,"h").w("</a></div>")}t.register("templates/common/operation-success-message",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/operation-success-message",t,e)};i.templateName="templates/common/operation-success-message",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="bank-print-logo"><img src="').f(e.getPath(!1,["settings","IMAGE_PATH"]),e,"h").w('/print-logo.png" /></div><div class="bank-print-info">').h("_",e,{block:n},{},"h").w("</div>")}function n(t,e){return t.w("Bank name for print check")}t.register("templates/common/print-header",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/print-header",t,e)};i.templateName="templates/common/print-header",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/prompt-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="block__prompt-form"><label class="row field-wrapper"><span class="title">').f(n.get(["message"],!1),n,"h").w('</span><input name="promptText" type="text" ').x(n.get(["required"],!1),n,{block:i},{}).w(' /></label></form><div class="success-message"><div class="text"><div class="result-icon"></div>').h("_",n,{block:r},{},"h").w(".</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("required")}function r(t,n){return n=n.shiftBlocks(e),t.w("Message successfully sent")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/prompt-dialog",t,e)};i.templateName="templates/common/prompt-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/common/simple-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="dialog-text">').f(n.get(["dialogText"],!1),n,"h").w("</div>")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/simple-dialog",t,e)};i.templateName="templates/common/simple-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.x(e.get(["languages"],!1),e,{block:n},{})}function n(t,e){return t.w('<ul class="language-list">').s(e.get(["languages"],!1),e,{block:o},{}).w("</ul>")}function o(t,e){return t.w('<li class="language-item ').f(e.get(["id"],!1),e,"h").w('" data-language="').f(e.get(["id"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</li>")}t.register("templates/common/wb-language-switch",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/common/wb-language-switch",t,e)};i.templateName="templates/common/wb-language-switch",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/actions/cash-by-code-complete-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payment-complete-page"><div class="text-icon success"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title align-center">').x(n.get(["message"],!1),n,{else:s,block:u},{}).w('</h1><div class="service-actions"><a class="service-action" href="').f(n.get(["paymentsMenuLink"],!1),n,"h").w('">').h("_",n,{block:l},{},"h").w("</a>").b(n.getBlock("extraActions"),n,{},{}).w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:a},{},"h").w("<br/><strong>").f(n.get(["reference"],!1),n,"h").w("</strong><br/>").h("_",n,{block:c},{},"h")}function a(t,n){return n=n.shiftBlocks(e),t.w("Use the code below to perform requested operation")}function c(t,n){return n=n.shiftBlocks(e),t.w("Please note that code cannot be restored if lost")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["message"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Back to Payment and Transfers")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/actions/cash-by-code-complete-page",t,e)};i.templateName="templates/contracts/actions/cash-by-code-complete-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/actions/cash-by-code-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__payments-transfers">').b(n.getBlock("preContent"),n,{},{}).w('<form class="wb-form" autocomplete="off">').s(n.get(["comment"],!1),n,{block:a},{}).w('<div class="form-fields"></div><div class="error-message-container field-wrapper error hidden"><div class="error error-message"></div></div><div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:c},{},"h").w("</button></div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-description">').f(n.getPath(!0,[]),n,"h",["s"]).w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Continue")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/actions/cash-by-code-page",t,e)};i.templateName="templates/contracts/actions/cash-by-code-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/actions/contract-block-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form"><div class="form-fields"></div></form>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/actions/contract-block-dialog",t,e)};i.templateName="templates/contracts/actions/contract-block-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/actions/contract-unblock-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form"><div class="form-description">').h("_",n,{block:i},{},"h").w('</div><div class="form-fields"></div></form>')}function i(t,n){return n=n.shiftBlocks(e),t.w("Never unblock stolen card! Your money will be in danger")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/actions/contract-unblock-dialog",t,e)};i.templateName="templates/contracts/actions/contract-unblock-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/activate-transaction-window-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form autocomplete="off" class="wb-form"><h2>').h("_",n,{block:i},{},"h").w("</h2><p>&nbsp;</p><p>").h("_",n,{block:r},{},"h").w(" ").h("_",n,{block:s},{},"h").w(" </p><p>").h("_",n,{block:a},{},"h").w("</p><p>").h("_",n,{block:c},{},"h").w("</p></form>")}function i(t,n){return n=n.shiftBlocks(e),t.w("How card protection works?")}function r(t,n){return n=n.shiftBlocks(e),t.w("Card protection blocks purchases and cash withdrawal on your card.")}function s(t,n){return n=n.shiftBlocks(e),t.w("When you want to use your card, open Transaction Window and it will temporary allow transactions.")}function a(t,n){return n=n.shiftBlocks(e),t.w("Web Bank and Mobile Bank operations do not require opening Transaction Window.")}function c(t,n){return n=n.shiftBlocks(e),t.w("If your card is stolen or lost, card protection will protect you from losses.")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/activate-transaction-window-dialog",t,e)};i.templateName="templates/contracts/activate-transaction-window-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.x(e.get(["archiveSelected"],!1),e,{else:n,block:s},{})}function n(t,e){return t.h("gt",e,{block:o},{key:r,value:"0"},"h")}function o(t,e){return t.w('<a href="#" class="archiveLink  archive-hidden">').h("_",e,{},{key:"Show old cards and accounts (%(count)s)",count:i},"h").w("</a>")}function i(t,e){return t.f(e.get(["archiveSize"],!1),e,"h")}function r(t,e){return t.f(e.get(["archiveSize"],!1),e,"h")}function s(t,e){return t.w('<a href="#" class="archiveLink archive-visible">').h("_",e,{block:a},{},"h").w("</a>")}function a(t,e){return t.w("Hide old cards and accounts")}t.register("templates/contracts/archive-toggle",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/archive-toggle",t,e)};i.templateName="templates/contracts/archive-toggle",t.exports=i},function(t,e,n){var o=n(372);n(465);!function(t){function e(t,e){return t.w('<div class="block__additional-cards"><div class="content-header">').h("eq",e,{else:n,block:o},{key:s,value:"additional-cards"},"h").w("</div><div>").p("templates/contracts/cards-list",e,e,{}).w("</div></div>")}function n(t,e){return t.w("<h1>").f(e.getPath(!1,["mainContract","name"]),e,"h").w("</h1>")}function o(t,e){return t.w("<h1>").h("_",e,{block:i},{},"h").w("</h1><h3>").h("_",e,{block:r},{},"h").w("</h3>")}function i(t,e){return t.w("Additional cards")}function r(t,e){return t.w("Additional cards to other clients' accounts")}function s(t,e){return t.f(e.getPath(!1,["mainContract","id"]),e,"h")}t.register("templates/contracts/cards-list-page",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/cards-list-page",t,e)};i.templateName="templates/contracts/cards-list-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["groups"],!1),e,{block:n},{})}function n(t,e){return t.w('<a href="#" class="group" data-group-id="').f(e.getPath(!0,["id"]),e,"h").w('"><div class="group-count">').f(e.getPath(!0,["size"]),e,"h").w('</div><div class="group-title">').f(e.getPath(!0,["title"]),e,"h",["s"]).w("</div></a>")}t.register("templates/contracts/contract-group-stats",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/contract-group-stats",t,e)};i.templateName="templates/contracts/contract-group-stats",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/deactivate-transaction-window-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form autocomplete="off" class="wb-form"><p>').h("_",n,{block:i},{},"h").w("</p></form>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Deactivate card protection. Operations with card will no longer require opening Transaction Window.")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/deactivate-transaction-window-dialog",t,e)};i.templateName="templates/contracts/deactivate-transaction-window-dialog",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/deposit-calculator-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("deposit-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').h("_",n,{block:a},{},"h").w("</div>").b(n.getBlock("extraInfo"),n,{},{}).w('</div><div class="block__deposit-calculator"></div>')}function a(t,n){return n=n.shiftBlocks(e),t.w("Open deposit")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/deposit-calculator-page",t,e)};i.templateName="templates/contracts/deposit-calculator-page",t.exports=i},function(t,e,n){var o=n(372);n(376),n(435);!function(t){t.register("templates/contracts/deposit-creation-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("deposit-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.getPath(!1,["deposit","name"]),n,"h").w('</div></div><div class="page-messages"></div><div class="block__payments-transfers"><form class="wb-form" autocomplete="off">').s(n.getPath(!1,["deposit","description"]),n,{block:a},{}).w('<div class="form-fields">').s(n.get(["fields"],!1),n,{block:c},{}).w('</div><div class="deposit-contract-options"><div class="deposit-contract-field"><div class="deposit-source"></div></div><div class="deposit-contract-field"><div class="custom-target-switch-wrapper"><input type="checkbox" class="custom-target" /></div><div class="target-source" style="display: none"></div></div></div><div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:u},{},"h").w('</button></div><div class="service-actions"><a class="service-action change-parameters" href="#">').h("_",n,{block:l},{},"h").w("</a></div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-description">').f(n.getPath(!0,[]),n,"h").w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/payment-info-field",n,n,{})}function u(t,n){return n=n.shiftBlocks(e),t.w("Continue")}function l(t,n){return n=n.shiftBlocks(e),t.w("Change deposit parameters")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/deposit-creation-page",t,e)};i.templateName="templates/contracts/deposit-creation-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/deposit-result-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("deposit-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payment-complete-page"><div class="text-icon success"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title align-center">').x(n.get(["isNotCredited"],!1),n,{else:s,block:c},{}).w("</h1>").b(n.getBlock("additionalDescription"),n,{},{}).w('<div class="service-actions">').x(n.get(["isNotCredited"],!1),n,{else:l,block:p},{}).w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:a},{},"h")}function a(t,n){return n=n.shiftBlocks(e),t.w("Deposit successfully created")}function c(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:u},{},"h")}function u(t,n){return n=n.shiftBlocks(e),t.w("Deposit created, but not credited")}function l(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="').f(n.get(["detailsLink"],!1),n,"h").w('">').h("_",n,{block:d},{},"h").w("</a>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Show created deposit details")}function p(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="').f(n.get(["topupLink"],!1),n,"h").w('">').h("_",n,{block:h},{},"h").w("</a>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Topup deposit manually")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/deposit-result-page",t,e)};i.templateName="templates/contracts/deposit-result-page",t.exports=i},function(t,e,n){var o=n(372);n(446);!function(t){t.register("templates/contracts/division-contract-list",n);var e={contractRow:u,"card-icon":B};function n(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isLoading"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["error"],!1),n,{else:i,block:c},{})}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["groups"],!1),n,{else:r,block:s},{})}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="empty-message no-data-error">').f(n.get(["emptyMessage"],!1),n,"h",["s"]).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["groups"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("contractRow"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="load-error">').f(n.getPath(!1,["error","message"]),n,"h").w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.s(n.get(["contract"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract contract-row ').x(n.getPath(!0,["inArchive"]),n,{block:d},{}).w('"><div class="main-info"><a href="#contracts/').f(n.get(["id"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('" class="cardholder">').b(n.getBlock("employeeContractTitle"),n,{block:p},{}).b(n.getBlock("employeeContractSecondaryTitle"),n,{block:h},{}).w('</a><div class="contract-cards ').h("gt",n,{block:f},{key:n.get(["nCards"],!1),value:4},"h").w('">').h("lte",n,{else:m,block:b},{key:n.get(["nCards"],!1),value:4},"h").w('</div><div class="balance">').p("templates/contracts/balances-for-manager",n,n,{}).w("</div></div></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w("archive-contract")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="cardholder-name">').f(n.getPath(!1,["owner","fullName"]),n,"h").w("</div>")}function h(t,n){return n=n.shiftBlocks(e),t.w('<div class="account-number">').f(n.get(["number"],!1),n,"h").w("</div>")}function f(t,n){return n=n.shiftBlocks(e),t.w("collapsed")}function m(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("contract-cards-many"),n,{block:y},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<a class="cards-link"').h("eq",n,{else:_,block:g},{key:v,value:"additional-cards"},"h").w(">").h("_",n,{},{singular:"%(num)s card",plural:"%(num)s cards",num:w},"h").w("</a>")}function _(t,n){return n=n.shiftBlocks(e),t.w('href="#contracts/').f(n.get(["id"],!1),n,"h").w('/additional-cards"')}function g(t,n){return n=n.shiftBlocks(e),t.w('href="#contracts/additional-cards"')}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["id"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["nCards"],!1),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.s(n.get(["children"],!1),n,{block:k},{})}function k(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("card-icon"),n,{},{})}function B(t,n){return n=n.shiftBlocks(e),t.w('<a href="#contracts/').f(n.get(["id"],!1),n,"h").w('" title="').f(n.get(["name"],!1),n,"h").w('"class="card status-').f(n.getPath(!1,["card","status"]),n,"h").w(" ").s(n.getPath(!1,["card","wbProductColor"]),n,{block:C},{}).x(n.getPath(!1,["card","isVirtual"]),n,{else:S,block:P},{}).w('"><span class="card-number">').f(n.get(["number"],!1),n,"h",["cardNumberMask"]).w("</span></a>")}function C(t,n){return n=n.shiftBlocks(e),t.w("color-").f(n.getPath(!0,[]),n,"h").w(" ")}function S(t,n){return n=n.shiftBlocks(e),t.w("icon-").f(n.getPath(!1,["card","paymentSystem"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.w("icon-virtual")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/division-contract-list",t,e)};i.templateName="templates/contracts/division-contract-list",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/division-contracts-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("division-contracts")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="nav-container"><div class="contract-search-wrapper input-wrapper"><input id="search-full" type="text" class="search-input" name="text-search" maxlength="50"placeholder="').h("_",n,{block:s},{},"h").w('"/></div>').s(n.getPath(!1,["settings","NEW_CLIENT_SERVICE"]),n,{block:a},{}).w('<div class="block__contract-group-stats"></div></div><div class="block__cards-accounts"><div class="contracts"><div class="contracts-section" /></div></div>')}function s(t,n){return n=n.shiftBlocks(e),t.w("Name, card number (*1234) or account number")}function a(t,n){return n=n.shiftBlocks(e),t.w('<a class="new-contract-link action-wrapper" href="').f(n.get(["contextPath"],!1),n,"h").w("/services/").f(n.getPath(!0,[]),n,"h").w('">').h("_",n,{block:c},{},"h").w("</a>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Add employee")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/division-contracts-page",t,e)};i.templateName="templates/contracts/division-contracts-page",t.exports=i},function(t,e,n){var o=n(372);n(509);!function(t){t.register("templates/contracts/division-main-contract-page",n);var e={contractInfo:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/contracts/contract-details-page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w("<ul>").x(n.get(["showInformationTab"],!1),n,{block:i},{}).w('</ul><div id="contract-information"><h2 class="print-header">').h("_",n,{},{key:"%(contractName)s: information",contractName:"Corporate account"},"h").w("</h2>").b(n.getBlock("creditLimit"),n,{block:s},{}).b(n.getBlock("additionalInfo"),n,{},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<li><a href="#contract-information">').h("_",n,{block:r},{},"h").w("</a></li>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Information")}function s(t,n){return n=n.shiftBlocks(e),t.w('<table><tr class="').f(n.get(["className"],!1),n,"h").w('"><td class="name">').h("_",n,{block:a},{},"h").w('</td><td class="value">').s(n.getPath(!1,["balances","cr_limit"]),n,{else:c,block:u},{}).w("</td></tr></table>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Credit limit")}function c(t,n){return n=n.shiftBlocks(e),t.w("-")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["money","s"])}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/division-main-contract-page",t,e)};i.templateName="templates/contracts/division-main-contract-page",t.exports=i},function(t,e,n){var o=n(372);n(376),n(466);!function(t){t.register("templates/contracts/external-card-registration-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("external-card")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header"><div class="title">').h("_",n,{block:s},{},"h").w('</div></div><div class="block__external-card"><form class="wb-form" autocomplete="off"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container"><input type="text" name="name" maxlength="255"/><div class="hint">').h("_",n,{block:c},{},"h").w("</div></div></div>").p("templates/contracts/external-card-form",n,n,{}).w('<button class="wb-button" type="submit">').h("_",n,{block:u},{},"h").w("</button></form></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Add another bank's card")}function a(t,n){return n=n.shiftBlocks(e),t.w("Card name")}function c(t,n){return n=n.shiftBlocks(e),t.w("Entered value will be used as card name in contracts list. Leave this field empty to use masked card number as its' name.")}function u(t,n){return n=n.shiftBlocks(e),t.w("Proceed")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/external-card-registration-page",t,e)};i.templateName="templates/contracts/external-card-registration-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["deposit"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="block__deposit-management"><form>').x(e.get(["autoProlongationAllowed"],!1),e,{block:o},{}).w('<div class="deposit-management-row target-row"><div class="contract-select control-xl"></div></div></form></div>')}function o(t,e){return t.w('<div class="deposit-management-row auto-prolongation-row"><div class="control switch-wrapper"><input type="checkbox" name="autoProlongation" class="switch" ').x(e.get(["autoProlongation"],!1),e,{block:i},{}).w(' disabled /></div><div class="title">').h("_",e,{block:r},{},"h").w("</div></div>")}function i(t,e){return t.w("checked")}function r(t,e){return t.w("Auto prolongation")}t.register("templates/contracts/online-deposit-management",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/online-deposit-management",t,e)};i.templateName="templates/contracts/online-deposit-management",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/open-transaction-window-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form autocomplete="off" class="wb-form"><div class="form-fields"></div></form>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/open-transaction-window-dialog",t,e)};i.templateName="templates/contracts/open-transaction-window-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/contracts/statement-subscription-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="block__statement-subscription-form wb-form"><p class="statement-subscription-description">').x(n.get(["isActive"],!1),n,{else:i,block:r},{}).w('</p><div class="control-group"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:s},{},"h").w('</div><div class="control-container"><input id="email-input" type="email" name="email" class="email" value="').f(n.get(["email"],!1),n,"h").w('" maxlength="255" required/></div></div></div></form>')}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["descriptionForDisabled"],!1),n,"h",["s"])}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["descriptionForEnabled"],!1),n,"h",["s"])}function s(t,n){return n=n.shiftBlocks(e),t.w("email")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/statement-subscription-dialog",t,e)};i.templateName="templates/contracts/statement-subscription-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.getPath(!1,["subscriptions","transactionWindow"]),e,{block:n},{}).s(e.getPath(!1,["subscriptions","smsNotifications"]),e,{block:S},{})}function n(t,e){return t.w('<div class="subscription transactionWindow"><div class="subscription-title">').h("_",e,{block:o},{},"h").w("</div>").x(e.getPath(!0,["isActive"]),e,{else:i,block:s},{}).w("</div>")}function o(t,e){return t.w("Card protection")}function i(t,e){return t.w('<div class="action"><a href="').f(e.get(["serviceUrlPrefix"],!1),e,"h").f(e.getPath(!1,["serviceLinks","activate"]),e,"h").w('" data-contract-id="').f(e.get(["id"],!1),e,"h").w('" data-action="activate" class="transaction-window-action">').h("_",e,{block:r},{},"h").w("</a></div>")}function r(t,e){return t.w("Activate")}function s(t,e){return t.b(e.getBlock("cardProtectionDetails"),e,{block:a},{}).w('<div class="action"><a href="').f(e.get(["serviceUrlPrefix"],!1),e,"h").f(e.getPath(!1,["serviceLinks","open"]),e,"h").w('" data-contract-id="').f(e.get(["id"],!1),e,"h").w('" data-action="open" class="transaction-window-action">').h("_",e,{block:B},{},"h").w('</a><a href="').f(e.get(["serviceUrlPrefix"],!1),e,"h").f(e.getPath(!1,["serviceLinks","deactivate"]),e,"h").w('" data-contract-id="').f(e.get(["id"],!1),e,"h").w('" data-action="deactivate" class="transaction-window-action">').h("_",e,{block:C},{},"h").w("</a></div>")}function a(t,e){return t.w('<div class="description">').h("_",e,{block:c},{},"h").w("<br/>").x(e.getPath(!0,["isOpen"]),e,{else:u,block:d},{}).w("</div>")}function c(t,e){return t.w("card protection is active")}function u(t,e){return t.h("_",e,{block:l},{},"h")}function l(t,e){return t.w("no operations available")}function d(t,e){return t.h("_",e,{},{singular:"available %(num)s operation for",plural:"available %(num)s operations for",num:p},"h").x(e.getPath(!0,["showSeconds"]),e,{else:h,block:w},{}).w("<br/>").h("_",e,{block:k},{},"h").w("&nbsp;").f(e.get(["amountRemaining"],!1),e,"h",["money","s"])}function p(t,e){return t.f(e.get(["operationsRemaining"],!1),e,"h")}function h(t,e){return t.h("gt",e,{block:f},{key:y,value:"0"},"h").h("gt",e,{block:_},{key:v,value:"0"},"h")}function f(t,e){return t.h("_",e,{},{singular:" %(num)s hour",plural:" %(num)s hours",num:m},"h")}function m(t,e){return t.f(e.get(["durationHours"],!1),e,"h")}function y(t,e){return t.f(e.get(["durationHours"],!1),e,"h")}function _(t,e){return t.h("_",e,{},{singular:" %(num)s minute",plural:" %(num)s minutes",num:g},"h")}function g(t,e){return t.f(e.get(["durationMinutes"],!1),e,"h")}function v(t,e){return t.f(e.get(["durationMinutes"],!1),e,"h")}function w(t,e){return t.h("_",e,{},{singular:" %(num)s second",plural:" %(num)s seconds",num:b},"h")}function b(t,e){return t.f(e.get(["durationSeconds"],!1),e,"h")}function k(t,e){return t.w("available amount")}function B(t,e){return t.w("Allow operations")}function C(t,e){return t.w("Disable")}function S(t,e){return t.w('<div class="subscription smsNotifications"><div class="subscription-title">').h("_",e,{block:P},{},"h").w("</div>").x(e.getPath(!0,["isActive"]),e,{else:x,block:E},{}).w("</div>")}function P(t,e){return t.w("SMS Notifications")}function x(t,e){return t.b(e.getBlock("inactiveSmsNotficiationDetails"),e,{},{}).b(e.getBlock("inactiveSmsNotificationLinks"),e,{block:T},{})}function T(t,e){return t.w('<div class="action"><a href="').f(e.get(["serviceUrlPrefix"],!1),e,"h").f(e.getPath(!1,["serviceLinks","activate"]),e,"h").w('">').h("_",e,{block:A},{},"h").w("</a></div>")}function A(t,e){return t.w("Activate")}function E(t,e){return t.b(e.getBlock("smsNotficiationDetails"),e,{block:M},{}).b(e.getBlock("activeSmsNotificationsLinks"),e,{block:N},{})}function M(t,e){return t.w('<div class="description">').h("_",e,{block:I},{},"h").w(" ").f(e.getPath(!0,["fullPhoneNumber"]),e,"h").w("</div>")}function I(t,e){return t.w("phone number:")}function N(t,e){return t.w('<div class="action"><a href="').f(e.get(["serviceUrlPrefix"],!1),e,"h").f(e.getPath(!1,["serviceLinks","change"]),e,"h").w('">').h("_",e,{block:R},{},"h").w("</a></div>")}function R(t,e){return t.w("Change/disable")}t.register("templates/contracts/subscriptions",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/subscriptions",t,e)};i.templateName="templates/contracts/subscriptions",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/contracts/tds-enroll-page",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form" novalidate="novalidate"><div class="content-header"><div class="title">').h("_",n,{block:i},{},"h").w('</div></div><div class="form-content">').x(n.get(["missingAuthMethod"],!1),n,{else:r,block:p},{}).w('<div class="button-group"><a href="#" class="link-button cancel">').h("_",n,{block:f},{},"h").w("</a>").nx(n.get(["missingAuthMethod"],!1),n,{block:m},{}).w("</div></div></form>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Internet transactions")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper">').h("_",n,{block:s},{},"h").w('</div><div class="field-wrapper">').h("_",n,{},{singular:"Your phone number to receive confirmation codes is",plural:"Your phone numbers to receive confirmation codes are",num:a},"h").w("&nbsp;").s(n.get(["phones"],!1),n,{block:c},{}).w('</div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:l},{},"h").w('</div><div class="control-container"><div class="switch-wrap"><input name="isActive" type="checkbox" ').x(n.get(["isActive"],!1),n,{block:d},{}).w(" /></div></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("This service allows to enable / disable performing card transactions in the Internet. Special code (3D Secure) is used to confirm these transactions.")}function a(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["phones","length"]),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["displayValue"],!1),n,"h").h("sep",n,{block:u},{},"h")}function u(t,n){return n=n.shiftBlocks(e),t.w(", ")}function l(t,n){return n=n.shiftBlocks(e),t.w("Internet transactions")}function d(t,n){return n=n.shiftBlocks(e),t.w("checked")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper">').h("_",n,{block:h},{},"h").w("</div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("You need to first register your phone number for receiving one-time confirmation codes (3D Secure). Please contact our bank office for that.")}function f(t,n){return n=n.shiftBlocks(e),t.w("Go back")}function m(t,n){return n=n.shiftBlocks(e),t.w('<button type="submit" class="wb-button" disabled>').h("_",n,{block:y},{},"h").w("</button>")}function y(t,n){return n=n.shiftBlocks(e),t.w("Save")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0}(o);var i=function(t,e){o.render("templates/contracts/tds-enroll-page",t,e)};i.templateName="templates/contracts/tds-enroll-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/digital-card/digital-card-resend-params-result-dialog-view",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="complete__icon complete__icon--success"></div><h1 class="complete__title">').h("_",n,{block:i},{},"h").w('</h1><div class="complete__desc">').h("_",n,{},{key:"You will receive SMS with CVV2 for the card %(cardNumber)s [resend params]",cardNumber:r},"h").w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Params sent [resend params]")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["cardNumber"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/digital-card/digital-card-resend-params-result-dialog-view",t,e)};i.templateName="templates/digital-card/digital-card-resend-params-result-dialog-view",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<a href="#" class="digital-card-resend-params" data-js-card-resend-params>').h("_",e,{block:n},{},"h").w("</a>")}function n(t,e){return t.w("Send via SMS [digital card]")}t.register("templates/digital-card/digital-card-resend-params-view",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/digital-card/digital-card-resend-params-view",t,e)};i.templateName="templates/digital-card/digital-card-resend-params-view",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="digital-card-reveal-card-number"><div class="digital-card-reveal-card-number__number" data-js-card-number>').f(e.get(["cardNumber"],!1),e,"h").w('</div><div class="digital-card-reveal-card-number__icon" data-js-toggle-card-number></div></div>')}t.register("templates/digital-card/digital-card-reveal-card-number-view",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/digital-card/digital-card-reveal-card-number-view",t,e)};i.templateName="templates/digital-card/digital-card-reveal-card-number-view",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/disputes/dispute-form",n);var e={title:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("disputes-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__new_dispute"><form class="wb-form"><div class="content-header"><div class="title">').h("_",n,{block:s},{},"h").w('</div></div><div class="form-content"><div class="operations"></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container reason-select"><select name="reasonId">').s(n.get(["reasons"],!1),n,{block:c},{}).w('</select><div class="hint hidden"></div><div class="warning hidden"></div></div></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:l},{},"h").w('</div><div class="control-container"><textarea name="comment" maxlength="4000"></textarea></div></div><div class="button-group"><button class="link-button cancel" type="button">').h("_",n,{block:d},{},"h").w('</button><button class="wb-button" type="submit">').h("_",n,{block:p},{},"h").w("</button>").b(n.getBlock("additionalActions"),n,{},{}).w("</div></div></form></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Select reason and enter comment")}function a(t,n){return n=n.shiftBlocks(e),t.w("Select reason")}function c(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').h("_",n,{block:u},{},"h").w("</option>")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Comment")}function d(t,n){return n=n.shiftBlocks(e),t.w("Back to operations choice")}function p(t,n){return n=n.shiftBlocks(e),t.w("Create dispute")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/dispute-form",t,e)};i.templateName="templates/disputes/dispute-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/disputes/dispute-operations-choice",n);var e={title:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("disputes-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__new_dispute"><div class="content-header"><div class="title">').h("_",n,{block:s},{},"h").w('</div></div><div class="content"><div class="description">').h("_",n,{block:a},{},"h").w('</div><div class="block__history"></div><div class="error error-message">').h("_",n,{block:c},{},"h").w('</div><div class="button-group"><button class="link-button cancel" type="button">').h("_",n,{block:u},{},"h").w('</button><button class="wb-button proceed" type="button" ').nx(n.get(["hasTransactions"],!1),n,{block:l},{}).w(">").h("_",n,{block:d},{},"h").w("</button></div></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Operations choice")}function a(t,n){return n=n.shiftBlocks(e),t.w("Choose operations you want to open dispute for")}function c(t,n){return n=n.shiftBlocks(e),t.w("You should choose at least one operation")}function u(t,n){return n=n.shiftBlocks(e),t.w("Back to disputes overview")}function l(t,n){return n=n.shiftBlocks(e),t.w("disabled")}function d(t,n){return n=n.shiftBlocks(e),t.w("Proceed")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/dispute-operations-choice",t,e)};i.templateName="templates/disputes/dispute-operations-choice",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="description" data-status="').f(e.get(["status"],!1),e,"h",["lowercase"]).w('"><div class="caption">').f(e.getPath(!1,["disputeReason","name"]),e,"h").w(", № ").f(e.get(["id"],!1),e,"h").w('</div><div class="created">').h("_",e,{block:n},{},"h").w(": ").f(e.get(["createdAt"],!1),e,"h",["dateShortMonth"]).w('</div><div class="status">').f(e.get(["statusName"],!1),e,"h").w('</div></div><div class="operations"></div>')}function n(t,e){return t.w("Created")}t.register("templates/disputes/dispute-view",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/dispute-view",t,e)};i.templateName="templates/disputes/dispute-view",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/disputes/disputes-page",n);var e={title:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("disputes-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__disputes">').nx(n.get(["disputes"],!1),n,{else:s,block:p},{}).w('<div class="disputes"></div>').nx(n.get(["disputes"],!1),n,{block:f},{}).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="link-wrapper"><a href="#disputes/create">').h("_",n,{block:a},{},"h").w("</a>").h("gt",n,{block:c},{key:d,value:"0",type:"number"},"h").w("</div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("New dispute")}function c(t,n){return n=n.shiftBlocks(e),t.w('<br/><a href="#" class="toggle-closed-disputes">').h("_",n,{},{key:"Show closed disputes (%(count)s)",count:u},"h").w('</a><a href="#" class="toggle-closed-disputes hidden">').h("_",n,{block:l},{},"h").w("</a>")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["closedDisputesQuantity"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Hide closed disputes")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["closedDisputesQuantity"],!1),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.w("<h1>").h("_",n,{block:h},{},"h").w("</h1>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Your disputes list is empty")}function f(t,n){return n=n.shiftBlocks(e),t.w('<div class="link-wrapper"><a href="#disputes/create" class="wb-button">').h("_",n,{block:m},{},"h").w("</a></div>")}function m(t,n){return n=n.shiftBlocks(e),t.w("New dispute")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/disputes-page",t,e)};i.templateName="templates/disputes/disputes-page",t.exports=i},function(t,e,n){var o=n(372);n(447);!function(t){t.register("templates/disputes/flat-history-list",n);var e={history:o,afterDescription:p,beforeInfo:f,afterInfo:m};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/history/simple-history-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["operations"],!1),n,{else:i,block:s},{})}function i(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:r},{header:"No operations found",description:"Try to change filter settings"})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("empty-history-message"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["months"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.s(n.get(["dates"],!1),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="day-operations"><div class="day-header">').f(n.getPath(!0,["date"]),n,"h",["dateShortMonth"]).w('</div><ul class="operations-list">').s(n.get(["operations"],!1),n,{block:u},{}).w("</ul></div>")}function u(t,n){return n=n.shiftBlocks(e),t.w('<li data-id="').f(n.get(["id"],!1),n,"h").w('" class="history-item ').x(n.get(["isReversed"],!1),n,{else:l,block:d},{}).w('">').b(n.getBlock("operationRow"),n,{},{}).w("</li>")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.w("reversed")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.get(["disputeStatus"],!1),n,{block:h},{})}function h(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-dispute-status">').f(n.getPath(!0,[]),n,"h").w("</span>")}function f(t,n){return n=n.shiftBlocks(e),t}function m(t,n){return n=n.shiftBlocks(e),t}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/flat-history-list",t,e)};i.templateName="templates/disputes/flat-history-list",t.exports=i},function(t,e,n){var o=n(372);n(447);!function(t){t.register("templates/disputes/selectable-history-list",n);var e={afterInfo:o,beforeInfo:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/history/simple-history-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-selector" ').x(n.get(["isChecked"],!1),n,{block:i},{}).w("></span>")}function i(t,n){return n=n.shiftBlocks(e),t.w('data-checked="true"')}function r(t,n){return n=n.shiftBlocks(e),t}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/disputes/selectable-history-list",t,e)};i.templateName="templates/disputes/selectable-history-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="block__error-page"><div class="error-wrapper"><div class="text-icon error"></div><div class="error-title">').h("_",e,{block:n},{},"h").w('</div><div class="error-description">').f(e.get(["errorText"],!1),e,"h",["s"]).w("</div></div></div>")}function n(t,e){return t.w("Error")}t.register("templates/error-page",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/error-page",t,e)};i.templateName="templates/error-page",t.exports=i},function(t,e,n){var o=n(372);n(449);!function(t){t.register("templates/form-fields/amount",n);var e={amountInput:a};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper amount ').x(n.getPath(!1,["currency","isEditableCatalog"]),n,{block:o},{}).w('"><div class="field-caption">').h("_",n,{block:i},{},"h").w('</div><div class="control-container amount">').b(n.getBlock("amountInput"),n,{},{}).nx(n.getPath(!1,["currency","isEditableCatalog"]),n,{block:r},{}).p("templates/form-fields/hint",n,n,{}).w("</div>").x(n.getPath(!1,["currency","isEditableCatalog"]),n,{block:s},{}).w("</div>")}function o(t,n){return n=n.shiftBlocks(e),t.w("editable-currency")}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-currency currency ').f(n.getPath(!1,["currency","value","id"]),n,"h").w('">').f(n.getPath(!1,["currency","value","name"]),n,"h",["s"]).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="control-container currency"></div>')}function a(t,n){return n=n.shiftBlocks(e),t.x(n.get(["editable"],!1),n,{else:c,block:u},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="static-value" data-mask="').f(n.get(["inputType"],!1),n,"h").w('">').f(n.get(["displayValue"],!1),n,"h",["s"]).w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.w('<input name="').f(n.get(["attr"],!1),n,"h").w('" ').b(n.getBlock("htmlAttrs"),n,{},{}).w(' type="text" data-mask="').f(n.get(["inputType"],!1),n,"h").w('" class="').f(n.get(["inputType"],!1),n,"h").w(" ").f(n.get(["cssClass"],!1),n,"h").w('" maxlength="12"').s(n.getPath(!1,["addData","MIN_AMOUNT"]),n,{block:l},{}).s(n.getPath(!1,["addData","MAX_AMOUNT"]),n,{block:d},{}).nx(n.get(["optional"],!1),n,{block:p},{}).w("/>")}function l(t,n){return n=n.shiftBlocks(e),t.w(' greaterOrEqual="').f(n.getPath(!0,[]),n,"h").w('"')}function d(t,n){return n=n.shiftBlocks(e),t.w(' lessOrEqual="').f(n.getPath(!0,[]),n,"h").w('"')}function p(t,n){return n=n.shiftBlocks(e),t.w(" required")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/amount",t,e)};i.templateName="templates/form-fields/amount",t.exports=i},function(t,e,n){var o=n(372);n(516),n(468);!function(t){t.register("templates/form-fields/beneficiaries-collection",n);var e={collectionItem:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/collection-select",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').p("templates/partials/beneficiary-title",n,n,{}).w("</option>")}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/beneficiaries-collection",t,e)};i.templateName="templates/form-fields/beneficiaries-collection",t.exports=i},function(t,e,n){var o=n(372);n(517);!function(t){t.register("templates/form-fields/card-number",n);var e={fieldHint:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/text",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-hint extra-info"></div>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/card-number",t,e)};i.templateName="templates/form-fields/card-number",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/checkbox",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="checkbox-wrap"><label><input type="checkbox" name="').f(n.get(["id"],!1),n,"h").w('" ').x(n.get(["active"],!1),n,{block:i},{}).w(" /><span data-js-desc>").x(n.get(["additionalTitle"],!1),n,{block:r},{}).w("</span></label></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("checked")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["additionalTitle"],!1),n,"h",["s"])}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/checkbox",t,e)};i.templateName="templates/form-fields/checkbox",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/contact",n);var e={input:o,htmlAttrs:u};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<input id="').f(n.get(["attr"],!1),n,"h").w('" type="').f(n.get(["htmlInputType"],!1),n,"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('"class="contact-input ').f(n.get(["inputType"],!1),n,"h").w(" ").f(n.get(["cssClass"],!1),n,"h").w(" ").x(n.get(["description"],!1),n,{block:i},{}).w('"data-mask="').f(n.get(["inputType"],!1),n,"h").w('"autocorrect="off" autocapitalize="off"placeholder="').f(n.get(["placeholder"],!1),n,"h").w('" ').x(n.get(["autocomplete"],!1),n,{block:r},{}).nx(n.get(["optional"],!1),n,{block:s},{}).b(n.getBlock("htmlAttrs"),n,{},{}).w("/>").x(n.get(["description"],!1),n,{block:a},{}).w('<a href="#" class="contacts-book-link contact-select-link" data-input="').f(n.get(["attr"],!1),n,"h").w('" title="').h("_",n,{block:c},{},"h").w('"></a><div class="extended-content contact-info-container hidden"/>')}function i(t,n){return n=n.shiftBlocks(e),t.w("has-tooltip")}function r(t,n){return n=n.shiftBlocks(e),t.w('autocomplete="on" ')}function s(t,n){return n=n.shiftBlocks(e),t.w("required ")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="hidden tooltip-content">').f(n.get(["description"],!1),n,"h").w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Select from address book")}function u(t,n){return n=n.shiftBlocks(e),t.s(n.get(["htmlAttrs"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["0"]),n,"h").w('="').f(n.getPath(!0,["1"]),n,"h").w('"')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/contact",t,e)};i.templateName="templates/form-fields/contact",t.exports=i},function(t,e,n){var o=n(372);n(409),n(466);!function(t){t.register("templates/form-fields/contract-select",n);var e={input:o,extraContent:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="contract-select-wrapper"></div>')}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["canAddExternalCard"],!1),n,{block:r},{})}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="external-card hidden">').p("templates/contracts/external-card-form",n,n,{}).w("</div>")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/contract-select",t,e)};i.templateName="templates/form-fields/contract-select",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="fields-container"></div>')}function n(t,e){return t.f(e.get(["name"],!1),e,"h")}t.register("templates/form-fields/date-range",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/date-range",t,e)};i.templateName="templates/form-fields/date-range",t.exports=i},function(t,e,n){var o=n(372);n(469);!function(t){function e(t,e){return t.w('<div class="field-wrapper"><div class="field-caption"></div><div class="control-container"><div class="international-transfer"></div></div></div><div class="destination"></div><div class="beneficiary hidden"><div class="field-wrapper"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container beneficiaries-list"></div></div><div class="new-beneficiary hidden">').p("templates/payments/beneficiary-info",e,e,{}).w("</div></div>")}function n(t,e){return t.f(e.get(["name"],!1),e,"h")}t.register("templates/form-fields/international-destination",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/international-destination",t,e)};i.templateName="templates/form-fields/international-destination",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/invoice-amount-correction",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="amount-correction"></div>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/invoice-amount-correction",t,e)};i.templateName="templates/form-fields/invoice-amount-correction",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="invoice-item-group ').f(e.get(["className"],!1),e,"h").w('"><div class="invoice-item-group-header"><h1 class="invoice-item-title">').f(e.get(["name"],!1),e,"h").w('</h1><div class="amount-field-wrapper"></div></div><div class="invoice-fields"><div class="prev-data"></div><div class="current-data"></div><div class="tariff-details"></div><div class="add-amount-info"></div></div></div>')}t.register("templates/form-fields/invoice-item",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/invoice-item",t,e)};i.templateName="templates/form-fields/invoice-item",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="invoice-item-amount ui-field-contain">').x(e.get(["editable"],!1),e,{else:n,block:o},{}).w("</div>")}function n(t,e){return t.w('<div class="amount-value"></div>')}function o(t,e){return t.w('<a href="#" class="amount-value edit"></a><div class="amount-input-wrapper"><input name="').f(e.get(["attr"],!1),e,"h").w('" class="amount-input ').f(e.get(["inputType"],!1),e,"h").w('" type="number" ').s(e.get(["inputType"],!1),e,{block:i},{}).w(" ").nx(e.get(["optional"],!1),e,{block:r},{}).w(' money="true" maxlength="255" /><a href="#" class="cancel-icon"></a></div>')}function i(t,e){return t.w('data-mask="').f(e.getPath(!0,[]),e,"h").w('"')}function r(t,e){return t.w("required ")}t.register("templates/form-fields/invoice-item-amount",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/invoice-item-amount",t,e)};i.templateName="templates/form-fields/invoice-item-amount",t.exports=i},function(t,e,n){var o=n(372);n(518);!function(t){t.register("templates/form-fields/invoice-tariff-info",n);var e={"tariff-item":p};function n(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["tariffData","minTariff"]),n,{block:o},{}).s(n.getPath(!1,["tariffData","midTariff"]),n,{block:s},{}).s(n.getPath(!1,["tariffData","maxTariff"]),n,{block:u},{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:i},{displayValue:r})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("tariff-item"),n,{},{})}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["consumption"],!1),n,"h",["moneyUnsafe","s"]).w(" x ").f(n.get(["tariff"],!1),n,"h",["moneyUnsafe","s"])}function s(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:a},{displayValue:c})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("tariff-item"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["consumption"],!1),n,"h",["moneyUnsafe","s"]).w(" x ").f(n.get(["tariff"],!1),n,"h",["moneyUnsafe","s"])}function u(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:l},{displayValue:d})}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("tariff-item"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["consumption"],!1),n,"h",["moneyUnsafe","s"]).w(" x ").f(n.get(["tariff"],!1),n,"h",["moneyUnsafe","s"])}function p(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/readonly",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/invoice-tariff-info",t,e)};i.templateName="templates/form-fields/invoice-tariff-info",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="invoice-total">').h("_",e,{block:n},{},"h").w(":&nbsp;").f(e.get(["total"],!1),e,"h",["money","s"]).w("</div>")}function n(t,e){return t.w("Total")}t.register("templates/form-fields/invoice-total",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/invoice-total",t,e)};i.templateName="templates/form-fields/invoice-total",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/map",n);var e={input:o,htmlAttrs:a};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<input type="hidden" id="').f(n.get(["attr"],!1),n,"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('" ><input  type="text"  value="').f(n.getPath(!1,["catalogObj","name"]),n,"h").w('"  class="').f(n.get(["inputType"],!1),n,"h").w(" ").f(n.get(["cssClass"],!1),n,"h").w(" ").x(n.get(["shouldShowContactSelector"],!1),n,{block:i},{}).x(n.get(["description"],!1),n,{block:r},{}).w('"  data-mask="').f(n.get(["inputType"],!1),n,"h").w('"  autocorrect="off"  autocapitalize="off"  placeholder="').f(n.get(["placeholder"],!1),n,"h").w('"  readonly  ').nx(n.get(["optional"],!1),n,{block:s},{}).w("  ").b(n.getBlock("htmlAttrs"),n,{},{}).w("/>")}function i(t,n){return n=n.shiftBlocks(e),t.w("contact-input")}function r(t,n){return n=n.shiftBlocks(e),t.w(" has-tooltip")}function s(t,n){return n=n.shiftBlocks(e),t.w("required ")}function a(t,n){return n=n.shiftBlocks(e),t.s(n.get(["htmlAttrs"],!1),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["0"]),n,"h").w('="').f(n.getPath(!0,["1"]),n,"h").w('"')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/map",t,e)};i.templateName="templates/form-fields/map",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/form-fields/measurement-field",n);var e={"measurement-input":a};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper ').x(n.get(["hasDateField"],!1),n,{block:o},{}).w('"><div class="field-caption">').f(n.get(["name"],!1),n,"h").w('</div><div class="control-container measurement">').s(n.get(["date"],!1),n,{block:i},{isDate:"true"}).w('<div class="').x(n.get(["hasDateField"],!1),n,{block:r},{}).w('">').s(n.getPath(!0,[]),n,{block:s},{isValue:"true"}).w('<div class="field-hint">').f(n.get(["unit"],!1),n,"h").w("</div></div></div></div>")}function o(t,n){return n=n.shiftBlocks(e),t.w("multiple-fields")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="multiple-field-first">').b(n.getBlock("measurement-input"),n,{},{}).w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("multiple-field-last")}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("measurement-input"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<input id="').f(n.getPath(!0,["attr"]),n,"h").w('" type="text" name="').f(n.getPath(!0,["attr"]),n,"h").w('" class="').x(n.get(["isValue"],!1),n,{else:c,block:u},{}).w('"').nx(n.getPath(!0,["optional"]),n,{block:l},{}).nx(n.getPath(!0,["editable"]),n,{block:d},{}).s(n.getPath(!0,["displayValue"]),n,{block:p},{}).x(n.get(["isValue"],!1),n,{block:m},{}).w("/>")}function c(t,n){return n=n.shiftBlocks(e),t.w("measurement-date")}function u(t,n){return n=n.shiftBlocks(e),t.w("measurement-value")}function l(t,n){return n=n.shiftBlocks(e),t.w("required ")}function d(t,n){return n=n.shiftBlocks(e),t.w("disabled ")}function p(t,n){return n=n.shiftBlocks(e),t.w('value="').x(n.get(["isDate"],!1),n,{else:h,block:f},{}).w('" ')}function h(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["date"])}function m(t,n){return n=n.shiftBlocks(e),t.s(n.get(["oppositeValueField"],!1),n,{block:y},{})}function y(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:_,block:g},{key:v,value:"Counter.Value"},"h")}function _(t,n){return n=n.shiftBlocks(e),t.w('greaterOrEqual="').f(n.getPath(!1,["oppositeValueField","attr"]),n,"h").w('"')}function g(t,n){return n=n.shiftBlocks(e),t.w('lessOrEqual="').f(n.getPath(!1,["oppositeValueField","attr"]),n,"h").w('"')}function v(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["addData","INVOICE_PARAM_CODE"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/measurement-field",t,e)};i.templateName="templates/form-fields/measurement-field",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper multiple-fields"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container payment-period"><div class="select-wrapper multiple-field-first"><select name="').f(e.get(["id"],!1),e,"h").w('" id="').f(e.get(["id"],!1),e,"h").w('-select" class="').x(e.get(["inactive"],!1),e,{block:o},{}).w(' control-s" data-icon="carat-d"><option value="MONTHLY">').h("_",e,{block:i},{},"h").w('</option><option value="WEEKLY">').h("_",e,{block:r},{},"h").w('</option></select></div><div class="monthly-control multiple-field-last"><input id="').f(e.get(["periodDayName"],!1),e,"h").w('" type="text" name="').f(e.get(["periodDayName"],!1),e,"h").w('" autocorrect="off" autocapitalize="off" placeholder="" required="" number="true" aria-required="true" aria-invalid="false">').b(e.getBlock("period-hint"),e,{},{}).w('</div><div class="weekly-control multiple-field-last"><select name="').f(e.get(["periodDayName"],!1),e,"h").w('" id="').f(e.get(["periodDayName"],!1),e,"h").w('-select" class="').x(e.get(["inactive"],!1),e,{block:s},{}).w(' control-s" data-icon="carat-d" ').nx(e.get(["optional"],!1),e,{block:a},{}).w('><option value="1">').h("_",e,{block:c},{},"h").w('</option><option value="2">').h("_",e,{block:u},{},"h").w('</option><option value="3">').h("_",e,{block:l},{},"h").w('</option><option value="4">').h("_",e,{block:d},{},"h").w('</option><option value="5">').h("_",e,{block:p},{},"h").w('</option><option value="6">').h("_",e,{block:h},{},"h").w('</option><option value="7">').h("_",e,{block:f},{},"h").w("</option></select></div></div></div>")}function n(t,e){return t.f(e.get(["name"],!1),e,"h")}function o(t,e){return t.w("ui-disabled")}function i(t,e){return t.w("Once per month")}function r(t,e){return t.w("Once per week")}function s(t,e){return t.w("ui-disabled")}function a(t,e){return t.w("required")}function c(t,e){return t.w("Monday")}function u(t,e){return t.w("Tuesday")}function l(t,e){return t.w("Wednesday")}function d(t,e){return t.w("Thursday")}function p(t,e){return t.w("Friday")}function h(t,e){return t.w("Saturday")}function f(t,e){return t.w("Sunday")}t.register("templates/form-fields/payment-period",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/payment-period",t,e)};i.templateName="templates/form-fields/payment-period",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/radio-button-group-as-tabs",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="radio-button-group-as-tabs__items" data-enhance="false">').s(n.getPath(!1,["dataSource","values"]),n,{block:i},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<input class="radio-button-group-as-tabs__input" type="radio" value="').f(n.getPath(!0,["id"]),n,"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('" id="').f(n.get(["attr"],!1),n,"h").w(".").f(n.getPath(!0,["id"]),n,"h").w('"><label class="radio-button-group-as-tabs__label" for="').f(n.get(["attr"],!1),n,"h").w(".").f(n.getPath(!0,["id"]),n,"h").w('">').f(n.getPath(!0,["name"]),n,"h").w("</label>")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/radio-button-group-as-tabs",t,e)};i.templateName="templates/form-fields/radio-button-group-as-tabs",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/readonly-dynamic",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["loading"],!1),n,{else:i,block:c},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="static-value">').x(n.get(["empty"],!1),n,{else:r,block:s},{}).w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["catalogObj","name"]),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:a},{},"h")}function a(t,n){return n=n.shiftBlocks(e),t.w("n/a [empty handbook]")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="loading static-value">').h("_",n,{block:u},{},"h").w("</div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("Loading")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/readonly-dynamic",t,e)};i.templateName="templates/form-fields/readonly-dynamic",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t}t.register("templates/form-fields/select",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/select",t,e)};i.templateName="templates/form-fields/select",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/switch",n);var e={input:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="switch-wrap"><input name="').f(n.get(["id"],!1),n,"h").w('" class="toggle-section-checkbox" type="checkbox" ').x(n.get(["active"],!1),n,{block:i},{}).w(' /></div><div class="switch-field-additional-title">').x(n.get(["additionalTitle"],!1),n,{block:r},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("checked")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["additionalTitle"],!1),n,"h",["s"])}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/switch",t,e)};i.templateName="templates/form-fields/switch",t.exports=i},function(t,e,n){var o=n(372);n(409);!function(t){t.register("templates/form-fields/textarea",n);var e={input:o,htmlAttrs:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/form-fields/base",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<textarea id="').f(n.get(["attr"],!1),n,"h").w('" name="').f(n.get(["attr"],!1),n,"h").w('" class="').f(n.get(["inputType"],!1),n,"h").w(" ").f(n.get(["cssClass"],!1),n,"h").w('"data-mask="').f(n.get(["inputType"],!1),n,"h").w('"').nx(n.get(["optional"],!1),n,{block:i},{}).b(n.getBlock("htmlAttrs"),n,{},{}).w("></textarea>")}function i(t,n){return n=n.shiftBlocks(e),t.w("required ")}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["htmlAttrs"],!1),n,{block:s},{})}function s(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["0"]),n,"h").w('="').f(n.getPath(!0,["1"]),n,"h").w('"')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/textarea",t,e)};i.templateName="templates/form-fields/textarea",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="field-wrapper amount"><div class="field-caption">').h("_",e,{block:n},{},"h").w('</div><div class="control-container amount update-balance"><div class="static-value">').x(e.get(["displayValue"],!1),e,{else:o,block:r},{}).w('</div><div class="refresh-button"><a href="#" class="do-update-balance do-update-balance-icon"></a></div><div class="loader"><img src="').f(e.get(["imagePath"],!1),e,"h").w('/inline-loader.gif" align="top"/></div></div></div>')}function n(t,e){return t.f(e.get(["name"],!1),e,"h")}function o(t,e){return t.h("_",e,{block:i},{},"h")}function i(t,e){return t.w("request balance")}function r(t,e){return t.f(e.get(["amountObj"],!1),e,"h",["money","s"])}t.register("templates/form-fields/update-balance",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-fields/update-balance",t,e)};i.templateName="templates/form-fields/update-balance",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<form class="wb-form"><div class="content-header"><div class="title">Денежный перевод</div></div><div class="form-content"><div class="field-wrapper"><div class="field-caption">Перевести с</div><div class="control-container contract-select"></div></div><div class="field-wrapper"><div class="field-caption">Номер счёта получателя</div><div class="control-container"><input name="contract" type="text" class="wb-input" required /></div></div><div class="field-wrapper"><div class="field-caption">ФИО</div><div class="control-container"><input name="target" type="text" class="wb-input" required /><div class="hint">Description text</div></div></div><div class="field-wrapper"><div class="field-caption">Номер телефона</div><div class="control-container"><input name="phone" type="tel" class="wb-input PHONE10" required phone10="true"/></div></div><div class="field-wrapper amount"><div class="field-caption">Сумма</div><div class="control-container"><input name="amount" type="text" class="wb-input" required number="true"/><div class="field-currency">₽</div></div></div><button type="submit" class="wb-button">Продолжить</button></div><div class="button-group"><a href="#" class="link-button">Link button</a><button type="submit" disabled class="wb-button">Disabled Button</button><button type="submit" class="wb-button">Button</button></div></form>')}t.register("templates/form-sample",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/form-sample",t,e)};i.templateName="templates/form-sample",t.exports=i},function(t,e,n){var o=n(372);n(385),n(382);!function(t){t.register("templates/history/application-card-order-details-dialog",n);var e={content:o,attr:R};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("header"),n,{block:i},{}).w('<div class="operation-details-body"><div class="details-section">').s(n.getPath(!0,[]),n,{block:r},{attrName:"Date",attrValue:s}).h("select",n,{block:a},{key:w},"h").s(n.getPath(!0,[]),n,{block:b},{attrName:"Operation number",attrValue:k}).w('</div><div class="details-section">').s(n.get(["fields"],!1),n,{block:B},{}).w('</div></div><div class="operation-actions noprint"><div class="action-links">').x(n.get(["pdfReceiptsDownload"],!1),n,{block:I},{}).b(n.getBlock("additionalActions"),n,{},{}).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="operation-details-header"><h1>').f(n.get(["title"],!1),n,"h").w("</h1></div>")}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.f(n.get(["createdAt"],!1),n,"h",["datetime"])}function a(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:c},{value:"in_progress"},"h").h("eq",n,{block:d},{value:"complete"},"h").h("eq",n,{block:f},{value:"failed"},"h").h("eq",n,{block:_},{value:"draft"},"h")}function c(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:u},{attrName:"Status",attrValue:"In progress",translateValue:"true",iconPath:l})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/waiting.svg")}function d(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:p},{attrName:"Status",attrValue:"Complete",translateValue:"true",iconPath:h})}function p(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/success.svg")}function f(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:m},{attrName:"Status",attrValue:"Failed",translateValue:"true",iconPath:y})}function m(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function y(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function _(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:g},{attrName:"Status",attrValue:"Failed",translateValue:"true",iconPath:v})}function g(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function b(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["extRef"],!1),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["raw"]),n,{else:C,block:T},{})}function C(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:S},{attrName:P,attrValue:x})}function S(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function P(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function x(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{attrName:E,attrValue:M})}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["name"]),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h",["s"])}function I(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link"><a href="').f(n.getPath(!1,["settings","API_URL"]),n,"h").w("/card-orders/").f(n.get(["id"],!1),n,"h").w('/pdf">').h("_",n,{block:N},{},"h").w("</a></div>")}function N(t,n){return n=n.shiftBlocks(e),t.w("Download receipt")}function R(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/application-card-order-details-dialog",t,e)};i.templateName="templates/history/application-card-order-details-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385),n(382);!function(t){t.register("templates/history/application-certificate-details-dialog",n);var e={content:o,attr:et};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("header"),n,{block:i},{}).w('<div class="operation-details-body"><div class="details-section">').s(n.getPath(!0,[]),n,{block:r},{attrName:"Date",attrValue:s}).s(n.get(["certificateContract"],!1),n,{block:a},{}).x(n.get(["dateFrom"],!1),n,{block:m},{}).x(n.get(["dateTo"],!1),n,{block:g},{}).x(n.get(["language"],!1),n,{block:b},{}).h("select",n,{block:C},{key:F},"h").x(n.get(["isExpired"],!1),n,{else:L,block:U},{}).w('</div><div class="details-section">').s(n.get(["contract"],!1),n,{block:W},{}).x(n.getPath(!1,["payment","fee"]),n,{block:X},{}).w('</div></div><div class="operation-actions"><div class="action-links noprint">').x(n.get(["pdfReceiptsDownload"],!1),n,{block:Z},{}).b(n.getBlock("additionalActions"),n,{},{}).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="operation-details-header"><h1>').f(n.get(["certificateType"],!1),n,"h").w("</h1></div>")}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.f(n.get(["createdAt"],!1),n,"h",["datetime"])}function a(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:c,block:d},{key:f,value:"card"},"h")}function c(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:u},{attrName:"Account",attrValue:l})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:p},{attrName:"Card",attrValue:h})}function p(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:y},{attrName:"Date from",attrValue:_})}function y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["dateFrom"],!1),n,"h",["date","s"])}function g(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:v},{attrName:"Date to",attrValue:w})}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["dateTo"],!1),n,"h",["date","s"])}function b(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:k},{attrName:"Language",attrValue:B})}function k(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["language"],!1),n,"h")}function C(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:S},{value:"in_progress"},"h").h("eq",n,{block:T},{value:"complete"},"h").h("eq",n,{block:M},{value:"failed"},"h").h("eq",n,{block:R},{value:"draft"},"h")}function S(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:P},{attrName:"Status",attrValue:"In progress",translateValue:"true",iconPath:x})}function P(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function x(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/waiting.svg")}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{attrName:"Status",attrValue:"Complete",translateValue:"true",iconPath:E})}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/success.svg")}function M(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:I},{attrName:"Status",attrValue:"Failed",translateValue:"true",iconPath:N})}function I(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function N(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function R(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:O},{attrName:"Status",attrValue:"Failed",translateValue:"true",iconPath:D})}function O(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function D(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function F(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:V},{attrName:"Expired",attrValue:"No",translateValue:"true"})}function V(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function U(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:$},{attrName:"Expired",attrValue:"Yes",translateValue:"true"})}function $(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function W(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:H,block:q},{key:K,value:"card"},"h")}function H(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:z},{attrName:"Account",attrValue:Y})}function z(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Y(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function q(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:G},{attrName:"Card",attrValue:j})}function G(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function j(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function K(t,n){return n=n.shiftBlocks(e),t.f(n.get(["type"],!1),n,"h")}function X(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:Q},{attrName:"Fee",attrValue:J})}function Q(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function J(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["payment","fee"]),n,"h",["money","s"])}function Z(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link"><a href="').f(n.getPath(!1,["settings","API_URL"]),n,"h").w("/income-certificates/").f(n.get(["id"],!1),n,"h").w('/pdf" data-js-download-certificate>').h("_",n,{block:tt},{},"h").w("</a></div>")}function tt(t,n){return n=n.shiftBlocks(e),t.w("Download certificate")}function et(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/application-certificate-details-dialog",t,e)};i.templateName="templates/history/application-certificate-details-dialog",t.exports=i},function(t,e,n){var o=n(372);n(448);!function(t){t.register("templates/history/application-history-list",n);var e={operationRow:f,description:_,"empty-history-message":g};function n(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isLoading"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isError"],!1),n,{else:i,block:p},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("history"),n,{block:r},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["operations"],!1),n,{else:s,block:c},{})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:a},{header:"No applications found",description:"Try to change filter settings"})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("empty-history-message"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.s(n.get(["months"],!1),n,{block:u},{})}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="month-delimiter">').f(n.getPath(!0,["month"]),n,"h",["dateMonthYear"]).w("</div>").s(n.get(["dates"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="day-operations"><div class="day-header">').f(n.getPath(!0,["date"]),n,"h",["dateWeekDay"]).w('</div><ul class="operations-list">').s(n.get(["operations"],!1),n,{block:d},{}).w("</ul></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w('<li data-id="').f(n.get(["id"],!1),n,"h").w('" data-type="').f(n.get(["type"],!1),n,"h").w('" class="history-item ').f(n.get(["postingStatus"],!1),n,"h",["lowercase"]).w('">').b(n.getBlock("operationRow"),n,{},{}).w("</li>")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{header:"Failed to obtain applications history",description:"Try to change filter settings or try again later"})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("empty-history-message"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("operation-row-content"),n,{block:m},{})}function m(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-time">').f(n.get(["operationTime"],!1),n,"h",["dateShortTime"]).w('</span><span class="history-item-channel ').f(n.get(["channel"],!1),n,"h").w('"></span><span class="history-item-description"><a class="operation-details" href="#">').b(n.getBlock("description"),n,{},{}).w('</a></span><span class="history-item-status">').f(n.get(["statusName"],!1),n,"h").w("</span>").x(n.get(["allowRepeat"],!1),n,{block:y},{})}function y(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-repeat"><span class="repeat-operation"></span></span>')}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["description"],!1),n,"h")}function g(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/empty-message",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/application-history-list",t,e)};i.templateName="templates/history/application-history-list",t.exports=i},function(t,e,n){var o=n(372);n(385),n(382);!function(t){t.register("templates/history/application-service-details-dialog",n);var e={content:o,attr:ft,description:mt};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("header"),n,{block:i},{}).w('<div class="operation-details-body"><div class="details-section">').s(n.getPath(!0,[]),n,{block:r},{attrName:"Date",attrValue:s}).h("select",n,{block:a},{key:I},"h").x(n.get(["channel"],!1),n,{block:N},{}).x(n.get(["rrn"],!1),n,{block:nt},{}).w('</div><div class="details-section">').s(n.get(["serviceDetails"],!1),n,{block:rt},{}).w('</div></div><div class="operation-actions noprint"><div class="action-links">').x(n.get(["pdfReceiptsDownload"],!1),n,{else:ut,block:pt},{}).b(n.getBlock("additionalActions"),n,{},{}).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="operation-details-header"><h1>').b(n.getBlock("description"),n,{},{}).w("</h1></div>")}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.f(n.get(["operationTime"],!1),n,"h",["datetime"])}function a(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:c},{value:"Waiting"},"h").h("eq",n,{block:p},{value:"Posted"},"h").h("eq",n,{block:y},{value:"Suspended"},"h").h("eq",n,{block:w},{value:"Rejected"},"h").h("eq",n,{block:C},{value:"Declined"},"h").h("eq",n,{block:T},{value:"Expired"},"h").b(n.getBlock("additionalStatuses"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:u},{attrName:"Status",attrValue:l,iconPath:d})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/waiting.svg")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:"Status",attrValue:f,iconPath:m})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/success.svg")}function y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:_},{attrName:"Status",attrValue:g,iconPath:v})}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/pause.svg")}function w(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:b},{attrName:"Status",attrValue:k,iconPath:B})}function b(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function C(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:S},{attrName:"Status",attrValue:P,iconPath:x})}function S(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function P(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function x(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/failed.svg")}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{attrName:"Status",attrValue:E,iconPath:M})}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["statusName"],!1),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/info-orange.svg")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.get(["postingStatus"],!1),n,"h")}function N(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:R},{key:et},"h")}function R(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:O},{value:"ATM"},"h").h("eq",n,{block:V},{value:"WB"},"h").h("eq",n,{block:H},{value:"MB"},"h").h("eq",n,{block:G},{value:"MWB"},"h").h("eq",n,{block:Q},{value:"KIOSK"},"h")}function O(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:D},{attrName:"Channel",attrValue:F,iconPath:L,translateValue:"true"})}function D(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function F(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/atm.svg")}function V(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:U},{attrName:"Channel",attrValue:$,iconPath:W,translateValue:"true"})}function U(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function $(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function W(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/web.svg")}function H(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:z},{attrName:"Channel",attrValue:Y,iconPath:q,translateValue:"true"})}function z(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Y(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function q(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/mobile.svg")}function G(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:j},{attrName:"Channel",attrValue:K,iconPath:X,translateValue:"true"})}function j(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function K(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function X(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/mobile.svg")}function Q(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:J},{attrName:"Channel",attrValue:Z,iconPath:tt,translateValue:"true"})}function J(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function Z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function tt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["imagePath"],!1),n,"h").w("/kiosk.svg")}function et(t,n){return n=n.shiftBlocks(e),t.f(n.get(["channel"],!1),n,"h")}function nt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:ot},{attrName:"Operation number",attrValue:it})}function ot(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function it(t,n){return n=n.shiftBlocks(e),t.f(n.get(["rrn"],!1),n,"h")}function rt(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:st},{attrName:at,attrValue:ct,attrMask:n.get(["mask"],!1),rawMask:n.get(["rawMask"],!1)})}function st(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function at(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function ct(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function ut(t,n){return n=n.shiftBlocks(e),t.x(n.get(["showPrintLink"],!1),n,{block:lt},{})}function lt(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link"><a href="#" class="print-link">').h("_",n,{block:dt},{},"h").w("</a></div>")}function dt(t,n){return n=n.shiftBlocks(e),t.w("Print")}function pt(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-link"><a href="').f(n.getPath(!1,["settings","API_URL"]),n,"h").w("/application-history/").f(n.get(["id"],!1),n,"h").w('/pdf">').h("_",n,{block:ht},{},"h").w("</a></div>")}function ht(t,n){return n=n.shiftBlocks(e),t.w("Download receipt")}function ft(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function mt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["description"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0,ft.__dustBody=!0,mt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/application-service-details-dialog",t,e)};i.templateName="templates/history/application-service-details-dialog",t.exports=i},function(t,e,n){var o=n(372);n(519);!function(t){t.register("templates/history/category-operation-details-dialog",n);var e={header:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/history/operation-details-dialog",n,n,{}).w('<style type="text/css">.operation-details-dialog .operation-details-header { background: ').f(n.get(["defaultCategoryColor"],!1),n,"h").w("; }").s(n.get(["categoriesColors"],!1),n,{block:l},{}).w("</style>")}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="operation-details-header" data-category="').x(n.get(["isOnline"],!1),n,{else:i,block:r},{}).w('"><h1>').b(n.getBlock("description"),n,{},{}).w("</h1><h3>").x(n.get(["isOnline"],!1),n,{else:s,block:c},{}).w("</h3></div>")}function i(t,n){return n=n.shiftBlocks(e),t.f(n.get(["merchantCategory"],!1),n,"h")}function r(t,n){return n=n.shiftBlocks(e),t.w("online")}function s(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:a},{},"h")}function a(t,n){return n=n.shiftBlocks(e),t.f(n.get(["merchantCategory"],!1),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:u},{},"h")}function u(t,n){return n=n.shiftBlocks(e),t.w("Online operation")}function l(t,n){return n=n.shiftBlocks(e),t.w('.operation-details-dialog .operation-details-header[data-category="').f(n.get(["category"],!1),n,"h").w('"] { background: ').f(n.get(["color"],!1),n,"h").w("; }")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/category-operation-details-dialog",t,e)};i.templateName="templates/history/category-operation-details-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t}t.register("templates/history/filters/contract",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/filters/contract",t,e)};i.templateName="templates/history/filters/contract",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<input type="text" name="from" class="filter-date from maxDateToday" required readonly/><div class="period-delimiter">&ndash;</div><input type="text" name="to" class="filter-date to maxDateToday" required readonly/>')}t.register("templates/history/filters/period",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/filters/period",t,e)};i.templateName="templates/history/filters/period",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<input type="text" name="text-search"/>')}t.register("templates/history/filters/text-search",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/filters/text-search",t,e)};i.templateName="templates/history/filters/text-search",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/history/history-analytics",n);var e={"bonus-analytics-block":s,"money-analytics-block":y,summary:j,anotherCurrencySummary:ot,bonusSummary:ft};function n(t,n){return n=n.shiftBlocks(e),t.x(n.get(["showAnalytics"],!1),n,{block:o},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["bonusMode"],!1),n,{else:i,block:r},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("money-analytics-block"),n,{},{})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("bonus-analytics-block"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="bonus-analytics"><div class="bonus-mode-switch"><a href="#" class="bonus-reset toggle-bonus-analytics">').h("_",n,{block:a},{},"h").w('</a><a href="#" data-mode="income" class="bonus-income toggle-bonus-analytics ').h("eq",n,{block:c},{key:u,value:"income"},"h").w('">').h("_",n,{block:l},{},"h").w('</a><a href="#" data-mode="spent" class="bonus-spent toggle-bonus-analytics ').h("eq",n,{block:d},{key:p,value:"spent"},"h").w('">').h("_",n,{block:h},{},"h").w('</a></div><div class="bonus-chart-block bonus-').f(n.get(["bonusMode"],!1),n,"h").w('"></div><div class="bottom-panel">').x(n.get(["hasFilter"],!1),n,{block:f},{}).w("</div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Back to history")}function c(t,n){return n=n.shiftBlocks(e),t.w("active")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["bonusMode"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Bonuses earned")}function d(t,n){return n=n.shiftBlocks(e),t.w("active")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["bonusMode"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.w("Bonuses spent")}function f(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="reset-filter">').h("_",n,{block:m},{},"h").w("</a>")}function m(t,n){return n=n.shiftBlocks(e),t.w("Reset filter")}function y(t,n){return n=n.shiftBlocks(e),t.w('<div class="money-analytics">').x(n.get(["bonusAnalyticsAvailable"],!1),n,{block:_},{}).w('<div class="chart-block ').x(n.get(["hasFilter"],!1),n,{block:v},{}).w(" ").x(n.get(["categoryFilter"],!1),n,{block:w},{}).w('"></div><div class="analytics-block ').x(n.get(["hasFilter"],!1),n,{block:b},{}).w('">').s(n.getPath(!1,["categories","income"]),n,{block:k},{label:"Income",group:"income"}).x(n.getPath(!1,["categories","anotherCurrencyIncome"]),n,{block:B},{}).x(n.getPath(!1,["categories","cashback"]),n,{block:S},{}).x(n.getPath(!1,["categories","bonusIncome"]),n,{block:x},{}).w('<div class="delimiter"></div>').s(n.getPath(!1,["categories","spent"]),n,{block:A},{label:"Expenses",group:"spent"}).s(n.getPath(!1,["categories","bonusSpent"]),n,{block:E},{mode:"spent"}).x(n.get(["showExpensesDetails"],!1),n,{block:M},{}).x(n.getPath(!1,["categories","anotherCurrency"]),n,{block:V},{}).w('</div><div class="bottom-panel">').x(n.get(["hasFilter"],!1),n,{block:$},{}).w('<div class="info-block"><h4>').h("_",n,{block:H},{},"h").w("</h4><div>").h("_",n,{block:z},{},"h").w(":<ul><li>").h("_",n,{block:Y},{},"h").w("</li><li>").h("_",n,{block:q},{},"h").w("</li><li>").h("_",n,{block:G},{},"h").w("</li></ul></div></div></div></div>")}function _(t,n){return n=n.shiftBlocks(e),t.w('<div class="bonus-analytics-switch-wrapper"><a href="#" class="bonus-analytics-switch toggle-bonus-analytics" data-mode="income">').h("_",n,{block:g},{},"h").w("</a></div>")}function g(t,n){return n=n.shiftBlocks(e),t.w("Show bonuses")}function v(t,n){return n=n.shiftBlocks(e),t.w("has-filter")}function w(t,n){return n=n.shiftBlocks(e),t.w("is-filter")}function b(t,n){return n=n.shiftBlocks(e),t.w("has-filter")}function k(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function B(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","anotherCurrencyIncome"]),n,{block:C},{label:"In other currency",group:"anotherCurrencyIncome"})}function C(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("anotherCurrencySummary"),n,{},{})}function S(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","cashback"]),n,{block:P},{label:"Cashback",group:"cashback"})}function P(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function x(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","bonusIncome"]),n,{block:T},{mode:"income"})}function T(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("bonusSummary"),n,{},{})}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function E(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("bonusSummary"),n,{},{})}function M(t,n){return n=n.shiftBlocks(e),t.w('<div class="delimiter"></div><span class="summary">').h("_",n,{block:I},{},"h").w(":</span>").x(n.getPath(!1,["categories","cashOut"]),n,{block:N},{}).x(n.getPath(!1,["categories","online"]),n,{block:O},{}).x(n.getPath(!1,["categories","auth"]),n,{block:F},{})}function I(t,n){return n=n.shiftBlocks(e),t.w("In particular")}function N(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","cashOut"]),n,{block:R},{label:"Cash-out",group:"cashOut"})}function R(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function O(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","online"]),n,{block:D},{label:"Online operations",group:"online"})}function D(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function F(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["categories","auth"]),n,{block:L},{label:"Blocked",group:"auth"})}function L(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("summary"),n,{},{})}function V(t,n){return n=n.shiftBlocks(e),t.w('<div class="delimiter"></div>').s(n.getPath(!1,["categories","anotherCurrency"]),n,{block:U},{label:"Another currency operations",group:"anotherCurrency"})}function U(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("anotherCurrencySummary"),n,{},{})}function $(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="reset-filter">').h("_",n,{block:W},{},"h").w("</a>")}function W(t,n){return n=n.shiftBlocks(e),t.w("Reset filter")}function H(t,n){return n=n.shiftBlocks(e),t.w("How it works")}function z(t,n){return n=n.shiftBlocks(e),t.w("General data visualization principles")}function Y(t,n){return n=n.shiftBlocks(e),t.w("doughnut chart shows retail operations expenses grouped by merchant categories")}function q(t,n){return n=n.shiftBlocks(e),t.w("statistics uses national currency. However, if contract is selected, statistics will use its currency instead")}function G(t,n){return n=n.shiftBlocks(e),t.w('"another currency operations" group contains operations, which was executed without conversion into national currency (such operations won\'t be included into "income" and "expenses" categories)')}function j(t,n){return n=n.shiftBlocks(e),t.w('<div class="summary ').f(n.get(["group"],!1),n,"h").w(" ").h("eq",n,{block:K},{key:X,value:Q},"h").w('"><div class="label" data-group="').f(n.get(["group"],!1),n,"h").w('">').h("_",n,{block:J},{},"h").w('</div><div class="value">').h("ne",n,{else:Z,block:et},{key:nt,value:"0",type:"nubmer"},"h").w("</div></div>")}function K(t,n){return n=n.shiftBlocks(e),t.w("is-filter")}function X(t,n){return n=n.shiftBlocks(e),t.f(n.get(["group"],!1),n,"h")}function Q(t,n){return n=n.shiftBlocks(e),t.f(n.get(["operationGroupFilter"],!1),n,"h")}function J(t,n){return n=n.shiftBlocks(e),t.f(n.get(["label"],!1),n,"h")}function Z(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:tt},{},"h")}function tt(t,n){return n=n.shiftBlocks(e),t.w("No operations")}function et(t,n){return n=n.shiftBlocks(e),t.f(n.get(["summary"],!1),n,"h",["moneyShort","s"])}function nt(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["summary","value"]),n,"h")}function ot(t,n){return n=n.shiftBlocks(e),t.w('<div class="summary ').f(n.get(["group"],!1),n,"h").w(" ").h("eq",n,{block:it},{key:rt,value:st},"h").w('"><div class="label" data-group="').f(n.get(["group"],!1),n,"h").w('">').h("_",n,{block:at},{},"h").w('</div><div class="value">').h("gt",n,{else:ct,block:dt},{key:ht,value:"2",type:"number"},"h").w("</div></div>")}function it(t,n){return n=n.shiftBlocks(e),t.w("is-filter")}function rt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["group"],!1),n,"h")}function st(t,n){return n=n.shiftBlocks(e),t.f(n.get(["operationGroupFilter"],!1),n,"h")}function at(t,n){return n=n.shiftBlocks(e),t.f(n.get(["label"],!1),n,"h")}function ct(t,n){return n=n.shiftBlocks(e),t.s(n.get(["currencies"],!1),n,{block:ut},{})}function ut(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h",["moneyShort","s"]).h("sep",n,{block:lt},{},"h")}function lt(t,n){return n=n.shiftBlocks(e),t.w(", ")}function dt(t,n){return n=n.shiftBlocks(e),t.h("_",n,{},{singular:"%(num)s operation",plural:"%(num)s operations",num:pt},"h")}function pt(t,n){return n=n.shiftBlocks(e),t.f(n.get(["operationsQuantity"],!1),n,"h")}function ht(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["currencies","length"]),n,"h")}function ft(t,n){return n=n.shiftBlocks(e),t.x(n.get(["bonusAnalyticsAvailable"],!1),n,{block:mt},{})}function mt(t,n){return n=n.shiftBlocks(e),t.w('<div class="summary bonuses bonus-').f(n.get(["mode"],!1),n,"h").w('"><div class="label">').h("_",n,{block:yt},{},"h").w('</div><a href="#" data-mode="').f(n.get(["mode"],!1),n,"h").w('" class="value toggle-bonus-analytics">').f(n.get(["summary"],!1),n,"h",["moneyShort","s"]).w("</a></div>")}function yt(t,n){return n=n.shiftBlocks(e),t.w("Bonuses")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0,J.__dustBody=!0,Z.__dustBody=!0,tt.__dustBody=!0,et.__dustBody=!0,nt.__dustBody=!0,ot.__dustBody=!0,it.__dustBody=!0,rt.__dustBody=!0,st.__dustBody=!0,at.__dustBody=!0,ct.__dustBody=!0,ut.__dustBody=!0,lt.__dustBody=!0,dt.__dustBody=!0,pt.__dustBody=!0,ht.__dustBody=!0,ft.__dustBody=!0,mt.__dustBody=!0,yt.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-analytics",t,e)};i.templateName="templates/history/history-analytics",t.exports=i},function(t,e,n){var o=n(372);n(447);!function(t){t.register("templates/history/history-analytics-list",n);var e={beforeInfo:i,afterDescription:a,"state-description":h};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/history/simple-history-list",n,n,{}).w('<style type="text/css">.history-item-state { background-color: ').f(n.get(["defaultCategoryColor"],!1),n,"h").w(" }").s(n.get(["categoriesColors"],!1),n,{block:o},{}).w("</style>")}function o(t,n){return n=n.shiftBlocks(e),t.w('.history-item-state[data-category="').f(n.get(["category"],!1),n,"h").w('"] { background-color: ').f(n.get(["color"],!1),n,"h").w("; }")}function i(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-state" title="').b(n.getBlock("state-description"),n,{},{}).w('" data-category="').x(n.get(["isOnline"],!1),n,{else:r,block:s},{}).w('"></span>')}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["merchantCategory"],!1),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.w("online")}function a(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!1,["amountDetails","fees","bonus"]),n,{block:c},{}).s(n.getPath(!1,["amountDetails","fees","cashback"]),n,{block:p},{})}function c(t,n){return n=n.shiftBlocks(e),t.h("gt",n,{else:u,block:l},{key:d,value:0},"h")}function u(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-amount loyalty bonus-spent">').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</span>")}function l(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-amount loyalty bonus-income"><span class="amount-sign">+</span>').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</span>")}function d(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,["value"]),n,"h")}function p(t,n){return n=n.shiftBlocks(e),t.w('<span class="history-item-amount loyalty cashback"><span class="amount-sign">+</span>').f(n.getPath(!0,[]),n,"h",["money","s"]).w("</span>")}function h(t,n){return n=n.shiftBlocks(e),t.x(n.get(["dispute"],!1),n,{else:f,block:M},{})}function f(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:m},{key:E},"h")}function m(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:y},{value:"failed"},"h").h("eq",n,{block:g},{value:"expired"},"h").h("none",n,{block:w},{},"h")}function y(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:_},{},"h")}function _(t,n){return n=n.shiftBlocks(e),t.w("Failed [operation status]")}function g(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:v},{},"h")}function v(t,n){return n=n.shiftBlocks(e),t.w("Expired [operation status]")}function w(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isReversed"],!1),n,{else:b,block:T},{})}function b(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isAuth"],!1),n,{else:k,block:P},{})}function k(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isOnline"],!1),n,{else:B,block:C},{})}function B(t,n){return n=n.shiftBlocks(e),t.f(n.get(["merchantCategory"],!1),n,"h",["opCategoryText"])}function C(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:S},{},"h")}function S(t,n){return n=n.shiftBlocks(e),t.w("Online [operations category]")}function P(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:x},{},"h")}function x(t,n){return n=n.shiftBlocks(e),t.w("Blocked [operation status]")}function T(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:A},{},"h")}function A(t,n){return n=n.shiftBlocks(e),t.w("Canceled [operation status]")}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:I},{},"h")}function I(t,n){return n=n.shiftBlocks(e),t.w("This operation is currently under dispute")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-analytics-list",t,e)};i.templateName="templates/history/history-analytics-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="filters"></div><div class="analytics"></div><div class="operations"></div>')}t.register("templates/history/history-analytics-panel",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-analytics-panel",t,e)};i.templateName="templates/history/history-analytics-panel",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="bonus-summary">').f(e.get(["summary"],!1),e,"h",["money","s"]).w('</div><div class="bonus-chart">').s(e.get(["categories"],!1),e,{block:n},{}).w('</div><style type="text/css">.bonus-chart-section .bonus-chart-bar {background: ').f(e.get(["defaultCategoryColor"],!1),e,"h").w(";}.bonus-chart-section:hover .bonus-chart-bar {background: ").f(e.get(["defaultCategoryHighlightColor"],!1),e,"h").w(";}").s(e.get(["categoriesColors"],!1),e,{block:r},{}).w("</style>")}function n(t,e){return t.w('<div class="bonus-chart-section ').x(e.get(["filteredOut"],!1),e,{block:o},{}).w(" ").x(e.get(["isSelected"],!1),e,{block:i},{}).w('" data-filter="').f(e.get(["category"],!1),e,"h").w('" style="flex-basis: ').f(e.get(["percentage"],!1),e,"h").w('%"><div class="bonus-chart-bar-wrapper"><div class="bonus-chart-bar"></div></div><div class="bonus-chart-section-description"><div class="bonus-chart-section-name">').f(e.get(["label"],!1),e,"h").w('</div><div class="bonus-chart-section-summary">').f(e.get(["amount"],!1),e,"h",["money","s"]).w("</div></div></div>")}function o(t,e){return t.w("filtered")}function i(t,e){return t.w("selected")}function r(t,e){return t.w('.bonus-chart-section[data-filter="').f(e.get(["category"],!1),e,"h").w('"] .bonus-chart-bar {background: ').f(e.get(["color"],!1),e,"h").w(';}.bonus-chart-section[data-filter="').f(e.get(["category"],!1),e,"h").w('"]:hover .bonus-chart-bar {background: ').f(e.get(["highlightColor"],!1),e,"h").w(";}")}t.register("templates/history/history-bonus-chart",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-bonus-chart",t,e)};i.templateName="templates/history/history-bonus-chart",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="empty-chart" style="display: none"></div><canvas class="chart-area"></canvas><div class="legend"><div class="summary ').nx(e.get(["hasData"],!1),e,{block:n},{}).w('" ').s(e.get(["category"],!1),e,{block:o},{}).w(">").s(e.get(["percentage"],!1),e,{block:i},{}).w('<div class="label">').f(e.get(["label"],!1),e,"h").w('</div><div class="amount">').f(e.get(["summary"],!1),e,"h",["money","s"]).w('</div></div><div class="tooltip hidden"><div class="percentage"></div><div class="label"></div><div class="amount"></div></div></div>').b(e.getBlock("legend-styles"),e,{block:r},{})}function n(t,e){return t.w("no-data")}function o(t,e){return t.w('data-category="').f(e.getPath(!0,[]),e,"h").w('"')}function i(t,e){return t.w('<div class="percentage">').f(e.getPath(!0,[]),e,"h",["percentage"]).w("</div>")}function r(t,e){return t.w('<style type="text/css">.legend .summary .percentage,.legend .tooltip .percentage {color: ').f(e.get(["defaultCategoryColor"],!1),e,"h").w(";}").s(e.get(["categoriesColors"],!1),e,{block:s},{}).w("</style>")}function s(t,e){return t.w('.legend .summary[data-category="').f(e.get(["category"],!1),e,"h").w('"] .percentage,.legend .tooltip[data-category="').f(e.get(["category"],!1),e,"h").w('"] .percentage {color: ').f(e.get(["color"],!1),e,"h").w(";}")}t.register("templates/history/history-chart",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-chart",t,e)};i.templateName="templates/history/history-chart",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t}t.register("templates/history/history-filters",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-filters",t,e)};i.templateName="templates/history/history-filters",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/history/history-page",n);var e={title:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__history"></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-page",t,e)};i.templateName="templates/history/history-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="filters"></div><div class="operations"></div>')}t.register("templates/history/history-panel",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/history-panel",t,e)};i.templateName="templates/history/history-panel",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("base-templates/history/report-dialog",n);var e={content:o,dateControls:c,emailControls:d};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form class="block__report-form wb-form">').s(n.get(["description"],!1),n,{block:i},{}).w('<input type="hidden" autofocus/>').b(n.getBlock("statementControls"),n,{block:r},{}).w("</form>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<p class="report-description">').f(n.getPath(!0,[]),n,"h").w("</p>")}function r(t,n){return n=n.shiftBlocks(e),t.x(n.get(["editablePeriod"],!1),n,{block:s},{}).x(n.get(["email"],!1),n,{block:a},{})}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("dateControls"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("emailControls"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="date-controls control-group"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:u},{},"h").w('</div><div class="control-container"><input id="dateFrom-input" type="text" name="dateFrom" class="datepicker maxDateToday" required readonly/></div></div><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:l},{},"h").w('</div><div class="control-container"><input id="dateTo-input" type="text" name="dateTo" class="datepicker maxDateToday" required readonly/></div></div></div>')}function u(t,n){return n=n.shiftBlocks(e),t.w("From [statememt date]")}function l(t,n){return n=n.shiftBlocks(e),t.w("To [statememt date]")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="email-controls control-group"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:p},{},"h").w('</div><div class="control-container"><input id="email-input" type="email" name="email" class="email" value="').f(n.get(["emailAddress"],!1),n,"h").w('" maxlength="255" required/></div></div><button class="wb-button email-link">').f(n.getPath(!1,["BUTTON_TITLES","email"]),n,"h").w("</button></div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Email [statement]")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("base-templates/history/report-dialog",t,e)};i.templateName="base-templates/history/report-dialog",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/history/statement-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<iframe class="report-iframe" src="about:blank"></iframe>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/history/statement-dialog",t,e)};i.templateName="templates/history/statement-dialog",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/instalment/create-plan-result",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("instalment-create-result")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__complete"><div class="complete__icon ').x(n.get(["isError"],!1),n,{else:s,block:a},{}).w('"></div><h1 class="complete__title">').h("_",n,{block:c},{},"h").w('</h1><div class="complete__desc">').h("_",n,{block:u},{},"h").w('</div><div class="block__links">').nx(n.get(["isError"],!1),n,{block:l},{}).w('<div><a href="#menu/SFMAIN_MENU.CP_HISTORY/HISTORY.CP_HISTORY" >').h("_",n,{block:p},{},"h").w("</a></div></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--success")}function a(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--failed")}function c(t,n){return n=n.shiftBlocks(e),t.w("Instalment create successfull")}function u(t,n){return n=n.shiftBlocks(e),t.w("Wait money")}function l(t,n){return n=n.shiftBlocks(e),t.w('<div><a class="" href="#payment-instalments/').f(n.getPath(!1,["instalment","id"]),n,"h").w('" >').h("_",n,{block:d},{},"h").w("</a></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Show details")}function p(t,n){return n=n.shiftBlocks(e),t.w("Back to History")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/create-plan-result",t,e)};i.templateName="templates/instalment/create-plan-result",t.exports=i},function(t,e,n){var o=n(372);n(376),n(523);!function(t){t.register("templates/instalment/details-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("cards-accounts")}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["instalment"],!1),n,{block:s},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__operation-instalment"><div class="content-header"><div class="title">').f(n.get(["name"],!1),n,"h").w('</div><div class="amount">').f(n.get(["fullRepaymentAmount"],!1),n,"h",["money","s"]).w('</div></div><div class="tabs"><div class="tabs__title title-active">').h("_",n,{block:a},{},"h").w('</div><div class="tabs__title ">').h("_",n,{block:c},{},"h").w('</div></div><div class="tabs-content"><div class="tabs-content__body">').p("templates/instalment/operation-instalment-data-info",n,n,{}).w('</div><div class="tabs-content__body"><div class="row-link pdf-button"><a class="line-title" href="').f(n.getPath(!1,["settings","API_URL"]),n,"h").w("/payment-instalments/").f(n.get(["id"],!1),n,"h").w('/pdf">').h("_",n,{block:u},{},"h").w("</a></div>").s(n.get(["instalmentIsActive"],!1),n,{block:l},{}).w("</div></div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Information")}function c(t,n){return n=n.shiftBlocks(e),t.w("Services")}function u(t,n){return n=n.shiftBlocks(e),t.w("Payment schedule (PDF)")}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="row-link" data-js-early-repayment-btn><a class="line-title" href="#payment-instalments/').f(n.get(["id"],!1),n,"h").w('/earlyRepayment">').h("_",n,{block:d},{},"h").w("</a></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Early Repayment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/details-page",t,e)};i.templateName="templates/instalment/details-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){function e(t,e){return t.p("templates/common/dialog",e,e,{}).w('<div class="message-info"><div class="text">').f(e.get(["message"],!1),e,"h").w("</div></div>")}t.register("templates/instalment/dialog-message",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/dialog-message",t,e)};i.templateName="templates/instalment/dialog-message",t.exports=i},function(t,e,n){var o=n(372);n(445),n(382),n(382),n(382),n(382),n(382),n(382);!function(t){t.register("templates/instalment/early-repayment-confirmation-dialog",n);var e={addContent:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/add-auth-without-form-dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="early-repayment-confirmation__content"><div class="details-section">').s(n.getPath(!0,[]),n,{block:i},{attrName:"By account",attrValue:r}).s(n.getPath(!0,[]),n,{block:s},{attrName:"Instalment",attrValue:a}).s(n.getPath(!0,[]),n,{block:c},{attrName:"Amount",attrValue:u}).s(n.getPath(!1,["payment","type"]),n,{block:l},{}).s(n.getPath(!0,[]),n,{block:_},{attrName:"Date",attrValue:g}).w('<div class="message-info">').h("_",n,{block:v},{},"h").w("</div></div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function r(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["contract","accountNumber"]),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["instalment","name"]),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function u(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["payment","amount"]),n,"h",["money","s"])}function l(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:d},{key:y},"h")}function d(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:p},{value:"tenor"},"h").h("eq",n,{block:f},{value:"portionSize"},"h")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:"Recalculation",attrValue:"Tenor",translateValue:"true"})}function h(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function f(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:m},{attrName:"Recalculation",attrValue:"Portion Size",translateValue:"true"})}function m(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["payment","type","id"]),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["date"],!1),n,"h",["operationInstalmentDateToPay"])}function v(t,n){return n=n.shiftBlocks(e),t.w("The early repayment date is defined by the bank")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/early-repayment-confirmation-dialog",t,e)};i.templateName="templates/instalment/early-repayment-confirmation-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<form class="wb-form early-repaiment-form" autocomplete="off"><div class="form-fields"></div>').x(e.get(["license"],!1),e,{block:n},{}).w('<div class="button-group"><button type="submit" class="wb-button" js-data-continue-btn>').h("_",e,{block:o},{},"h").w("</button></div></form>")}function n(t,e){return t.w('<div class="license-block control-container" data-js-license></div>')}function o(t,e){return t.w("Continue")}t.register("templates/instalment/early-repayment-form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/early-repayment-form",t,e)};i.templateName="templates/instalment/early-repayment-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/instalment/early-repayment-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("cards-accounts")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header"><div class="title">').h("_",n,{block:s},{},"h").w('</div></div><div class="tabs"><div class="tabs__title title-active" data-js-tabs-title>').h("_",n,{block:a},{},"h").w('</div><div class="tabs__title " data-js-tabs-title>').h("_",n,{block:c},{},"h").w('</div></div><div class="tabs-content"><div class="tabs-content__body" data-js-partial-form></div><div class="tabs-content__body" data-js-full-form></div></div>')}function s(t,n){return n=n.shiftBlocks(e),t.w("Early Repayment")}function a(t,n){return n=n.shiftBlocks(e),t.w("Partial Repayment")}function c(t,n){return n=n.shiftBlocks(e),t.w("Full Repayment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/early-repayment-page",t,e)};i.templateName="templates/instalment/early-repayment-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/instalment/early-repayment-result-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("instalment-create-result")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__complete"><div class="complete__icon ').x(n.get(["isError"],!1),n,{else:s,block:a},{}).w('"></div>').x(n.get(["isFullRepayment"],!1),n,{else:c,block:l},{}).w('<div class="block__links">').nx(n.get(["isError"],!1),n,{block:p},{}).w('<div><a href="#" data-js-back-to-card-and-account-btn >').h("_",n,{block:f},{},"h").w("</a></div></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--success")}function a(t,n){return n=n.shiftBlocks(e),t.w("complete__icon--failed")}function c(t,n){return n=n.shiftBlocks(e),t.w('<h1 class="complete__title">').h("_",n,{block:u},{},"h").w("</h1>")}function u(t,n){return n=n.shiftBlocks(e),t.w("PartialRepayment create successfully")}function l(t,n){return n=n.shiftBlocks(e),t.w('<h1 class="complete__title">').h("_",n,{block:d},{},"h").w("</h1>")}function d(t,n){return n=n.shiftBlocks(e),t.w("FullRepayment create successfully")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div><a href="#payment-instalments/').f(n.getPath(!1,["instalment","id"]),n,"h").w('" >').h("_",n,{block:h},{},"h").w("</a></div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Show details")}function f(t,n){return n=n.shiftBlocks(e),t.w("Back to Cards and Accounts")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/early-repayment-result-page",t,e)};i.templateName="templates/instalment/early-repayment-result-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){function e(t,e){return t.p("templates/common/dialog",e,e,{}).w('<div id="operation-details-dialog"><div class="instalment-history-popup__header" data-category="').x(e.getPath(!1,["history","isOnline"]),e,{else:n,block:o},{}).w('"><h1>').f(e.getPath(!1,["history","description"]),e,"h").w("</h1><h3>").x(e.getPath(!1,["history","isOnline"]),e,{else:i,block:s},{}).w('</h3></div><div class="operation-details-body"><div class="details-section"><div class="details"><div class="name">').h("_",e,{block:c},{},"h").w('</div><div class="value">').f(e.getPath(!1,["history","operationTime"]),e,"h",["datetime"]).w('</div></div><div class="details"><div class="name">').h("_",e,{block:u},{},"h").w('</div><div class="value"><img src="').f(e.get(["imagePath"],!1),e,"h").w("/").f(e.getPath(!1,["history","status"]),e,"h").w('.svg" class="icon-details">').f(e.getPath(!1,["history","status"]),e,"h").w("</div></div>").x(e.getPath(!1,["history","rrn"]),e,{else:l,block:p},{}).w("</div>").x(e.getPath(!1,["contract","name"]),e,{block:f},{}).s(e.getPath(!1,["history","location"]),e,{block:y},{}).w('<div class="details-section"><div class="details"><div class="name">').h("_",e,{block:v},{},"h").w('</div><div class="value">').f(e.getPath(!1,["history","transAmount"]),e,"h",["absMoney","s"]).w("</div></div>").x(e.getPath(!1,["history","fees"]),e,{block:w},{}).w("</div></div></div>")}function n(t,e){return t.f(e.getPath(!1,["history","merchantCategory"]),e,"h")}function o(t,e){return t.w("online")}function i(t,e){return t.h("_",e,{block:r},{},"h")}function r(t,e){return t.f(e.getPath(!1,["history","merchantCategory"]),e,"h")}function s(t,e){return t.h("_",e,{block:a},{},"h")}function a(t,e){return t.w("Online operation")}function c(t,e){return t.w("Date")}function u(t,e){return t.w("Status")}function l(t,e){return t.w('<div class="details"><div class="name">').h("_",e,{block:d},{},"h").w('</div><div class="value">').f(e.getPath(!1,["history","authCode"]),e,"h").w("</div></div>")}function d(t,e){return t.w("Authorization code")}function p(t,e){return t.w('<div class="details"><div class="name">').h("_",e,{block:h},{},"h").w('</div><div class="value">').f(e.getPath(!1,["history","rrn"]),e,"h").w("</div></div>")}function h(t,e){return t.w("Operation number")}function f(t,e){return t.w('<div class="details-section"><div class="details"><div class="name">').h("_",e,{block:m},{},"h").w('</div><div class="value">').f(e.getPath(!1,["contract","name"]),e,"h").w("</div></div></div>")}function m(t,e){return t.w("Contract")}function y(t,e){return t.w('<div class="details-section"><div class="details"><div class="name">').h("_",e,{block:_},{},"h").w('</div><div class="value">').f(e.get(["merchant"],!1),e,"h").w('</div></div><div class="details"><div class="name">').h("_",e,{block:g},{},"h").w('</div><div class="value">').f(e.get(["city"],!1),e,"h").w(" ").f(e.get(["region"],!1),e,"h").w(" ").f(e.get(["country"],!1),e,"h").w("</div></div></div>")}function _(t,e){return t.w("Merchant")}function g(t,e){return t.w("Location")}function v(t,e){return t.w("Operation amount")}function w(t,e){return t.x(e.getPath(!1,["history","fees","totalFee"]),e,{block:b},{})}function b(t,e){return t.w('<div class="details"><div class="name">').h("_",e,{block:k},{},"h").w('</div><div class="value">').f(e.getPath(!1,["history","fees","totalFee"]),e,"h",["absMoney","s"]).w("</div></div>")}function k(t,e){return t.w("Fee amount")}t.register("templates/instalment/operation-history-popup",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/operation-history-popup",t,e)};i.templateName="templates/instalment/operation-history-popup",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="section-title h-small">').f(e.get(["title"],!1),e,"h").w("</div>").x(e.get(["collection"],!1),e,{else:n,block:o},{}).w('<div class="section-hidden-instalment hidden">').s(e.get(["collectionHidden"],!1),e,{block:d},{}).w("</div>")}function n(t,e){return t.w('<div class="section-title no-data-error">').f(e.get(["emptyMessage"],!1),e,"h").w("</div>")}function o(t,e){return t.s(e.get(["collection"],!1),e,{block:i},{})}function i(t,e){return t.w('<div class="operation-instalment status-').f(e.get(["status"],!1),e,"h").w('"><div class="main-info"><div class="icon icon-instalment icon-').f(e.get(["status"],!1),e,"h").w('"></div><a class="name" href="#payment-instalments/').f(e.get(["id"],!1),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w('</a><div class="balance">').f(e.get(["fullRepaymentAmount"],!1),e,"h",["money","s"]).w("</div></div>").h("select",e,{block:r},{key:l},"h").w("</div>")}function r(t,e){return t.h("eq",e,{block:s},{value:"active"},"h").h("eq",e,{block:c},{value:"overdue"},"h")}function s(t,e){return t.w('<div class="row add-info"><div class="title">').h("_",e,{},{key:"Next payment %(date)s",date:a},"h").w('</div><div class="value">').f(e.get(["nextPaymentAmount"],!1),e,"h",["money","s"]).w("</div></div>")}function a(t,e){return t.f(e.get(["nextPaymentDate"],!1),e,"h",["operationInstalmentDateToPayWithoutYear"])}function c(t,e){return t.w('<div class="row add-info overdue-payment"><div class="title">').h("_",e,{},{key:"Overdue payment %(date)s",date:u},"h").w('</div><div class="value">').f(e.get(["overdueAmount"],!1),e,"h",["money","s"]).w("</div></div>")}function u(t,e){return t.f(e.get(["overduePaymentDate"],!1),e,"h",["operationInstalmentDateToPayWithoutYear"])}function l(t,e){return t.f(e.get(["status"],!1),e,"h")}function d(t,e){return t.w('<div class="operation-instalment status-').f(e.get(["status"],!1),e,"h").w('"><div class="main-info"><div class="icon icon-instalment icon-').f(e.get(["status"],!1),e,"h").w('"></div><a class="name" href="#payment-instalments/').f(e.get(["id"],!1),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w('</a></div><div class="row add-info"><div class="title">').h("_",e,{block:p},{},"h").w("</div></div></div>")}function p(t,e){return t.f(e.get(["status"],!1),e,"h")}t.register("templates/instalment/operation-instalment-list",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/operation-instalment-list",t,e)};i.templateName="templates/instalment/operation-instalment-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["plan"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="instalment-plan-data"><div class="data-row"><div class="name">').h("_",e,{block:o},{},"h").w('</div><div class="value">').f(e.get(["totalAmount"],!1),e,"h",["money","s"]).w('</div></div><div class="data-row"><div class="name">').h("_",e,{block:i},{},"h").w('</div><div class="value">').f(e.get(["portionAmount"],!1),e,"h",["money","s"]).w('</div></div><div class="data-row"><div class="name">').h("_",e,{block:r},{},"h").w('</div><div class="value">').f(e.get(["percentageRate"],!1),e,"h").w(' %</div></div><div class="data-row"><div class="name">').h("_",e,{block:s},{},"h").w('</div><div class="value">').f(e.get(["totalFee"],!1),e,"h",["money","s"]).w("</div></div></div>")}function o(t,e){return t.w("Amount")}function i(t,e){return t.w("Portion amount")}function r(t,e){return t.w("Percentage rate")}function s(t,e){return t.w("Total fee")}t.register("templates/instalment/plan-info",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/plan-info",t,e)};i.templateName="templates/instalment/plan-info",t.exports=i},function(t,e,n){var o=n(372);n(376),n(524);!function(t){t.register("templates/instalment/plans-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("cards-accounts")}function r(t,n){return n=n.shiftBlocks(e),t.s(n.get(["isShowPlans"],!1),n,{else:s,block:c},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="error">').h("_",n,{block:a},{},"h").w("</div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Empty plans")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="instalment-plans-page__content"><div class="block__operation-instalment"><div class="content-header"><div class="title">').h("_",n,{block:u},{},"h").w('</div></div></div><div class="block__plans-body"><div class="data-row"><div class="name">').h("_",n,{block:l},{},"h").w('</div><div class="value with-slider"><div class="plan-month">&nbsp;</div><div class="slider-container">').p("templates/instalment/slider",n,n,{}).w('</div></div></div><div class="planInfo"></div></div><div class="button-group"><div class="wb-button create-payment-instalment-btn">').h("_",n,{block:d},{},"h").w("</div></div></div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("Create payment instalment")}function l(t,n){return n=n.shiftBlocks(e),t.w("Choice month payment instalment:")}function d(t,n){return n=n.shiftBlocks(e),t.w("Create payment instalment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/plans-page",t,e)};i.templateName="templates/instalment/plans-page",t.exports=i},function(t,e,n){var o=n(372);n(445);!function(t){t.register("templates/instalment/plans-popup",n);var e={addContent:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/add-auth-without-form-dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div id="instalment-plans-dialog" />')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/instalment/plans-popup",t,e)};i.templateName="templates/instalment/plans-popup",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["collection"],!1),e,{block:n},{})}function n(t,e){return t.w('<li class="').x(e.getPath(!0,["isActive"]),e,{block:o},{}).w(" ").f(e.get(["code"],!1),e,"h").w('-menu-item" data-menu-item-code="').f(e.get(["code"],!1),e,"h").w('"><a href="').f(e.get(["id"],!1),e,"h",["menuUrl"]).w('" class="menu-link"><span>').f(e.get(["name"],!1),e,"h").w("</span>").h("select",e,{block:i},{key:a},"h").w("</a></li>")}function o(t,e){return t.w("active")}function i(t,e){return t.h("eq",e,{block:r},{value:"messages"},"h").h("eq",e,{block:s},{value:"payments_transfers"},"h")}function r(t,e){return t.w('<div id="unread-messages-count" class="unread-messages-count"></div>')}function s(t,e){return t.w('<div id="unpaid-invoices-count" class="unpaid-invoices-count"></div>')}function a(t,e){return t.f(e.get(["code"],!1),e,"h")}t.register("templates/main-menu",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/main-menu",t,e)};i.templateName="templates/main-menu",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="jcarousel-wrapper"><div class="jcarousel">').s(e.get(["banners"],!1),e,{block:n},{}).w("</div>").x(e.getPath(!1,["settings","BANNER_CAN_BE_CLOSED"]),e,{block:f},{}).w("</div>")}function n(t,e){return t.w('<div class="banner-wrapper" data-banner-id="').f(e.get(["id"],!1),e,"h").w('" style="').x(e.get(["width"],!1),e,{block:o},{}).w(" ").x(e.get(["height"],!1),e,{block:i},{}).w('">').h("select",e,{block:r},{key:u},"h").x(e.get(["imageUrl"],!1),e,{else:l,block:h},{}).w("</a></div>")}function o(t,e){return t.w("width:").f(e.get(["width"],!1),e,"h").w("px;")}function i(t,e){return t.w("width:").f(e.get(["height"],!1),e,"h").w("px;")}function r(t,e){return t.h("eq",e,{block:s},{value:"url"},"h").h("eq",e,{block:a},{value:"product"},"h").h("eq",e,{block:c},{value:"menu"},"h")}function s(t,e){return t.w('<a href="').f(e.getPath(!1,["link","url"]),e,"h").w('" target="_blank">')}function a(t,e){return t.w('<a href="#SHOWCASE/').f(e.getPath(!1,["link","id"]),e,"h").w('">')}function c(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/#").f(e.getPath(!1,["link","id"]),e,"h").w('">')}function u(t,e){return t.f(e.getPath(!1,["link","type"]),e,"h")}function l(t,e){return t.w('<img src="').f(e.get(["staticPath"],!1),e,"h").w("/images/banners/").f(e.get(["templateCode"],!1),e,"h").w('.png" title="').f(e.get(["name"],!1),e,"h").w('" ').x(e.get(["width"],!1),e,{block:d},{}).w(" ").x(e.get(["height"],!1),e,{block:p},{}).w("/>")}function d(t,e){return t.w('width="').f(e.get(["width"],!1),e,"h").w('"')}function p(t,e){return t.w('height="').f(e.get(["height"],!1),e,"h").w('"')}function h(t,e){return t.w('<img src="').f(e.get(["imageUrl"],!1),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('" width="').f(e.get(["width"],!1),e,"h").w('" height="').f(e.get(["height"],!1),e,"h").w('"/>')}function f(t,e){return t.w('<a href="#" class="close-banner banners-control" title="').h("_",e,{block:m},{},"h").w('"></a>')}function m(t,e){return t.w("Hide ads")}t.register("templates/marketing/banners-carousel",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0}(o);var i=function(t,e){o.render("templates/marketing/banners-carousel",t,e)};i.templateName="templates/marketing/banners-carousel",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/marketing/product-details-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("showcase")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__product-details ui-helper-clearfix"><div class="product-details"></div></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/marketing/product-details-page",t,e)};i.templateName="templates/marketing/product-details-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.h("select",e,{block:n},{key:u},"h")}function n(t,e){return t.h("eq",e,{block:o},{value:"url"},"h").h("eq",e,{block:r},{value:"menu"},"h").h("eq",e,{block:a},{value:"service"},"h")}function o(t,e){return t.w('<a class="wb-button" href="').f(e.getPath(!1,["link","url"]),e,"h").w('" target="_blank" data-product-id="').f(e.get(["id"],!1),e,"h").w('">').h("_",e,{block:i},{},"h").w("</a>")}function i(t,e){return t.w("Details")}function r(t,e){return t.w('<a class="wb-button" href="').f(e.get(["contextPath"],!1),e,"h").w("/").f(e.getPath(!1,["link","id"]),e,"h").w('">').h("_",e,{block:s},{},"h").w("</a>")}function s(t,e){return t.w("Order")}function a(t,e){return t.w('<a class="wb-button" href="').f(e.get(["contextPath"],!1),e,"h").w("/services/").f(e.getPath(!1,["link","id"]),e,"h").w('">').h("_",e,{block:c},{},"h").w("</a>")}function c(t,e){return t.w("Order")}function u(t,e){return t.f(e.getPath(!1,["link","type"]),e,"h")}t.register("templates/marketing/product-link",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/marketing/product-link",t,e)};i.templateName="templates/marketing/product-link",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="promo-messages_carousel">').s(e.get(["messages"],!1),e,{block:n},{}).w('<button type="button" class="icon-button icon-cancel close" role="button"></button><footer class="promo-messages_carousel-footer"><a href="javascript:void(0)" class="link-button learn-more">').h("_",e,{block:o},{},"h").w("</a></footer></div>")}function n(t,e){return t.w("<div data-messageId='").f(e.get(["id"],!1),e,"h").w('\' class="promo-messages_carousel-slide">').f(e.get(["preview"],!1),e,"h",["s"]).w("</div>")}function o(t,e){return t.w("Learn More")}t.register("templates/marketing/promo-messages",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/marketing/promo-messages",t,e)};i.templateName="templates/marketing/promo-messages",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/marketing/showcase-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("showcase")}function r(t,n){return n=n.shiftBlocks(e),t.w('<ul class="block__bank-offers">').s(n.get(["products"],!1),n,{block:s},{}).w("</ul>").b(n.getBlock("actions"),n,{block:a},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<li class="product-item"><a href="#SHOWCASE/').f(n.get(["id"],!1),n,"h").w('"><div class="product-preview" data-image-src="').f(n.get(["staticPath"],!1),n,"h").w("/images/products/").f(n.get(["id"],!1),n,"h").w('.jpg"></div><div class="product-info"><h4 class="product-name">').f(n.get(["name"],!1),n,"h").w('</h4><div class="product-description">').f(n.get(["description"],!1),n,"h",["s"]).w('</div></div><div class="ui-helper-clearfix"></div></a></li>')}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__actions-list">').x(n.get(["incomeCertificatesSupported"],!1),n,{block:c},{}).x(n.get(["onlineDepositsSupported"],!1),n,{block:d},{}).x(n.get(["externalCardsSupported"],!1),n,{block:f},{}).w("</div>")}function c(t,n){return n=n.shiftBlocks(e),t.w('<a class="action" href="#certificates"><div class="action__title">').h("_",n,{block:u},{},"h").w('<div class="action__icon action__icon--certificate"></div></div><div class="action__desc">').h("_",n,{block:l},{},"h").w("</div></a>")}function u(t,n){return n=n.shiftBlocks(e),t.w("Income certificates")}function l(t,n){return n=n.shiftBlocks(e),t.w("Income certificates [desc]")}function d(t,n){return n=n.shiftBlocks(e),t.w('<a class="action" href="#deposits/create"><div class="action__title">').h("_",n,{block:p},{},"h").w('<div class="action__icon action__icon--plus"></div></div><div class="action__desc">').h("_",n,{block:h},{},"h").w("</div></a>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Open deposit")}function h(t,n){return n=n.shiftBlocks(e),t.w("Open deposit [desc]")}function f(t,n){return n=n.shiftBlocks(e),t.w('<a class="action" href="#contracts/add-external"><div class="action__title">').h("_",n,{block:m},{},"h").w('<div class="action__icon action__icon--card"></div></div><div class="action__desc">').h("_",n,{block:y},{},"h").w("</div></a>")}function m(t,n){return n=n.shiftBlocks(e),t.w("Add bank's card")}function y(t,n){return n=n.shiftBlocks(e),t.w("Add bank's card [desc]")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0}(o);var i=function(t,e){o.render("templates/marketing/showcase-page",t,e)};i.templateName="templates/marketing/showcase-page",t.exports=i},function(t,e,n){var o=n(372);n(376),n(468);!function(t){t.register("templates/payments/beneficiaries-management-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("beneficiaries-management-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header"><h1>').h("_",n,{block:a},{},"h").w('</h1></div><div class="page-messages"></div><div class="block__beneficiaries-management"><div class="beneficiaries-list-wrapper"><h2 class="h-small">').h("_",n,{block:c},{},"h").w('</h2><select class="beneficiaries" name="beneficiary">').s(n.get(["beneficiaries"],!1),n,{block:u},{}).w('<option value="">').h("_",n,{block:l},{},"h").w('</option></select></div><div class="beneficiary-info-wrapper"><h2 class="h-small">').h("_",n,{block:d},{},"h").w('</h2><div class="beneficiary-info-form-container"></div></div></div>')}function a(t,n){return n=n.shiftBlocks(e),t.w("Beneficiaries management")}function c(t,n){return n=n.shiftBlocks(e),t.w("Beneficiaries list")}function u(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').p("templates/partials/beneficiary-title",n,n,{}).w("</option>")}function l(t,n){return n=n.shiftBlocks(e),t.w("New beneficiary")}function d(t,n){return n=n.shiftBlocks(e),t.w("Beneficiary info")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/beneficiaries-management-page",t,e)};i.templateName="templates/payments/beneficiaries-management-page",t.exports=i},function(t,e,n){var o=n(372);n(469);!function(t){function e(t,e){return t.w('<form class="wb-form"><div class="form-fields">').p("templates/payments/beneficiary-info",e,e,{}).w('</div><div class="button-group">').x(e.get(["deletable"],!1),e,{block:n},{}).w('<button type="submit" class="wb-button">').h("_",e,{block:i},{},"h").w("</button></div></form>")}function n(t,e){return t.w('<button type="button" class="link-button delete">').h("_",e,{block:o},{},"h").w("</button>")}function o(t,e){return t.w("Delete")}function i(t,e){return t.w("Save")}t.register("templates/payments/beneficiary-edit-form",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/beneficiary-edit-form",t,e)};i.templateName="templates/payments/beneficiary-edit-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/cart/complete-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-complete"><div class="payment-cart-complete__icon payment-cart-complete__icon--').x(n.get(["isAllItemsWithErrors"],!1),n,{else:s,block:a},{}).w('"></div><h1>').x(n.get(["isAllItemsWithErrors"],!1),n,{else:c,block:h},{}).w('</h1><div class="payment-cart-complete__summary">').s(n.get(["paymentCartItems"],!1),n,{block:m},{}).w('</div><div class="button-group"><a href="').f(n.get(["historyMenuLink"],!1),n,"h").w('" class="wb-button">').h("_",n,{block:g},{},"h").w('</a></div><div class="back-link-container"><a href="').f(n.get(["paymentsMenuLink"],!1),n,"h").w('">').h("_",n,{block:v},{},"h").w("</a></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("success")}function a(t,n){return n=n.shiftBlocks(e),t.w("failed")}function c(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isAllItemsWithoutErrors"],!1),n,{else:u,block:d},{})}function u(t,n){return n=n.shiftBlocks(e),t.h("_",n,{},{singular:"%(num)s payment completed successfully",plural:"%(num)s payments completed successfully",num:l},"h")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.get(["countItemsWithoutErrors"],!1),n,"h")}function d(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:p},{},"h")}function p(t,n){return n=n.shiftBlocks(e),t.w("All payments completed successfully")}function h(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:f},{},"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("All payments failed")}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-summary-item ').x(n.get(["errorMessage"],!1),n,{block:y},{}).w('"><div class="payment-cart-summary-item__desc"><div class="payment-cart-summary-item__title">').f(n.get(["name"],!1),n,"h").w("</div>").x(n.get(["errorMessage"],!1),n,{block:_},{}).w('</div><div class="payment-cart-summary-items__value">').f(n.get(["total"],!1),n,"h",["money","s"]).w("</div></div>")}function y(t,n){return n=n.shiftBlocks(e),t.w("payment-cart-summary-item--error")}function _(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-summary-item__error">').f(n.get(["errorMessage"],!1),n,"h").w("</div>")}function g(t,n){return n=n.shiftBlocks(e),t.w("History")}function v(t,n){return n=n.shiftBlocks(e),t.w("Back to Payment and Transfers")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/complete-page",t,e)};i.templateName="templates/payments/cart/complete-page",t.exports=i},function(t,e,n){var o=n(372);n(385),n(382),n(382),n(382),n(382),n(435);!function(t){t.register("templates/payments/cart/confirmation-details",n);var e={attr:b,content:o,fieldGroup:k,field:C};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["items"],!1),n,{block:i},{}).nx(n.get(["isAllItemsWithErrors"],!1),n,{block:d},{})}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["errorMessage"],!1),n,{else:r,block:l},{})}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="accordion"><div class="accordion-title payment-cart-confirmation-item"><div class="payment-cart-confirmation-item__desc"><div class="payment-cart-confirmation-item__title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="payment-cart-confirmation-item__value">').f(n.get(["amount"],!1),n,"h",["money","s"]).w('</div></div><div class="accordion-content">').s(n.get(["fees"],!1),n,{block:s},{}).s(n.get(["fields"],!1),n,{block:a},{}).w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount"><span class="name">').f(n.get(["description"],!1),n,"h").w('</span><span class="value">').f(n.get(["amount"],!1),n,"h",["money","s"]).w("</span></div>")}function a(t,n){return n=n.shiftBlocks(e),t.x(n.get(["components"],!1),n,{else:c,block:u},{})}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("field"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("fieldGroup"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-confirmation-item payment-cart-confirmation-item--error"><div class="payment-cart-confirmation-item__desc"><div class="payment-cart-confirmation-item__title">').f(n.get(["name"],!1),n,"h").w('</div><div class="payment-cart-confirmation-item__error">').f(n.get(["errorMessage"],!1),n,"h").w('</div></div><div class="payment-cart-confirmation-item__value">').f(n.get(["amount"],!1),n,"h",["money","s"]).w("</div></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section amounts">').x(n.get(["amount"],!1),n,{block:p},{}).x(n.get(["fee"],!1),n,{block:m},{}).x(n.get(["total"],!1),n,{block:g},{}).w("</div>")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:"Amount",attrValue:f})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["amount"],!1),n,"h",["money","s"])}function m(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:y},{attrName:"Fee",attrValue:_})}function y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["fee"],!1),n,"h",["money","s"])}function g(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:v},{attrName:"Total",attrValue:w})}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function w(t,n){return n=n.shiftBlocks(e),t.f(n.get(["total"],!1),n,"h",["money","s"])}function b(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function k(t,n){return n=n.shiftBlocks(e),t.s(n.get(["components"],!1),n,{block:B},{})}function B(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("field"),n,{},{})}function C(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:S},{key:U},"h")}function S(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:P},{value:"source"},"h").h("none",n,{block:V},{},"h")}function P(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["object","name"]),n,{else:x,block:O},{})}function x(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["object","isExternalCard"]),n,{else:T,block:I},{})}function T(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:A},{attrName:E,attrValue:M})}function A(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function E(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function M(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function I(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:N},{attrName:"Card",attrValue:R})}function N(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function R(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["object","number"]),n,"h",["pan"])}function O(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:D},{attrName:F,attrValue:L})}function D(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function F(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["object","name"]),n,"h")}function V(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/payment-info-field",n,n,{})}function U(t,n){return n=n.shiftBlocks(e),t.f(n.get(["role"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/confirmation-details",t,e)};i.templateName="templates/payments/cart/confirmation-details",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/payments/cart/empty-popup",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-empty-popup__header">').h("_",n,{block:i},{},"h").w('</div><div class="payment-cart-empty-popup__desc">').h("_",n,{block:r},{},"h").w('</div><div class="payment-cart-empty-popup__image"></div>')}function i(t,n){return n=n.shiftBlocks(e),t.w("Select templates")}function r(t,n){return n=n.shiftBlocks(e),t.w('To pay for several payments check the templates that you want to pay and click "Make Payment"')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/empty-popup",t,e)};i.templateName="templates/payments/cart/empty-popup",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/cart/index-page",n);var e={subMenu:o,pageMessages:i,title:r,content:a};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header payment-cart__header"><a href="#" class="payment-cart__header-back"></a><div class="title">').h("_",n,{block:s},{},"h").w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Payment cart")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="page-messages"></div><div class="payment-cart">').s(n.get(["groups"],!1),n,{block:c},{}).w('<div class="button-group"><button class="wb-button" data-js-payment-cart-create-button></button></div></div>')}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-group"><div class="payment-cart-group__header ').x(n.get(["disabled"],!1),n,{block:u},{}).w('"><div class="payment-cart-group__header-title">').f(n.get(["groupName"],!1),n,"h").w('</div><div class="payment-cart-checkbox"></div></div><div class="payment-cart-list">').s(n.get(["items"],!1),n,{block:l},{}).w("</div></div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("payment-cart-group__header--disabled")}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-item ').x(n.get(["disabled"],!1),n,{block:d},{}).w(" ").x(n.get(["selected"],!1),n,{block:p},{}).w('" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="payment-cart-item__icon" data-id="').f(n.get(["id"],!1),n,"h").w('" data-js-payment-item-icon></div><div class="payment-cart-item__name">').f(n.get(["name"],!1),n,"h").w('</div><div class="payment-cart-item__note">').f(n.get(["subscriptionName"],!1),n,"h").w('</div><div class="payment-cart-item__value">').f(n.get(["amount"],!1),n,"h",["money","s"]).w('</div><div class="payment-cart-checkbox"></div></div>')}function d(t,n){return n=n.shiftBlocks(e),t.w("payment-cart-item--disabled")}function p(t,n){return n=n.shiftBlocks(e),t.w("payment-cart-item--checked")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/index-page",t,e)};i.templateName="templates/payments/cart/index-page",t.exports=i},function(t,e,n){var o=n(372);n(525);!function(t){t.register("templates/payments/cart/invoice-edit-page",n);var e={pageMessages:o,subMenu:i,title:r,preContent:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/invoices/invoice-payment-page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header payment-cart__header"><a href="#" class="payment-cart__header-back"></a><div class="title">').f(n.get(["pageTitle"],!1),n,"h").w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="page-messages"></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/invoice-edit-page",t,e)};i.templateName="templates/payments/cart/invoice-edit-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/payments/cart/not-working-popup",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-cart-not-working-popup__header">').h("_",n,{block:i},{},"h").w('</div><div class="payment-cart-not-working-popup__image"></div><div class="payment-cart-not-working-popup__desc"><p>').h("_",n,{block:r},{},"h").w("</p>").nx(n.get(["checkRemitter"],!1),n,{block:s},{}).nx(n.get(["checkAvailableItems"],!1),n,{block:c},{}).w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Payment cart")}function r(t,n){return n=n.shiftBlocks(e),t.w("The payment cart allows you to pay several payments at a time")}function s(t,n){return n=n.shiftBlocks(e),t.w("<p>").h("_",n,{block:a},{},"h").w("</p>")}function a(t,n){return n=n.shiftBlocks(e),t.w("To use the payment cart, you must link one or more cards or accounts")}function c(t,n){return n=n.shiftBlocks(e),t.w("<p>").h("_",n,{block:u},{},"h").w("</p>")}function u(t,n){return n=n.shiftBlocks(e),t.w("To use the payment cart, you must save a several templates or subscribe for receipts")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/not-working-popup",t,e)};i.templateName="templates/payments/cart/not-working-popup",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["paymentCartItems"],!1),e,{block:n},{}).w('<div class="payment-cart__row"><div class="payment-cart__license control-container" data-js-license></div><div class="payment-cart__total">').h("_",e,{},{key:"To pay: %(value)s",value:s},"h").w("</div></div>").x(e.get(["hasErrors"],!1),e,{block:a},{})}function n(t,e){return t.w('<div class="payment-cart-item ').x(e.get(["errorMessage"],!1),e,{block:o},{}).w('" data-id="').f(e.get(["id"],!1),e,"h").w('" ').x(e.get(["isEdited"],!1),e,{block:i},{}).w('><div class="payment-cart-item__icon" data-id="').f(e.get(["id"],!1),e,"h").w('" data-js-payment-item-icon></div><div class="payment-cart-item__desc"><div class="payment-cart-item__name">').f(e.get(["name"],!1),e,"h").w("</div>").x(e.get(["errorMessage"],!1),e,{block:r},{}).w('</div><div class="payment-cart-item__value">').f(e.get(["amount"],!1),e,"h",["money","s"]).w('</div><a href="#" class="payment-cart-item__remove" data-id="').f(e.get(["id"],!1),e,"h").w('" data-js-remove-item></a></div>')}function o(t,e){return t.w("payment-cart-item--error")}function i(t,e){return t.w("data-js-edit-item")}function r(t,e){return t.w('<div class="payment-cart-item__error">').f(e.get(["errorMessage"],!1),e,"h").w("</div>")}function s(t,e){return t.f(e.get(["totalAmount"],!1),e,"h",["money","s"])}function a(t,e){return t.w('<div class="payment-cart__error">').h("_",e,{block:c},{},"h").w("</div>")}function c(t,e){return t.w("Check payment details, payments with errors will not be made")}t.register("templates/payments/cart/payment-list",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/payment-list",t,e)};i.templateName="templates/payments/cart/payment-list",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/cart/preview-page",n);var e={subMenu:o,pageMessages:i,title:r,content:a};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header payment-cart__header"><a href="#" class="payment-cart__header-back"></a><div class="title">').h("_",n,{block:s},{},"h").w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Payment method")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="page-messages"></div><div class="payment-cart"><form class="wb-form payment-cart__form" autocomplete="off"><div class="form-fields"></div><div data-js-payment-cart-list></div><div class="button-group"><button type="submit" class="wb-button" data-js-make-payment-button>').h("_",n,{block:c},{},"h").w("</button></div></form></div>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Make Payment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/preview-page",t,e)};i.templateName="templates/payments/cart/preview-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/cart/template-edit-page",n);var e={pageMessages:o,subMenu:i,title:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header payment-cart__header"><a href="#" class="payment-cart__header-back"></a><div class="title">').f(n.get(["pageTitle"],!1),n,"h").w("</div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="page-messages"></div><div class="payment-cart"><form class="wb-form payment-cart__form" autocomplete="off"><div class="form-fields"></div>').x(n.get(["license"],!1),n,{block:a},{}).w('<div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:c},{},"h").w("</button></div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="license-block control-container" data-js-license></div>')}function c(t,n){return n=n.shiftBlocks(e),t.w("Continue")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/cart/template-edit-page",t,e)};i.templateName="templates/payments/cart/template-edit-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/information-service",n);var e={pageClass:o,pageMessages:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w("information-service-page")}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__service"><form class="wb-form" autocomplete="off"><div class="form-fields"></div></form></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/information-service",t,e)};i.templateName="templates/payments/information-service",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="wb-form"><div class="field-wrapper"><div class="field-caption"></div><div class="control-container"><div class="switch-container"><div class="control switch-wrapper"><input type="checkbox" name="autoPaymentEnabled" class="switch" ').x(e.get(["autoPaymentEnabled"],!1),e,{block:n},{}).w(' /></div><div class="title">').h("_",e,{block:o},{},"h").w('</div></div></div></div><div class="field-wrapper ').nx(e.get(["autoPaymentEnabled"],!1),e,{block:i},{}).w('" data-js-autopayment-contract-container><div class="field-caption">').h("_",e,{block:r},{},"h").w('</div><div class="control-container" data-js-autopayment-contract></div></div></div>')}function n(t,e){return t.w("checked")}function o(t,e){return t.w("Pay for the new invoices automatically")}function i(t,e){return t.w("hidden")}function r(t,e){return t.w("Autopayment source")}t.register("templates/payments/invoices/invoice-autopayment-options",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoice-autopayment-options",t,e)};i.templateName="templates/payments/invoices/invoice-autopayment-options",t.exports=i},function(t,e,n){var o=n(372);n(527);!function(t){t.register("templates/payments/invoices/invoice-payment-complete-page",n);var e={extraActions:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/payment-complete-page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowSubscription"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" data-js-setup-subscription href="#">').s(n.get(["invoiceSubscription"],!1),n,{else:r,block:a},{}).w("</a>")}function r(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:s},{},"h")}function s(t,n){return n=n.shiftBlocks(e),t.w("Create subscription")}function a(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowAutopayments"],!1),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["autoPaymentEnabled"],!1),n,{block:u},{})}function u(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:l},{},"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Setup autopayment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoice-payment-complete-page",t,e)};i.templateName="templates/payments/invoices/invoice-payment-complete-page",t.exports=i},function(t,e,n){var o=n(372);n(376),n(382);!function(t){t.register("templates/payments/invoices/invoice-subscription-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s,attr:O};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isNew"],!1),n,{block:a},{}).w('<form class="wb-form" data-js-form><div class="content-header service-header editable">').x(n.get(["isNew"],!1),n,{else:c,block:u},{}).w('</div><div class="page-messages"></div><div class="block__invoice-subscription"><div class="subscription-details"><div class="h-small section-title">').h("_",n,{block:d},{},"h").w('</div><div class="form-section">').s(n.get(["fields"],!1),n,{block:p},{}).s(n.get(["info"],!1),n,{block:y},{}).w('</div><div class="form-section">').x(n.get(["isNew"],!1),n,{block:w},{}).w("<div data-js-autopayment-section></div></div></div>").h("ne",n,{block:k},{key:S,value:"0",type:"number"},"h").x(n.get(["isNew"],!1),n,{else:P,block:A},{}).w('<div class="service-actions">').x(n.get(["isNew"],!1),n,{else:M,block:N},{}).w("</div></div></form>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<form class="subscription-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="').f(n.get(["name"],!1),n,"h").w('" name="subscriptionName" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function c(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="title service-title" data-js-subscription-name data-js-edit-name></a>')}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title">').h("_",n,{block:l},{},"h").w("</div>")}function l(t,n){return n=n.shiftBlocks(e),t.w("Create subscription")}function d(t,n){return n=n.shiftBlocks(e),t.w("Subscription information")}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:f,attrValue:m})}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:_},{attrName:g,attrValue:v})}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("attr"),n,{},{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["key"],!1),n,"h",["t"])}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:b},{},"h").w('</div><div class="control-container"><input type="text" name="subscriptionName" data-js-subscription-name required /></div></div>')}function b(t,n){return n=n.shiftBlocks(e),t.w("Subscription name")}function k(t,n){return n=n.shiftBlocks(e),t.w('<div class="subscription-invoices"><div class="h-small section-title">').h("_",n,{block:B},{},"h").w('</div><ul class="form-section">').s(n.get(["invoices"],!1),n,{block:C},{}).w("</ul></div>")}function B(t,n){return n=n.shiftBlocks(e),t.w("Invoices list")}function C(t,n){return n=n.shiftBlocks(e),t.w('<li class="subscription-invoice" data-id="').f(n.getPath(!0,["id"]),n,"h").w('"><a href="').f(n.get(["link"],!1),n,"h").w('" class="subscription-invoice-link">').f(n.getPath(!0,["name"]),n,"h").w('</a><span class="subscription-invoice-amount">').f(n.getPath(!0,["amount"]),n,"h",["money","s"]).w('</span><a href="#" class="delete-invoice" data-js-delete-invoice></a></li>')}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["invoices","length"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowAutopayment"],!1),n,{block:x},{})}function x(t,n){return n=n.shiftBlocks(e),t.w('<div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:T},{},"h").w("</button></div>")}function T(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}function A(t,n){return n=n.shiftBlocks(e),t.w('<div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:E},{},"h").w("</button></div>")}function E(t,n){return n=n.shiftBlocks(e),t.w("Create")}function M(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" data-js-delete-subscription>').h("_",n,{block:I},{},"h").w("</a>")}function I(t,n){return n=n.shiftBlocks(e),t.w("Delete subscription")}function N(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" data-js-cancel-action>').h("_",n,{block:R},{},"h").w("</a>")}function R(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function O(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoice-subscription-page",t,e)};i.templateName="templates/payments/invoices/invoice-subscription-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w("<h4>").h("_",e,{block:n},{},"h").w("</h4><div></div>")}function n(t,e){return t.w("Invoice subscriptions")}t.register("templates/payments/invoices/invoice-subscriptions-panel",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoice-subscriptions-panel",t,e)};i.templateName="templates/payments/invoices/invoice-subscriptions-panel",t.exports=i},function(t,e,n){var o=n(372);n(376),n(448);!function(t){t.register("templates/payments/invoices/invoices-list",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__invoices">').h("ne",n,{else:a,block:u},{key:h,value:"0",type:"number"},"h").w('<div class="service-actions"><a class="service-action new-search" href="#">').h("_",n,{block:f},{},"h").w("</a></div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:c},{header:"No invoices found",description:"Check input data or contact the support"})}function c(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/empty-message",n,n,{})}function u(t,n){return n=n.shiftBlocks(e),t.w('<h2 class="h-small">').h("_",n,{block:l},{},"h").w('</h2><ul class="invoices-list">').b(n.getBlock("invoiceItemsHeader"),n,{},{}).s(n.get(["invoices"],!1),n,{block:d},{}).w("</ul>")}function l(t,n){return n=n.shiftBlocks(e),t.w("Select invoice to pay for")}function d(t,n){return n=n.shiftBlocks(e),t.w('<li class="invoice-list-item">').b(n.getBlock("invoiceItemLink"),n,{block:p},{}).w("</li>")}function p(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["link"],!1),n,"h").w('" class="invoice-link">').f(n.get(["name"],!1),n,"h").w("</a>")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["invoices","length"]),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("New search")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoices-list",t,e)};i.templateName="templates/payments/invoices/invoices-list",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="block__invoices"><form class="wb-form" autocomplete="off"><div class="form-fields"></div><div class="error-message-container field-wrapper error hidden"><div class="error error-message"></div></div><div class="button-group"><button type="submit" class="wb-button">').h("_",e,{block:n},{},"h").w("</button></div></form></div>")}function n(t,e){return t.w("Continue")}t.register("templates/payments/invoices/invoices-request-form",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoices-request-form",t,e)};i.templateName="templates/payments/invoices/invoices-request-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/invoices/invoices-request-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["pageName"],!1),n,"h").w('</div></div><div class="page-messages"></div>').x(n.get(["showTabs"],!1),n,{else:a,block:u},{})}function a(t,n){return n=n.shiftBlocks(e),t.s(n.get(["servicesIds"],!1),n,{block:c},{})}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="invoice-tab" id="invoice-tab-').f(n.get(["id"],!1),n,"h").w('"></div>')}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="wb-tabs"><ul>').s(n.get(["servicesIds"],!1),n,{block:l},{}).w("</ul>").s(n.get(["servicesIds"],!1),n,{block:p},{}).w("</div>")}function l(t,n){return n=n.shiftBlocks(e),t.w('<li class="').x(n.get(["isActive"],!1),n,{block:d},{}).w('"><a href="#invoice-tab-').f(n.get(["id"],!1),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</a></li>")}function d(t,n){return n=n.shiftBlocks(e),t.w("ui-tabs-active ui-state-active")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="invoice-tab" id="invoice-tab-').f(n.get(["id"],!1),n,"h").w('"></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/invoices/invoices-request-page",t,e)};i.templateName="templates/payments/invoices/invoices-request-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/native/ic-payment-page",n);var e={subMenu:o,pageClass:i,pageMessages:a,content:c,form:f};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page ").h("eq",n,{block:r},{key:s,value:"paymentCart"},"h")}function r(t,n){return n=n.shiftBlocks(e),t.w("payments-cart-template-edit-page")}function s(t,n){return n=n.shiftBlocks(e),t.f(n.get(["strategyType"],!1),n,"h")}function a(t,n){return n=n.shiftBlocks(e),t}function c(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{else:u,block:l},{key:h,value:"unsupported"},"h")}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("form"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__error-page"><div class="error-wrapper"><div class="text-icon error"></div><div class="error-title">').h("_",n,{block:d},{},"h").w('</div><div class="error-description">').h("_",n,{block:p},{},"h").w("</div></div></div>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Error")}function p(t,n){return n=n.shiftBlocks(e),t.w("This transfer is unavailable. Please contact support [intrabank]")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["strategyType"],!1),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header ').f(n.get(["contentHeaderClass"],!1),n,"h").w('">').h("select",n,{block:m},{key:k},"h").w('</div><div class="page-messages"></div><div class="block__payments-transfers"><form class="wb-form" autocomplete="off">').h("eq",n,{block:B},{key:S,value:"create"},"h").w('<div class="form-fields"></div><div class="form-info"></div><div class="error-message-container field-wrapper error hidden"><div class="error error-message"></div></div>').x(n.get(["license"],!1),n,{block:P},{}).w('<div class="button-group"><button type="submit" class="wb-button" data-js-submit ').nx(n.get(["active"],!1),n,{block:x},{}).w(">").f(n.get(["submitButtonTitle"],!1),n,"h").w('</button></div></form><div class="service-actions">').h("select",n,{block:T},{key:$},"h").w("</div></div>")}function m(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:y},{value:"edit"},"h").h("eq",n,{block:w},{value:"paymentCart"},"h").h("none",n,{block:b},{},"h")}function y(t,n){return n=n.shiftBlocks(e),t.x(n.get(["isActive"],!1),n,{else:_,block:v},{})}function _(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title inactive">').h("_",n,{},{key:"Sorry, the payment for the &laquo;%(paymentName)s&raquo; temporarily&nbsp;unavailable",paymentName:g},"h").w('<input type="hidden" value="').f(n.get(["templateName"],!1),n,"h").w('" name="templateName" maxlength="50"/></div>')}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateName"],!1),n,"h")}function v(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="title service-title" data-js-edit-template-name>').f(n.get(["templateName"],!1),n,"h").w('</a><form class="template-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="').f(n.get(["templateName"],!1),n,"h").w('" name="templateName" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function w(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="payment-cart__header-back"></a><div class="title">').f(n.get(["pageTitle"],!1),n,"h").w("</div>")}function b(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title">').f(n.get(["pageTitle"],!1),n,"h").w("</div>")}function k(t,n){return n=n.shiftBlocks(e),t.f(n.get(["strategyType"],!1),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:C},{},"h").w('</div><div class="control-container"><input type="text" name="templateName" value="').f(n.get(["proposedTemplateName"],!1),n,"h").w('"/></div></div>')}function C(t,n){return n=n.shiftBlocks(e),t.w("Template name")}function S(t,n){return n=n.shiftBlocks(e),t.f(n.get(["strategyType"],!1),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.w('<div class="license-block control-container" data-js-license></div>')}function x(t,n){return n=n.shiftBlocks(e),t.w("disabled")}function T(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:A},{value:"default"},"h").h("eq",n,{block:O},{value:"create"},"h").h("eq",n,{block:F},{value:"edit"},"h")}function A(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowTemplate"],!1),n,{block:E},{}).x(n.get(["allowPeriodic"],!1),n,{block:I},{})}function E(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-payment-template-link">').h("_",n,{block:M},{},"h").w("</a>")}function M(t,n){return n=n.shiftBlocks(e),t.w("Save as template")}function I(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-recurrent-template-link"title="').h("_",n,{block:N},{},"h").w('">').h("_",n,{block:R},{},"h").w("</a>")}function N(t,n){return n=n.shiftBlocks(e),t.w("Subscription to make payments according to schedule")}function R(t,n){return n=n.shiftBlocks(e),t.w("Create recurrent payment")}function O(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action cancel-button">').h("_",n,{block:D},{},"h").w("</a>")}function D(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function F(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action" data-js-cancel>').h("_",n,{block:L},{},"h").w('</a><a href="#" class="service-action" data-js-update>').h("_",n,{block:V},{},"h").w('</a><a href="#" class="service-action delete-link" data-js-delete>').h("_",n,{block:U},{},"h").w("</a>")}function L(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function V(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}function U(t,n){return n=n.shiftBlocks(e),t.w("Delete")}function $(t,n){return n=n.shiftBlocks(e),t.f(n.get(["strategyType"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/ic-payment-page",t,e)};i.templateName="templates/payments/native/ic-payment-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/payments/native/intra-bank-transfer-currency-limitation-popup",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="intra-bank-transfer-currency-limitation-popup"><div class="intra-bank-transfer-currency-limitation-popup__image"></div><div class="intra-bank-transfer-currency-limitation-popup__limitation-container"><table class="intra-bank-transfer-currency-limitation-popup__limitation"><tr><td>').h("_",n,{},{key:n.get(["sourceContractCurrency"],!1)},"h").w(" ").f(n.get(["sourceContractCurrency"],!1),n,"h").w('</td><td><div class="intra-bank-transfer-currency-limitation-popup__arrow"></div></td><td>').h("_",n,{},{key:n.get(["targetContractCurrency"],!1)},"h").w(" ").f(n.get(["targetContractCurrency"],!1),n,"h").w("</td></tr><tr><td>").h("_",n,{},{key:n.get(["targetContractCurrency"],!1)},"h").w(" ").f(n.get(["targetContractCurrency"],!1),n,"h").w('</td><td><div class="intra-bank-transfer-currency-limitation-popup__arrow"></div></td><td>').h("_",n,{},{key:n.get(["sourceContractCurrency"],!1)},"h").w(" ").f(n.get(["sourceContractCurrency"],!1),n,"h").w('</td></tr></table></div><div class="intra-bank-transfer-currency-limitation-popup__text">').h("_",n,{block:i},{},"h").w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("These types of transfers are not available. Please select a remitter card in a different currency")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/intra-bank-transfer-currency-limitation-popup",t,e)};i.templateName="templates/payments/native/intra-bank-transfer-currency-limitation-popup",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/payments/native/intra-bank-transfer-limit-popup",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="intra-bank-transfer-limit-popup"><div class="intra-bank-transfer-limit-popup__image"></div><div class="intra-bank-transfer-limit-popup__text"><p>').h("_",n,{block:i},{},"h").w('</p></div><div class="intra-bank-transfer-limit-popup__value">').f(n.get(["limit"],!1),n,"h",["money","s"]).w("</div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("Currency limit exceeded")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/intra-bank-transfer-limit-popup",t,e)};i.templateName="templates/payments/native/intra-bank-transfer-limit-popup",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/native/retrieve-money-transfer-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page block__retrieve-money-transfer")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__payments-transfers"><form class="wb-form" autocomplete="off"><div class="section-title h-small">').h("_",n,{block:a},{},"h").w('</div><div class="sender-info">').s(n.get(["senderFields"],!1),n,{block:c},{}).w('</div><div class="section-title h-small">').h("_",n,{block:u},{},"h").w('</div><div class="form-fields"></div>').x(n.get(["license"],!1),n,{block:l},{}).w('<div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:d},{},"h").w("</button></div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Sender")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').f(n.get(["name"],!1),n,"h").w('</div><div class="control-container"><div class="static-value">').f(n.get(["value"],!1),n,"h",["s"]).w("</div></div></div>")}function u(t,n){return n=n.shiftBlocks(e),t.w("Beneficiary")}function l(t,n){return n=n.shiftBlocks(e),t.w('<div class="license-block control-container" data-js-license></div>')}function d(t,n){return n=n.shiftBlocks(e),t.w("Continue")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/retrieve-money-transfer-page",t,e)};i.templateName="templates/payments/native/retrieve-money-transfer-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/native/transfer-complete-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payment-complete-page">').b(n.getBlock("templateNamePanel"),n,{block:s},{}).w('<div class="text-icon success"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title align-center">').x(n.get(["afterTemplateCreated"],!1),n,{else:a,block:u},{}).w("</h1>").nx(n.get(["afterTemplateCreated"],!1),n,{block:d},{}).w('<div class="back-link-container"><a class="service-action" href="').f(n.getPath(!1,["backLink","url"]),n,"h").w('">').f(n.getPath(!1,["backLink","text"]),n,"h").w("</a></div>").nx(n.get(["afterTemplateCreated"],!1),n,{else:h,block:m},{}).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<form class="template-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="" name="objectName" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function a(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:c},{},"h")}function c(t,n){return n=n.shiftBlocks(e),t.w("Transfer successfully completed")}function u(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:l},{},"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Template successfully created")}function d(t,n){return n=n.shiftBlocks(e),t.w('<div class="button-group"><button type="button" class="wb-button show-details-link">').h("_",n,{block:p},{},"h").w("</button></div>")}function p(t,n){return n=n.shiftBlocks(e),t.w("Show operation details")}function h(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-actions"><a class="service-action" href="').f(n.get(["templateLink"],!1),n,"h").w('">').h("_",n,{},{key:'Open template "%(templateName)s"',templateName:f},"h").w("</a></div>")}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateName"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="service-actions">').x(n.get(["allowTemplate"],!1),n,{block:y},{}).x(n.get(["allowPeriodic"],!1),n,{block:g},{}).w("</div>")}function y(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-payment-template-link">').h("_",n,{block:_},{},"h").w("</a>")}function _(t,n){return n=n.shiftBlocks(e),t.w("Save as template")}function g(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action create-recurrent-payment-link">').h("_",n,{block:v},{},"h").w("</a>")}function v(t,n){return n=n.shiftBlocks(e),t.w("Create recurrent payment")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/transfer-complete-page",t,e)};i.templateName="templates/payments/native/transfer-complete-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/native/transfer-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title">').f(n.get(["name"],!1),n,"h").w('</div></div><div class="page-messages"></div><div class="block__payments-transfers"></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/native/transfer-page",t,e)};i.templateName="templates/payments/native/transfer-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-3d-processing-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-3d-processing-page",t,e)};i.templateName="templates/payments/payment-3d-processing-page",t.exports=i},function(t,e,n){var o=n(372);n(382),n(382),n(382),n(435);!function(t){t.register("templates/payments/payment-details",n);var e={fieldGroup:s,field:c};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section fields">').s(n.get(["fields"],!1),n,{block:o},{}).w("</div>").b(n.getBlock("amounts"),n,{block:S},{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["components"],!1),n,{else:i,block:r},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("field"),n,{},{})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("fieldGroup"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.s(n.get(["components"],!1),n,{block:a},{})}function a(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("field"),n,{},{})}function c(t,n){return n=n.shiftBlocks(e),t.h("select",n,{block:u},{key:C},"h")}function u(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:l},{value:"source"},"h").h("none",n,{block:B},{},"h")}function l(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["object","name"]),n,{else:d,block:v},{})}function d(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!1,["object","isExternalCard"]),n,{else:p,block:y},{})}function p(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:h},{attrName:f,attrValue:m})}function h(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function f(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function m(t,n){return n=n.shiftBlocks(e),t.f(n.get(["value"],!1),n,"h")}function y(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:_},{attrName:"Card",attrValue:g})}function _(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function g(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["object","number"]),n,"h",["pan"])}function v(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:w},{attrName:b,attrValue:k})}function w(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/details-attr",n,n,{})}function b(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function k(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["object","name"]),n,"h")}function B(t,n){return n=n.shiftBlocks(e),t.p("templates/partials/payment-info-field",n,n,{})}function C(t,n){return n=n.shiftBlocks(e),t.f(n.get(["role"],!1),n,"h")}function S(t,n){return n=n.shiftBlocks(e),t.w('<div class="details-section">').x(n.get(["showBaseAmount"],!1),n,{block:P},{}).s(n.get(["bonusAmount"],!1),n,{block:A},{}).s(n.get(["fees"],!1),n,{else:O,block:V},{}).b(n.getBlock("totalAmount"),n,{block:Y},{}).w("</div>")}function P(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("baseAmount"),n,{block:x},{})}function x(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount"><div class="name">').h("_",n,{block:T},{},"h").w('</div><div class="value">').f(n.get(["baseAmount"],!1),n,"h",["money","s"]).w("</div></div>")}function T(t,n){return n=n.shiftBlocks(e),t.w("Amount")}function A(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("bonusAmount"),n,{block:E},{})}function E(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount bonus"><div class="name">').x(n.get(["onlyBonusesPayment"],!1),n,{else:M,block:N},{}).w('</div><div class="value">').f(n.getPath(!0,[]),n,"h",["absMoney","s"]).w("</div></div>")}function M(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:I},{},"h")}function I(t,n){return n=n.shiftBlocks(e),t.w("incl. bonuses")}function N(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:R},{},"h")}function R(t,n){return n=n.shiftBlocks(e),t.w("Pay with bonuses")}function O(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("noFee"),n,{block:D},{})}function D(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["hideNoFee"],!1),n,{block:F},{})}function F(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount"><div class="name"></div><div class="value">').h("_",n,{block:L},{},"h").w("</div></div>")}function L(t,n){return n=n.shiftBlocks(e),t.w("No fee")}function V(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("feeAmount"),n,{block:U},{})}function U(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount"><div class="name">').x(n.get(["description"],!1),n,{else:$,block:H},{}).w('</div><div class="value">').f(n.get(["amount"],!1),n,"h",["money","s"]).w("</div></div>")}function $(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:W},{},"h")}function W(t,n){return n=n.shiftBlocks(e),t.w("Fee")}function H(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:z},{},"h")}function z(t,n){return n=n.shiftBlocks(e),t.f(n.get(["description"],!1),n,"h")}function Y(t,n){return n=n.shiftBlocks(e),t.w('<div class="details amount total"><div class="name">').h("_",n,{block:q},{},"h").w('</div><div class="value">').f(n.get(["total"],!1),n,"h",["money","s"]).w("</div></div>")}function q(t,n){return n=n.shiftBlocks(e),t.w("Total")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-details",t,e)};i.templateName="templates/payments/payment-details",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-template-complete-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payment-complete-page"><div class="text-icon success"></div><h1 class="owwb-cs-main-title owwb-ws-operation-result_title align-center">').f(n.get(["title"],!1),n,"h").w('</h1><div class="service-actions"><div class="action-links"><a class="service-action" href="').f(n.get(["paymentsMenuLink"],!1),n,"h").w('">').h("_",n,{block:s},{},"h").w("</a>").x(n.get(["template"],!1),n,{block:a},{}).w("</div></div></div>")}function s(t,n){return n=n.shiftBlocks(e),t.w("Back to Payment and Transfers")}function a(t,n){return n=n.shiftBlocks(e),t.w('<a class="service-action" href="').x(n.get(["templateLink"],!1),n,{else:c,block:u},{}).w('">').h("_",n,{},{key:'Open template "%(templateName)s"',templateName:l},"h").w("</a>")}function c(t,n){return n=n.shiftBlocks(e),t.w("#templates/").f(n.getPath(!1,["template","id"]),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateLink"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","name"]),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-template-complete-page",t,e)};i.templateName="templates/payments/payment-template-complete-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-template-edit-page",n);var e={subMenu:o,pageClass:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header ').x(n.get(["isServiceActive"],!1),n,{block:a},{}).w('">').x(n.get(["isServiceActive"],!1),n,{else:c,block:l},{}).w('</div><div class="page-messages"></div><div class="block__payments-transfers template-page"><form class="wb-form template-form">').h("select",n,{block:d},{key:y},"h").h("eq",n,{block:_},{key:P,value:"invalid"},"h").w('<div class="form-fields"/>').x(n.get(["license"],!1),n,{block:x},{}).w('<div class="error-message-container field-wrapper error hidden"><div class="error error-message"/></div><div class="button-group">').h("eq",n,{else:T,block:R},{key:F,value:"COMMON"},"h").w('</div><div class="service-actions"><a href="#" class="service-action cancel-button">').h("_",n,{block:L},{},"h").w("</a>").h("eq",n,{else:V,block:W},{key:j,value:"COMMON"},"h").w('<a href="#" class="service-action delete-link">').h("_",n,{block:K},{},"h").w('</a></div><div class="operation-actions">').x(n.get(["allowInternational"],!1),n,{block:X},{}).w("</div></form></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w("editable")}function c(t,n){return n=n.shiftBlocks(e),t.w('<div class="title service-title inactive">').h("_",n,{},{key:"Sorry, the payment for the &laquo;%(paymentName)s&raquo; temporarily&nbsp;unavailable",paymentName:u},"h").w('<input type="hidden" value="').f(n.get(["templateName"],!1),n,"h").w('" name="templateName" maxlength="50"/></div>')}function u(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateName"],!1),n,"h")}function l(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="title service-title template-name">').f(n.get(["templateName"],!1),n,"h").w('</a><form class="template-name-edit-panel inline-edit-panel ui-front"><button type="button" class="icon-button icon-cancel invert cancel"></button><div class="input-wrapper"><input type="text" value="').f(n.get(["templateName"],!1),n,"h").w('" name="templateName" maxlength="50"/></div><button type="button" class="icon-button icon-ok invert save"></button></form>')}function d(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:p},{value:"RECURRENT"},"h").h("eq",n,{block:f},{value:"THRESHOLD"},"h")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="form-description">').h("_",n,{block:h},{},"h").w("</div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Subscription to make payments according to schedule")}function f(t,n){return n=n.shiftBlocks(e),t.w('<div class="form-description">').h("_",n,{block:m},{},"h").w("</div>")}function m(t,n){return n=n.shiftBlocks(e),t.w("Subscription to refill your phone account automatically when balance of corresponding account reaches threshold amount")}function y(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function _(t,n){return n=n.shiftBlocks(e),t.w('<div class="invalid-template-warning">').h("select",n,{block:g},{key:S},"h").w("</div>")}function g(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:v},{value:"RECURRENT"},"h").h("eq",n,{block:k},{value:"THRESHOLD"},"h")}function v(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:w},{},"h").w("<br/>").h("_",n,{block:b},{},"h")}function w(t,n){return n=n.shiftBlocks(e),t.w("Your recurrent payment was set to inactive for technical reasons.")}function b(t,n){return n=n.shiftBlocks(e),t.w("Please check if the recurrent payment parameters are correct and activate it.")}function k(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:B},{},"h").w("<br/>").h("_",n,{block:C},{},"h")}function B(t,n){return n=n.shiftBlocks(e),t.w("Your automatic payment was set to inactive for technical reasons.")}function C(t,n){return n=n.shiftBlocks(e),t.w("Please check if the automatic payment parameters are correct and activate it.")}function S(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function P(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","status"]),n,"h")}function x(t,n){return n=n.shiftBlocks(e),t.w('<div class="license-block control-container" data-js-license></div>')}function T(t,n){return n=n.shiftBlocks(e),t.w('<button type="submit" class="wb-button submit-template-button">').h("eq",n,{else:A,block:M},{key:N,value:"invalid"},"h").w("</button>")}function A(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:E},{},"h")}function E(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}function M(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:I},{},"h")}function I(t,n){return n=n.shiftBlocks(e),t.w("Save changes and activate")}function N(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","status"]),n,"h")}function R(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowExecute"],!1),n,{block:O},{})}function O(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="wb-button execute-template-link">').h("_",n,{block:D},{},"h").w("</a>")}function D(t,n){return n=n.shiftBlocks(e),t.w("Pay now")}function F(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function L(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function V(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowExecute"],!1),n,{block:U},{})}function U(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action execute-template-link">').h("_",n,{block:$},{},"h").w("</a>")}function $(t,n){return n=n.shiftBlocks(e),t.w("Pay now")}function W(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="service-action submit-template-button">').h("eq",n,{else:H,block:Y},{key:G,value:"invalid"},"h").w("</a>")}function H(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:z},{},"h")}function z(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}function Y(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:q},{},"h")}function q(t,n){return n=n.shiftBlocks(e),t.w("Save changes and activate")}function G(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","status"]),n,"h")}function j(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["template","type"]),n,"h")}function K(t,n){return n=n.shiftBlocks(e),t.w("Delete")}function X(t,n){return n=n.shiftBlocks(e),t.w('<div class="action-links"><div class="action-link"><a href="#payment/beneficiaries">').h("_",n,{block:Q},{},"h").w("</a></div></div>")}function Q(t,n){return n=n.shiftBlocks(e),t.w("Beneficiaries management")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0,F.__dustBody=!0,L.__dustBody=!0,V.__dustBody=!0,U.__dustBody=!0,$.__dustBody=!0,W.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,Y.__dustBody=!0,q.__dustBody=!0,G.__dustBody=!0,j.__dustBody=!0,K.__dustBody=!0,X.__dustBody=!0,Q.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-template-edit-page",t,e)};i.templateName="templates/payments/payment-template-edit-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payment-template-page",n);var e={subMenu:o,pageClass:i,content:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="content-header service-header"><div class="title service-title first-row">').f(n.get(["serviceName"],!1),n,"h").w('</div><div class="title service-title sec-row">').h("select",n,{block:s},{key:h},"h").w('</div></div><div class="block__payments-transfers"><form class="wb-form">').h("select",n,{block:f},{key:v},"h").w('<div class="field-wrapper"><div class="field-caption">').h("_",n,{block:w},{},"h").w('</div><div class="control-container"><input type="text" name="templateName" value="').f(n.get(["templateName"],!1),n,"h").w('"/></div></div><div class="form-fields"/><div class="error-message-container field-wrapper error hidden"><div class="error error-message"/></div><div class="button-group">').x(n.getPath(!1,["template","id"]),n,{else:b,block:k},{}).w('</div><div class="service-actions"><a href="#" class="service-action cancel-button">').h("_",n,{block:C},{},"h").w("</a></div></form></div>")}function s(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:a},{value:"COMMON"},"h").h("eq",n,{block:u},{value:"RECURRENT"},"h").h("eq",n,{block:d},{value:"THRESHOLD"},"h")}function a(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:c},{},"h")}function c(t,n){return n=n.shiftBlocks(e),t.w("Template")}function u(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:l},{},"h")}function l(t,n){return n=n.shiftBlocks(e),t.w("Recurrent payment")}function d(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:p},{},"h")}function p(t,n){return n=n.shiftBlocks(e),t.w("Auto payment")}function h(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateType"],!1),n,"h")}function f(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:m},{value:"RECURRENT"},"h").h("eq",n,{block:_},{value:"THRESHOLD"},"h")}function m(t,n){return n=n.shiftBlocks(e),t.w('<div class="form-description">').h("_",n,{block:y},{},"h").w("</div>")}function y(t,n){return n=n.shiftBlocks(e),t.w("Subscription to make payments according to schedule")}function _(t,n){return n=n.shiftBlocks(e),t.w('<div class="form-description">').h("_",n,{block:g},{},"h").w("</div>")}function g(t,n){return n=n.shiftBlocks(e),t.w("Subscription to refill your phone account automatically when balance of corresponding account reaches threshold amount")}function v(t,n){return n=n.shiftBlocks(e),t.f(n.get(["templateType"],!1),n,"h")}function w(t,n){return n=n.shiftBlocks(e),t.w("Template name")}function b(t,n){return n=n.shiftBlocks(e),t.w('<button type="submit" class="wb-button">').f(n.get(["submitButtonTitle"],!1),n,"h").w("</button>")}function k(t,n){return n=n.shiftBlocks(e),t.w('<button type="submit" class="wb-button">').h("_",n,{block:B},{},"h").w("</button>")}function B(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}function C(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-template-page",t,e)};i.templateName="templates/payments/payment-template-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w("<h4>").h("_",e,{block:n},{},"h").w("</h4><div>").x(e.get(["collection"],!1),e,{else:o,block:r},{}).w("</div>")}function n(t,e){return t.w("Payment Templates")}function o(t,e){return t.w("<div>").h("_",e,{block:i},{},"h").w("</div>")}function i(t,e){return t.w("You can create template from payment page")}function r(t,e){return t.w('<ul class="menu">').s(e.get(["collection"],!1),e,{block:s},{}).w("</ul>")}function s(t,e){return t.w('<li class="menu-item">').x(e.get(["allowRest"],!1),e,{else:a,block:c},{}).w("</li>")}function a(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/templates/").f(e.get(["id"],!1),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function c(t,e){return t.w("<a ").h("eq",e,{block:u},{key:l,value:"invalid"},"h").w(' href="').f(e.get(["contextPath"],!1),e,"h").w("/#paymentTemplates/").f(e.get(["id"],!1),e,"h").w('/edit" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function u(t,e){return t.w('class="invalid"')}function l(t,e){return t.f(e.get(["status"],!1),e,"h")}t.register("templates/payments/payment-templates",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payment-templates",t,e)};i.templateName="templates/payments/payment-templates",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="multi-accordion-container">').s(e.get(["collection"],!1),e,{block:n},{}).w("</div>")}function n(t,e){return t.x(e.get(["items"],!1),e,{block:o},{})}function o(t,e){return t.w('<div class="payment-group ui-accordion" data-menu-id="').f(e.get(["id"],!1),e,"h").w('"><h4 class="ui-accordion-header">').f(e.get(["name"],!1),e,"h").w('</h4><div class="ui-accordion-content" style="display: none"><ul class="menu">').s(e.get(["items"],!1),e,{block:i},{}).w("</ul>").x(e.get(["allowLimits"],!1),e,{block:g},{}).w("</div></div>")}function i(t,e){return t.w('<li class="menu-item">').x(e.get(["service"],!1),e,{else:r,block:h},{}).w("</li>")}function r(t,e){return t.s(e.getPath(!1,["options","invoiceCode"]),e,{block:s},{}).x(e.get(["nativeCode"],!1),e,{block:a},{})}function s(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/#invoices/").f(e.getPath(!0,[]),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function a(t,e){return t.h("select",e,{block:c},{key:p},"h")}function c(t,e){return t.h("eq",e,{block:u},{value:"INTRA_CARD_TRANSFER"},"h").h("eq",e,{block:l},{value:"INTRA_BANK_TRANSFER"},"h").h("eq",e,{block:d},{value:"RETRIEVE_MONEY_TRANSFER"},"h")}function u(t,e){return t.w('<a href="#intracard-transfer" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function l(t,e){return t.w('<a href="#intrabank-transfer" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function d(t,e){return t.w('<a href="#retrieve-money" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function p(t,e){return t.f(e.get(["nativeCode"],!1),e,"h")}function h(t,e){return t.b(e.getBlock("serviceLink"),e,{block:f},{})}function f(t,e){return t.x(e.get(["allowRest"],!1),e,{else:m,block:y},{})}function m(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/services/").f(e.getPath(!1,["service","id"]),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function y(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/#payment/").f(e.getPath(!1,["service","id"]),e,"h").s(e.getPath(!1,["attrs","serviceAttrs"]),e,{block:_},{}).w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function _(t,e){return t.w("?serviceAttrs=").f(e.getPath(!0,[]),e,"h")}function g(t,e){return t.x(e.get(["limitApplicable"],!1),e,{block:v},{})}function v(t,e){return t.w('<a href="javascript:void(0)" class="toggle-show-all">').x(e.get(["limitActive"],!1),e,{else:w,block:k},{}).w("</a>")}function w(t,e){return t.h("_",e,{block:b},{},"h")}function b(t,e){return t.w("Show default")}function k(t,e){return t.h("_",e,{block:B},{},"h")}function B(t,e){return t.w("Show all")}t.register("templates/payments/payments-menu",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payments-menu",t,e)};i.templateName="templates/payments/payments-menu",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/payments-page",n);var e={subMenu:o,pageClass:i,title:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__payments-transfers payments-menu-page"><div class="payments-toolbar"><input id="payments-search" type="text"/><div class="regions-select"></div>').x(n.get(["showPaymentCart"],!1),n,{block:a},{}).w('</div><div class="invoice-subscriptions"></div><div class="payment-group payment-templates"></div><div class="payment-group recurrent-payments"></div><div class="payment-group threshold-payments"></div><div class="payments-menu"></div><div class="no-payments">').h("_",n,{block:u},{},"h").w("</div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<a class="payment-cart-button wb-button" data-js-payment-cart-button href="#">').h("_",n,{block:c},{},"h").w("</a>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Pay multiple templates at once")}function u(t,n){return n=n.shiftBlocks(e),t.w("Nothing found")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/payments-page",t,e)};i.templateName="templates/payments/payments-page",t.exports=i},function(t,e,n){var o=n(372);n(501);!function(t){t.register("templates/payments/protected-payment-confirmation-dialog",n);var e={addAuthAdditionalInfo:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/add-auth-dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-details"></div>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/protected-payment-confirmation-dialog",t,e)};i.templateName="templates/payments/protected-payment-confirmation-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w("<h4>").h("_",e,{block:n},{},"h").w("</h4><div>").x(e.get(["active"],!1),e,{block:o},{}).x(e.get(["inactive"],!1),e,{block:d},{}).nx(e.get(["active"],!1),e,{block:g},{}).w("</div>")}function n(t,e){return t.w("Recurrent payments")}function o(t,e){return t.w('<div class="active"><table><thead><tr><th class="h-small">').h("_",e,{block:i},{},"h").w('</th><th class="h-small">').h("_",e,{block:r},{},"h").w("</th></tr></thead><tbody>").s(e.get(["active"],!1),e,{block:s},{}).w("</tbody></table></div>")}function i(t,e){return t.w("Active recurrent payments")}function r(t,e){return t.w("Date of next payment")}function s(t,e){return t.w('<tr class="menu-item"><td class="item">').x(e.get(["allowRest"],!1),e,{else:a,block:u},{}).w('</td><td class="period">').x(e.getPath(!1,["schedule","nextPaymentOn"]),e,{block:l},{}).w("</td></tr>")}function a(t,e){return t.w("<a ").nx(e.get(["valid"],!1),e,{block:c},{}).w(' href="').f(e.get(["contextPath"],!1),e,"h").w("/recurrents/").f(e.get(["id"],!1),e,"h").w('" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function c(t,e){return t.w('class="invalid"')}function u(t,e){return t.w('<a href="').f(e.get(["contextPath"],!1),e,"h").w("/#recurrentPayments/").f(e.get(["id"],!1),e,"h").w('/edit" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a>")}function l(t,e){return t.f(e.getPath(!1,["schedule","nextPaymentOn"]),e,"h",["recurrentDate"])}function d(t,e){return t.w('<div class="inactive"><div class="label h-small">').h("_",e,{block:p},{},"h").w('</div><ul class="menu">').s(e.get(["inactive"],!1),e,{block:h},{}).w("</ul></div>")}function p(t,e){return t.w("Inactive recurrent payments")}function h(t,e){return t.w('<li class="menu-item"><a ').h("eq",e,{block:f},{key:m,value:"invalid"},"h").x(e.get(["allowRest"],!1),e,{else:y,block:_},{}).w('title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a></li>")}function f(t,e){return t.w('class="invalid"')}function m(t,e){return t.f(e.get(["status"],!1),e,"h")}function y(t,e){return t.w('href="').f(e.get(["contextPath"],!1),e,"h").w("/recurrents/").f(e.get(["id"],!1),e,"h").w('"')}function _(t,e){return t.w('href="').f(e.get(["contextPath"],!1),e,"h").w("/#recurrentPayments/").f(e.get(["id"],!1),e,"h").w('/edit"')}function g(t,e){return t.nx(e.get(["inactive"],!1),e,{block:v},{})}function v(t,e){return t.w("<div>").h("_",e,{block:w},{},"h").w("</div>")}function w(t,e){return t.w("You can create recurrent payment from payment page")}t.register("templates/payments/recurrent-payments",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/recurrent-payments",t,e)};i.templateName="templates/payments/recurrent-payments",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.x(e.get(["collection"],!1),e,{block:n},{})}function n(t,e){return t.w('<select name="regions"><option value="">').h("_",e,{block:o},{},"h").w("</option>").s(e.get(["collection"],!1),e,{block:i},{}).w("</select>")}function o(t,e){return t.w("All regions")}function i(t,e){return t.w('<option value="').f(e.get(["id"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</option>")}t.register("templates/payments/region-select",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/region-select",t,e)};i.templateName="templates/payments/region-select",t.exports=i},function(t,e,n){var o=n(372);n(435);!function(t){function e(t,e){return t.s(e.get(["fields"],!1),e,{block:n},{})}function n(t,e){return t.w('<div class="h-small">').f(e.get(["name"],!1),e,"h").w('</div><div class="details-section fields">').s(e.get(["components"],!1),e,{block:o},{}).w("</div>")}function o(t,e){return t.x(e.getPath(!1,["value","currency"]),e,{else:i,block:r},{})}function i(t,e){return t.p("templates/partials/payment-info-field",e,e,{})}function r(t,e){return t.w('<div class="details amount"><div class="name">').f(e.get(["name"],!1),e,"h").w('</div><div class="value">').f(e.get(["value"],!1),e,"h",["money","s"]).w("</div></div>")}t.register("templates/payments/remittance-details",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/remittance-details",t,e)};i.templateName="templates/payments/remittance-details",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/send2friend-page",n);var e={subMenu:o,title:i,pageMessages:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="row row-top"><div class="col col-left"><div class="user-photo"><img src="static/rainbow/client/images/send2friend/smile.svg"></div></div><div class="col col-center"><div class="message-box"><p class="message-user-name">').f(n.get(["sender"],!1),n,"h").w('</p><p class="message-comment">').f(n.get(["comment"],!1),n,"h").w('</p><p class="message-amount">').f(n.get(["amount"],!1),n,"h",["money","s"]).w('</p></div><div class="navbar-container"><ul class="navbar"><li><a class="tab-select active" href="#" target="card">').h("_",n,{block:a},{},"h").w('</a></li><li><a class="tab-select" href="#" target="phone">').h("_",n,{block:c},{},"h").w('</a></li></ul></div></div><div class="col col-right">&nbsp;</div></div><div class="row row-bottom"><div class="col col-right">&nbsp;</div><div class="col col-center"><form class="wb-form" novalidate="novalidate"><div class="tabs-content"><div class="tab" id="card"><div class="field-wrapper"><input type="tel" name="cardNumber" class="cardNumber" required="required"autocorrect="off" autocapitalize="off" placeholder="•••• •••• •••• ••••"/></div></div><div class="tab" id="phone"><div class="field-wrapper"><select name="mobileOperator" class="simple-select required"><option value="">').h("_",n,{block:u},{},"h").w("</option>").s(n.get(["mobileOperators"],!1),n,{block:l},{}).w('</select></div><div class="field-wrapper"><input type="tel" name="phoneNumber" class="PHONE10" required="required"disabled="disabled" placeholder="(000) 000-0000" autocorrect="off" autocapitalize="off"/></div></div></div><div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:d},{},"h").w('</button></div></form></div><div class="col col-right">&nbsp;</div></div>')}function a(t,n){return n=n.shiftBlocks(e),t.w("To card")}function c(t,n){return n=n.shiftBlocks(e),t.w("To mobile")}function u(t,n){return n=n.shiftBlocks(e),t.w("Select operator")}function l(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.getPath(!1,["columns","ADD_ONLINE_SERV"]),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</option>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Send")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/send2friend-page",t,e)};i.templateName="templates/payments/send2friend-page",t.exports=i},function(t,e,n){var o=n(372);n(385);!function(t){t.register("templates/payments/simple-payment-confirmation-dialog",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/dialog",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<form autocomplete="off"><div class="payment-details"></div>').x(n.get(["securityCodeRequired"],!1),n,{block:i},{}).w("</form>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<p class="action-tooltip">').h("_",n,{block:r},{},"h").w(':</p><div class="field-wrapper securityCode"><div class="field-caption"></div><div class="control-container"><input type="password" name="securityCode" placeholder="CVC2/CVV2" minlength="3" maxlength="4" required /></div></div>')}function r(t,n){return n=n.shiftBlocks(e),t.w("You should enter security code for this card to continue")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/simple-payment-confirmation-dialog",t,e)};i.templateName="templates/payments/simple-payment-confirmation-dialog",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w("<h4>").h("_",e,{block:n},{},"h").w("</h4><div>").x(e.get(["collection"],!1),e,{else:o,block:r},{}).w("</div>")}function n(t,e){return t.w("Auto payments")}function o(t,e){return t.w("<div>").h("_",e,{block:i},{},"h").w("</div>")}function i(t,e){return t.w("You can create auto payment from payment page")}function r(t,e){return t.w('<ul class="menu">').s(e.get(["collection"],!1),e,{block:s},{}).w("</ul>")}function s(t,e){return t.w('<li class="menu-item"><a ').h("eq",e,{block:a},{key:c,value:"invalid"},"h").w(' href="').f(e.get(["contextPath"],!1),e,"h").w("/#thresholdPayments/").f(e.get(["id"],!1),e,"h").w('/edit" title="').f(e.get(["name"],!1),e,"h").w('">').f(e.get(["name"],!1),e,"h").w("</a></li>")}function a(t,e){return t.w('class="invalid"')}function c(t,e){return t.f(e.get(["status"],!1),e,"h")}t.register("templates/payments/threshold-payments",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/threshold-payments",t,e)};i.templateName="templates/payments/threshold-payments",t.exports=i},function(t,e,n){var o=n(372);n(436),n(470);!function(t){t.register("templates/payments/tiles/payments-menu",n);var e={"list-item":s};function n(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["hasSearch"],!1),n,{else:o,block:r},{})}function o(t,n){return n=n.shiftBlocks(e),t.s(n.get(["collection"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="menu-section"></div>')}function r(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/tiles/payment-items-list",n,n,{})}function s(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/tiles/payments-menu-item",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/payments-menu",t,e)};i.templateName="templates/payments/tiles/payments-menu",t.exports=i},function(t,e,n){var o=n(372);n(470);!function(t){function e(t,e){return t.s(e.get(["section"],!1),e,{block:n},{})}function n(t,e){return t.w('<h4 class="menu-title">').f(e.get(["name"],!1),e,"h",["s"]).w('</h4><ul class="menu">').s(e.get(["items"],!1),e,{block:o},{}).w("</ul>")}function o(t,e){return t.w('<li class="menu-item">').p("templates/payments/tiles/payments-menu-item",e,e,{}).w("</li>")}t.register("templates/payments/tiles/payments-menu-section",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/payments-menu-section",t,e)};i.templateName="templates/payments/tiles/payments-menu-section",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/payments/tiles/payments-page",n);var e={subMenu:o,pageClass:i,title:r,content:s};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w("payments-page")}function r(t,n){return n=n.shiftBlocks(e),t}function s(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__tiled-payments-transfers payments-menu-page"><div class="payments-toolbar"><input id="payments-search" type="text"  /><div class="regions-select"></div>').x(n.get(["showPaymentCart"],!1),n,{block:a},{}).w('</div><div class="payment-groups"><div class="invoice-subscriptions"></div><div class="payment-templates"></div><div class="recurrent-payments"></div><div class="threshold-payments"></div><div class="payments-menu"></div></div><div class="no-payments">').h("_",n,{block:u},{},"h").w("</div></div>")}function a(t,n){return n=n.shiftBlocks(e),t.w('<a class="payment-cart-button wb-button" data-js-payment-cart-button href="#">').h("_",n,{block:c},{},"h").w("</a>")}function c(t,n){return n=n.shiftBlocks(e),t.w("Pay multiple templates at once")}function u(t,n){return n=n.shiftBlocks(e),t.w("Nothing found")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/payments-page",t,e)};i.templateName="templates/payments/tiles/payments-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<h4 class="menu-title">').h("_",e,{block:n},{},"h").w('</h4><div class="active"></div><div class="inactive"></div>')}function n(t,e){return t.w("Recurrent Payments")}t.register("templates/payments/tiles/recurrent-payments",e),e.__dustBody=!0,n.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/recurrent-payments",t,e)};i.templateName="templates/payments/tiles/recurrent-payments",t.exports=i},function(t,e,n){var o=n(372);n(436);!function(t){t.register("templates/payments/tiles/recurrent-payments-list",n);var e={"list-title":o,"list-item":i,link:h};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/tiles/payment-items-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<h5 class="menu-section-title">').f(n.get(["title"],!1),n,"h").w("</h5>")}function i(t,n){return n=n.shiftBlocks(e),t.x(n.get(["allowRest"],!1),n,{else:r,block:u},{})}function r(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:s},{href:a,name:c})}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/recurrents/").f(n.get(["id"],!1),n,"h")}function c(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function u(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,[]),n,{block:l},{href:d,name:p})}function l(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function d(t,n){return n=n.shiftBlocks(e),t.f(n.get(["contextPath"],!1),n,"h").w("/#recurrentPayments/").f(n.get(["id"],!1),n,"h").w("/edit")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("recurrent-link"),n,{block:f},{})}function f(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["href"],!1),n,"h").w('" class="').f(n.get(["status"],!1),n,"h").w(' has-icon" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="outer"><img alt="').f(n.get(["name"],!1),n,"h").w('" /></div><div class="menu-item-name"><span>').f(n.get(["name"],!1),n,"h").w("</span>").x(n.getPath(!1,["schedule","nextPaymentOn"]),n,{block:m},{}).w("</div></a>")}function m(t,n){return n=n.shiftBlocks(e),t.h("eq",n,{block:y},{key:g,value:"active"},"h")}function y(t,n){return n=n.shiftBlocks(e),t.w("<br/><span>").h("_",n,{block:_},{},"h").w(": ").f(n.getPath(!1,["schedule","nextPaymentOn"]),n,"h",["recurrentDate"]).w("</span>")}function _(t,n){return n=n.shiftBlocks(e),t.w("Date of next payment")}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/recurrent-payments-list",t,e)};i.templateName="templates/payments/tiles/recurrent-payments-list",t.exports=i},function(t,e,n){var o=n(372);n(436);!function(t){t.register("templates/payments/tiles/templates-list",n);var e={"list-item":o,link:r};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/tiles/payment-items-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.x(n.get(["href"],!1),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("link"),n,{},{})}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("template-link"),n,{block:s},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<a href="').f(n.get(["href"],!1),n,"h").w('" class="').f(n.get(["status"],!1),n,"h").w(' has-icon" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="outer"><img alt="').f(n.get(["name"],!1),n,"h").w('" /></div><div class="menu-item-name"><span>').f(n.get(["name"],!1),n,"h").w("</span></div></a>")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/templates-list",t,e)};i.templateName="templates/payments/tiles/templates-list",t.exports=i},function(t,e,n){var o=n(372);n(436);!function(t){t.register("templates/payments/tiles/threshold-payments-list",n);var e={"list-item":o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/payments/tiles/payment-items-list",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("payment-link"),n,{block:i},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<a class="has-icon ').h("eq",n,{block:r},{key:s,value:"invalid"},"h").w('" href="').f(n.get(["contextPath"],!1),n,"h").w("/#thresholdPayments/").f(n.get(["id"],!1),n,"h").w('/edit" title="').f(n.get(["name"],!1),n,"h").w('" data-id="').f(n.get(["id"],!1),n,"h").w('"><div class="outer"><img alt="').f(n.get(["name"],!1),n,"h").w('" /></div><div class="menu-item-name"><span>').f(n.get(["name"],!1),n,"h").w("</span></div></a>")}function r(t,n){return n=n.shiftBlocks(e),t.w("invalid")}function s(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/payments/tiles/threshold-payments-list",t,e)};i.templateName="templates/payments/tiles/threshold-payments-list",t.exports=i},function(t,e,n){var o=n(372);n(471);!function(t){t.register("templates/security/amount-limiter",n);var e={limiterTitle:D};function n(t,n){return n=n.shiftBlocks(e),t.w('<div class="amount-row">').b(n.getBlock("limiterTitle"),n,{},{}).h("eq",n,{else:o,block:v},{key:P,value:"unlimited"},"h").x(n.get(["editable"],!1),n,{block:x},{}).w("</div>")}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="limit ').x(n.get(["editable"],!1),n,{block:i},{}).w('">').h("eq",n,{else:r,block:u},{key:p,value:"forbidden"},"h").w('</div><div class="status">').h("eq",n,{else:h,block:y},{key:g,value:"forbidden"},"h").w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("editable")}function r(t,n){return n=n.shiftBlocks(e),t.x(n.get(["editable"],!1),n,{else:s,block:c},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('<span class="amount limit-amount" title="').h("_",n,{block:a},{},"h").w('">').f(n.get(["limit"],!1),n,"h",["moneyShort","s"]).w("</span>")}function a(t,n){return n=n.shiftBlocks(e),t.w("You can not edit this limit")}function c(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="amount limit-amount">').f(n.get(["limit"],!1),n,"h",["moneyShort","s"]).w("</a>")}function u(t,n){return n=n.shiftBlocks(e),t.x(n.get(["editable"],!1),n,{block:l},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="amount limit-amount">').h("_",n,{block:d},{},"h").w("</a>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Set limit")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function h(t,n){return n=n.shiftBlocks(e),t.x(n.get(["currentValue"],!1),n,{block:f},{})}function f(t,n){return n=n.shiftBlocks(e),t.w('<span class="progress-label">').h("_",n,{block:m},{},"h").w(": ").f(n.get(["currentValue"],!1),n,"h",["money","s"]).w("</span>")}function m(t,n){return n=n.shiftBlocks(e),t.w("Spent")}function y(t,n){return n=n.shiftBlocks(e),t.w('<span class="progress-label">').h("_",n,{block:_},{},"h").w("</span>")}function _(t,n){return n=n.shiftBlocks(e),t.w("forbidden")}function g(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function v(t,n){return n=n.shiftBlocks(e),t.w('<div class="limit ').x(n.get(["editable"],!1),n,{block:w},{}).w('">').x(n.get(["editable"],!1),n,{else:b,block:C},{}).w("</div>")}function w(t,n){return n=n.shiftBlocks(e),t.w("editable")}function b(t,n){return n=n.shiftBlocks(e),t.w('<span class="limit-amount unlimited" title="').h("_",n,{block:k},{},"h").w('">').h("_",n,{block:B},{},"h").w("</span>")}function k(t,n){return n=n.shiftBlocks(e),t.w("You can not edit this limit")}function B(t,n){return n=n.shiftBlocks(e),t.w("unlimited")}function C(t,n){return n=n.shiftBlocks(e),t.w('<a href="#" class="limit-amount unlimited">').h("_",n,{block:S},{},"h").w("</a>")}function S(t,n){return n=n.shiftBlocks(e),t.w("unlimited")}function P(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function x(t,n){return n=n.shiftBlocks(e),t.w('<form class="limiter-edit-panel inline-edit-panel ui-front"><div class="limiter-edit-panel-content">').b(n.getBlock("limiterTitle"),n,{},{}).w('<div class="limit"><input type="number" name="limitAmount" class="limit-amount" money="true" value="').x(n.getPath(!1,["limit","value"]),n,{else:T,block:A},{}).w('"').x(n.get(["max"],!1),n,{block:E},{}).w("/>&nbsp;").f(n.getPath(!1,["limit","currency"]),n,"h",["currency","s"]).w('</div><div class="max-value">').x(n.get(["max"],!1),n,{block:M},{}).w('</div><div class="buttons">').nx(n.get(["max"],!1),n,{block:N},{}).w('<button type="button" class="link-button cancel">').h("_",n,{block:O},{},"h").w('</button><button type="submit" class="wb-button icon-ok save"></button></div></div><div class="limiter-edit-panel-error"></div></form>')}function T(t,n){return n=n.shiftBlocks(e),t.f(n.get(["defaultValue"],!1),n,"h")}function A(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!1,["limit","value"]),n,"h")}function E(t,n){return n=n.shiftBlocks(e),t.w('required maxAmount="').f(n.getPath(!1,["max","value"]),n,"h").w('"')}function M(t,n){return n=n.shiftBlocks(e),t.h("_",n,{},{key:"Maximum %(amount)s",amount:I},"h")}function I(t,n){return n=n.shiftBlocks(e),t.f(n.get(["max"],!1),n,"h",["moneyShort","s"])}function N(t,n){return n=n.shiftBlocks(e),t.w('<button type="button" class="link-button make-unlimited">').h("_",n,{block:R},{},"h").w("</button>")}function R(t,n){return n=n.shiftBlocks(e),t.w("Make unlimited")}function O(t,n){return n=n.shiftBlocks(e),t.w("Cancel")}function D(t,n){return n=n.shiftBlocks(e),t.p("templates/security/limiter-title",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0,T.__dustBody=!0,A.__dustBody=!0,E.__dustBody=!0,M.__dustBody=!0,I.__dustBody=!0,N.__dustBody=!0,R.__dustBody=!0,O.__dustBody=!0,D.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/amount-limiter",t,e)};i.templateName="templates/security/amount-limiter",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/security/bank-limiters",n);var e={limiter:s,amountLimiter:l};function n(t,n){return n=n.shiftBlocks(e),t.w("<table>").s(n.get(["limiters"],!1),n,{block:o},{}).w("</table>").x(n.get(["hasModifiableByCall"],!1),n,{block:i},{})}function o(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limiter"),n,{},{})}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="footnote">*').h("_",n,{block:r},{},"h").w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Please contact the bank to modify this limit")}function s(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["parent"],!1),n,{block:a},{}).w("<tr>").b(n.getBlock("amountLimiter"),n,{},{}).w("</tr>").x(n.getPath(!0,["isGroup"]),n,{block:c},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<tr><td class="h-small">').f(n.get(["name"],!1),n,"h").w("</td><td></td></tr>")}function c(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,["items"]),n,{block:u},{})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limiter"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<td class="name">').f(n.get(["periodName"],!1),n,"h",["capitalizeFirst"]).x(n.get(["modifiableByCall"],!1),n,{block:d},{}).w('</td><td class="value">').h("eq",n,{else:p,block:h},{key:m,value:"unlimited"},"h").w("</td>")}function d(t,n){return n=n.shiftBlocks(e),t.w("*")}function p(t,n){return n=n.shiftBlocks(e),t.f(n.get(["limit"],!1),n,"h",["moneyShort","s"])}function h(t,n){return n=n.shiftBlocks(e),t.h("_",n,{block:f},{},"h")}function f(t,n){return n=n.shiftBlocks(e),t.w("unlimited")}function m(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/bank-limiters",t,e)};i.templateName="templates/security/bank-limiters",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<div class="geo-limiter-label h-small">').h("_",e,{block:n},{},"h").w('</div><form><span class="select-wrapper limiter-switch"><select name="is-active"><option value="false" ').nx(e.getPath(!1,["geoLimiter","isActive"]),e,{block:o},{}).w(">").h("_",e,{block:i},{},"h").w('</option><option value="true" ').x(e.getPath(!1,["geoLimiter","isActive"]),e,{block:r},{}).w(">").h("_",e,{block:s},{},"h").w(":</option></select></span>").x(e.getPath(!1,["geoLimiter","isActive"]),e,{block:a},{}).w("</form>")}function n(t,e){return t.w("Card operations")}function o(t,e){return t.w("selected")}function i(t,e){return t.w("Allowed everywhere")}function r(t,e){return t.w("selected")}function s(t,e){return t.w("Forbidden everywhere, but")}function a(t,e){return t.w('<div class="selected-regions"></div><label><span class="select-wrapper geo-regions"><select data-placeholder="').h("_",e,{block:c},{},"h").w('..." name="geo-regions" multiple>').s(e.get(["regions"],!1),e,{block:u},{}).w("</select></span></label>")}function c(t,e){return t.w("Add a country")}function u(t,e){return t.x(e.get(["id"],!1),e,{block:l},{})}function l(t,e){return t.w('<option value="').f(e.get(["id"],!1),e,"h").w('" ').x(e.get(["selected"],!1),e,{block:d},{}).w(">").f(e.get(["name"],!1),e,"h").w("</option>")}function d(t,e){return t.w("selected")}t.register("templates/security/geo-limiter",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/geo-limiter",t,e)};i.templateName="templates/security/geo-limiter",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/security/geo-limiters-page",n);var e={pageClass:o,content:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w("geo-limiters-page")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__geo-limiters"><div class="limiters-panel"></div></div><div class="help-panel"><div class="info-block"><h4>').h("_",n,{block:r},{},"h").w("</h4><div><p>").h("_",n,{block:s},{},"h").w(" ").h("_",n,{block:a},{},"h").w(" ").h("_",n,{block:c},{},"h").w("</p></div></div></div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("How it works")}function s(t,n){return n=n.shiftBlocks(e),t.w("This settings block operations from outside your current country.")}function a(t,n){return n=n.shiftBlocks(e),t.w("Restriction only applies to operations with physical card (ATM cash withdrawals and in-person purchases).")}function c(t,n){return n=n.shiftBlocks(e),t.w("This protects you from common fraud risks.")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/geo-limiters-page",t,e)};i.templateName="templates/security/geo-limiters-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<ul class="hash-cloud">').s(e.get(["regions"],!1),e,{block:n},{}).w("</ul>")}function n(t,e){return t.w('<li class="hash-tag" data-region-id="').f(e.get(["id"],!1),e,"h").w('"><span class="hash-tag-label">').f(e.get(["name"],!1),e,"h").w('</span><a href="#" class="remove-tag" title="').h("_",e,{block:o},{},"h").w('"></a></li>')}function o(t,e){return t.w("Remove")}t.register("templates/security/geo-limiters-regions-tags",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/geo-limiters-regions-tags",t,e)};i.templateName="templates/security/geo-limiters-regions-tags",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/security/limiters-panel",n);var e={limiter:h};function n(t,n){return n=n.shiftBlocks(e),t.x(n.get(["limiters"],!1),n,{else:o,block:r},{}).x(n.get(["hasBankLimiters"],!1),n,{block:a},{}).b(n.getBlock("help-panel"),n,{block:u},{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="no-data-error">').h("_",n,{block:i},{},"h").w("</div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("There are no configurable limits for this card or account")}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limitersDescription"),n,{},{}).w('<ul class="limiters">').s(n.get(["limiters"],!1),n,{block:s},{}).w("</ul>")}function s(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limiter"),n,{},{})}function a(t,n){return n=n.shiftBlocks(e),t.w('<div class="bank-limiters-block"><div class="info-block"><h4>').h("_",n,{block:c},{},"h").w('</h4><div class="bank-limiters-panel"></div></div></div>')}function c(t,n){return n=n.shiftBlocks(e),t.w("Limits set by the bank")}function u(t,n){return n=n.shiftBlocks(e),t.w('<div class="help-panel"><div class="info-block"><h4>').h("_",n,{block:l},{},"h").w("</h4><div><p>").h("_",n,{block:d},{},"h").w(" ").h("_",n,{block:p},{},"h").w("</p></div></div></div>")}function l(t,n){return n=n.shiftBlocks(e),t.w("How it works")}function d(t,n){return n=n.shiftBlocks(e),t.w("Your can limit spendable amount for different operation types or forbid some operations completely.")}function p(t,n){return n=n.shiftBlocks(e),t.w("Settings operation limits protects your money from fraud and other risks.")}function h(t,n){return n=n.shiftBlocks(e),t.w('<li class="limiter ').x(n.get(["isGroup"],!1),n,{block:f},{}).w(" ").f(n.get(["type"],!1),n,"h").w('-limiter" data-limiter-id="').f(n.get(["id"],!1),n,"h").w('" data-limiter-type="').f(n.get(["type"],!1),n,"h").w('"><div class="limiter-container"></div>').x(n.getPath(!0,["isGroup"]),n,{block:m},{}).w("</li>").x(n.get(["isGroup"],!1),n,{block:w},{})}function f(t,n){return n=n.shiftBlocks(e),t.w("has-children")}function m(t,n){return n=n.shiftBlocks(e),t.w('<ul class="child-limiters" ').h("eq",n,{block:y},{key:_,value:"forbidden"},"h").w(">").s(n.getPath(!0,["items"]),n,{block:g},{}).w("</ul>")}function y(t,n){return n=n.shiftBlocks(e),t.w('style="display:none"')}function _(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function g(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["isGroup"],!1),n,{block:v},{})}function v(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limiter"),n,{},{})}function w(t,n){return n=n.shiftBlocks(e),t.s(n.getPath(!0,["items"]),n,{block:b},{})}function b(t,n){return n=n.shiftBlocks(e),t.x(n.getPath(!0,["isGroup"]),n,{block:k},{})}function k(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("limiter"),n,{},{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/limiters-panel",t,e)};i.templateName="templates/security/limiters-panel",t.exports=i},function(t,e,n){var o=n(372);n(471);!function(t){t.register("templates/security/switch-limiter",n);var e={limiterTitle:a};function n(t,n){return n=n.shiftBlocks(e),t.w('<form class="switch-row">').x(n.get(["editable"],!1),n,{block:o},{}).b(n.getBlock("limiterTitle"),n,{},{}).w('<div class="switch-status">').h("_",n,{block:s},{},"h").w("</div></form>")}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="switch-wrap"><input name="enabled" type="checkbox" ').h("eq",n,{block:i},{key:r,value:"unlimited"},"h").w("/></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w("checked")}function r(t,n){return n=n.shiftBlocks(e),t.f(n.get(["status"],!1),n,"h")}function s(t,n){return n=n.shiftBlocks(e),t.w("forbidden")}function a(t,n){return n=n.shiftBlocks(e),t.p("templates/security/limiter-title",n,n,{})}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/security/switch-limiter",t,e)};i.templateName="templates/security/switch-limiter",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.h("gt",e,{block:n},{key:e.getPath(!1,["auditLogins","length"]),value:0},"h")}function n(t,e){return t.w('<ul class="wb__v-list security-settings-list audit-logins"><li class="wb__v-list_title">').h("_",e,{block:o},{},"h").w("</li>").s(e.get(["auditLogins"],!1),e,{block:i},{}).w("</ul>")}function o(t,e){return t.w("Activity history")}function i(t,e){return t.w('<li class="wb__v-list_item-wrapper"><div class="wb__v-list_item wb__v-list_item-multiline"><div class="wb__v-list_column column-activity-src"><div class="activity-icon wb__icon wb__icon_xs ').x(e.get(["isDevice"],!1),e,{block:r},{}).w(" ").x(e.get(["isBrowser"],!1),e,{block:s},{}).w('"></div><div class="title">').f(e.get(["name"],!1),e,"h").w('</div></div><div class="wb__v-list_column column-date"><span class="date">').f(e.get(["date"],!1),e,"h",["datetime"]).w('</span></div><div class="wb__v-list_column column-ip-place"><span class="ip-place">').f(e.get(["ipAddress"],!1),e,"h").w("</span></div></div></li>")}function r(t,e){return t.w("wb__icon_type_mobile-app-black")}function s(t,e){return t.w("wb__icon_type_web-black")}t.register("templates/settings/audit-logins",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/audit-logins",t,e)};i.templateName="templates/settings/audit-logins",t.exports=i},function(t,e,n){var o=n(372);!function(t){t.register("templates/settings/contact-info-form",n);var e={"section-toggle":p,"editable-field":m,"collection-field":g,"input-field":k,"static-field":x};function n(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form contact-info-form" autocomplete="off"><div class="save-status hidden"/>').b(n.getBlock("descriptionBefore"),n,{},{}).w('<div class="sections">').s(n.get(["sections"],!1),n,{block:o},{}).w("</div>").b(n.getBlock("descriptionAfter"),n,{},{}).nx(n.get(["isFormReadOnly"],!1),n,{block:l},{}).w("</form>")}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="section-title h-small">').f(n.get(["title"],!1),n,"h").w('</div><div class="contact-info-section" data-section-id="').f(n.get(["id"],!1),n,"h").w('">').x(n.get(["isEmpty"],!1),n,{block:i},{}).w('<div class="contact-info-section-wrapper">').x(n.getPath(!0,["optionalOverrideOf"]),n,{block:r},{}).w('<div class="section-fields-wrapper" ').x(n.get(["isInherited"],!1),n,{block:s},{}).w(">").s(n.get(["fields"],!1),n,{block:a},{}).w("</div></div></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="empty-section">&ndash;</div>')}function r(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("section-toggle"),n,{},{})}function s(t,n){return n=n.shiftBlocks(e),t.w('style="display: none"')}function a(t,n){return n=n.shiftBlocks(e),t.nx(n.get(["readOnly"],!1),n,{else:c,block:u},{})}function c(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("static-field"),n,{},{})}function u(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("editable-field"),n,{},{})}function l(t,n){return n=n.shiftBlocks(e),t.w('<button type="submit" class="save wb-button">').h("_",n,{block:d},{},"h").w("</button>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Save")}function p(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper static"><div class="field-caption">').h("_",n,{block:h},{},"h").w('</div><div class="control-container"><div class="switch-wrap"><input class="toggle-section-checkbox" type="checkbox" ').x(n.getPath(!0,["isInherited"]),n,{block:f},{}).w(" /></div></div></div>")}function h(t,n){return n=n.shiftBlocks(e),t.w("Same as main address")}function f(t,n){return n=n.shiftBlocks(e),t.w("checked")}function m(t,n){return n=n.shiftBlocks(e),t.x(n.get(["collection"],!1),n,{else:y,block:_},{})}function y(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("input-field"),n,{},{})}function _(t,n){return n=n.shiftBlocks(e),t.b(n.getBlock("collection-field"),n,{},{})}function g(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').f(n.get(["title"],!1),n,"h").w('</div><div class="control-container"><select ').x(n.get(["required"],!1),n,{block:v},{}).w(" ").x(n.get(["allowSearch"],!1),n,{block:w},{}).w(' name="').f(n.get(["id"],!1),n,"h").w('">').s(n.get(["items"],!1),n,{block:b},{}).w("</select></div></div>")}function v(t,n){return n=n.shiftBlocks(e),t.w("required")}function w(t,n){return n=n.shiftBlocks(e),t.w('data-search="true"')}function b(t,n){return n=n.shiftBlocks(e),t.w('<option value="').f(n.get(["id"],!1),n,"h").w('">').f(n.get(["name"],!1),n,"h").w("</option>")}function k(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper"><div class="field-caption">').f(n.get(["title"],!1),n,"h").w('</div><div class="control-container"><input type="').f(n.get(["htmlInputType"],!1),n,"h").w('" ').x(n.get(["required"],!1),n,{block:B},{}).w(' name="').f(n.get(["id"],!1),n,"h").w('"data-mask="').f(n.get(["inputType"],!1),n,"h").w('"class="').f(n.get(["inputType"],!1),n,"h").w(" ").s(n.get(["className"],!1),n,{block:C},{}).w('"').s(n.get(["validationAttributes"],!1),n,{block:S},{}).x(n.get(["autocomplete"],!1),n,{block:P},{}).w("/></div></div>")}function B(t,n){return n=n.shiftBlocks(e),t.w("required")}function C(t,n){return n=n.shiftBlocks(e),t.f(n.getPath(!0,[]),n,"h")}function S(t,n){return n=n.shiftBlocks(e),t.f(n.get(["name"],!1),n,"h").w('="').f(n.get(["value"],!1),n,"h").w('"')}function P(t,n){return n=n.shiftBlocks(e),t.w('autocomplete="on" ')}function x(t,n){return n=n.shiftBlocks(e),t.w('<div class="field-wrapper static"><div class="field-caption">').f(n.get(["title"],!1),n,"h").w('</div><div class="control-container"><div class="static-value" name="').f(n.get(["id"],!1),n,"h").w('"></div></div></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,f.__dustBody=!0,m.__dustBody=!0,y.__dustBody=!0,_.__dustBody=!0,g.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,b.__dustBody=!0,k.__dustBody=!0,B.__dustBody=!0,C.__dustBody=!0,S.__dustBody=!0,P.__dustBody=!0,x.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/contact-info-form",t,e)};i.templateName="templates/settings/contact-info-form",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/settings/contact-info-page",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__contact-info"></div>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/contact-info-page",t,e)};i.templateName="templates/settings/contact-info-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/settings/notifications-page",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__notifications"><form><div class="notifications-settings-wrapper"></div>').x(n.get(["isReadOnlyForm"],!1),n,{block:i},{}).w("</form></div>")}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="button-group"><button type="submit" class="wb-button">').h("_",n,{block:r},{},"h").w("</button></div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Save changes")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/notifications-page",t,e)};i.templateName="templates/settings/notifications-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.x(e.get(["isExists"],!1),e,{block:n},{})}function n(t,e){return t.w('<ul class="wb__v-list security-settings-list otp-receipt"><li class="wb__v-list_title">').h("_",e,{block:o},{},"h").w("</li>").s(e.get(["otpReceipt"],!1),e,{block:i},{}).w("</ul>")}function o(t,e){return t.w("Valid check with passwords")}function i(t,e){return t.w('<li class="wb__v-list_item-wrapper"><div class="wb__v-list_item wb__v-list_item-multiline"><div class="wb__v-list_column column-check"><span class="title">').h("_",e,{block:r},{},"h").w(" ").f(e.get(["chequeNumber"],!1),e,"h").w('</span></div><div class="wb__v-list_column column-date"><span class="date">    ').f(e.getPath(!0,["createdAt"]),e,"h",["date"]).w('</span></div><div class="wb__v-list_column column-action"><span class="action action_delete">').h("_",e,{block:s},{},"h").w("</span></div></div></li>")}function r(t,e){return t.w("Check №")}function s(t,e){return t.w("Delete")}t.register("templates/settings/otp-receipt",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/otp-receipt",t,e)};i.templateName="templates/settings/otp-receipt",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.h("gt",e,{block:n},{key:e.getPath(!1,["personalizedDevices","length"]),value:0},"h")}function n(t,e){return t.w('<ul class="wb__v-list security-settings-list personalized-devices"><li class="wb__v-list_title">').h("_",e,{block:o},{},"h").w("</li>").s(e.get(["personalizedDevices"],!1),e,{block:i},{}).w("</ul>")}function o(t,e){return t.w("My devices with access code")}function i(t,e){return t.w('<li class="wb__v-list_item-wrapper personalized-device-item" data-id=\'').f(e.get(["id"],!1),e,"h").w('\'><div class="wb__v-list_item wb__v-list_item-multiline"><div class="wb__v-list_column column-device"><span class="wb__icon wb__icon_xs wb__icon_type_edit-light title">').f(e.get(["name"],!1),e,"h").w('</span></div><div class="wb__v-list_column column-date"><span class="date">    ').f(e.get(["personalizedAt"],!1),e,"h",["date"]).w('</span></div><div class="wb__v-list_column column-action"><span class="action action_delete">').h("_",e,{block:r},{},"h").w('</span></div></div><div class="actions-panel"></div></li>')}function r(t,e){return t.w("Delete")}t.register("templates/settings/personalized-devices",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/personalized-devices",t,e)};i.templateName="templates/settings/personalized-devices",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.w('<form class="inline-edit-panel ui-front personalized-device-edit-panel"><button type="button" class="cancel"><span class="icon-button icon-cancel invert"></span></button><div class="input-wrapper"><input type="text" name="personalizedDeviceName" class="personalized-device-name" value="').f(e.get(["name"],!1),e,"h").w('" maxlength="35"/></div><button type="button" class="save"><span class="icon-button icon-ok invert"></span></button></form>')}t.register("templates/settings/personalized-devices-edit",e),e.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/personalized-devices-edit",t,e)};i.templateName="templates/settings/personalized-devices-edit",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/settings/security-settings-page",n);var e={content:o};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__security-settings"><div class="personalaized-devices"></div><div class="otp-receipt"></div><div class="audit-logins"></div><div>')}n.__dustBody=!0,o.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/security-settings-page",t,e)};i.templateName="templates/settings/security-settings-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/settings/two-factor-auth-management-page",n);var e={title:o,content:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__two-factor-auth-management"><p>').h("_",n,{block:r},{},"h").w("</p>").nx(n.get(["twoFactorAvailable"],!1),n,{else:s,block:l},{}).w("</div>")}function r(t,n){return n=n.shiftBlocks(e),t.w("Two factor authentication management description [settings]")}function s(t,n){return n=n.shiftBlocks(e),t.w('<form class="wb-form"><div class="field-wrapper"><div class="field-caption">').h("_",n,{block:a},{},"h").w('</div><div class="control-container"><div class="switch-wrap"><input type="checkbox" name="twoFactorAuthEnabled" ').x(n.get(["twoFactorEnabled"],!1),n,{block:c},{}).w(" ").nx(n.get(["twoFactorManagementAllowed"],!1),n,{block:u},{}).w(" /></div></div></div></form>")}function a(t,n){return n=n.shiftBlocks(e),t.w("Two factor auth enabled")}function c(t,n){return n=n.shiftBlocks(e),t.w("checked")}function u(t,n){return n=n.shiftBlocks(e),t.w("disabled")}function l(t,n){return n=n.shiftBlocks(e),t.w("<p>").h("_",n,{block:d},{},"h").w("</p>")}function d(t,n){return n=n.shiftBlocks(e),t.w("Unavailable two factor authentication management description [settings]")}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0}(o);var i=function(t,e){o.render("templates/settings/two-factor-auth-management-page",t,e)};i.templateName="templates/settings/two-factor-auth-management-page",t.exports=i},function(t,e,n){var o=n(372);n(376);!function(t){t.register("templates/style-test-page",n);var e={title:o,content:i};function n(t,n){return n=n.shiftBlocks(e),t.p("templates/common/page",n,n,{})}function o(t,n){return n=n.shiftBlocks(e),t}function i(t,n){return n=n.shiftBlocks(e),t.w('<div class="block__test"><div class="wb-tabs"><ul><li><a href="#controls"><span>Controls</span></a></li><li><a href="#typography"><span>Typography</span></a></li><li><a href="#misc"><span>Misc</span></a></li><li><a href="#form"><span>Sample form</span></a></li><li><a href="#components"><span>Components</span></a></li></ul><div id="controls"><div class="input-wrapper control-xs"><input id="search-compact" type="text" class="search-input"/></div><div class="input-wrapper control-xl"><input id="search-full" type="text" class="search-input" placeholder="Full-size search field"/></div><div class="input-wrapper control-xs"><input type="text" value="Regular input"/></div><div class="select-wrapper"><select class="control-s simple-select"><option value="1">Item 1</option><option value="2">Item 2</option><option value="3">Item 3</option><option value="4">Item 4</option></select></div><div class="input-wrapper has-datepicker control-m"><input type="text" /></div><div class="select-wrapper"><select class="control-l select-with-search"><option value="1">Item 1</option><option value="2">Item 2</option><option value="3">Item 3</option><option value="4">Item 4</option></select></div><div class="contract-select control-xl"></div><div class="textarea-wrapper"><textarea>Simple textarea</textarea></div><div class="simple-checkbox"></div><br/><div class="labeled-checkbox"></div><br/><div class="switch-wrapper"><input type="checkbox" class="switch"/></div><div class="accordion-wrapper"><div class="accordion"><h4 class="accordion-title">Accordion panel</h4><div class="accordion-content">Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer ut neque.Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh.Donec suscipit eros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada.Vestibulum a velit eu ante scelerisque vulputate.</div></div></div><div class="accordion-wrapper"><div class="info-block"><h4>Help panel</h4><div><p>This text might be of some help</p></div></div></div><div class="buttons-wrapper"><button class="wb-button">Button</button><button class="wb-button" disabled>Disabled button</button><button class="wb-button icon-ok"></button><button class="wb-button icon-ok" disabled></button><button class="link-button">Link button</button><a href="javascript:void(0)" class="link-button">&lt;a&gt; link button</a></div></div><div id="typography"><div class="h-small">Small heading</div><div class="error-message">Error message</div><div class="hint">Hint message</div><div class="warning">Warning message</div><a href="javascript:void(0)">Simple link</a></div><div id="misc"><button class="wb-button button-error-dialog">Error dialog</button><button class="wb-button button-uncloseable-error-dialog">Uncloseable error dialog</button><div class="cards-wrapper">').s(n.get(["cardsSet"],!1),n,{block:r},{}).w('</div></div><div id="form"><div class="form-container"></div></div><div id="components"><h1>Lists</h1><ul class="wb__v-list"><li class="wb__v-list_title">Vertical list title</li><li class="wb__v-list_item-wrapper"><div class="wb__v-list_item wb__v-list_item-oneline"><div class="wb__v-list_column">Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example.</div><div class="wb__v-list_column">Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example. Oneline item example.</div></div></li><li class="wb__v-list_item-wrapper"><div class="wb__v-list_item wb__v-list_item-multiline"><div class="wb__v-list_column">Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example.</div><div class="wb__v-list_column">Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example. Multiline item example.</div></div></li></ul><h1>Icons</h1><i class="wb__icon wb__icon_xs wb__icon_type_mobile-app-light"></i><i class="wb__icon wb__icon_xs wb__icon_type_mobile-app-black"></i><i class="wb__icon wb__icon_xs wb__icon_type_edit-light"></i><i class="wb__icon wb__icon_xs wb__icon_type_web-black"></i></div></div></div>')}function r(t,n){return n=n.shiftBlocks(e),t.w('<div class="payment-systems"><div class="status">').f(n.get(["status"],!1),n,"h").w("</div>").s(n.getPath(!0,["paymentSystems"]),n,{block:s},{}).w("</div>")}function s(t,n){return n=n.shiftBlocks(e),t.w('<div title="Sample ').f(n.get(["status"],!1),n,"h").w(" ").f(n.getPath(!0,[]),n,"h").w('" class="card status-').f(n.get(["status"],!1),n,"h").w(" color-blue icon-").f(n.getPath(!0,[]),n,"h").w('"><span class="card-number">•123</span></div>')}n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0}(o);var i=function(t,e){o.render("templates/style-test-page",t,e)};i.templateName="templates/style-test-page",t.exports=i},function(t,e,n){var o=n(372);!function(t){function e(t,e){return t.s(e.get(["collection"],!1),e,{block:n},{})}function n(t,e){return t.w('<li class="menu-item"><a href="').f(e.get(["id"],!1),e,"h",["menuUrl"]).w('" class="submenu-link ').x(e.get(["isActive"],!1),e,{else:o,block:a},{}).w('">').f(e.get(["name"],!1),e,"h").w("</a></li>")}function o(t,e){return t.h("eq",e,{block:i},{key:r,value:s},"h")}function i(t,e){return t.w("active")}function r(t,e){return t.f(e.get(["id"],!1),e,"h",["menuUrl"])}function s(t,e){return t.f(e.get(["currentPath"],!1),e,"h")}function a(t,e){return t.w("active")}t.register("templates/submenu-switch",e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,i.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0}(o);var i=function(t,e){o.render("templates/submenu-switch",t,e)};i.templateName="templates/submenu-switch",t.exports=i},function(t,e,n){(function(o,i,r){var s;void 0===(s=function(t){var e,s,a,c;return n(40),a=n(136),s=n(405),c=n(402),n(406),e=n(911),o.extend({},e,{modelBinderOptions:{changeTriggers:{"input, select, textarea":"change"}},bindings:{},formSelector:"form:eq(0)",attrsToResetOnError:["password","otpPassword","captcha"],processing:!1,rendering:!1,initForm:function(){var t;return this.initErrorHandlerMixin(),console.assert(this.model,"FormMixin.model is required"),null==this.events&&(this.events={}),o.extend(this.events,{submit:"handleSubmit"}),this.delegateEvents(),this.modelBinder=new i.ModelBinder,this.on("render.complete",(t=this,function(e){return t.initFormMixin(e)})),this.on("form.ready",function(t){return function(){return t.toggleSubmit(!1)}}(this)),this.on("remove",function(t){return function(){if(t.modelBinder)return t.modelBinder.unbind(),t.modelBinder._rootEl=null,t.modelBinder=null}}(this))},initFormMixin:function(t){var e;return this.$form&&this.$form.parent().length||(this.$form=this.$(this.formSelector)),console.assert(this.$form.length,"Form element not found in page"),this.initValidation(),this.bindModel(),c.applyMasks(this.$el),this.$form.one("change",":input",(e=this,function(){return e.validateAutofilledInputs()})),(null!=t?t.formNotReady:void 0)?this.toggleSubmit(!0):this.markFormAsReady()},markFormAsReady:function(){return this.formReady=!0,this.trigger("form.ready"),this.$form.addClass("form-ready")},updateBindings:function(){return this.readUiOnUpdate&&this.updateModel(),this.bindModel()},getBindings:function(){return this.bindings},submitAction:function(){return this.model.save()},onSubmitError:function(t){var e;return e=JSON.parse(t.responseText),412===t.status&&e._fieldErrors?(this.showValidationErrors(),!0):this.handleXhrError(t)},getValidationOptions:function(){return{}},bindModel:function(){var t,e;t=this.getNormalizedBindings(this.getBindings());try{return this.modelBinder.bind(this.model,this.$form,t,this.modelBinderOptions),this.model.trigger("model.binded")}catch(n){return e=n,a.error(e.toString(),"Bindings:",t),this.showError("Form initialization error"),this.$form.find(":input").addClass("ui-disabled")}},getNormalizedBindings:function(t){var e,n;for(e in t=o.clone(t))n=t[e],o.isObject(n)||(t[e]={selector:n,converter:s.defaultConverter});return o.isEmpty(t)?(console.warn("No bindings found"),{}):t},formIsValid:function(){return this.$form.valid()},handleSubmit:function(t){if(t.preventDefault(),!this.processing&&t.target===this.$form[0]&&this.formReady){if(this.processing=!0,this.applyChanges(),this.clearMessages(),this.$form.find(":focus").blur(),this.formIsValid())return this.beforeSubmit&&this.beforeSubmit(),this.submit();this.processing=!1}},applyChanges:function(){return this.$form.find(":input:not(:radio), :input:radio:checked").trigger("change")},shouldKeepAttrs:function(t){return 401===t.status&&"confirmationRequired"===this.model.get("_status")},isFatalXhrError:function(t){var e,n;return n=JSON.parse(t.responseText),412===t.status&&"ACCOUNT_PERMANENTLY_BLOCKED"===(null!=n&&null!=(e=n._error)?e.code:void 0)},submit:function(t){var e,n;return null==t&&(t={}),t.requestOtpResend&&this.model.setResendOtpFlag(),(e=this.submitAction(t))?(t.noLoadingIndicator||this.showFormLoadingIndicator(),e.fail((n=this,function(e){return e.errorHandled=!0,n.shouldKeepAttrs(e)||n.resetAttrsOnError(),o.defer((function(){if(n.isFatalXhrError(e)||!n.onSubmitError(e))return e.errorHandled=!1,window.app.handleAjaxError(e,t)}))})).done(function(t){return function(e){return o.defer((function(){return t.onSubmitSuccess(e),t.trigger("submit.success")}))}}(this)).always(function(t){return function(){return t.hideFormLoadingIndicator(),t.processing=!1}}(this))):this.processing=!1},showFormLoadingIndicator:function(){return console.error("FormMixin.showFormLoadingIndicator must be implemented")},hideFormLoadingIndicator:function(){return console.error("FormMixin.hideFormLoadingIndicator must be implemented")},resetAttrsOnError:function(){var t,e,n,o,i;for(i=[],e=0,n=(o=this.attrsToResetOnError).length;e<n;e++)t=o[e],this.model.get(t)?i.push(this.model.unset(t)):i.push(void 0);return i},getAttrInput:function(t){var e,n;if(e=this.modelBinder._attributeBindings[t])return n=null,o.find(e.elementBindings,(function(t){return n=o.find(t.boundEls,(function(t){return r(t).is(":input")}))})),n},defaultValidationOptions:{errorPlacement:function(t,e){var n;return(n=r(e).closest(".ui-field-contain, .field-contain")).length?t.appendTo(n):t.insertAfter(r(e).parent())}},initValidation:function(){var t;return t=o.extend({},this.defaultValidationOptions,this.getValidationOptions()),this.validator=this.$form.validate(t)},isValid:function(){return o.all(this.$form.find(":required"),(function(t){return!o.isEmpty(r(t).val())&&!r(t).hasClass("error")}))},showValidationErrors:function(){var t,e,n;return t={},o.each(this.model.get("_fieldErrors"),(n=this,function(e,o){var i;if(i=n.getAttrInput(o))return t[r(i).attr("name")]=e.join(".<br/>")})),o.isEmpty(t)?(e=this.errorMessageFor(this.model.get("_error")),this.showError(e)):this.validator.showErrors(t)},validateAutofilledInputs:function(){return this.$(":input").each((t=this,function(e,n){var i;if(("text"===(i=n.type)||"number"===i||"tel"===i||"url"===i||"email"===i||"password"===i)&&n.value!==n.defaultValue&&!o.isEmpty(n.value))return t.validator.element(n)}));var t},getInvalidElementsNames:function(){return Object.keys(this.validator.errorMap)},validateElementsWithNames:function(t){return t.forEach((e=this,function(t){var n;if(n=e.validator.findByName(t))return e.validator.element(n)}));var e},toggleSubmit:function(){throw new Error("Abstract method should be overriden")},disableForm:function(t){return null==t&&(t=!0),this.$form.find(":input").prop("disabled",t).filter("select").trigger("chosen:updated")}})}.call(e,n,e,t))||(t.exports=s)}).call(this,n(11),n(384),n(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a;return a=o(386),r=o(528),n=o(529),{AddAuthDialog:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="add-auth-dialog",o.prototype.id="add-auth-dialog",o.prototype.requiredOptions=["model","submitAction"],o.prototype.allowImplicitClose=!1,o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.$el.empty().show(),this.on("cancel",(t=this,function(){return t.hideLoadingIndicator(),t.resetModel()}));var t},o.prototype.getLoadingIndicator=function(){return i('<div class="wb-spinner-wrapper"/>')},o.prototype.getValidationOptions=function(){return{errorPlacement:(t=this,function(e){return t.showError(e.text())}),showErrors:function(){var t,e;return e=Boolean(this.numberOfInvalids()),t=i(this.currentForm).closest(".add-auth-dialog").find("button.proceed"),e?t.attr("disabled","disabled"):t.removeAttr("disabled"),t.toggleClass("inactive",e),this.defaultShowErrors()},highlight:function(t,e,n){return i(t).removeClass(n).addClass(e)},unhighlight:function(t,e,n){return i(t).removeClass(e).addClass(n)}};var t},o.prototype.initializeChildViews=function(){var t;return(this.model.get("confirmation.challenge")?new n({el:this.$(".control-container"),model:this.model,onOtpResend:(t=this,function(){return t.proceedAction({requestOtpResend:!0})})}):new r({el:this.$(".select-wrapper"),model:this.model})).show()},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.model.get("confirmation.challenge")||this._getButton(".proceed").focus(),this.$form=this.$("form"),this.initializeChildViews().then((t=this,function(){var e;return e=t.$form.validate(t.getValidationOptions()),t.$form.on("submit",(function(n){if(n.preventDefault(),n.stopPropagation(),!t.processing)return t.$form.find(":input").trigger("change"),e.form()?t.proceedAction():t.hideLoadingIndicator()}))}));var t},o.prototype.resetModel=function(){return this.model.unset("confirmation"),this.model.unset("_status"),this.model.unset("_error")},o.prototype.dialogOptions=function(){return{title:t("Confirm operation"),classes:{"ui-dialog":"add-auth-dialog"},closeOnEscape:!1,buttons:[this.cancelButtonOptions(),this.proceedButtonOptions()]}},o.prototype.proceedAction=function(t){if(!this.processing)return this.processing=!0,this.showLoadingIndicator(),this.applyLoadingStateToButton(this._getButton(".proceed")),this.submitAction(t)},o.prototype.showError=function(t){var e,n;return(e=this.$(".error-message")).length||(e=i('<div class="error-message hidden"></div>'),this.$(".field-wrapper").after(e)),e.text(t).slideDown((n=this,function(){return n.$el.one("focus",":input",(function(){return e.slideUp()}))}))},o.prototype.cancelButtonOptions=function(){return{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})};var e},o.prototype.proceedButtonOptions=function(){return{text:t("Proceed"),class:"wb-button proceed",click:(e=this,function(t){if(!e.processing)return e.$form.submit()})};var e},o.prototype.context=function(){return this.model.get("confirmation")},o}(a)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(i=function(t){var e,i,s,c,u;return n(40),c=n(377),i=(u=n(375)).BaseModel,e=u.BaseCollection,(s={}).CountryItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.initialize=function(t){var e;if(!o.isEmpty(e=c.getCountryName(this.id)))return this.set("name",e)},e}(i),s.CountriesList=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.model=s.CountryItem,e.prototype.url=function(){throw new Error("Endpoint for countries list is not defined")},e.prototype.comparator=function(t,e){return(t.get("name")||"").localeCompare(e.get("name")||"")},e.prototype.blacklist=["??","RS","UM","QZ"],e.prototype.parse=function(t){var n,i;return n=e.__super__.parse.apply(this,arguments),o.reject(n,(i=this,function(t){var e;return e=t.id,a.call(i.blacklist,e)>=0}))},e}(e),s}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A;return o(419),b=o(372),P=o(96),A=o(40),B=o(377),S=o(402),v=(x=o(374)).TemplateView,d=x.CollectionView,c=o(434),h=o(429).ContractSelectView,o(423),w=o(377),l=o(415).Checkbox,f=o(450).DepositProduct,T=o(397),_=T.IntraBankBeneficiary,s=T.CardDestination,C=o(136),y=o(786).default,g=o(920).default,m=o(787).default,k={FieldView:y,MapFieldView:g,DynamicFieldView:m},null==A.BIN_LENGTH&&(A.BIN_LENGTH=6),k.AmountFieldView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="form-fields/amount",n.prototype.events={"keypress :input":"validateInput","paste :input":function(t){return w.sanitizePastedAmount(t)}},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),this.formMeta=this.options.formMeta,console.assert(this.formMeta,"formMeta option is required"),this.dataModel=this.options.dataModel,console.assert(this.dataModel,"dataModel option is required"),this.amountField=this.model,this.currencyField=this.amountField.getMyCurrencyField(),console.assert(this.currencyField,"field with role=amount.currency not found in formMeta"),console.assert(!(this.currencyField.isEditableCatalog()&&!1===this.amountField.get("editable")),"Not editable amount and editable currency is incorrect"),this.formMeta.isCpService())return console.assert(this.currencyField.isCatalog(),"Currency field in CP service must have a catalog (handbook)")},n.prototype.detectTemplate=function(){return this.template},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),this.listenToAmountChange(),this.currencyField.isEditableCatalog()?(this.currencySelectView=new k.CurrencySelectView({el:this.$(".currency"),model:this.currencyField,collection:this.currencyField.catalog,name:this.currencyField.get("name"),inputName:this.currencyField.get("attr"),valueId:this.currencyField.get("value.id"),dataIsReady:!!this.currencyField.get("dataSource.values")}),this.currencySelectView.show().done((t=this,function(){return t.trigger("render.complete")})),this.listenToOnce(this.currencySelectView,"ready",function(t){return function(){return t.trigger("selectView.ready")}}(this)),this.listenTo(this.currencySelectView,"refresh",function(t){return function(){return t.trigger("selectView.refresh")}}(this)),this.listenToOnce(this.currencySelectView.collection,"reset",function(t){return function(){return t.currencySelectView.render()}}(this))):this.currencyField.isRemoteCatalog()?this.listenToOnce(this.currencyField.catalog,"reset",function(t){return function(){return t.listenToCurrencyChange()}}(this)):this.listenToCurrencyChange(),!1},n.prototype.listenToAmountChange=function(){var t,e;return e=this,t=function(){return 1*(e.dataModel.get(e.amountField.get("attr"))||0)},this.amount=t(),this.listenTo(this.dataModel,"change:"+this.amountField.get("attr"),function(e){return function(){if(i.isNumber(t())&&!i.isEqual(parseFloat(t()),parseFloat(e.amount)))return e.amount=t(),e.updateAmount()}}(this))},n.prototype.listenToCurrencyChange=function(){return this.updateCurrency(),this.listenTo(this.dataModel,"change:"+this.currencyField.get("attr"),(t=this,function(){return t.updateCurrency()}));var t},n.prototype.updateCurrency=function(){if(this.currency&&this.$(".field-currency").removeClass(this.currency),this.currency=this.dataModel.get(this.currencyField.get("attr")),this.currency)return this.$(".field-currency").addClass(this.currency).html(t(this.currency))},n.prototype.updateAmount=function(){var t,e;if(this.amount)return this.model.get("editable")?((t=this.$("input[name='"+this.amountField.get("attr")+"']")).val(this.amount),this.amountField.has("inputType")?t.trigger("keyup"):void 0):(this.$(".static-value").html(this.getStaticAmount()),this.$el.addClass("highlight"),i.delay((e=this,function(){return e.$el.addClass("highlight-end").removeClass("highlight")}),1e3))},n.prototype.getStaticAmount=function(){var t,e;return t=this.currency||this.dataModel.get(this.currencyField.get("attr")),this.amountField.has("inputType")?(e=S.formatWithMask(this.amount,A.MASKS[this.amountField.get("inputType")]),b.filters.moneyRaw({value:e,currency:t})):b.filters.money({value:this.amount,currency:t})},n.prototype.validateInput=function(t){if(!B.checkNumberSymbol(t))return t.preventDefault()},n.prototype.context=function(){var t,e;return(t=n.__super__.context.apply(this,arguments)).currency=this.currencyField.viewContext(),t.value&&(null!=(e=t.currency.value)?e.id:void 0)&&(t.amountObj={value:t.value,currency:this.currencyField.get("value.id")}),t},n}(k.FieldView),k.ContractSelectFieldView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="form-fields/contract-select",n.prototype.className=function(){return n.__super__.className.apply(this,arguments)+" "+this.model.get("role")+"-role"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.showNewContractItem=this.options.showNewContractItem||!1,this.canAddExternalCard=this.model.externalCardAllowed()&&this.options.canAddExternalCard,this.canPayWithExternalCard=this.model.externalCardAllowed()&&this.options.canPayWithExternalCard},n.prototype.show=function(){return this.render().then((t=this,function(){var e,n,o;if(e=!1,!t.collection){if(!(o=t.model.get("dataSource.values")))throw new Error("FieldView.collection is required");t.collection=new c(o,{field:t.model}),e=!0}return t.createSelectView(e),n=new r.Deferred,t.selectView.once("render",(function(){return n.resolve()})),t.selectView.once("ready",(function(){return t.trigger("selectView.ready")})),t.selectView.on("refresh",(function(){return t.trigger("selectView.refresh")})),t.selectView.collection.once("reset",(function(){return t.selectView.render().then((function(){return t.trigger("selectView.ready")}))})),t.selectView.show(!1),t.once("selectView.ready",(function(){return t.onContractChange()})),t.listenTo(t.dataModel,"change:"+t.model.get("attr"),(function(){return t.onContractChange()})),t.trigger("show"),n.promise()}));var t},n.prototype.onContractChange=function(e){var n,o,i,s,a,c;if(this.dataModel.service&&(a=this.dataModel.getSource(),this.$(".external-card").toggle(!a),window.OW.features.ONLINE_DEPOSITS&&"transfer"===this.dataModel.service.get("type"))){switch(s=this.model.get("role")){case"source":n=a;break;case"destination":n=this.dataModel.getDestination()}if("deposit"===(null!=n?n.get("type"):void 0))return i=n.get("product.id"),(o=new f({id:i})).fetch().then((c=this,function(){var e,i,a;switch(s){case"source":i=n.get("deposit.withdrawal")?o.get("withdrawal"):t("Withdrawal not allowed");break;case"destination":i=n.get("deposit.topupAllowed")&&(a=c.getDepositTopupParams(n,o)).available?t("You can topup this deposit from %(min)s to %(max)s",{min:a.limits.min,max:a.limits.max}):t("Topup not allowed")}if(i)return(e=c.$(".hint")).length||(e=r('<div class="hint"></div>').appendTo(c.$(".control-container"))),e.html(i)}))}},n.prototype.getDepositTopupParams=function(t,e){var n,o,r,s,a,c;return o=t.get("currency"),n=1*t.get("balances.available.value"),r=i.first(e.get("currencies").filter((function(t){return t.code===o}))),s=i.first(e.get("topupAmount.currencies").filter((function(t){return t.code===o}))),c={available:!1,limits:{min:0,max:0}},r?(c.limits.min=r.minAmount,c.limits.max=r.maxAmount,n>0&&(s?(c.limits.min=s.minAmount,c.limits.max=s.maxAmount):console.warn("no topup amounts configured for product id =",e.id,"and currency =",o,"so product amounts was used"),a=Math.max(0,r.maxAmount-n),c.limits.max=Math.min(c.limits.max,a)),c.available=c.limits.max>0&&c.limits.max>=c.limits.min,c):(console.error("no product amounts configured for product id =",e.id,"and currency =",o),c)},n.prototype.createSelectView=function(t){return this.selectView=new p({el:this.$(".contract-select-wrapper"),collection:this.collection,required:!this.model.get("optional"),disabled:this.model.get("htmlAttrs.readonly"),inputName:this.model.get("attr"),showAllCardsItem:!1,showNewContractItem:this.showNewContractItem,canAddExternalCard:this.canAddExternalCard,canPayWithExternalCard:this.canPayWithExternalCard,dataModel:this.options.dataModel,dataIsReady:t,showBonusBalance:window.OW.features.BONUS_PAYMENT,emptyText:this.model.getEmptyMessage(),allowSearch:this.model.isSearchableCatalog()})},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{canAddExternalCard:this.canAddExternalCard})},n}(k.FieldView),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.show=function(){var t,e;return t=function(){switch(this.collection.state){case c.States.NEW:case c.States.AWAITING_PARAMS:return this.showLoading();case c.States.READY:return this.render();default:throw new Error("Unexpected collection state: "+this.collection.state)}}.call(this),this.collection.query&&this.listenTo(this.collection.query,"change",i.debounce((e=this,function(){return t.then((function(){return e.refresh()}))}),this.refreshDelay)),t},e.prototype.showLoading=function(){return this.render({context:{isLoading:!0}})},e.prototype.setReady=function(t){return this.$("select").data("ready",t)},e.prototype.refresh=function(){return this.collection.fetch({reset:!0}).then((t=this,function(){return t.render()})).then(function(t){return function(){return t.trigger("refresh"),t.setReady(!0),i.defer((function(){return t.$("select").change()}))}}(this));var t},e}(h),k.CollectionSelectFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/base",e.prototype.createSelectView=function(t){return this.selectView=new k.CatalogSelectView({el:this.$el.find(".control-container"),model:this.model,collection:this.collection,inputName:this.model.get("attr"),valueId:this.model.get("value.id"),dataIsReady:t}),i.extend(this.selectView,this.getSelectViewAttrs())},e.prototype.getSelectViewAttrs=function(){return{templateContext:i.extend(this.model.viewContext(),{label:this.model.get("name"),name:this.model.get("attr")})}},e}(k.ContractSelectFieldView),k.CollectionSelectView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.mixins=[d],n.prototype.template="form-fields/collection-select",n.prototype.allowEmptyDataSource=!1,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenToOnce(this.collection,"reset",(t=this,function(){return t.once("render",(function(){return t.trigger("ready"),t.listenTo(t.collection,"reset",(function(){return t.render()}))}))}));var t},n.prototype.onRender=function(){var e;if((e=this.$("select")).chosen({width:"100%",disable_search:!this.model.isSearchableCatalog(),placeholder_text_single:t("Select value"),no_results_text:t("No results match:")}),e.val())return i.defer((function(){return e.trigger("change")}))},n.prototype.setReady=function(t){return this.$("select").data("ready",t)},n.prototype.loadDataAndRender=function(){return n.__super__.loadDataAndRender.apply(this,arguments).done((t=this,function(){return t.setReady(!0)}));var t},n.prototype.showLoadingIndicator=function(){return this.render({context:{loading:!0}}).done((t=this,function(){return t.setReady(!1)}));var t},n.prototype.showError=function(t){return this.render({context:{inactive:!0,error:{message:t}}})},n.prototype.refresh=function(){return this.showLoadingIndicator(),this.collection.fetch({reset:!0}).then((t=this,function(){return t.render()})).then(function(t){return function(){return t.trigger("refresh"),t.setReady(!0),i.defer((function(){return t.$("select").change()}))}}(this));var t},n.prototype.loadAndRender=function(){return this.setReady(!1),this.collection.fetch({reset:!0}).then((t=this,function(){return t.render()})).then(function(t){return function(){return t.setReady(!0)}}(this));var t},n.prototype.show=function(t){return null==t&&(t=!0),this.showLoadingIndicator().done((e=this,function(){if(t)return e.loadAndRender()}));var e},n.prototype.context=function(){var t,e;return t={inputName:this.options.inputName,collection:null!=(e=this.collection)?e.viewContext():void 0,extraOptions:this.options.extraOptions,inactive:0===this.collection.length,disabled:this.model.get("htmlAttrs.readonly")},i.isUndefined(this.options.name)||(t.name=this.options.name),i.isUndefined(this.options.noDefaultOption)||(t.noDefaultOption=this.options.noDefaultOption),t},n}(v),k.CatalogSelectView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.refreshDelay=300,e.prototype.initialize=function(){return console.assert(this.collection.state,"Catalog must have state"),e.__super__.initialize.apply(this,arguments)},e.prototype.show=function(){var t,n;switch(this.collection.state){case c.States.NEW:t=e.__super__.show.apply(this,arguments);break;case c.States.AWAITING_PARAMS:t=this.showInactive();break;case c.States.READY:t=this.render();break;default:throw new Error("Unexpected collection state: "+this.collection.state)}return this.collection.query&&this.listenToOnce(this.collection,"state:ready",(n=this,function(){return n.listenTo(n.collection.query,"change",i.debounce((function(){return t.then((function(){return n.refresh()}))}),n.refreshDelay))})),t},e.prototype.showInactive=function(){return this.render({context:{inactive:!0}})},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{emptyMessage:this.model.get("emptyCatalogMessage")})},e}(k.CollectionSelectView),k.SwitchFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/switch",e.prototype.onRender=function(){var t;return this.$(".toggle-section-checkbox").switchButton({show_labels:!1}),this.model.get("additionalTitle")&&this.$(":input").on("change",(t=this,function(){var e;return e=t.model.get("additionalTitle")[t.model.get("converterMapping")[t.$("input").is(":checked")]],t.$(".switch-field-additional-title").html(e)})),e.__super__.onRender.apply(this,arguments)},e.prototype.context=function(){var t;return i.extend(e.__super__.context.apply(this,arguments),{active:"active"===this.model.get("value"),additionalTitle:null!=(t=this.model.get("additionalTitle"))?t[this.model.get("value")]:void 0})},e}(k.FieldView),k.CheckboxFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/checkbox",e.prototype.onRender=function(){var t;return this.model.get("additionalTitle")&&this.$(":input").on("change",(t=this,function(){var e;return e=t.model.get("additionalTitle")[t.model.get("converterMapping")[t.$("input").is(":checked")]],t.$("[data-js-desc]").html(e)})),e.__super__.onRender.apply(this,arguments)},e.prototype.context=function(){var t;return i.extend(e.__super__.context.apply(this,arguments),{active:!0===this.model.get("value"),additionalTitle:null!=(t=this.model.get("additionalTitle"))?t[this.model.get("value")]:void 0})},e}(k.FieldView),k.PaymentPeriodFieldView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="form-fields/payment-period",n.prototype.DEFAULT_PERIOD_DAY_VALUE=1,n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{periodDayName:this.model.getMyPeriodDayField().get("id")})},n.prototype.onRender=function(){var e,n,o;return this.$("select").chosen({width:"100%",disable_search:!0,placeholder_text_single:t("Select value")}),e=this.$("select[name='"+this.model.get("id")+"']"),n=null,e.on("change chosen:updated",(o=this,function(){var t,i,s,a,c,u;if(t=r(o.$el[0]).parents("form"),u=e.val(),n!==u)return n=u,"MONTHLY"===u?((null!=(i=t.data("validator"))?i.element(o.$(".weekly-control :input")):void 0)||(o.$(".weekly-control :input").val(o.DEFAULT_PERIOD_DAY_VALUE).trigger("change"),null!=(s=t.data("validator"))&&s.element(o.$(".weekly-control :input"))),o.$(".weekly-control").hide(),o.$(".monthly-control").show()):((null!=(a=t.data("validator"))?a.element(o.$(".monthly-control :input")):void 0)||(o.$(".monthly-control :input").val(o.DEFAULT_PERIOD_DAY_VALUE).trigger("change"),null!=(c=t.data("validator"))&&c.element(o.$(".monthly-control :input"))),o.$(".monthly-control").hide(),o.$(".weekly-control").show())})).trigger("change"),this.$(".weekly-control :input").on("change",(function(t){if("MONTHLY"===e.val())return t.preventDefault(),t.stopPropagation()})),this.trigger("ready")},n}(k.FieldView),k.CurrencySelectView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.allowEmptyDataSource=!0,e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{name:this.options.name,noDefaultOption:!0})},e}(k.CatalogSelectView),k.DateFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.setMinDate=function(t){return this.$("input").datepicker("option","minDate",t)},e.prototype.setMaxDate=function(t){return this.$("input").datepicker("option","maxDate",t)},e.prototype.onRender=function(){var t;switch(e.__super__.onRender.apply(this,arguments),t={dateFormat:"d MM yy",firstDay:1,buttonText:"↓",showOn:"both"},this.model.get("inputType")){case"DATE_FUTURE":t.minDate=new Date;break;case"DATE_PAST":t.maxDate=new Date}return this.$("input").datepicker(t)},e}(k.FieldView),k.GroupView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="common/empty",e.prototype.onRender=function(){return this.$el.attr("id",this.model.id)},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),this.model.viewContext())},e}(v),k.DateRangeView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className=(k.GroupView.prototype.className||"")+" date-range-group",e.prototype.requiredOptions=["dataModel","formMeta"],e.prototype.template="form-fields/date-range",e.prototype.getFieldContainer=function(){return this.$(".fields-container")},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.model.get(this.formMeta.fields.subtreeAttr).forEach((t=this,function(e){return t.dataModel.on("change:"+e.get("attr"),(function(n,o){var i,r,s;return i=(r=t.views)[0],s=r[1],"date.from"===e.get("role")?s.setMinDate(P(o).toDate()):i.setMaxDate(P(o).toDate())}))}));var t},e}(k.GroupView),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/beneficiaries-collection",e}(k.CatalogSelectView),k.InternationalDestinationFieldView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.template="form-fields/international-destination",o.prototype.requiredOptions=["model","dataModel","formMeta","collection"],o.prototype.initialize=function(){if(o.__super__.initialize.apply(this,arguments),this.beneficiaryField=this.model,this.destinationField=this.formMeta.getField({_filter:function(t){return t.isDestinationField()}}),this.newBeneficiaryAllowed=this.options.newBeneficiaryAllowed&&this.beneficiaryField.isExtendableCatalog(),this.isBeneficiaryMode=!!this.dataModel.get(this.beneficiaryField.get("attr")),this.newBeneficiaryAllowed)return this.dataModel.on("change:"+this.beneficiaryField.get("attr"),this.onBeneficiaryChange.bind(this))},o.prototype.createSelectView=function(e){var o;return this.newBeneficiaryAllowed&&(o={id:"new-beneficiary",name:t("New beneficiary")}),this.selectView=new n({el:this.$(".beneficiaries-list"),model:this.beneficiaryField,collection:this.collection,inputName:this.beneficiaryField.get("attr"),valueId:this.beneficiaryField.get("value.id"),dataIsReady:e,extraOptions:o}),i.extend(this.selectView,this.getSelectViewAttrs())},o.prototype.onBeneficiaryChange=function(){var t;return t="new-beneficiary"===this.dataModel.get(this.beneficiaryField.get("attr")),this.$(".new-beneficiary").toggle(t)},o.prototype.toggleBeneficiary=function(t){return this.dataModel.isBeneficiary=this.isBeneficiaryMode=t,this.$(".checkbox").toggleClass("checked",this.dataModel.isBeneficiary),this.$(".beneficiary").toggle(this.dataModel.isBeneficiary),this.$(".destination").toggle(!this.dataModel.isBeneficiary),this.trigger("mode.changed")},o.prototype.show=function(){return r.when(o.__super__.show.apply(this,arguments)).then((e=this,function(){var n,o;return o=new(e.destinationField.isCardNumberField()?k.CardNumberFieldView:k.FieldView)(i.extend({el:e.$(".destination"),model:e.destinationField},{dataModel:e.dataModel,formMeta:e.formMeta})).show(),n=new l({el:e.$(".international-transfer"),label:t("International transfer"),checked:e.isBeneficiaryMode,onChange:e.toggleBeneficiary.bind(e)}).show(),r.when(o,n)})).then(function(t){return function(){return t.toggleBeneficiary(t.isBeneficiaryMode)}}(this));var e},o}(k.CollectionSelectFieldView),k.TariffInfoView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/invoice-tariff-info",e.prototype.requiredOptions=["invoiceItem","invoicePayment"],e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.unit=this.invoicePayment.get(this.invoiceItem.getMeasurementUnitField().get("attr")),this.tariffUnit=this.invoicePayment.get(this.invoiceItem.getTariffUnitField().get("attr"))},e.prototype.context=function(){var t,n,o;return o=this.invoicePayment.getTariffs(this.invoiceItem),n={minTariff:{consumption:{value:(t=this.invoicePayment.getCurrentCalculation(this.invoiceItem)).minTariff,currency:this.unit},tariff:{value:o["Counter.MinTariff"],currency:this.tariffUnit}}},t.maxTariff&&(n.maxTariff={consumption:{value:t.maxTariff,currency:this.unit},tariff:{value:o["Counter.MaxTariff"],currency:this.tariffUnit}}),t.midTariff&&(n.midTariff={consumption:{value:t.midTariff,currency:this.unit},tariff:{value:o["Counter.MidTariff"],currency:this.tariffUnit}}),i.extend(e.__super__.context.apply(this,arguments),{tariffData:n})},e}(v),k.InvoiceItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/invoice-item",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.dataModel.on("calculation:"+this.model.id,(t=this,function(){return t.updateTariffInfo()}));var t},e.prototype.getFieldContainer=function(t){return t.isInvoiceItemAmountField()?this.$(".amount-field-wrapper"):t.isPreviousMeasurementField()?this.$(".prev-data"):t.isCurrentMeasurementField()?this.$(".current-data"):t.isInvoiceAmountField()?this.$(".add-amount-info"):this.$(".invoice-fields")},e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.updateTariffInfo()},e.prototype.updateTariffInfo=function(){if("Simple"!==this.model.getInvoiceItemType())return this.tariffInfoView?this.tariffInfoView.render():(this.tariffInfoView=new k.TariffInfoView({el:this.$(".tariff-details"),invoiceItem:this.model,invoicePayment:this.dataModel}),this.tariffInfoView.show())},e.prototype.getClassName=function(){switch(this.model.getInvoiceItemType()){case"VariableTariff":return"variable-tariff-item";case"FixedTariff":return"fixed-tariff-item";case"Simple":return"simple-item";default:return""}},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{className:this.getClassName()})},e}(k.FieldView),k.InvoiceItemAmountFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/invoice-item-amount",e.prototype.events=i.extend({},k.AmountFieldView.prototype.events,{"click .amount-value.edit":"enterEditMode","click .cancel-icon":"exitEditMode"}),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.invoiceItem=this.formMeta.getInvoiceItemField(this.model.get("parentGroupId")),this.editMode=this.invoiceItem.get("manualAmountEntry"),this.listenTo(this.dataModel,"change:"+this.amountField.get("attr"),(t=this,function(){if(!t.editMode)return t.updateAmount(!0)}));var t},e.prototype.enterEditMode=function(t){return t.preventDefault(),this.toggleEditMode(!0)},e.prototype.exitEditMode=function(t){return t.preventDefault(),this.toggleEditMode(!1)},e.prototype.toggleEditMode=function(t){var e;if(this.editMode!==t)return this.editMode=t,this.invoiceItem.set("manualAmountEntry",this.editMode),this.$(".invoice-item-amount").toggleClass("edit-mode",this.editMode),this.editMode&&((e=this.$(":input")).focus(),this.amountField.has("inputType")&&e.trigger("keyup")),this.updateAmount(!0)},e.prototype.updateAmount=function(t){var e;return e=t?this.dataModel.get(this.amountField.get("attr")):this.dataModel.getCurrentCalculation(this.invoiceItem).amount,e=Number(e),this.amount=e<0?0:e,this.$(".amount-value").html(this.getStaticAmount())},e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.updateAmount(!this.editMode),this.$(".invoice-item-amount").toggleClass("edit-mode",this.editMode)},e}(k.AmountFieldView),k.MeasurementFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/measurement-field",e.prototype.events=i.extend({},k.FieldView.prototype.events,{"keypress .measurement-value":"validateInput","paste .measurement-value":function(t){return w.sanitizePastedAmount(t)}}),e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),this.valueField=this.model,this.oppositeValueField=this.valueField.getOppositeMeasurementField(),this.dateField=this.valueField.getCurrentMeasurementDateField(),this.dateField&&(this.oppositeDateField=this.dateField.getOppositeMeasurementDateField()),this.unitField=this.valueField.getMeasurementUnitField(),this.dateField&&this.oppositeDateField&&this.dataModel.on("change:"+this.oppositeDateField.get("attr"),this.onBoundaryDateChange.bind(this)),this.oppositeValueField)return this.dataModel.on("change:"+this.oppositeValueField.get("attr"),this.onOppositeValueChange.bind(this))},e.prototype.onBoundaryDateChange=function(){var t;if(this.$dateField)return t=P(this.dataModel.get(this.oppositeDateField.get("attr"))).toDate(),"Counter.Date"===this.dateField.get("addData.INVOICE_PARAM_CODE")?this.$dateField.datepicker("option","minDate",t):this.$dateField.datepicker("option","maxDate",t)},e.prototype.onOppositeValueChange=function(){return this.$("[name='"+this.valueField.get("attr")+"']").trigger("focusout")},e.prototype.validateInput=function(t){if(!B.checkNumberSymbol(t))return t.preventDefault()},e.prototype.onRender=function(){var t;if(e.__super__.onRender.apply(this,arguments),null!=(t=this.dateField)?t.get("editable"):void 0)return(this.$dateField=this.$("[name='"+this.dateField.get("attr")+"']")).datepicker({maxDate:new Date,dateFormat:"d MM yy",firstDay:1}),this.onBoundaryDateChange()},e.prototype.context=function(){var t;return t=e.__super__.context.apply(this,arguments),this.oppositeValueField&&(t.oppositeValueField=this.oppositeValueField.viewContext({model:this.dataModel})),t.hasDateField=!!this.dateField,this.dateField&&(t.date=this.dateField.viewContext({model:this.dataModel})),t.unit=this.unitField.get("visible")?this.dataModel.get(this.unitField.get("attr")):"",t},e}(k.FieldView),k.InvoiceTotalAmountFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/invoice-total",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.dataModel.on("change:"+this.model.get("attr"),(t=this,function(){return t.render()}));var t},e.prototype.context=function(){var t;return(t=e.__super__.context.apply(this,arguments)).total={value:this.dataModel.get(this.amountField.get("attr")),currency:this.dataModel.get(this.currencyField.get("attr"))},t},e}(k.AmountFieldView),k.InvoiceAmountCorrectionFieldView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/invoice-amount-correction",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.invoiceItem=this.formMeta.getInvoiceItemField(this.model.get("parentGroupId")),this.listenTo(this.invoiceItem,"change:manualAmountEntry",(t=this,function(){return t.onManualAmountEntryChanged()}));var t},e.prototype.show=function(){return e.__super__.show.apply(this,arguments).then((t=this,function(){return t.onManualAmountEntryChanged()}));var t},e.prototype.onManualAmountEntryChanged=function(){var t;return(t=this.invoiceItem.get("manualAmountEntry"))&&this.invoiceItem.set("amountCorrectionApplied",!1),this.$el.toggle(!t)},e.prototype.onRender=function(){var t;return e.__super__.onRender.apply(this,arguments),t={value:this.dataModel.get(this.amountField.get("attr")),currency:this.dataModel.get(this.currencyField.get("attr"))},new l({el:this.$(".amount-correction"),model:this.invoiceItem,name:"amountCorrectionApplied",label:this.model.get("name")+" ("+b.filters.money(t)+")",checked:this.invoiceItem.get("amountCorrectionApplied")}).show()},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{showFieldLabel:!1})},e}(k.AmountFieldView),k.BalanceFieldView=function(e){function n(){return this.onCatalogAutoFlush=u(this.onCatalogAutoFlush,this),this.onCatalogSyncError=u(this.onCatalogSyncError,this),n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="form-fields/update-balance",n.prototype.events=i.extend({},k.AmountFieldView.prototype.events,{"click .do-update-balance":"doUpdateBalance"}),n.prototype.initialize=function(){var t,e,o,i,r,s,a;for(n.__super__.initialize.apply(this,arguments),this.updatableCatalogs={},a=[],o=0,i=(r=[this.amountField,this.currencyField]).length;o<i;o++)e=r[o],s=this.formMeta.fields.getByReference(e.get("reference")),this.updatableCatalogs[s.getAttrPath()]?a.push(void 0):(null!=s?s.isCatalog():void 0)?(t=s.catalog,this.updatableCatalogs[s.getAttrPath()]=t,t.disableAutoSync(),t.enableAutoReset(),t.reset(),this.listenTo(t,"request",this.showLoadingIndicator),this.listenTo(t,"syncError",this.onCatalogSyncError),this.listenTo(t,"sync",this.hideLoadingIndicator),a.push(this.listenTo(t,"autoReset",this.onCatalogAutoFlush))):a.push(void 0);return a},n.prototype.onCatalogSyncError=function(t,e,n){if(this.hideLoadingIndicator(),e.errorHandled=!0,400===e.status&&!JSON.parse(e.responseText).respText)return this.showBalanceRequestError()},n.prototype.onCatalogAutoFlush=function(){return this.$controlContainer.removeClass("error").removeClass("loading").children(".static-value").html(t("request balance"))},n.prototype.showBalanceRequestError=function(){return window.app.showErrorMessage(t("Balance request error"))},n.prototype.showLoadingIndicator=function(){return this.$controlContainer.removeClass("error").addClass("loading")},n.prototype.hideLoadingIndicator=function(){return this.$controlContainer.removeClass("loading")},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.$controlContainer=this.$(".control-container")},n.prototype.doUpdateBalance=function(t){var e,n,o,i;for(i in t.preventDefault(),r(":focus").blur(),window.app.clearMessages(),n=[],o=this.updatableCatalogs)e=o[i],n.push(e.manualFetch({reset:!0}));return r.when.apply(r,n)},n.prototype.renderBalance=function(){if(this.$controlContainer)return this.$(".static-value").html(b.filters.money({value:this.amount,currency:this.currency}))},n.prototype.updateAmount=function(){if(this.currency)return this.renderBalance()},n.prototype.updateCurrency=function(){return this.currency=this.dataModel.get(this.currencyField.get("attr")),this.renderBalance()},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{imagePath:A.IMAGE_PATH})},n}(k.AmountFieldView),k.CardNumberFieldView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="form-fields/card-number",n.prototype.events=i.extend({},k.FieldView.prototype.events,{"input input":"onCardNumberInput"}),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.cardInfoModel=new s,this.intraBankBeneficiary=new _},n.prototype.onDataChange=function(t){if(this.previousData!==t)return this.previousData=t,this.processCardInfo(t),this.processBeneficiaryInfo(t)},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.$cardNumberInput=this.$("input"),!window.OW.features._SHOW_CARD_INFO&&!this.model.isIntraBankBeneficiary()||(this.$container=this.$(".control-container"),this.$extraInfoEl=this.$(".extra-info"),window.OW.features._SHOW_CARD_INFO&&this.$cardNumberInput.addClass("payment-system-icon"),this.onDataChange(this.dataModel.get(this.model.get("attr"))),this.dataModel.on("change:"+this.model.get("attr"),(t=this,function(){return t.onDataChange(t.dataModel.get(t.model.get("attr")))})));var t},n.prototype.onCardNumberInput=function(){var t,e;return t=(null!=(e=this.$cardNumberInput.data("mask"))&&"function"==typeof e.getCleanVal?e.getCleanVal():void 0)||this.$cardNumberInput.val(),this.onDataChange(t)},n.prototype.processCardInfo=function(t){var e;if(null==t&&(t=""),window.OW.features._SHOW_CARD_INFO&&(this.clearPaymentSystemIcon(),this.clearCardExtraInfo(),!(t.length<A.BIN_LENGTH)))return e=t.slice(0,A.BIN_LENGTH),this.updateCardInfo(e)},n.prototype.updateCardInfo=function(t){return this.showLoadingIndicator(),this.cardInfoModel.fetchInfo(t).then((e=this,function(){if(e.showPaymentSystemIcon(),!e.model.isIntraBankBeneficiary())return e.showBankName()})).fail(function(t){return function(e){return t.onCardInfoFail(e)}}(this)).always(function(t){return function(){return t.hideLoadingIndicator()}}(this));var e},n.prototype.showPaymentSystemIcon=function(){var t;if(t=this.cardInfoModel.get("paymentSystem"))return this.$cardNumberInput.addClass(t)},n.prototype.showBankName=function(){var t;if(t=this.cardInfoModel.get("bank.name"))return this.showCardExtraInfo(t)},n.prototype.showCardExtraInfo=function(t){return this.$container.addClass("with-extra-info"),this.$extraInfoEl.text(t)},n.prototype.clearCardExtraInfo=function(){return this.$container.removeClass("with-extra-info"),this.$extraInfoEl.empty()},n.prototype.clearPaymentSystemIcon=function(){var t;return t=this.cardInfoModel.get("paymentSystem"),this.$cardNumberInput.removeClass(t)},n.prototype.onCardInfoFail=function(t){var e;return e=B.parseResponseSafe(t),C.error("Failed response for card info",e),t.errorHandled=!0},n.prototype.processBeneficiaryInfo=function(t){if(null==t&&(t=""),this.model.isIntraBankBeneficiary()&&(this.clearCardExtraInfo(),B.isValidCardNumber(t)))return this.updateBeneficiaryInfo(t)},n.prototype.updateBeneficiaryInfo=function(t){return this.showLoadingIndicator(),this.intraBankBeneficiary.fetchInfo(t).done((e=this,function(){return e.showCardExtraInfo(e.intraBankBeneficiary.get("displayName"))})).fail(function(t){return function(e){return t.onBeneficiaryInfoFail(e)}}(this)).always(function(t){return function(){return t.hideLoadingIndicator()}}(this));var e},n.prototype.onBeneficiaryInfoFail=function(e){var n,o,i,r;switch(n=null!=(r=B.parseResponseSafe(e))&&null!=(i=r._error)?i.code:void 0){case"BENEFICIARY_NOT_FOUND":o=t("Beneficiary not found");break;case"RESOURCE_LOCKED":case"HANDBOOK_LOCKED":o=t("Exceeded number of attempts to find beneficiary");break;default:o=t("Beneficiary information could not be fetched")}return e.errorHandled=!0,this.renderBeneficiaryError(o,n)},n.prototype.renderBeneficiaryError=function(t,e){return this.showCardExtraInfo(t),this.$extraInfoEl.addClass("error"),this.trigger("error",{errorCode:e})},n.prototype.showLoadingIndicator=function(){return this.$extraInfoEl.addClass("loading").removeClass("error").removeClass("hidden")},n.prototype.hideLoadingIndicator=function(){return this.$extraInfoEl.removeClass("loading")},n}(k.FieldView),k.RadioButtonGroupAsTabs=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="form-fields/radio-button-group-as-tabs",e.prototype.className=function(){return e.__super__.className.apply(this,arguments)+" radio-button-group-as-tabs"},e}(k.FieldView),k}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(11),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initialize=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.initialize.apply(this,o.__spread(Array.from(arguments))),this.dataModel=this.options.dataModel,this.formMeta=this.options.formMeta,console.assert(this.dataModel,"dataModel option is required"),this.template=this.template||this.detectTemplate()},e.prototype.className=function(){var t=this.model.get("attr").replace(".","-");return t+=" ui-field-contain",r.isEmpty(this.context.name)&&(t+=" noTitle"),t},e.prototype.detectTemplate=function(){var t;return this.model.get("editable")?(t=this.model.get("input"))?"form-fields/"+t:"form-fields/text":"form-fields/readonly"},e.prototype.context=function(){var t=this.model.viewContext({model:this.dataModel});return t.showFieldLabel=!0,(null!=t.inputType?t.inputType.match(/^phone/i):void 0)||["number","pin","cardNumber"].includes(t.inputType)?t.htmlInputType="tel":"email"===t.inputType?(t.htmlInputType="email",t.autocomplete=!0):["password"].includes(t.inputType)?t.htmlInputType=t.inputType:t.htmlInputType="text",t},e.prototype.onRender=function(t){var e=this;null==t&&(t={}),this.model.has("visibilityCondition")&&!this.model.has("addData.SHOW_ON_INPUT")&&this.once("show",(function(){e.toggleVisibility(),e.listenToVisibilityChange()})),(null==t?void 0:t.highlight)&&(this.$el.addClass("highlight-flash"),r.delay((function(){return e.$el.removeClass("highlight-flash")}),3e3)),this.model.get("editable")||this.listeningToChange||(this.listeningToChange=!0,this.listenTo(this.dataModel,"change:"+this.model.getAttrPath(),(function(){e.render({highlight:!0})})))},e.prototype.toggleVisibility=function(){var t=this.model.getVisibilityConditionValue(this.dataModel);t!==this.oldIsVisible&&(this.oldIsVisible=t,this.$el.toggle(t),t&&this.highlight())},e.prototype.listenToVisibilityChange=function(){var t,e=this;this.visibilityListener=null!==(t=this.visibilityListener)&&void 0!==t?t:this.listenTo(this.dataModel,"change",r.debounce((function(){return e.toggleVisibility()}),300))},e.prototype.highlight=function(){var t=this;this.$el.addClass("highlight-flash"),r.delay((function(){t.$el.removeClass("highlight-flash")}),3e3)},e}(i.TemplateView);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(786),r=n(381),s=n(11),a=n(434),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listeningToQuery=!1,e}return o.__extends(e,t),e.prototype.reload=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.render({context:{loading:!0}})];case 1:return e.sent(),[4,this.collection.fetch({reset:!0})];case 2:return e.sent(),this.collection.query&&!this.listeningToQuery&&(this.listenTo(this.collection.query,"change",(function(){return t.reload()})),this.listeningToQuery=!0),[2]}}))}))},e.prototype.show=function(t){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:switch(this.listenTo(this.collection,"sync",(function(){s.delay((function(){return t.render()}),150)})),this.collection.state){case a.States.NEW:return[3,1];case a.States.AWAITING_PARAMS:return[3,3]}return[3,5];case 1:return[4,this.reload()];case 2:return e.sent(),this.trigger("show"),[3,6];case 3:return this.listenToOnce(this.collection,"state:new",(function(){return t.reload()})),[4,this.render({context:{empty:!0}})];case 4:return e.sent(),this.trigger("show"),[3,6];case 5:this.trigger("show"),e.label=6;case 6:return[2]}}))}))},e.prototype.context=function(){var e,n=t.prototype.context.call(this);if(this.collection.length){var o=this.model.get("value.id"),i=s.isFunction(this.collection.url)?this.collection.url():this.collection.url;if(o){var r=this.collection.get(o);console.assert(r,"Catalog "+i+" value with id="+o+" not found"),n.catalogObj=r.viewContext()}else console.assert(1===this.collection.length,"Read-only catalog at "+i+" should have exactly one value, "+this.collection.length+" found"),n.catalogObj=null===(e=this.model.resolveValue(null,this.dataModel))||void 0===e?void 0:e.viewContext()}else n.empty=!0;return n},e=o.__decorate([r.template("form-fields/readonly-dynamic")],e)}(i.default);e.default=c},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11),r=n(927),s=n(789),a=n(40),c=function(){function e(t,e){this.markerClusterer=null,this.map=null,this.initPromise=null,this.pageView=t,this.mapMessages=e}return e.prototype.init=function(){return this.initPromise||(this.initPromise=t.Deferred(),this._init(this.initPromise)),this.initPromise.promise()},e.prototype.loadClusterer=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,window.app.ensureMapsLoaded()];case 1:return t.sent(),[2,n(929)]}}))}))},e.prototype._init=function(t){var e=this;return this.loadClusterer().then((function(n){var i={gridSize:a.MAP_CLUSTER_GRID_SIZE,minimumClusterSize:a.MAP_CLUSTER_SIZE,averageCenter:!0,ignoreHidden:!0,batchSize:1e3,clusterClass:"cluster-marker",enableRetinaIcons:!0,maxZoom:a.MAP_MAX_ZOOM};return e.markerClusterer=new n(null,[],i),e.markerClusterer.setStyles([{url:a.LOCAL_IMAGE_URL+"/map-marker-cluster.svg",width:40,height:40,textSize:14,textColor:"white"}]),google.maps.event.addListener(e.markerClusterer,"clusteringbegin",(function(){s.default.start("clustering")})),google.maps.event.addListener(e.markerClusterer,"clusteringend",(function(){s.default.stop("clustering"),s.default.report()})),google.maps.event.addListener(e.markerClusterer,"clusteringend",(function(t){var n,i,r=e.map.getZoom(),s=t.getMinimumClusterSize(),c=t.getClusters();try{for(var u=o.__values(Array.from(c)),l=u.next();!l.done;l=u.next()){var d=l.value.getMarkers();d.length<s||r>a.MAP_CLUSTER_MAX_ZOOM?Array.from(d).map((function(t){return e.replaceWithTrueMarker(t)})):google.maps.event.trigger(e.pageView,"hidden_markers",d)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}})),google.maps.event.addListener(e.pageView,"filter_markers",(function(t){return e.filterMarkers(t)})),google.maps.event.addListener(e.markerClusterer,"click",(function(t){return e.map.getZoom()===a.MAP_MAX_ZOOM?google.maps.event.trigger(e.pageView,"show_info_view",t.getMarkers()):google.maps.event.trigger(e.pageView,"hide_info_view")})),t.resolve(e)}))},e.prototype.filterMarkers=function(t){var e,n,r=this,s=0;try{for(var a=o.__values(Array.from(this.markerClusterer.getMarkers())),c=a.next();!c.done;c=a.next()){var u=c.value;u.setVisible(t(u.servicePoint)),u.getVisible()?s++:google.maps.event.trigger(this.pageView,"hidden_markers",[u])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}this.pageView.trigger("filtering_finished",s),i.defer((function(){return r.markerClusterer.repaint()}))},e.prototype.createMarkers=function(t){var e=this;Array.from(t).map((function(t){return e.markerClusterer.addMarker(e.createMarkerProxy(t),!0)}))},e.getServicePointMarkerIcon=function(t,e){return null==e&&(e=!1),{url:e?r.default.getServicePointMarkerActiveIconUrl(t.type):r.default.getServicePointMarkerIconUrl(t.type),anchor:new google.maps.Point(a.MAP_ICON_ANCHOR_X,a.MAP_ICON_ANCHOR_Y),scaledSize:new google.maps.Size(a.MAP_ICON_WIDTH,a.MAP_ICON_HEIGHT)}},e.prototype.createMarkerProxy=function(t){var n={isStub:!0,map:null,position:new google.maps.LatLng(t.lat,t.lng),visible:!0,title:t.title,icon:e.getServicePointMarkerIcon(t),getDraggable:function(){return!1},getPosition:function(){return this.position},getMap:function(){return this.map},setMap:function(t){return this.map=t},getVisible:function(){return this.visible},setVisible:function(t){return this.visible=t}};t.maxDiscountLabel&&(n.label={text:t.maxDiscountLabel,color:a.MAP_ICON_LABEL_COLOR});var o=new r.default(n);return o.servicePoint=t,o},e.prototype.replaceWithTrueMarker=function(t){var e=this;if(t.isStub()){var n=t.delegate,o=t.delegate=new google.maps.Marker({map:n.getMap(),position:n.getPosition(),visible:n.getVisible(),title:n.title,icon:n.icon,label:n.label,optimized:!1,zIndex:google.maps.Marker.MAX_ZINDEX+1});return google.maps.event.addListener(this.pageView,"street_view_changed",(function(t){t&&(o.visible=!1)})),google.maps.event.addListener(o,"click",(function(){return function(t,n){var o,i=(new Date).getTime();if(e.prevMarkerClick?o=i-e.prevMarkerClick:(e.prevMarkerClick=i,o=n+1),o>n)return e.prevMarkerClick=i,t.call(e)}((function(){return google.maps.event.trigger(e.pageView,"show_info_view",[t],o)}),400)}))}},e.prototype.get=function(){return this.markerClusterer},e.prototype.enable=function(t){var e=this;if(t&&this.map!==t&&(this.map&&this.zoomListener&&google.maps.event.removeListener(this.zoomListener),this.map=t,this.zoomListener=google.maps.event.addListener(this.map,"zoom_changed",(function(){var t=e.map.getZoom();return e.markerClusterer.setZoomOnClick(t<a.MAP_MAX_ZOOM),t<a.MAP_CLUSTER_MIN_ZOOM?(e.disable(),google.maps.event.trigger(e.pageView,"show_message",e.mapMessages.ZOOM_IN),google.maps.event.trigger(e.pageView,"disable_filters")):(e.enable(),google.maps.event.trigger(e.pageView,"hide_message",e.mapMessages.ZOOM_IN),google.maps.event.trigger(e.pageView,"enable_filters"))})),google.maps.event.trigger(this.map,"zoom_changed")),this.map&&this.map!==(null!=this.markerClusterer?this.markerClusterer.getMap():void 0))return null!=this.markerClusterer?this.markerClusterer.setMap(this.map):void 0},e.prototype.disable=function(){if(null!=this.markerClusterer?this.markerClusterer.getMap():void 0)return null!=this.markerClusterer&&this.markerClusterer.setMap(null),null!=this.markerClusterer&&this.markerClusterer.resetViewport_(!0),google.maps.event.trigger(this.pageView,"hidden_markers")},e}();e.default=c}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(928);e.default=new o.default},function(t,e,n){(function(e,n){var o;(o={}).toHSLA=function(t){return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+(e.isUndefined(t[3])?1:t[3])+")"},o.getAnalyticsColorsContext=function(){var t;return(t=window.OW.historyAnalyticsConfig)&&t.categories?{defaultCategoryColor:o.toHSLA(t.categories.default.color),categoriesColors:n.map(t.categories,(function(t,n){return e.object(["category","color"],[n,o.toHSLA(t.color)])}))}:{}},o.getAnalyticsCategoryLocalizedName=function(t){var e,n,o,i,r,s;if(t=t||"",!window.OW.historyAnalyticsConfig)return t;for(e=window.OW.historyAnalyticsConfig.categories,n=o=0,r=(s=Object.keys(e)).length;o<r;n=++o)if((i=s[n]).toLowerCase()===t.toLowerCase())return e[i].name;return t},t.exports=o}).call(this,n(11),n(14))},function(e,n,o){(function(n){var i,r,s,a,c,u,l=function(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},d={}.hasOwnProperty;u=o(40),i=o(375).BaseModel,s=o(398).FormMeta,r=o(434),a={},c={active:!0,name:t("Retrieve money transfer"),fields:[{id:"providerCode",name:t("Money transfer system"),dataSource:{type:"catalog",url:"/remittance/providers",allowEntry:!1,isPlainCatalog:!0},visible:!0,editable:!0,optional:!1},{id:"transferNumber",name:t("Transfer number"),visible:!0,editable:!0,optional:!1},{id:"amount.value",role:"amount.value",name:t("Amount"),visible:!0,editable:!0,optional:!1},{id:"amount.currency",role:"amount.currency",dataSource:{type:"catalog",url:"/catalogs/CURRENCY",allowEntry:!1,isPlainCatalog:!0},visible:!0,editable:!0,optional:!1}],allowTemplate:!1,allowPeriodic:!1,allowThreshold:!1,allowInternational:!1,allowBonusPayment:!1},a.getRemittanceConfirmationFields=function(e,o,r,s){var a,c,u,l,d,p;return a={name:t("Sender"),components:[]},l=(p=e.getFields()).get("providerCode"),a.components.push({name:l.get("name"),value:l.resolveValue({id:o.get("providerCode")},o).get("name")}),a.components.push({name:p.get("transferNumber").get("name"),value:o.get("transferNumber")}),a.components.push({name:t("Name"),value:o.getSenderName()}),a.components.push({name:t("Country of residence"),value:o.getSenderCountry()}),c={name:t("Beneficiary"),components:n.compact(r.getFields().leafs().map((function(t){var e,n,o;if(("RcvrFirstN"===(n=t.id)||"RcvrLastN"===n||"RcvrAddrIndx"===n||"RcvrAddrTown"===n||"RcvrAddrStr"===n||"RcvrDocType"===n||"RcvrDocNumber"===n||"RcvrDocCntry"===n||"RcvrBDate"===n||"RcvrBCntry"===n||"RcvrPhone"===n)&&(e=t.get("name"),(o=t.resolveValue(null,s))instanceof i&&(o=o.viewContext().name),o))return{name:e,value:o}})))},u={name:t("Transfer details"),components:[{name:t("Card"),value:null!=(d=r.getField({id:"beneficiary"}).resolveValue(null,s))?d.get("name"):void 0}]},s.has("fee")?(u.components.push({name:t("Amount"),value:s.get("amount")}),u.components.push({name:t("Fee"),value:s.get("fee")}),u.components.push({name:t("Total"),value:s.get("total")})):u.components.push({name:t("Total"),value:s.get("total")}),[a,c,u]},a.RetrieveMoneyTransferSearchMeta=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.defaults=c,e}(s),a.RetrieveMoneyTransferMeta=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return l(o,e),o.prototype.defaults={name:t("Retrieve money transfer")},o.prototype.url=function(){return u.API_URL+"/remittance/retrieve-money/payment-details"},o.prototype.initialize=function(t,e){if(o.__super__.initialize.apply(this,arguments),!this.get("retrieveMoneyId"))throw new Error("Transfer id is missing");return this.providerCode=e.providerCode||"",console.assert(this.providerCode,"Provider code is missing in money transfer meta model")},o.prototype.fetch=function(){return this.save()},o.prototype.hasAvailableContracts=function(){var t;return!!this.isFetched()&&((null!=(t=this.getField({role:"destination"}))?t.catalog.state:void 0)===r.States.READY&&t.catalog.length>0)},o.prototype.getLicense=function(){var e,n;return"Retrieve money transfer license",n="Retrieve money transfer license ["+this.providerCode+"]","Retrieve money transfer license"!==(e=t(n))?e:null},o.prototype.viewContext=function(){return n.extend(o.__super__.viewContext.apply(this,arguments),{license:this.getLicense()})},o}(s),e.exports=a}).call(this,o(11))},function(t,e,n){(function(o){var i,r=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;void 0===(i=function(t){var e,i;return i=n(374).TemplateView,e=n(395).Contracts,{ContractList:function(t){function n(){return this.handleError=r(this.handleError,this),this.applyCollection=r(this.applyCollection,this),n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.requiredOptions=["urlQuery","emptyMessage"],n.prototype.template="contracts/contract-list",n.prototype.isLoading=!0,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),null!=this.collection?this.collection:this.collection=new e(null,{urlQuery:this.urlQuery})},n.prototype.groupContext=function(t){return t.asGroups().viewContext()},n.prototype.groupContextPostProcessing=function(t){return t.nCards=o.size(t.children)},n.prototype.onRender=function(){if(this.isLoading)return this.showLoadingIndicator()},n.prototype.context=function(t){var e,n;return null==t&&(t={}),e=t.collection||this.collection,(n=this.groupContext(e)).forEach(this.groupContextPostProcessing.bind(this)),o.extend(o.pick(this.options,"title","noTitle"),{groups:o.filter(n,(function(t){var e;return!(e=t.contract.card)||e.isMultiCurrency})),contextPath:window.WB.contextPath,emptyMessage:t.emptyMessage||this.emptyMessage,isLoading:this.isLoading,error:this.error})},n.prototype.applyCollection=function(t){var n;return this.collection=(null!=(n=this.options)?n.condition:void 0)?new e(t.filter(this.options.condition)):t,this.isLoading=!1,this.error=null,this.render()},n.prototype.handleError=function(t){return this.isLoading=!1,this.error={message:t},this.render()},n}(i)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getContractsPageSettings=function(){var t,e;return null===(e=null===(t=null===window||void 0===window?void 0:window.OW)||void 0===t?void 0:t.contractsConfig)||void 0===e?void 0:e.wbCardsAccountsPage}},function(e,n,o){(function(i,r,s){var a,c={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A,E,M,I;return o(396),o(40),o(96),x=o(377),k=o(378),p=o(395).DashboardContracts,v=o(530).InlineEditView,w=o(944),A=o(533),g=A.HistoryPanel,_=A.HistoryAnalyticsPanel,u=o(806).ContactInfoForm,n=o(958).AdditionalServicesView,b=o(960).OnlineDepositManagementView,y=o(397).ExternalCard,a=o(473).ConfirmActionDialog,E=o(961),S=E.StatementSubscriptionEnableDialog,C=E.StatementSubscriptionEditDialog,M=o(963),l=M.ContractBlockDialog,d=M.ContractUnblockDialog,h=o(965).DigitalCardResendParamsView,f=o(969).DigitalCardRevealCardNumberView,m=o(971).DivisionContactInfo,T=o(437),I=o(380),o(136),P=window.OW.contractsConfig,B=WB.contextPath+"/services/",function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.availableToManager=!0,o.prototype.template="contracts/contract-details-page",o.prototype.requiredOptions=["contractId"],o.prototype.pageType=I.mainMenuIds.CARDS_ACCOUNTS,o.prototype.events={"click .content-header .title":"editName","click a.toggle-inactive":"toggleInactiveCards","click .action-remove":"removeCard","click .instalments-list_paid .instalments-list-show":"showPaidInstalments","click .instalments-list_paid .instalments-list-hide":"hidePaidInstalments","click .instalments-item-details":"showInstalmentsItemDetails","click .action-statement-subscription":"initStatementSubscriptionDialog","click .action-block.type-native":"blockCard","click .action-unblock.type-native":"unblockCard"},o.prototype.bindings={name:".content-header .title"},o.prototype.serviceUrlPrefix=WB.contextPath+"/",o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.contracts=window.app.data.contracts.dashboard,window.OW.features.TRANSACTION_PIECHART?this.operationDetailsDialogClass=T.CategoryOperationDetailsDialog:this.operationDetailsDialogClass=T.OperationDetailsDialog},o.prototype.getTitle=function(){return this.model.get("name")},o.prototype.fetchData=function(){return i.when(this.fetchContractData(),window.app.data.cardOrderSettings.fetchIfNeedAndPossible()).then((t=this,function(e){return window.OW.features.INSTALMENTS&&e.isInstalmentsEnabled()?t.fetchInstalmentsData(e).then((function(){return e})):e}));var t},o.prototype.fetchContractData=function(){var t,e,n;return this.contracts instanceof p?(t=null!=(e=window.OW.contractsConfig)?e.wbCardsAccountsPage:void 0,x.getDashboardContract(this.contractId,t.sections)):this.contracts.fetchIfEmpty().then((n=this,function(){return n.contracts.get(n.contractId)}))},o.prototype.fetchInstalmentsData=function(t){return i.when(t.fetchInstalmentsSummary(),t.fetchInstalmentsList())},o.prototype.show=function(){return this.fetchData().then((e=this,function(t){return e.model=t,e.model.on("change:statementSubscriptionActiveStatus",(function(){return e.updateStatementSubscriptionLink()})),e.render()}),(function(){return window.app.showErrorPage({errorText:t("Failed to load contract information. Try again later or contact support.")})}));var e},o.prototype.ensurePanelInitialized=function(t){if(t.is("#contract-limits")&&this.ensureLimitersInitialized(),t.is("#contract-history")&&this.ensureHistoryInitialized(),t.is("#contact-info"))return this.ensureContactInfoInitialized()},o.prototype.onRender=function(){var t,e,i;if(o.__super__.onRender.apply(this,arguments),(t=this.$("[data-js-digital-card-resend-params-container]")).length&&(this.digitalCardResendParamsView=new h({el:t,contractId:this.model.get("id")}),this.digitalCardResendParamsView.show()),(e=this.$("[data-js-digital-card-reveal-card-number-container]")).length&&(this.digitalCardRevealCardNumberView=new f({el:e,contract:this.model}),this.digitalCardRevealCardNumberView.show()),this.$(".wb-tabs").tabs({create:(i=this,function(t,e){return i.options.tabId&&i.$(".ui-tabs-anchor[href='#"+i.options.tabId+"']").click(),i.ensurePanelInitialized(e.panel)}),activate:function(t){return function(e,n){return t.ensurePanelInitialized(n.newPanel)}}(this)}),this.aliasIsEditable()&&(this.modelBinder=new r.ModelBinder,this.modelBinder.bind(this.model,this.$el,this.bindings)),this.model.hasSubscriptions()&&new n({el:this.$(".contract-subscriptions"),model:this.model}).show(),this.allowDepositManagement())return new b({el:this.$(".online-deposit-management"),contract:this.model}).show()},o.prototype.editName=function(t){var e;if(t.preventDefault(),this.aliasIsEditable())return this.editNameView||(this.model.trackSavedValue(),this.editNameView=new v({el:this.$(".contract-name-edit-panel")}),this.editNameView.on("cancel",(e=this,function(){return s.defer((function(){return e.model.revert()}))})).on("save",function(t){return function(e){return t.model.rename(e)}}(this))),this.editNameView.show()},o.prototype.removeCard=function(e){return e.preventDefault(),new a({actionText:t("Do you really want to remove this card?"),onConfirm:(n=this,function(){return new y({id:n.model.id}).destroy().then((function(){var e;return e=window.app.data.menu.getPath(I.mainMenuIds.CARDS_ACCOUNTS),window.app.showSuccessMessageOnNextPage(t("Card has successfully been removed")),window.app.router.navigate("#menu/"+e,{trigger:!0,replace:!0})}))})}).show();var n},o.prototype.onBlockingStatusChanged=function(t){return window.app.showSuccessMessageOnNextPage(t),r.history.loadUrl()},o.prototype.blockCard=function(t){return t.preventDefault(),new l({contract:this.model,onSuccess:this.onBlockingStatusChanged.bind(this)}).show()},o.prototype.unblockCard=function(t){return t.preventDefault(),new d({contract:this.model,onSuccess:this.onBlockingStatusChanged.bind(this)}).show()},o.prototype.ensureLimitersInitialized=function(){if(!this.limiters)return(this.limiters=new w({el:this.$(".limiters-panel"),contractId:this.contractId})).show()},o.prototype.ensureHistoryInitialized=function(){var t;if(!this.historyPanel)return t=window.OW.features.TRANSACTION_PIECHART?_:g,(this.historyPanel=new t({el:this.$(".block__history"),singleContract:!0,contractId:this.contractId})).show()},o.prototype.ensureContactInfoInitialized=function(){var t;if(this.getContactInfoTabVisibility()&&!this.contactInfo)return t=new m(null,{contractId:this.contractId}),(this.contactInfo=new u({el:this.$("#contact-info"),model:t})).show()},o.prototype.toggleInactiveCards=function(t){return t.preventDefault(),this.$(".toggle-inactive").toggleClass("visible"),this.$(".inactive-cards").toggle()},o.prototype.getLimitsTabVisibility=function(){var t,e;return!this.model.get("card.isForeign")&&((e=null!=P&&null!=(t=P.wbCardsAccountsPage)?t.showLimitersCondition:void 0)?i.isFunction(e)?e(this.model):e:(console.warn("wbCardsAccountsPage.showLimitersCondition is not defined, limits tab will be hidden"),!1))},o.prototype.getContactInfoTabVisibility=function(){var t,e;return!this.model.get("card.isForeign")&&(e=window.app.userIsManager(),t=!this.contracts.get(this.model.get("parentId")),e&&t)},o.prototype.aliasIsEditable=function(){return window.OW.features.CONTRACT_ALIASES&&!window.app.userIsManager()},o.prototype.allowDepositManagement=function(){return window.OW.features.ONLINE_DEPOSITS&&"deposit"===this.model.get("type")&&!this.model.inArchive()},o.prototype.showPaidInstalments=function(){return this.$(".instalments-list_paid").addClass("instalments-list-opened")},o.prototype.hidePaidInstalments=function(){return this.$(".instalments-list_paid").removeClass("instalments-list-opened")},o.prototype.getAllActions=function(){var e;return e=this.model.getActionsContext(),window.OW.features.INCOME_CERTIFICATES&&e.unshift({id:"certificate",name:t("Income certificates"),link:"#certificates?account.id="+this.model.id,service:{type:"plain"}}),this.model.isStatementSubscriptionAllowed()?(e.push({id:"statement-subscription",name:this.getStatementSubscriptionName(),service:{type:"notLink"}}),e):e},o.prototype.getStatementSubscriptionName=function(){return this.model.isStatementSubscriptionActive()?t("Edit monthly statements"):t("Enable monthly statements")},o.prototype.context=function(){var t,e,n,i,r,a,c,u,l,d,p,h,f;for(i=s.extend(this.model.viewContext(),{actions:this.getAllActions(),hasSubscriptions:this.model.hasSubscriptions(),bankDetails:this.model.getBankDetails()}),t=[],a=[],r=0,u=(e=(null!=(l=this.getAdditionalCards())?l.viewContext():void 0)||[]).length;r<u;r++)((n=e[r]).inArchive?a:t).push(n);return c=null!=i&&null!=(d=i.card)&&null!=(p=d.type)?p.isDigital:void 0,s.extend(o.__super__.context.apply(this,arguments),{contract:i,parent:null!=(h=this.contracts.get(this.model.get("card.primaryCardId")||this.model.get("parentId")))?h.viewContext():void 0,showParent:!0,editable:this.aliasIsEditable(),additionalCards:{active:t,inactive:a},serviceUrlPrefix:B,allowIntraCardTransfer:this.model.isIntraCardTransferAllowed(),showServicesTab:!!i.actions.length,showLimitsTab:this.getLimitsTabVisibility(),showInformationTab:!0,showSecurityTab:this.model.hasSubscriptions(),showHistoryTab:this.model.isHistorySupported(),hasAdditionalCards:e.length>0,showAdditionalCardsTab:e.length>0,showContactInfoTab:this.getContactInfoTabVisibility(),showRequisitesTab:!!i.bankDetails,showBalanceTab:null!=(f=i.card)?f.isMultiCurrency:void 0,isShowRevealCardNumber:c&&window.OW.features.REVEAL_CARD_DETAILS,isShowResendParams:c&&window.OW.features.SECURE_CODE_RECOVERY})},o.prototype.getAdditionalCards=function(){return this.contracts.childrenOf(this.contractId)},o.prototype.showInstalmentsItemDetails=function(t){var e;if(t.preventDefault(),!(e=i(t.currentTarget).closest("li").data("id")))throw new Error("Selected instalment item has no id");return new this.operationDetailsDialogClass({itemId:e}).show()},o.prototype.initStatementSubscriptionDialog=function(t){var e,n;return t.preventDefault(),null,e=new(this.model.isStatementSubscriptionActive()?C:S)({contractId:this.contractId}),this.listenTo(e,"statementSubscriptionChanged",(n=this,function(){return n.model.fetch()})),e.show()},o.prototype.getStatementSubscriptionLinkEl=function(){return this.statementSubscriptionLinkEl||(this.statementSubscriptionLinkEl=this.$(".action-statement-subscription")),this.statementSubscriptionLinkEl},o.prototype.updateStatementSubscriptionLink=function(){return this.getStatementSubscriptionLinkEl().text(this.getStatementSubscriptionName())},o}(k)}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(384),o(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s;return s=n(136),e=n(374).TemplateView,i=n(387).WbFormMixin,function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.mixins=[i],e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),this.model.get("editable"))return this.initForm()},e.prototype.rollback=function(){return this.model.set(this.model.savedValue)},e.prototype.resetAttrsOnError=function(){return this.rollback(),this.render()},e.prototype.onSubmitSuccess=function(){return this.model.trigger("sync"),this.render()},e.prototype.submitAction=function(){var t,e;return t=this.model.get("confirmation"),this.model.collection.save(t).fail((e=this,function(t){var n;try{t.serverAttrs=JSON.parse(t.responseText)}catch(e){n=e,s.warn(n.stack),s.error("Cannot parse error response: ",t)}if(t.serverAttrs)return e.model.set(o.pick(t.serverAttrs,"_status","_error","confirmation"))}))},e.prototype.context=function(){return o.extend(e.__super__.context.apply(this,arguments),this.model.viewContext())},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d,p;return n(40),u=n(391),n(96),l=n(402),c=n(374).TemplateView,d=n(437),r=d.OperationDetailsDialog,e=d.CategoryOperationDetailsDialog,p=n(950).showApplicationDetailsDialog,{SimpleHistoryListView:a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template="history/simple-history-list",e.prototype.requiredOptions=["history"],e.prototype.events={"click .operation-details":"showOperationDetails"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.operations=this.getOperations()},e.prototype.getOperations=function(){return this.history.groupByDayContext()},e.prototype.show=function(){return this.render({context:{isLoading:!this.operations.length}})},e.prototype.renderWith=function(t){return this.history=t,this.operations=this.getOperations(),this.render()},e.prototype.onRender=function(t){var e;return(null!=t&&null!=(e=t.context)?e.isLoading:void 0)?this.$el.append(window.app.getLoadingIndicator()):l.applyMasks(this.$el)},e.prototype.showOperationDetails=function(t){var e;if(t.preventDefault(),!(e=o(t.currentTarget).closest("li").data("id")))throw new Error("Selected operation has no id");return new r({itemId:e}).show()},e.prototype.context=function(){return{operations:this.operations,contextPath:window.WB.contextPath}},e}(c),HistoryAnalyticsListView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.template="history/history-analytics-list",n.prototype.showOperationDetails=function(t){var n;if(t.preventDefault(),!(n=o(t.currentTarget).closest("li").data("id")))throw new Error("Selected operation has no id");return new e({itemId:n}).show()},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),u.getAnalyticsColorsContext())},n}(a),ApplicationHistoryList:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template="history/application-history-list",e.prototype.showOperationDetails=function(t){var e,n,i;if(t.preventDefault(),n=(e=o(t.currentTarget).closest("li.history-item")).data("id"),i=e.data("type"),!n||!i)throw new Error("Selected application has no id");return p({applicationId:n,applicationType:i})},e}(a)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(t,o){var i,r,s,a={}.hasOwnProperty;s=n(402),r=n(474).Certificate,i=n(534).AbstractApplicationDetailsDialog,e.ApplicationCertificateDetailsDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="history/application-certificate-details-dialog",n.prototype.initModel=function(){return this.model=new r({id:this.applicationId})},n.prototype.show=function(){var e,o;return(e=t.when(this.model.fetch(),window.app.data.contracts.history.fetchIfEmpty())).catch((o=this,function(t){return o.handleFailedLoad(t)})),e.then(function(t){return function(){return t.contract=window.app.data.contracts.history.get(t.model.get("payment.remitter.id")),t.certificateContract=window.app.data.contracts.history.get(t.model.get("accountNumber")),t.render()}}(this)).then(function(t){return function(){return s.applyMasks(t.$el)}}(this)),n.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})},n.prototype.hasPdfFile=function(){return this.model.hasPdfFile()},n.prototype.context=function(){var t,e;return o.extend(n.__super__.context.apply(this,arguments),{contract:null!=(t=this.contract)?t.toJSON():void 0,certificateContract:null!=(e=this.certificateContract)?e.toJSON():void 0,pdfReceiptsDownload:this.hasPdfFile()})},n}(i)}).call(this,n(14),n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(799),s=n(135),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initModel=function(){this.model=new r.default({id:this.applicationId})},e.prototype.show=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.model.fetch(),window.app.data.contracts.history.fetchIfEmpty()])];case 1:return e.sent(),[4,t.prototype.show.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),this.model.viewContext()),{title:s.t("Card order")})},e=o.__decorate([i.template("history/application-card-order-details-dialog")],e)}(n(534).AbstractApplicationDetailsDialog);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(800),r=n(40),s=n(452),a=n(952),c=n(801),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlRoot=function(){return r.API_URL+"/card-orders"},e}return o.__extends(e,t),e.prototype.getViewContext=function(t){return this.isNew()?t?new a.default(this,t.formMeta,t.cardTypes,t.client):new s.default(this):new c.default(this)},e.prototype.viewContext=function(t){return this.getViewContext(t).value()},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(430),s=n(11),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.prepareOutgoingData=function(e,n){var o;return n.hasOwnProperty(r.Fields.BRANCH_ID)&&(n=s.omit(n,r.Fields.BRANCH_ID)),n.hasOwnProperty(r.Fields.BRANCH)&&(n[r.Fields.BRANCH]=s.pick(n[r.Fields.BRANCH],"id")),(null===(o=n.account)||void 0===o?void 0:o.id)===r.default.NEW_CONTRACT_ITEM_ID&&delete n.account,t.prototype.prepareOutgoingData.call(this,e,n)},e}(i.BaseModel);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(430),r=n(96),s=n(135),a=n(452),c=n(372),u=n(40),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.getAccountField=function(){return o.__assign(o.__assign({},t.prototype.getAccountField.call(this)),{value:this.model.get(i.Fields.ACCOUNT)})},e.prototype.getTariffField=function(){return o.__assign(o.__assign({},t.prototype.getTariffField.call(this)),{value:this.model.get(i.Fields.TARIFF)})},e.prototype.getCardTypeField=function(){return o.__assign(o.__assign({},t.prototype.getCardTypeField.call(this)),{value:this.model.get(i.Fields.BRAND)})},e.prototype.getCardExpiryField=function(){var e=this.model.get(i.Fields.CARD_EXPIRY);return o.__assign(o.__assign({},t.prototype.getCardExpiryField.call(this)),{value:e&&r(e,"MM.YYYY").format("MM/YY")})},e.prototype.getCurrencyField=function(){var e=this.model.get(i.Fields.CURRENCY);return o.__assign(o.__assign({},t.prototype.getCurrencyField.call(this)),{value:e&&s.t(e)})},e.prototype.getFeeValue=function(t){var e=u.DEFAULT_CURRENCY,n=this.model.get(t);return e&&n?c.filters.money({currency:e,value:n}):""},e.prototype.getPaymentSystemField=function(){return o.__assign(o.__assign({},t.prototype.getPaymentSystemField.call(this)),{value:this.model.get(i.Fields.PAYMENT_SYSTEM)})},e.prototype.getAccountNumberField=function(){return o.__assign(o.__assign({},t.prototype.getAccountNumberField.call(this)),{value:this.model.get(i.Fields.ACCOUNT_NUMBER)})},e.prototype.getCardNumberField=function(){return o.__assign(o.__assign({},t.prototype.getCardNumberField.call(this)),{value:this.model.get(i.Fields.CARD_NUMBER)})},e.prototype.getDeliveryBranchNameField=function(){return o.__assign(o.__assign({},t.prototype.getDeliveryBranchNameField.call(this)),{value:this.model.get(i.Fields.DELIVERY_BRANCH_NAME)})},e.prototype.getCardholderNameField=function(){var e=this.model.get(i.Fields.EMBOSSED_FIRST_NAME),n=this.model.get(i.Fields.EMBOSSED_LAST_NAME);return o.__assign(o.__assign({},t.prototype.getCardholderNameField.call(this)),{value:e&&n?e+" "+n:""})},e}(a.default);e.default=l},function(t,e,n){var o;
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */(function(){"use strict";var i=this,r=i.Chart,s=function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)},n=this.width=e(t.canvas,"Width"),o=this.height=e(t.canvas,"Height");t.canvas.width=n,t.canvas.height=o;n=this.width=t.canvas.width,o=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,u.retinaScale(this),this};s.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},s.types={};var a,c,u=s.helpers={},l=u.each=function(t,e,n){var o,i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length)for(o=0;o<t.length;o++)e.apply(n,[t[o],o].concat(i));else for(var r in t)e.apply(n,[t[r],r].concat(i))},d=u.clone=function(t){var e={};return l(t,(function(n,o){t.hasOwnProperty(o)&&(e[o]=n)})),e},p=u.extend=function(t){return l(Array.prototype.slice.call(arguments,1),(function(e){l(e,(function(n,o){e.hasOwnProperty(o)&&(t[o]=n)}))})),t},h=u.merge=function(t,e){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),p.apply(null,n)},f=u.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},m=(u.where=function(t,e){var n=[];return u.each(t,(function(t){e(t)&&n.push(t)})),n},u.findNextWhere=function(t,e,n){n||(n=-1);for(var o=n+1;o<t.length;o++){var i=t[o];if(e(i))return i}},u.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var o=n-1;o>=0;o--){var i=t[o];if(e(i))return i}},u.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},o=function(){this.constructor=n};return o.prototype=e.prototype,n.prototype=new o,n.extend=m,t&&p(n.prototype,t),n.__super__=e.prototype,n}),y=u.noop=function(){},_=u.uid=(a=0,function(){return"chart-"+a++}),g=u.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},v=u.amd=n(495),w=u.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},b=u.max=function(t){return Math.max.apply(Math,t)},k=u.min=function(t){return Math.min.apply(Math,t)},B=(u.cap=function(t,e,n){if(w(e)){if(t>e)return e}else if(w(n)&&t<n)return n;return t},u.getDecimalPlaces=function(t){return t%1!=0&&w(t)?t.toString().split(".")[1].length:0}),C=u.radians=function(t){return t*(Math.PI/180)},S=(u.getAngleFromPoint=function(t,e){var n=e.x-t.x,o=e.y-t.y,i=Math.sqrt(n*n+o*o),r=2*Math.PI+Math.atan2(o,n);return n<0&&o<0&&(r+=2*Math.PI),{angle:r,distance:i}},u.aliasPixel=function(t){return t%2==0?0:.5}),P=(u.splineCurve=function(t,e,n,o){var i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),s=o*i/(i+r),a=o*r/(i+r);return{inner:{x:e.x-s*(n.x-t.x),y:e.y-s*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},u.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),x=(u.calculateScaleRange=function(t,e,n,o,i){var r=Math.floor(e/(1.5*n)),s=2>=r,a=b(t),c=k(t);a===c&&(a+=.5,c>=.5&&!o?c-=.5:a+=.5);for(var u=Math.abs(a-c),l=P(u),d=Math.ceil(a/(1*Math.pow(10,l)))*Math.pow(10,l),p=o?0:Math.floor(c/(1*Math.pow(10,l)))*Math.pow(10,l),h=d-p,f=Math.pow(10,l),m=Math.round(h/f);(m>r||2*m<r)&&!s;)if(m>r)f*=2,(m=Math.round(h/f))%1!=0&&(s=!0);else if(i&&l>=0){if(f/2%1!=0)break;f/=2,m=Math.round(h/f)}else f/=2,m=Math.round(h/f);return s&&(f=h/(m=2)),{steps:m,stepValue:f,min:p,max:p+m*f}},u.template=function(t,e){if(t instanceof Function)return t(e);var n,o,i,r={};return o=e,i=/\W/.test(n=t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):r[n]=r[n],o?i(o):i}),T=(u.generateLabels=function(t,e,n,o){var i=new Array(e);return labelTemplateString&&l(i,(function(e,r){i[r]=x(t,{value:n+o*(r+1)})})),i},u.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,o=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),o<Math.abs(1)?(o=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/o),-o*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,o=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),o<Math.abs(1)?(o=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,o=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5*1),o<Math.abs(1)?(o=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*-.5:o*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-T.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*T.easeInBounce(2*t):.5*T.easeOutBounce(2*t-1)+.5}}),A=u.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},E=u.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},M=(u.animationLoop=function(t,e,n,o,i,r){var s=0,a=T[n]||T.linear,c=function(){var n=++s/e,u=a(n);t.call(r,u,n,s),o.call(r,u,n),s<e?r.animationFrame=A(c):i.apply(r)};A(c)},u.getRelativePosition=function(t){var e,n,o=t.originalEvent||t,i=(t.currentTarget||t.srcElement).getBoundingClientRect();return o.touches?(e=o.touches[0].clientX-i.left,n=o.touches[0].clientY-i.top):(e=o.clientX-i.left,n=o.clientY-i.top),{x:e,y:n}},u.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),I=u.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=y},N=(u.bindEvents=function(t,e,n){t.events||(t.events={}),l(e,(function(e){t.events[e]=function(){n.apply(t,arguments)},M(t.chart.canvas,e,t.events[e])}))},u.unbindEvents=function(t,e){l(e,(function(e,n){I(t.chart.canvas,n,e)}))}),R=u.getMaximumWidth=function(t){return t.parentNode.clientWidth},O=u.getMaximumHeight=function(t){return t.parentNode.clientHeight},D=(u.getMaximumSize=u.getMaximumWidth,u.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,o=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=o+"px",e.canvas.height=o*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),F=u.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},L=u.fontString=function(t,e,n){return e+" "+t+"px "+n},V=u.longestText=function(t,e,n){t.font=e;var o=0;return l(n,(function(e){var n=t.measureText(e).width;o=n>o?n:o})),o},U=u.drawRoundedRectangle=function(t,e,n,o,i,r){t.beginPath(),t.moveTo(e+r,n),t.lineTo(e+o-r,n),t.quadraticCurveTo(e+o,n,e+o,n+r),t.lineTo(e+o,n+i-r),t.quadraticCurveTo(e+o,n+i,e+o-r,n+i),t.lineTo(e+r,n+i),t.quadraticCurveTo(e,n+i,e,n+i-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.closePath()};s.instances={},p((s.Type=function(t,e,n){this.options=e,this.chart=n,this.id=_(),s.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)}).prototype,{initialize:function(){return this},clear:function(){return F(this.chart),this},stop:function(){return E(this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=R(this.chart.canvas),o=this.options.maintainAspectRatio?n/this.chart.aspectRatio:O(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=o,D(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:y,render:function(t){return t&&this.reflow(),this.options.animation&&!t?u.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return x(this.options.legendTemplate,this)},destroy:function(){this.clear(),N(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete s.instances[this.id]},showTooltip:function(t,e){if(void 0===this.activeElements&&(this.activeElements=[]),function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(l(t,(function(t,n){t!==this.activeElements[n]&&(e=!0)}),this),e)}.call(this,t)||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var n,o,i=this.datasets.length-1;i>=0&&(n=this.datasets[i].points||this.datasets[i].bars||this.datasets[i].segments,-1===(o=f(n,t[0])));i--);var r=[],a=[],c=function(t){var e,n,i,s,c,l=[],d=[],p=[];return u.each(this.datasets,(function(t){(e=t.points||t.bars||t.segments)[o]&&e[o].hasValue()&&l.push(e[o])})),u.each(l,(function(t){d.push(t.x),p.push(t.y),r.push(u.template(this.options.multiTooltipTemplate,t)),a.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})}),this),c=k(p),i=b(p),s=k(d),n=b(d),{x:s>this.chart.width/2?s:n,y:(c+i)/2}}.call(this,o);new s.MultiTooltip({x:c.x,y:c.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:r,legendColors:a,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else l(t,(function(t){var e=t.tooltipPosition();new s.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:x(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()}),this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),s.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=d(e.prototype),p(n.prototype,t),n.extend=s.Type.extend,t.name||e.prototype.name){var o=t.name||e.prototype.name,i=s.defaults[e.prototype.name]?d(s.defaults[e.prototype.name]):{};s.defaults[o]=p(i,t.defaults),s.types[o]=n,s.prototype[o]=function(t,e){var i=h(s.defaults.global,s.defaults[o],e||{});return new n(t,i,this)}}else g("Name not provided for this chart, so it hasn't been registered");return e},s.Element=function(t){p(this,t),this.initialize.apply(this,arguments),this.save()},p(s.Element.prototype,{initialize:function(){},restore:function(t){return t?l(t,(function(t){this[t]=this._saved[t]}),this):p(this,this._saved),this},save:function(){return this._saved=d(this),delete this._saved._saved,this},update:function(t){return l(t,(function(t,e){this._saved[e]=this[e],this[e]=t}),this),this},transition:function(t,e){return l(t,(function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]}),this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return w(this.value)}}),s.Element.extend=m,s.Point=s.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),s.Arc=s.Element.extend({inRange:function(t,e){var n=u.getAngleFromPoint(this,{x:t,y:e}),o=n.angle>=this.startAngle&&n.angle<=this.endAngle,i=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return o&&i},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),s.Rectangle=s.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,o=this.x+e,i=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,o-=r,i+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,i),t.lineTo(o,i),t.lineTo(o,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),s.Tooltip=s.Element.extend({draw:function(){var t=this.chart.ctx;t.font=L(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,n=t.measureText(this.text).width+2*this.xPadding,o=this.fontSize+2*this.yPadding,i=o+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-i<0&&(this.yAlign="below");var r=this.x-n/2,s=this.y-i;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}U(t,r,s,n,o,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,r+n/2,s+o/2)}}}),s.MultiTooltip=s.Element.extend({initialize:function(){this.font=L(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=L(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=V(this.ctx,this.font,this.labels)+this.fontSize+3,n=b([e,t]);this.width=n+2*this.xPadding;var o=this.height/2;this.y-o<0?this.y=o:this.y+o>this.chart.height&&(this.y=this.chart.height-o),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{U(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,u.each(this.labels,(function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)}),this)}}}),s.Scale=s.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=B(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(x(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?V(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var o,i=V(this.ctx,this.font,this.xLabels);this.xLabelWidth=i;for(var r=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>r&&0===this.xLabelRotation||this.xLabelWidth>r&&this.xLabelRotation<=90&&this.xLabelRotation>0;)(o=Math.cos(C(this.xLabelRotation)))*n,(t=o*e)+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=o*i;this.xLabelRotation>0&&(this.endPoint-=Math.sin(C(this.xLabelRotation))*i+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:y,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){this.xLabelRotation;var e=(this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=e/2),Math.round(n)},update:function(t){u.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,l(this.yLabels,(function(o,i){var r=this.endPoint-e*i,s=Math.round(r),a=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(o,n-10,r),0!==i||a||(a=!0),a&&t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s+=u.aliasPixel(t.lineWidth),a&&(t.moveTo(n,s),t.lineTo(this.width,s),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,s),t.lineTo(n,s),t.stroke(),t.closePath()}),this),l(this.xLabels,(function(e,n){var o=this.calculateX(n)+S(this.lineWidth),i=this.calculateX(n-(this.offsetGridLines?.5:0))+S(this.lineWidth),r=this.xLabelRotation>0,s=this.showVerticalLines;0!==n||s||(s=!0),s&&t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s&&(t.moveTo(i,this.endPoint),t.lineTo(i,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i,this.endPoint),t.lineTo(i,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(o,r?this.endPoint+12:this.endPoint+8),t.rotate(-1*C(this.xLabelRotation)),t.font=this.font,t.textAlign=r?"right":"center",t.textBaseline=r?"middle":"top",t.fillText(e,0,0),t.restore()}),this))}}),s.RadialScale=s.Element.extend({initialize:function(){this.size=k([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=B(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(x(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,o,i,r,s,a,c,u,l,d,p=k([this.height/2-this.pointLabelFontSize-5,this.width/2]),h=this.width,f=0;for(this.ctx.font=L(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,p),n=this.ctx.measureText(x(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(o=n/2,t.x+o>h&&(h=t.x+o,i=e),t.x-o<f&&(f=t.x-o,s=e)):e<this.valuesCount/2?t.x+n>h&&(h=t.x+n,i=e):e>this.valuesCount/2&&t.x-n<f&&(f=t.x-n,s=e);c=f,u=Math.ceil(h-this.width),r=this.getIndexAngle(i),a=this.getIndexAngle(s),l=u/Math.sin(r+Math.PI/2),d=c/Math.sin(a+Math.PI/2),l=w(l)?l:0,d=w(d)?d:0,this.drawingArea=p-(d+l)/2,this.setCenterPoint(d,l)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,o=t+this.drawingArea;this.xCenter=(o+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){return t*(2*Math.PI/this.valuesCount)-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(l(this.yLabels,(function(e,n){if(n>0){var o,i=n*(this.drawingArea/this.steps),r=this.yCenter-i;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,i,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)o=this.getPointPosition(s,this.calculateCenterOffset(this.min+n*this.stepValue)),0===s?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=L(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,r)}}}),this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var o=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=L(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var i=this.labels.length,r=this.labels.length/2,s=r/2,a=e<s||e>i-s,c=e===s||e===i-s;t.textAlign=0===e||e===r?"center":e<r?"left":"right",t.textBaseline=c?"middle":a?"bottom":"top",t.fillText(this.labels[e],o.x,o.y)}}}}}),u.addEvent(window,"resize",(function(){clearTimeout(c),c=setTimeout((function(){l(s.instances,(function(t){t.options.responsive&&t.resize(t.render,!0)}))}),50)})),v?void 0===(o=function(){return s}.call(e,n,e,t))||(t.exports=o):t.exports&&(t.exports=s),i.Chart=s,s.noConflict=function(){return i.Chart=r,s}}).call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){var o=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var i=this.calculateBaseWidth(),r=this.calculateX(n)-i/2,s=this.calculateBarWidth(t);return r+s*e+e*o.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*o.barValueSpacing},calculateBarWidth:function(t){return(this.calculateBaseWidth()-(t-1)*o.barDatasetSpacing)/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,(function(t){var n="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars((function(t){t.restore(["fillColor","strokeColor"])})),e.each(n,(function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke})),this.showTooltip(n)})),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(n.datasets,(function(t,o){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(i),e.each(t.data,(function(e,o){i.bars.push(new this.BarClass({value:e,label:n.labels[o],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))}),this)}),this),this.buildScale(n.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars((function(t,n,o){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,o,n),y:this.scale.endPoint}),t.save()}),this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,(function(t){t.restore(["fillColor","strokeColor"])})),this.eachBars((function(t){t.save()})),this.render()},eachBars:function(t){e.each(this.datasets,(function(n,o){e.each(n.bars,t,this,o)}),this)},getBarsAtEvent:function(t){for(var n,o=[],i=e.getRelativePosition(t),r=function(t){o.push(t.bars[n])},s=0;s<this.datasets.length;s++)for(n=0;n<this.datasets[s].bars.length;n++)if(this.datasets[s].bars[n].inRange(i.x,i.y))return e.each(this.datasets,r),o;return o},buildScale:function(t){var n=this,o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var o,i=e.calculateScaleRange((o=[],n.eachBars((function(t){o.push(t.value)})),o),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(o)},addData:function(t,n){e.each(t,(function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:n,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))}),this),this.scale.addXLabel(n),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,(function(t){t.bars.shift()}),this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var n=t||1;this.clear();this.chart.ctx;this.scale.draw(n),e.each(this.datasets,(function(t,o){e.each(t.bars,(function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,o,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},n).draw())}),this)}),this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:n,initialize:function(n){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,(function(t){var n="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,(function(t){t.restore(["fillColor"])})),e.each(n,(function(t){t.fillColor=t.highlightColor})),this.showTooltip(n)})),this.calculateTotal(n),e.each(n,(function(t,e){this.addData(t,e,!0)}),this),this.render()},getSegmentsAtEvent:function(t){var n=[],o=e.getRelativePosition(t);return e.each(this.segments,(function(t){t.inRange(o.x,o.y)&&n.push(t)}),this),n},addData:function(t,e,n){var o=e||this.segments.length;this.segments.splice(o,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,e.each(t,(function(t){this.total+=Math.abs(t.value)}),this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,(function(t){t.restore(["fillColor"])})),e.each(this.segments,(function(t){t.save()})),this.render()},removeData:function(t){var n=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(n,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,(function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})}),this)},draw:function(t){var n=t||1;this.clear(),e.each(this.segments,(function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},n),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)}),this)}}),t.types.Doughnut.extend({name:"Pie",defaults:e.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,(function(t){var n="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints((function(t){t.restore(["fillColor","strokeColor"])})),e.each(n,(function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke})),this.showTooltip(n)})),e.each(n.datasets,(function(t){var o={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(o),e.each(t.data,(function(e,i){o.points.push(new this.PointClass({value:e,label:n.labels[i],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))}),this),this.buildScale(n.labels),this.eachPoints((function(t,n){e.extend(t,{x:this.scale.calculateX(n),y:this.scale.endPoint}),t.save()}),this)}),this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,(function(t){t.restore(["fillColor","strokeColor"])})),this.eachPoints((function(t){t.save()})),this.render()},eachPoints:function(t){e.each(this.datasets,(function(n){e.each(n.points,t,this)}),this)},getPointsAtEvent:function(t){var n=[],o=e.getRelativePosition(t);return e.each(this.datasets,(function(t){e.each(t.points,(function(t){t.inRange(o.x,o.y)&&n.push(t)}))}),this),n},buildScale:function(n){var o=this,i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:n.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var n,i=e.calculateScaleRange((n=[],o.eachPoints((function(t){n.push(t.value)})),n),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:n,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(i,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(i)},addData:function(t,n){e.each(t,(function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:n,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))}),this),this.scale.addXLabel(n),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,(function(t){t.points.shift()}),this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var n=t||1;this.clear();var o=this.chart.ctx,i=function(t){return null!==t.value},r=function(t,n,o){return e.findPreviousWhere(n,i,o)||t};this.scale.draw(n),e.each(this.datasets,(function(t){var s=e.where(t.points,i);e.each(t.points,(function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},n)}),this),this.options.bezierCurve&&e.each(s,(function(t,n){var o=n>0&&n<s.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(r(t,s,n),t,function(t,n,o){return e.findNextWhere(n,i,o)||t}(t,s,n),o),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)}),this),o.lineWidth=this.options.datasetStrokeWidth,o.strokeStyle=t.strokeColor,o.beginPath(),e.each(s,(function(t,e){if(0===e)o.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=r(t,s,e);o.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else o.lineTo(t.x,t.y)}),this),o.stroke(),this.options.datasetFill&&s.length>0&&(o.lineTo(s[s.length-1].x,this.scale.endPoint),o.lineTo(s[0].x,this.scale.endPoint),o.fillStyle=t.fillColor,o.closePath(),o.fill()),e.each(s,(function(t){t.draw()}))}),this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:n.length}),this.updateScaleRange(n),this.scale.update(),e.each(n,(function(t,e){this.addData(t,e,!0)}),this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,(function(t){var n="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,(function(t){t.restore(["fillColor"])})),e.each(n,(function(t){t.fillColor=t.highlightColor})),this.showTooltip(n)})),this.render()},getSegmentsAtEvent:function(t){var n=[],o=e.getRelativePosition(t);return e.each(this.segments,(function(t){t.inRange(o.x,o.y)&&n.push(t)}),this),n},addData:function(t,e,n){var o=e||this.segments.length;this.segments.splice(o,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var n=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(n,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,(function(t){this.total+=t.value}),this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var n=[];e.each(t,(function(t){n.push(t.value)}));var o=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(n,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,o,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,(function(t){t.save()})),this.reflow(),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,(function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})}),this)},draw:function(t){var n=t||1;this.clear(),e.each(this.segments,(function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},n),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()}),this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(n),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,(function(t){var n="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints((function(t){t.restore(["fillColor","strokeColor"])})),e.each(n,(function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke})),this.showTooltip(n)})),e.each(n.datasets,(function(t){var o={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(o),e.each(t.data,(function(e,i){var r;this.scale.animation||(r=this.scale.getPointPosition(i,this.scale.calculateCenterOffset(e))),o.points.push(new this.PointClass({value:e,label:n.labels[i],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:r.x,y:this.options.animation?this.scale.yCenter:r.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))}),this)}),this),this.render()},eachPoints:function(t){e.each(this.datasets,(function(n){e.each(n.points,t,this)}),this)},getPointsAtEvent:function(t){var n=e.getRelativePosition(t),o=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},n),i=2*Math.PI/this.scale.valuesCount,r=Math.round((o.angle-1.5*Math.PI)/i),s=[];return(r>=this.scale.valuesCount||r<0)&&(r=0),o.distance<=this.scale.drawingArea&&e.each(this.datasets,(function(t){s.push(t.points[r])})),s},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var n,o=(n=[],e.each(t,(function(t){t.data?n=n.concat(t.data):e.each(t.points,(function(t){n.push(t.value)}))})),n),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(o,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,i)},addData:function(t,n){this.scale.valuesCount++,e.each(t,(function(t,e){var o=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:n,x:o.x,y:o.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))}),this),this.scale.labels.push(n),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,(function(t){t.points.shift()}),this),this.reflow(),this.update()},update:function(){this.eachPoints((function(t){t.save()})),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var n=t||1,o=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,(function(t){e.each(t.points,(function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),n)}),this),o.lineWidth=this.options.datasetStrokeWidth,o.strokeStyle=t.strokeColor,o.beginPath(),e.each(t.points,(function(t,e){0===e?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y)}),this),o.closePath(),o.stroke(),o.fillStyle=t.fillColor,o.fill(),e.each(t.points,(function(t){t.hasValue()&&t.draw()}))}),this)}})}.call(this)},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a;return r=n(374).TemplateView,e=n(429).ContractSelectView,a=n(406).Constants.ViewToModel,{ContractFilterView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="history/filters/contract",n.prototype.requiredOptions=["query"],n.prototype.showAllCardsItem=!0,n.prototype.bindings={contract:'[name="contract"]'},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.readyPromise=o.Deferred(),this.modelBinder=new i.ModelBinder,this.contracts=this.options.contracts||window.app.data.contracts.history},n.prototype.initializeContractSelect=function(){var t;return this.contractsList=new e({el:this.$el,collection:this.contracts,showAllCardsItem:this.showAllCardsItem}),this.contractsList.on("ready",(t=this,function(){return t.modelBinder.bind(t.query,t.$el,t.bindings,{initialCopyDirection:a}),t.readyPromise.resolve()})),this.contractsList.show()},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return t.initializeContractSelect()}));var t},n.prototype.onRender=function(){return this.$el.addClass("filter_contract")},n}(r)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(384))},function(t,e,n){(function(o,i,r){var s,a={}.hasOwnProperty;void 0===(s=function(t){var e,s;return e=n(374).TemplateView,s=n(405),{PeriodFilterView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="history/filters/period",e.prototype.requiredOptions=["query"],e.prototype.bindings={from:{selector:'[name="from"]',converter:s.datepickerConverter},to:{selector:'[name="to"]',converter:s.datepickerConverter}},e.prototype.events={"change input.from":"updateToMinDate","change input.to":"updateFromMaxDate"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.readyPromise=o.Deferred(),this.modelBinder=new i.ModelBinder},e.prototype.updateToMinDate=function(){return this.$inputTo.datepicker("option","minDate",this.$inputFrom.datepicker("getDate"))},e.prototype.updateFromMaxDate=function(){return this.$inputFrom.datepicker("option","maxDate",this.$inputTo.datepicker("getDate"))},e.prototype.show=function(){return e.__super__.show.apply(this,arguments).then((t=this,function(){return t.readyPromise.resolve()}));var t},e.prototype.getDatepickerOptions=function(){return{maxDate:new Date,dateFormat:"dd M yy",firstDay:1,yearRange:"-5:+0",beforeShow:(t=this,function(e,n){return r.defer((function(){return o(n.dpDiv).position({my:"left top",at:"left bottom",of:t.$el})}))})};var t},e.prototype.onRender=function(){var t,e,n;return this.$el.addClass("filter_period"),t=this.getDatepickerOptions(),e=this.query.get("from"),n=this.query.get("to"),(this.$inputFrom=this.$("input.from")).datepicker(r.extend({},t,{defaultDate:e,maxDate:n})),(this.$inputTo=this.$("input.to")).datepicker(r.extend({},t,{defaultDate:n,minDate:e})),this.modelBinder.bind(this.query,this.$el,this.bindings)},e}(e)}}.call(e,n,e,t))||(t.exports=s)}).call(this,n(14),n(384),n(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){return n(476),{TextSearchFilterView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="history/filters/text-search",e.prototype.requiredOptions=["query"],e.prototype.bindings={textSearch:'[name="text-search"]'},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.readyPromise=o.Deferred(),this.modelBinder=new i.ModelBinder},e.prototype.show=function(){return e.__super__.show.apply(this,arguments).then((t=this,function(){return t.readyPromise.resolve()}));var t},e.prototype.onRender=function(){return this.$el.addClass("filter_text-search"),this.$('[name="text-search"]').searchCompact(),this.modelBinder.bind(this.query,this.$el,this.bindings)},e}(n(374).TemplateView)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(384))},function(e,n,o){(function(i,r){var s,a=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(s=function(e){var n,s,u,l,d,p,h;return o(40),l=o(374).TemplateView,n=o(472).ContactInfo,u=o(378),d=o(387).WbFormMixin,s=o(957).ContactInfoFormMixin,o(423),h=o(380),(p={}).ContactInfoForm=function(e){function o(){return this.toggleOverride=a(this.toggleOverride,this),o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.template="settings/contact-info-form",o.prototype.mixins=[d,s],o.prototype.events={"change .toggle-section-checkbox":"toggleOverride"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=this.options.model||new n,this.defaultValidationOptions.errorPlacement=function(t,e){return t.appendTo(e.closest(".field-wrapper")),t.addClass("error-message")},this.initForm()},o.prototype.show=function(){return this.showLoadingIndicator(),this.loadSettingsAndData().then((t=this,function(){return o.__super__.show.apply(t,arguments)}));var t},o.prototype.onRender=function(){return this.$(".toggle-section-checkbox").switchButton({show_labels:!1}),this.$("select").each((function(){var t;return t=i(this).data("search")?{}:{disable_search:!0},i(this).chosen(r.extend(t,{width:"100%"}))})),o.__super__.onRender.apply(this,arguments)},o.prototype.onSubmitSuccess=function(){return this.$(".valid").removeClass("valid"),this.showSuccessMessage(t("Contact information has been saved"))},o.prototype.submitAction=function(){var t,e,n,o;for(t=0,e=(n=this.sections).length;t<e;t++)(o=n[t]).isInherited&&this.overrideSection(o.id);return this.model.save()},o.prototype.toggleOverride=function(t){var e,n,o,s;if(e=i(t.target).closest(".contact-info-section"),o=e.data("section-id"),(n=r.find(this.sections,(function(t){return t.id===o}))).isInherited=t.target.checked,e.find(".section-fields-wrapper").toggle(!n.isInherited).find(".field-wrapper").removeClass("valid error").find("input"),n.isInherited)return r.defer((s=this,function(){return s.$form.validate().form()}))},o.prototype.context=function(){return{isFormReadOnly:r.every(this.sections,"readOnly"),sections:this.getSectionsContext(),contactInfo:this.model.viewContext()}},o}(l),p.ContactInfoPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="settings/contact-info-page",n.prototype.pageType=h.mainMenuIds.SECURITY,n.prototype.getTitle=function(){return t("Contact info")},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return new p.ContactInfoForm({el:t.$(".block__contact-info")}).show()}));var t},n}(u),p}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n;return o(419),n=o(97),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/region-select",o.prototype.events={"change select":"onRegionChange"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.regions=window.app.data.regions},o.prototype.onRegionChange=function(t){var e;return t.preventDefault(),e=this.$(t.target).val(),n.set("SELECTED_REGION",e,{path:window.WB.contextPath}),this.$el.trigger("change",e),!1},o.prototype.setValue=function(t,e){var n;if(null==e&&(e=!1),(n=this.$("select")).val(t),n.trigger("chosen:updated"),!e)return n.trigger("change")},o.prototype.show=function(){var t,e;return t=i.Deferred(),this.regions.fetchIfEmpty().fail((function(e){return t.resolve(),e.errorHandled=!0})).then((e=this,function(){return e.render()})).then((function(){return t.resolve()})),t.promise()},o.prototype.onRender=function(){return this.$("select").val(n.get("SELECTED_REGION")).chosen({disable_search_threshold:5,no_results_text:t("No results match:")})},o.prototype.context=function(){return r.extend(o.__super__.context.apply(this,arguments),{collection:this.regions.viewContext()})},o}(o(374).TemplateView)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(module,exports,__webpack_require__){(function(jQuery){
/*

jQuery highlight plugin

Highlights arbitrary terms.

<http://www.frightanic.com/projects/lenient-jquery-highlight-plugin-javascript/>

Based on work by Johann Burkhard
<http://johannburkard.de/blog/programming/javascript/dynacloud-a-dynamic-javascript-tag-keyword-cloud-with-jquery.html>

MIT license.

Marcel Stör
<http://www.frightanic.com>
*/
jQuery.fn.highlight=function(t,e){if(!(t.length>1e3)){var n,o,i,r="",s=!1,a=!1;return e&&(s=e.lenient,a=e.fromStart),s?(n=t,o=RegExp.escape(function(t){var e=t;for(var n in charToAccentedCharClassMap)e=e.replace(new RegExp(charToAccentedCharClassMap[n],"g"),n);return e}(n)).replace(/([|()[{.+*?^$\\])/g,"\\$1"),i=o.replace(/\S/g,(function(t){return charToAccentedCharClassMap[t]||t})),r=new RegExp(i,"g")):r=a?new RegExp("(?:^|[\\s()-])"+RegExp.escape(t),"i"):t.toUpperCase(),this.each((function(){!function e(n,o){var i=0;if(3==n.nodeType){var r=0;if((r=s||a?n.data.search(o):n.data.toUpperCase().indexOf(o))>=0){" "==n.data[r]&&(r+=1);var c=document.createElement("span");c.className="highlight";var u=n.splitText(r),l=(u.splitText(t.length),u.cloneNode(!0));c.appendChild(l),u.parentNode.replaceChild(c,u),i=1}}else if(1==n.nodeType&&n.childNodes&&!/(script|style)/i.test(n.tagName))for(var d=0;d<n.childNodes.length;++d)d+=e(n.childNodes[d],o);return i}(this,r)}))}},jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each((function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()})).end()};var charToAccentedCharClassMap={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"}}).call(this,__webpack_require__(14))},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u,l,d;return d=n(40),l=n(377),c=n(374).TemplateView,a=n(537).ReactMoney,i=n(399),s=n(440),e=i.DOM,n(136),(u={}).InvoiceSubscriptionItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.render=function(){return e.li({className:"menu-item"},e.a({href:"#invoices/subscriptions/"+this.props.id,className:"active has-icon"},e.div({className:"outer"},e.img({ref:"icon"}),this.props.unpaidTotalCount>0?e.div({className:"unpaid-counter"},this.props.unpaidTotalCount):void 0),e.div({className:"menu-item-name"},e.span(null,this.props.name),e.br(null),this.props.unpaidTotalAmount?e.span(null,a(this.props.unpaidTotalAmount)):void 0)))},n.prototype.componentDidMount=function(){var t,e;return t=[d.IMAGE_PATH+"/billers/"+this.props.billerCode+".png",d.IMAGE_PATH+"/billers/default.png"],l.getExistingImage(t).then((e=this,function(t){return o(e.refs.icon).attr("src",t).addClass("visible")}))},n}(i.Component),u.InvoiceSubscriptionsList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.render=function(){return e.ul({className:"menu subscriptions-list"},this.props.subscriptions.map((function(t){var e;return(e=t.viewContext()).key=e.id,i.createElement(u.InvoiceSubscriptionItem,e)})))},n}(i.Component),u.InvoiceSubscriptionsPanelView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="payments/invoices/invoice-subscriptions-panel",e.prototype.renderSubscriptionsList=function(t){return s.render(i.createElement(u.InvoiceSubscriptionsList,{subscriptions:t}),this.$subscriptionsListContainer)},e.prototype.show=function(){var t,e;return t=o.Deferred(),window.app.updateInvoiceSubscriptions().then((e=this,function(){if(window.app.invoiceSubscriptions.length)return e.render().then((function(){return e.renderSubscriptionsList(window.app.invoiceSubscriptions.models),t.resolve()}));t.resolve()})).fail(function(e){return function(n){return e.$el.hide(),t.resolve()}}(this)),t},e.prototype.onRender=function(){return this.$subscriptionsListContainer=this.$("div")[0]},e.prototype.applySearch=function(t){var e;if(window.app.invoiceSubscriptions.length)return e=t?window.app.invoiceSubscriptions.search(t):window.app.invoiceSubscriptions,this.renderSubscriptionsList(e.models),this.$el.toggle(e.length>0)},e.prototype.remove=function(){return window.app.invoiceSubscriptions.length&&s.unmountComponentAtNode(this.$subscriptionsListContainer),e.__super__.remove.apply(this,arguments)},e}(c),u}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a;return a=n(40),e=n(375).BaseModel,i=n(784).CountriesList,(s={}).GeoLimiterRegions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=a.API_URL+"/user/geoLimiter/regions",e}(i),s.GeoLimiter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=a.API_URL+"/user/geoLimiter",e.prototype.isNew=function(){return!1},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.trackSavedValue()},e.prototype.addCountry=function(t){return console.assert(o.isArray(this.get("allowedCountries")),"allowedCountries is array"),this.set("allowedCountries",o.union(this.get("allowedCountries"),[t]))},e.prototype.removeCountry=function(t){return console.assert(o.isArray(this.get("allowedCountries")),"allowedCountries is array"),this.set("allowedCountries",o.without(this.get("allowedCountries"),t))},e}(e),s}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){var o,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;void 0===(o=function(t){var e,o,r,s,a,c;return c=n(40),o=(a=n(375)).BaseModel,e=a.BaseCollection,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=function(){return c.API_URL+"/showcase/"+this.get("id")},e}(o),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.model=s,e.prototype.url=c.API_URL+"/showcase",e}(e),{ShowcaseProduct:s,Showcase:r}}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i){var r,s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(r=function(e){var n,r,c,u;return o(396),r=o(378),c=o(845).ShowcaseProduct,u=o(391),n=window.WB.STATIC_PATH+"/images",function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="marketing/product-details-page",o.prototype.pageType="PRODUCT_DETAILS",o.prototype.baseFragmentsUrl=window.WB.STATIC_PATH+"/html-fragments/products/"+window.WB.currentLocale,o.prototype.events={"click .inline-comment":"openComment"},o.prototype.show=function(){return this.model?this.render():(this.model=new c({id:this.options.productId})).fetch().done((t=this,function(){return t.render()}));var t},o.prototype.getTitle=function(){return this.model.get("name")||t("Bank offers")},o.prototype.openComment=function(t){var e;return t.preventDefault(),e=i(t.target).attr("href"),i(e).toggle()},o.prototype.onRender=function(){return this.getProductDetails().done((t=this,function(e){var o,r,s;return(o=t.$(".product-details")).html(e),i(".header",o).prepend('<div class="background"/>'),(r=i(".wb-tabs",o)).tabs(),r.addClass("ui-helper-clearfix"),i(".ui-tabs-nav",r).prepend('<li class="border"/>'),t.$("[data-image-src]").each((function(){var t,e;return(e=(t=i(this)).closest(".header")).length&&e.addClass("with-image"),t.delegate("img","load",(function(){})),u.appendExistingImage(t,n+"/"+t.data("image-src"),(function(){var e;if((e=i("img",t)).height()<t.height())return e.css({top:"50%",marginTop:-e.height()/2})}))})),s=t,t.$('a[data-type="product-link"]').parent("li").addClass("has-button").end().each((function(){return i(this).attr("href",s.getProductLink())})),t.showPage()}));var t},o.prototype.getProductDetails=function(){return i.get(this.baseFragmentsUrl+"/"+this.model.get("id")+".html")},o.prototype.getServiceProductLink=function(){var t,e,n,o;return t=window.WB.contextPath+"/services/"+this.model.get("link.id"),this.model.get("link.allowRest"),this.model.get("link.allowRest")?(n=["transfer","payment","application"],o=this.model.get("link.workflowType"),a.call(n,o)<0?(console.debug("Unsupported workflow type: ",o),t):(e="application"===o?"#application/"+this.model.get("link.id"):"#payment/"+this.model.get("link.id"),window.WB.contextPath+"/"+e)):t},o.prototype.getProductLink=function(t){switch(this.model.get("link.type")){case"url":return this.model.get("link.url");case"menu":return window.WB.contextPath+"/#"+this.model.get("link.id");case"service":return this.getServiceProductLink();default:throw new Error("unknown product link type")}},o.prototype.context=function(){return{product:this.model.viewContext(),contextPath:window.WB.contextPath,staticPath:window.WB.STATIC_PATH,currentMenuId:window.WB.currentMenuId}},o}(r)}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(t,e,n){(function(o,i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(t){var e,s,c,u,l;return l=n(40),s=(u=n(375)).BaseModel,e=u.BaseCollection,(c={}).PagedChatQuery=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=l.API_URL+"/chat",e.prototype.defaults={offset:0,pageSize:l.CHAT_PAGE_SIZE||20},e.prototype.getUrl=function(){var t;return(t=new o(this.url)).addSearch({from:this.get("offset"),count:this.get("pageSize")}),t.toString()},e}(s),c.ChatMessage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={type:"chatMessage"},e.prototype.url=function(){return l.API_URL+"/chat/"+this.id},e.prototype.markAsRead=function(){return this.set({read:!0}),i.ajax({url:this.url(),type:"PUT"})},e.prototype.viewContext=function(){var t,n;return(t=e.__super__.viewContext.apply(this,arguments)).attachments&&t.attachments.forEach((n=this,function(t){return t.url=n.url()+"/attachment/"+t.id})),t},e}(s),c.ChatMessages=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.model=c.ChatMessage,n.prototype.url=function(){return this.query.getUrl()},n.prototype.deleteUrl=l.API_URL+"/chat/delete",n.prototype.markAsReadUrl=l.API_URL+"/chat/read",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.messages=new e,this.query=new c.PagedChatQuery},n.prototype.fetch=function(t){return null==t&&(t={}),t.latest&&this.query.set("offset",0),n.__super__.fetch.apply(this,arguments).done((e=this,function(){return e.allFetched=e.models.length<e.query.get("pageSize"),e.messages.add(e.models),e.query.set("offset",e.messages.length),e.trigger("update")}));var e},n.prototype.add=function(t){return this.messages.add(t)},n.prototype.get=function(t){return this.messages.get(t)},n.prototype.remove=function(){return n.__super__.remove.apply(this,arguments),this.messages.remove.apply(this.messages,arguments)},n.prototype.clone=function(){var t;return(t=new this.constructor).query=this.query.clone(),t.messages=this.messages.clone(),t.allFetched=this.allFetched,t},n.prototype.getMessages=function(){return this.messages.models},n.prototype.getUnreadCount=function(){return this.messages.filter((function(t){return!t.get("read")})).length},n.prototype.hasUnfetchedMessages=function(){return!this.allFetched},n.prototype.deleteMessages=function(t){return i.ajax({url:this.deleteUrl,data:JSON.stringify(r.pluck(t,"id")),type:"POST",dataType:"json",contentType:"application/json"}).done((e=this,function(){return e.messages.remove(t)})).fail((function(t){return console.error("Failed to remove chat messages"),t.errorHandled=!0}));var e},n.prototype.markAsRead=function(t){if(t.length)return i.ajax({url:this.markAsReadUrl,data:JSON.stringify(r.pluck(t,"id")),type:"PUT",dataType:"json",contentType:"application/json"}).done((function(){return t.forEach((function(t){return t.set("read",!0)}))})).fail((function(t){return console.error("Failed to mark chat messages as read"),t.errorHandled=!0}))},n}(e),c}.call(e,n,e,t))||(t.exports=s)}).call(this,n(379),n(14),n(11))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d;return d=o(40),u=o(377),n=o(375).BaseModel,l=o(136),(s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/login",e.prototype.defaults={oldLogin:null,login:null},e.prototype.save=function(){var t,e;return console.assert(this.get("login"),"New login must be set"),t={op:"replace",path:"/login",value:this.get("login")},this.has("confirmation")&&i.extend(t,{confirmation:this.get("confirmation")}),t=u.sanitizeValues(t),r.sync("patch",this,{url:this.url,data:JSON.stringify(t),contentType:"application/json"}).done((e=this,function(){return e.trigger("sync")})).fail(function(t){return function(e){return t.onAjaxError(e)}}(this))},e}(n)).ERROR_MESSAGES={LOGIN_ALREADY_IN_USE:t("Username already in use")},(c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/password",e.prototype.defaults={password:null,passwordConfirmation:null},e.prototype.save=function(){var t,e;return console.assert(this.get("password"),"New password must be set"),t={op:"replace",path:"/password",value:this.get("password")},this.has("confirmation")&&i.extend(t,{confirmation:this.get("confirmation")}),t=u.sanitizeValues(t),r.sync("patch",this,{url:this.url,data:JSON.stringify(t),contentType:"application/json"}).done((e=this,function(){return e.trigger("sync")})).fail(function(t){return function(e){return t.onAjaxError(e)}}(this))},e}(n)).ERROR_MESSAGES={INVALID_NEW_PASSWORD:t("Password does not comply to security policy"),PASSWORD_USED_BEFORE:t("You have used this password before. Please set different password")},{WbLoginSchema:s,WbPwaSchema:c,WbPwaPolicy:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=d.API_URL+"/password/policy",e.prototype.initialize=function(){return this.on("sync",(t=this,function(){if(!t.get("regex")&&(t.has("minCategories")||t.has("categories")))return l.warn("Categories validation is not supported on client.  Use regex-based policy")}));var t},e}(n)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(384))},function(t,e,n){(function(e){var o,i,r,s,a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=n(40),i=(s=n(375)).BaseModel,o=s.BaseCollection,(r={}).OtpReceipt=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,t),n.prototype.url=a.API_URL+"/user/otp-cheque",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.on("remove",(function(){return window.app.session.fetch()}))},n.prototype.sendDelete=function(){return e.sync("delete",this,{url:this.url})},n}(i),r.AuditLogin=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(i),r.AuditLogins=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=r.AuditLogin,e.prototype.url=a.API_URL+"/audit/login",e}(o),t.exports=r}).call(this,n(384))},function(e,n,o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(e){var n,i,s,a,c,u;return a=o(378),c=o(533),s=c.HistoryPanel,i=c.HistoryAnalyticsPanel,n=c.ApplicationHistoryPanel,u=o(380),{HistoryPage:function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.template="history/history-page",n.prototype.pageType=u.mainMenuIds.CP_HISTORY,n.prototype.getTitle=function(){return t("Operations history")},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return new(window.OW.features.TRANSACTION_PIECHART?i:s)({el:t.$(".block__history")}).show()}));var t},n}(a),ApplicationHistoryPage:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.template="history/history-page",o.prototype.pageType=u.mainMenuIds.CP_HISTORY,o.prototype.getTitle=function(){return t("Application history")},o.prototype.show=function(){return o.__super__.show.apply(this,arguments).then((t=this,function(){return new n({el:t.$(".block__history")}).show()}));var t},o}(a)}}.call(n,o,n,e))||(e.exports=i)},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u;return c=o(378),s=o(852).Disputes,n=o(1059),u=o(380),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.pageType=u.mainMenuIds.CP_HISTORY,o.prototype.template="disputes/disputes-page",o.prototype.events={"click .toggle-closed-disputes":"toggleClosedDisputes"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.disputes=new s},o.prototype.getTitle=function(){return t("Disputed operations")},o.prototype.toggleClosedDisputes=function(t){return t.preventDefault(),this.$(".toggle-closed-disputes").toggleClass("hidden"),this.$(".dispute.hidden").toggleClass("visible")},o.prototype.renderDisputes=function(){var t,e;return t=this.$(".disputes"),e=this.disputes.map((function(e){var o;return o=i('<div class="dispute"></div>'),t.append(o),new n({el:o,model:e}).show()})),i.when.apply(i,e)},o.prototype.show=function(){return i.when(this.disputes.fetch(),window.app.getDisputesConfig()).then((t=this,function(){return o.__super__.show.apply(t,arguments)})).then(function(t){return function(){return t.renderDisputes()}}(this));var t},o.prototype.context=function(){var t,e;return e=this.disputes.viewContext(),t=this.disputes.filter((function(t){return t.isClosed()})).length,r.extend(o.__super__.context.apply(this,arguments),{disputes:e,closedDisputesQuantity:t})},o}(c)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){var o,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;void 0===(o=function(t){var e,o,r,s,a,c;return c=n(40),o=(a=n(375)).BaseModel,e=a.BaseCollection,r=n(417).History,(s={}).Dispute=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=c.API_URL+"/disputes",e.prototype.parse=function(t,e){var n;if(t)return n=t.transactions,delete t.transactions,this.setTransactions(n),t},e.prototype.isClosed=function(){return!1},e.prototype.setTransactions=function(t){return this.transactions=new r(t)},e.prototype.viewContext=function(){var t;return(t=e.__super__.viewContext.apply(this,arguments)).transactions=this.transactions.viewContext(),t},e}(o),s.Disputes=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.model=s.Dispute,e.prototype.url=c.API_URL+"/disputes",e}(e),s}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u,l,d,p,h,f;return l=n(533).HistoryPanel,h=n(796).SimpleHistoryListView,c=n(417).DisputableHistory,s=n(803).ContractFilterView,d=n(804).PeriodFilterView,f=n(805).TextSearchFilterView,i=n(415).Checkbox,a=n(395).Contracts,u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="disputes/flat-history-list",e}(h),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="disputes/selectable-history-list",e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.$(".history-item-selector").each((function(){return new i({el:this,checked:!!o(this).data("checked"),className:"toggle-operation"}).show()}))},e.prototype.getSelectedOperations=function(){return this.$(":checked").map((function(){return o(this).closest("li").data("id")})).get()},e}(h),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.show=function(){return this.contracts.fetchIfEmpty().then((t=this,function(){return t.contracts=new a(t.contracts.filter((function(t){return"card"===t.get("type")}))),t.contracts.trigger("sync"),e.__super__.show.apply(t,arguments)}));var t},e}(s),{FlatHistoryListView:u,SelectableHistoryPanel:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.historyClass=c,n.prototype.historyListClass=p,n.prototype.filters=[e,d,f],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.selectedOperations=this.options.selectedOperations||[]},n.prototype.getSelectedOperations=function(){return this.historyView.getSelectedOperations()},n.prototype.renderHistory=function(){var t;return this.selectedOperations.length&&this.history.forEach((t=this,function(e){return e.set("isChecked",-1!==t.selectedOperations.indexOf(e.id))})),this.historyView.renderWith(this.history)},n}(l)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.validatePhone=function(e){if(!(-1===this.props.existingValues.indexOf(e)))return t("Entered phone number already exists")},n}((r=o(1067)).NotificationInlineEdit),i.extend(r,{NotificationInlineEdit:n})}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(e){var n,a,u,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T,A,E;return k=o(372),A=o(97),d=o(137),C=o(377),m=o(378),P=o(397),y=P.RATE_TYPES,f=P.PAYMENT_STAGES,x=o(400),h=x.IntraCardTransfer,p=x.IcPaymentDetails,n=o(395).Contracts,b=o(387).WbFormMixin,T=o(856),w=T.ReactSelect,g=T.ReactContractSelect,a=o(1081).CurrencyRate,S=o(424).intraCardTransferConfirmationDialog,B={},_=o(399),v=o(440),u=_.DOM,E=o(380),B.IntraCardTransferForm=function(e){function n(){var t;n.__super__.constructor.apply(this,arguments),this.props.repeatParams?(this.setContract(this.props.repeatParams.contract),this.state=this.props.repeatParams):(t=this.props.contractId||this.props.contracts.at(0).id,this.setContract(t),this.state={contract:this.contract.id,source:this.accounts[0].number,target:this.accounts[1].number,currency:this.accounts[0].currency})}return c(n,e),n.prototype.setContract=function(t){return this.contract=this.props.contracts.get(t),this.accounts=this.contract.get("card.accounts")},n.prototype.onContractChange=function(t){return this.setContract(t),this.setState({contract:t,source:this.accounts[0].number,target:this.accounts[1].number,currency:this.accounts[0].currency})},n.prototype.handleKeyPress=function(t){if(!C.checkNumberSymbol(t))return t.preventDefault()},n.prototype.handleAmountChange=function(t){var e;return e=t.target.value.replace(/\s/g,"").replace(/,/g,".").replace(/^0+(?=[1-9])/,""),this.setState({amount:e})},n.prototype.handleAmountBlur=function(t){if(this.state.amount)return this.setState({amount:d.parseFloat(this.state.amount).toString()})},n.prototype.handleSubmit=function(e){return this.state.source===this.state.target?(e.preventDefault(),void window.app.showErrorMessage(t("Source and target accounts must be different."))):this.state.amount?(this.props.model.setStage(f.PREPARE),this.props.model.set({remitter:{id:this.state.contract,accountNumber:this.state.source},beneficiary:{accountNumber:this.state.target},amount:{value:d.parseFloat(this.state.amount),currency:this.state.currency}}),this.props.onSubmit(e)):void e.preventDefault()},n.prototype.getFormField=function(t,e){return u.div({className:"field-wrapper"},u.div({className:"field-caption"},t),u.div({className:"control-container"},e))},n.prototype.getAccountSelect=function(e,n,o){return _.createElement(w,{onChange:o,options:e.map((function(t){return{name:t.number,value:t.number}})),value:n,customElement:function(n,o){var r;return r=i.findWhere(e,{number:n.value}),'<span class="account-item">\n  <span class="title">'+t(r.currency+" [text]")+'</span>\n  <span class="balance">'+k.filters.money(r.balances.available)+"</span>\n</span>"},extraOptions:{width:"100%"}})},n.prototype.onAccountChange=function(t,e){var n,o,r,s,a;return(o={})[t]=e,"source"===t?(s=i.findWhere(this.accounts,{number:e}),a=i.findWhere(this.accounts,{number:this.state.target})):(s=i.findWhere(this.accounts,{number:this.state.source}),a=i.findWhere(this.accounts,{number:e})),n=i.unique([s.currency,a.currency]),r=this.state.currency,l.call(n,r)<0&&(o.currency=n[0]),this.setState(o)},n.prototype.getContractSelect=function(){return _.createElement(g,{onChange:this.onContractChange.bind(this),contracts:this.props.contracts,options:this.props.contracts.map((function(t){return{name:t.get("name"),value:t.id}})),required:!0,value:this.state.contract,extraOptions:{width:"100%"}})},n.prototype.getSourceSelect=function(){return this.getAccountSelect(this.accounts,this.state.source,this.onAccountChange.bind(this,"source"))},n.prototype.getTargetSelect=function(){return this.getAccountSelect(this.accounts,this.state.target,this.onAccountChange.bind(this,"target"))},n.prototype.getAmountField=function(){var e,n,o,s,c;return o=i.findWhere(this.accounts,{number:this.state.source}),s=i.findWhere(this.accounts,{number:this.state.target}),e=i.unique([o.currency,s.currency]),n=this.state.amount&&r.isNumeric(i.last(this.state.amount)),u.div(null,u.div({className:"field-wrapper amount editable-currency"},u.div({className:"field-caption"},t("Amount")),u.div({className:"control-container amount"},u.input({type:"text",maxLength:12,required:!0,className:"amount",value:this.state.amount,onKeyPress:this.handleKeyPress.bind(this),onChange:this.handleAmountChange.bind(this),onBlur:this.handleAmountBlur.bind(this)})),u.div({className:"control-container currency"},_.createElement(w,{onChange:(c=this,function(t){return c.setState({currency:t})}),options:e.map((function(e){return{name:t(e+" [text]"),value:e}})),value:this.state.currency,extraOptions:{width:"100%"}}))),n?u.div({className:"hint exchange-rate-container"},_.createElement(a,{sourceCurrency:this.state.currency,targetCurrency:this.state.currency===o.currency?s.currency:o.currency,amount:d.parseFloat(this.state.amount),rateType:this.state.currency===o.currency?y.SELL:y.BUY})):void 0)},n.prototype.render=function(){return u.form({className:"wb-form",onSubmit:this.handleSubmit.bind(this)},u.div({className:"form-fields"},this.getFormField(t("Contract"),this.getContractSelect()),this.getFormField(t("Source"),this.getSourceSelect()),this.getFormField(t("Target"),this.getTargetSelect()),this.getAmountField()),u.div({className:"button-group"},u.button({className:"wb-button",type:"submit"},t("Continue"))))},n}(_.Component),B.IntraCardTransferPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.pageType=E.mainMenuIds.PAYMENTS_TRANSFERS,o.prototype.template="payments/native/transfer-page",o.prototype.mixins=[b],o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.contracts=window.app.data.contracts.dashboard,this.model=new h,i.isObject(this.options.params)?(this.contractId=null,this.paymentId=this.options.params["repeat-payment-id"]):(this.contractId=this.options.params,this.paymentId=null),this.initForm()},o.prototype.getValidationOptions=function(){return{errorPlacement:function(t,e){return t.appendTo(e.closest(".field-wrapper")),t.addClass("error-message")}}},o.prototype.show=function(){var t,e,o,i,s;return o=this.paymentId?(t=new p({id:this.paymentId})).fetch().then((s=this,function(){return s.repeatParams={contract:t.get("remitter.id"),source:t.get("remitter.accountNumber"),target:t.get("beneficiary.accountNumber"),currency:t.get("amount.currency"),amount:t.get("amount.value")}})):(new r.Deferred).resolve(),e=null!=(i=window.OW.contractsConfig)?i.wbCardsAccountsPage:void 0,r.when(this.render(),this.contracts.fetchIfEmpty(e.sections),o).done(function(t){return function(){var e;if(e=new n(t.contracts.filter((function(t){return t.isIntraCardTransferAllowed()}))),!t.contractId||e.get(t.contractId))return v.render(_.createElement(B.IntraCardTransferForm,{model:t.model,contractId:t.contractId,contracts:e,repeatParams:t.repeatParams,onSubmit:b.handleSubmit.bind(t)}),t.$(".block__payments-transfers")[0]),t.trigger("render.complete");window.app.router.goBack()}}(this)).fail((function(){return window.app.showErrorPage()}))},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),!1},o.prototype.getTitle=function(){return t("Intra-card transfer")},o.prototype.handleSubmit=r.noop,o.prototype.onPaymentCancel=function(){return this.model.clearPrepareData()},o.prototype.onSubmitSuccess=function(){return this.model.setStage(f.EXECUTION),this.showPaymentConfirmation()},o.prototype.done=function(){return this.model.setStage(f.COMPLETE),window.app.data.contracts.dashboard.resetCache(),window.app.data.cachedTransfer=this.model.clone(),window.app.router.navigate("#intracard-transfer/complete",{replace:!1,trigger:!0})},o.prototype.showPaymentConfirmation=function(){var t,e;return(t=S({contract:this.contracts.get(this.model.get("remitter.id")),payment:this.model,onSuccess:this.done.bind(this),onError:(e=this,function(t){return t.errorHandled=e.onSubmitError(t)})})).on("cancel",function(t){return function(){return t.onPaymentCancel()}}(this)),t.show()},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),{name:t("Intra-card transfer")})},o}(m),B.IntraCardTransferCompletePage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/native/transfer-complete-page",n.prototype.events={"click .show-details-link":"showDetails"},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),this.model=window.app.data.cachedTransfer,!this.model)return this.redirected=!0,window.app.router.navigate((new s).fragment().replace("/complete",""),{replace:!0,trigger:!0})},n.prototype.show=function(){if(!this.redirected)return n.__super__.show.apply(this,arguments)},n.prototype.showDetails=function(t){var e;return t.preventDefault(),e=o(437),new(window.OW.features.TRANSACTION_PIECHART?e.CategorySrnOperationDetailsDialog:e.SrnOperationDetailsDialog)({itemId:this.model.get("txRef")}).show()},n.prototype.context=function(){var e,o;return o=A.get("previousMenuItemId"),e={url:window.app.data.menu.getItemUrl(o),text:t('Back to "%(pageName)s"',{pageName:window.app.data.menu.get(o).get("name")})},i.extend(n.__super__.context.apply(this,arguments),{backLink:e})},n}(m),B}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(14),o(379))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u;return c=o(372),o(419),s=o(399),n=s.DOM,(u={}).ReactSelect=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.state={value:this.props.value}}return a(o,e),o.prototype.render=function(){var t;return t="react-select-wrap",this.props.label&&(t+=" react-select-labeled"),n.div({className:t},this.props.label?n.div({className:"react-select-label"},this.props.label):void 0,n.select({className:"react-select "+(this.props.className||""),onChange:i.noop,value:this.state.value,ref:"select",required:!!this.props.required},this.props.options.map((function(t){return n.option({key:t.value,value:t.value},t.name)}))))},o.prototype.getCustomElement=function(t,e){var n;return("function"==typeof(n=this.props).customElement?n.customElement(t,e):void 0)||t.html},o.prototype.getExtraOptions=function(){return this.props.extraOptions||{}},o.prototype.onChange=function(){return this.props.onChange(this.refs.select.value)},o.prototype.componentWillReceiveProps=function(t){return this.setState({value:t.value})},o.prototype.componentDidUpdate=function(){return i(this.refs.select).trigger("chosen:updated")},o.prototype.componentDidMount=function(){return i(this.refs.select).on("change",this.onChange.bind(this)).chosen(r.extend({disable_search:!0,custom_element:this.getCustomElement.bind(this),placeholder_text_single:t("Select an item")},this.getExtraOptions()))},o.prototype.componentWillUnmount=function(){return i(this.refs.select).off("change").chosen("destroy")},o}(s.Component),u.ReactContractSelect=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.contracts=this.props.contracts}return a(n,e),n.prototype.getExtraOptions=function(){return r.extend(n.__super__.getExtraOptions.apply(this,arguments),{placeholder_text_single:this.props.emptyText||t("Select contract")})},n.prototype.getCustomElement=function(t,e){var n,o,i,r,s,a;return(n=this.contracts.get(t.value))?("card"===n.get("type")&&(s=n.get("card.paymentSystem")),r=n.get("name"),a='<span class="payment-system-icon '+s+" "+(o=(i="active"===n.getStatus())?"":"inactive")+'"></span>',i&&(n.get("balances.available")&&(a+='<span class="contract-balance">'+c.filters.money(n.get("balances.available"))+"</span>"),this.props.showBonusBalance&&n.areBonusesSupported()&&n.get("balances.bonus")&&(a+='<span class="contract-balance bonus">'+c.filters.money(n.get("balances.bonus"))+"</span>")),a+='<span class="contract-name '+o+'">'+r+"</span>"):t.html},n}(u.ReactSelect),u}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(400),s=n(381),a=n(1082),c=n(394),u=n(135),l=n(404),d=n(858),p=n(560),h=n(1083),f=n(1084),m=n(372),y=n(11),_=n(1085),g=n(1086),v=n(375),w=n(40),b=n(1087),k=n(1088),B=n(1089),C=n(1091),S=n(860),P=n(1092),x=n(379),T=n(1093),A=n(402),E=n(411).WbServiceMethodsMixin,M=n(424).intraBankTransferConfirmationDialog,I=n(137),N=n(377);!function(t){t.CURRENCY_PURCHASE_LIMIT_EXCEEDED="CURRENCY_PURCHASE_LIMIT_EXCEEDED",t.CURRENCY_PAIR_WRONG="CURRENCY_PAIR_WRONG"}(o||(o={}));var R=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.formSelector=".block__payments-transfers .wb-form",t.isSkipBalanceEnoughConfirmation=!1,t.isLockedFormInfoContainer=!1,t.currencyPurchaseLimitValue=void 0,t.errorMessages=i.__assign(i.__assign({},c.WbGenericFormMixin._errorMessages),{AMOUNT_LIMITER_EXCEEDED:u.t("Amount limit exceeded"),FREQUENCY_LIMITER_EXCEEDED:u.t("Frequency limit exceeded")}),t}return i.__extends(n,e),n.prototype.getValidationOptions=function(){return this.strategy.getValidationOptions()},n.prototype.initialize=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e.prototype.initialize.apply(this,i.__spread(n)),this.formMeta=this.options.formMeta||new r.IntraBankTransferMeta,this.model=this.options.model||new r.IntraBankTransfer;var s,a="options.params.pageMode",c=N.get(this,a);N.unset(this,a);var u="options.params.templateId",l=N.get(this,u);N.unset(this,u);var m=N.get(this,"options.params.operationId");switch(c){case"paymentCart":s=new h.default;break;case"create":s=new p.default;break;case"createFromHistory":s=new g.default(m);break;case"edit":s=new C.default(l);break;case"repeat":s=new _.default(m);break;case"createRecurrent":s=new S.default;break;case"editRecurrent":s=new B.default(l);break;case"createRecurrentFromHistory":s=new P.default(m);break;default:s=new d.default}this.setStrategy(s),this.currencyExchange=new f.default,this.on("form.ready",(function(){t.listenTo(t.currencyExchange,"invalid",t.handleCurrencyExchangeError),t.listenTo(t.currencyExchange,"sync",t.showCurrencyRates),t.listenTo(t.model,"change:amount.currency",t.showCurrencyRates),t.listenTo(t.model,"change:remitter.id",t.updateFormFields),t.listenTo(t.model,"change:beneficiary.id",t.updateAmountInput),t.updateFormFields()}))},n.prototype.updateFormFields=function(){this.updateBeneficiarySelect(),this.updateAmountInput()},n.prototype.updateBeneficiarySelect=function(){if(w.INTRABANK_TRANSFER_USE_CONTRACTS_FILTRATION){var t=this.getSourceContractCurrency(),e=this.getFieldView({role:"beneficiary"});console.assert(e,"Beneficiary field was not found");var n=this.formMeta.getField({role:"beneficiary"}),o=t!==w.DEFAULT_CURRENCY?"currency:"+w.DEFAULT_CURRENCY:"currency__neq:"+t,i=new x(n.get("dataSource.url")).setQuery("filter",o);n.set("dataSource.url",i),e.selectView.refresh()}},n.prototype.getTitle=function(){return this.getPaymentName()},n.prototype.getCurrencyChoices=function(){var t=this.getSourceContractCurrency(),e=this.getTargetContractCurrency(),n=y.uniq([t,e]);return!w.CURRENCY_EXCHANGE_ALLOW_DEFAULT_CURRENCY&&n.length>1&&(n=y.filter(n,(function(t){return t!==w.DEFAULT_CURRENCY}))),y.map(n,(function(t){return{name:t,id:t}}))},n.prototype.getNotDefaultCurrency=function(){var t=y.uniq([this.getSourceContractCurrency(),this.getTargetContractCurrency()]);return y.filter(t,(function(t){return t!==w.DEFAULT_CURRENCY})).pop()},n.prototype.getTransferCurrency=function(){var t=this.model.get("amount.currency"),e=this.getSourceContractCurrency(),n=this.getTargetContractCurrency();return w.CURRENCY_EXCHANGE_ALLOW_DEFAULT_CURRENCY?t!==n?e:t:this.getNotDefaultCurrency()},n.prototype.handleAmountInput=function(){this.showCurrencyRates()},n.prototype.handleCurrencyExchangeError=function(){window.OW.features.CURRENCY_EXCHANGE&&(this.$("[data-js-submit]").prop("disabled",!0),window.app.showErrorMessage(u.t("Unable to fetch currency rates. Try again later or contact support")))},n.prototype.formatAmount=function(t,e){return m.filters.money({value:t,currency:e})},n.prototype.renderReferencePairRate=function(t){var e,n,o=t.humanReadableRate,i=o.rate,r=o.units,s=o.baseCurrency,a=o.quoteCurrency;return[m.filters.moneyShort((e=r,n=s,{value:e,currency:n})),"&nbsp;=&nbsp;",this.formatAmount(i,a),"&nbsp;("+u.t("rates may change")+")"].join("")},n.prototype.renderAmountPairRate=function(t){var e=this.getSourceContractCurrency(),n=this.getTargetContractCurrency(),o=this.model.getAmount().currency,i=this.getAmountInput(),r=N.parseAmountInput(i.val());return r&&o&&n&&e?["<br />",this.formatAmount(r,o),"&nbsp;=&nbsp;",this.formatAmount(r*t.rate,o===e?n:e)].join(""):""},n.prototype.getAmountInput=function(){return this.$("[name=amount\\.value]")},n.prototype.showCurrencyRates=function(){if(window.OW.features.CURRENCY_EXCHANGE&&!this.isLockedFormInfoContainer){var t=this.getFormInfoContainer();t.removeClass("error").removeAttr("data-error-code");var e=this.getSourceContractCurrency(),n=this.getTargetContractCurrency();if(e&&n){this.$("[data-js-submit]").prop("disabled",!1),window.app.clearMessages();this.getAmountInput();if(e!==n&&(this.$("#currency-select").length||!w.CURRENCY_EXCHANGE_ALLOW_DEFAULT_CURRENCY)&&this.currencyExchange.isValid()&&this.currencyExchange.isFetched())if(this.currencyExchange.isLoading())t.empty().addClass("loading");else{var o=this.model.getAmount().currency,i=this.currencyExchange.get(o===e?"targetRate":"sourceRate"),r=this.renderReferencePairRate(i),s=this.renderAmountPairRate(i);t.html([r,s].join("")).removeClass("loading")}else t.empty().removeClass("loading")}}},n.prototype.updateAmountInput=function(){var t=this.formMeta.getField({role:"amount.currency"}),e=this.getSourceContractCurrency(),n=this.getTargetContractCurrency(),o=this.getCurrencyChoices(),i=t.get("dataSource.values"),s=this.getTransferCurrency();this.model.set("amount.currency",s);var a=window.OW.features.CURRENCY_EXCHANGE&&e!==n?r.IC_PAYMENT_TYPES.CURRENCY_EXCHANGE_TRANSFER:r.IC_PAYMENT_TYPES.INTRA_BANK_TRANSFER;if(this.model.set("type",a),!y.isEqual(o,i)){t.set("editable",o.length>1),t.set("dataSource.values",o),t.set("value",s),t.catalog.reset(),t.catalog.set(o);var c=this.getFieldsViews().find((function(t){return"amount.value"===t.model.get("role")}));c&&(c.render(),A.applyMasks(c.$el),this.updateBindings({modelToView:!0}))}e&&n&&e!==n&&e!==w.DEFAULT_CURRENCY&&n!==w.DEFAULT_CURRENCY?this.showCurrencyPairWrongError():(this.hideCurrencyPairWrongError(),e!==n&&this.fetchCurrencyRates(),this.showCurrencyRates())},n.prototype.getFormInfoContainer=function(){return this.$(".form-info")},n.prototype.showCurrencyPairWrongError=function(){this.getFormInfoContainer().addClass("error").attr("data-error-code",o.CURRENCY_PAIR_WRONG).html(u.t("This type of transfer is not available.")),this.isLockedFormInfoContainer=!0},n.prototype.hideCurrencyPairWrongError=function(){this.getFormInfoContainer().removeClass("error").removeAttr("data-error-code").html(""),this.isLockedFormInfoContainer=!1},n.prototype.showCurrencyPairWrongPopup=function(){new k.default({sourceContractCurrency:this.getSourceContractCurrency(),targetContractCurrency:this.getTargetContractCurrency()}).show()},n.prototype.handleInfoContainerWithErrorClick=function(e){switch(t(e.currentTarget).attr("data-error-code")){case o.CURRENCY_PURCHASE_LIMIT_EXCEEDED:this.showCurrencyPurchaseLimitExceededPopup();break;case o.CURRENCY_PAIR_WRONG:this.showCurrencyPairWrongPopup()}},n.prototype.showCurrencyPurchaseLimitExceededPopup=function(){var t=this.currencyPurchaseLimitValue,e=this.getSourceContractCurrency();t&&e?new b.default({model:new v.BaseModel({limit:{value:t,currency:e}})}).show():console.warn("Currency purchase limit and source currency must be defined")},n.prototype.showCurrencyPurchaseLimitExceededError=function(){var t=this.currencyPurchaseLimitValue,e=this.getSourceContractCurrency();t&&e?this.getFormInfoContainer().addClass("error").attr("data-error-code",o.CURRENCY_PURCHASE_LIMIT_EXCEEDED).html(u.t("Maximum sum of transfer %(limit)s",{limit:m.filters.moneyText({value:t,currency:e})})):console.warn("Currency purchase limit and source currency must be defined")},n.prototype.fetchCurrencyRates=function(){if(window.OW.features.CURRENCY_EXCHANGE){var t=this.getSourceContract(),e=this.getTargetContract();if(t&&e){var n=this.getFormInfoContainer();n.empty();var o=t.get("id"),i=e.get("id");o!==i&&(this.currencyExchange.set("source",o),this.currencyExchange.set("target",i),this.currencyExchange.fetch(),n.addClass("loading"))}}},n.prototype.submit=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.addAuthDialog?c.WbGenericFormMixin.submit.apply(this,e):(window.app.clearMessages(),this.formIsValid()?this.model.get("remitter.id")===this.model.get("beneficiary.id")?(window.app.showErrorMessage(u.t("Source and target accounts must be different.")),this.processing=!1,!1):this.isLockedFormInfoContainer?(this.showCurrencyPairWrongPopup(),this.processing=!1,!1):I.parseFloat(this.model.getAmount().value)?this.isSkipBalanceEnoughConfirmation?c.WbGenericFormMixin.submit.apply(this,e):this.balanceEnoughConfirmation().then((function(){return c.WbGenericFormMixin.submit.apply(t,e)})).fail((function(){t.processing=!1})):(window.app.showErrorMessage(u.t("Unable to execute payment with zero amount")),this.processing=!1,!1):(this.processing=!1,!1))},n.prototype.isBalanceEnoughToAmount=function(){var t=this.getAmount(),e=this.getSourceContractCurrency();if(e&&t.currency!==e){var n=this.currencyExchange.get("sourceRate.rate");n&&(t={currency:e,value:t.value*n})}return E.isBalanceEnoughToAmount.call(this,t)},n.prototype.onRender=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=(t=this.strategy).onRender.apply(t,i.__spread(n));return e.prototype.onRender.apply(this,i.__spread(n)),r},n.prototype.submitAction=function(){return this.strategy.submitAction()},n.prototype.onSubmitSuccess=function(){return this.strategy.onSubmitSuccess()},n.prototype.onSubmitError=function(t){var e=N.parseResponseSafe(t);return e&&"CURRENCY_PURCHASE_LIMIT_EXCEEDED"===N.get(e,"_error.code")&&!y.isUndefined(e.availableLimit)?(this.currencyPurchaseLimitValue=parseFloat(e.availableLimit),this.showCurrencyPurchaseLimitExceededError(),this.showCurrencyPurchaseLimitExceededPopup(),!0):(delete this.currencyPurchaseLimitValue,this.strategy.onSubmitError(t))},n.prototype.isSupported=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e;return i.__generator(this,(function(n){switch(n.label){case 0:return(t=new v.BaseCollection).url=w.API_URL+r.IntraBankTransferMeta.getContractsUri().toString(),[4,t.fetch()];case 1:return n.sent(),w.INTRABANK_TRANSFER_USE_CONTRACTS_FILTRATION?[2,(e=y.uniq(t.pluck("currency"))).includes(w.DEFAULT_CURRENCY)&&e.length>1]:[2,t.length>1]}}))}))},n.prototype.show=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.isSupported()];case 1:return t.sent()||(this.strategy=new T.default(this)),[4,this.strategy.setup()];case 2:return t.sent(),[4,e.prototype.show.call(this)];case 3:return t.sent(),[2]}}))}))},n.prototype.getPaymentName=function(){return this.formMeta.get("name")},n.prototype.getPaymentModel=function(){return this.model},n.prototype.context=function(){return i.__assign(i.__assign(i.__assign({},e.prototype.context.call(this)),this.strategy.context()),{license:this.formMeta.get("license"),licenseAccepted:this.formMeta.isLicenseAccepted})},n.prototype.onPaymentConfirmed=function(){this.model.setCompleteStage(),window.app.data.contracts.dashboard.resetCache(),window.app.data.cachedTransfer=this.model.clone(),window.app.router.navigate("#intrabank-transfer/complete",{replace:!1,trigger:!0})},n.prototype.beforeSubmit=function(){this.model.setPrepareStage()},n.prototype.showPaymentConfirmation=function(){var t=this;M({payment:this.model,formMeta:this.formMeta,remitterContract:this.formMeta.getCatalog("remitter").get(this.model.get("remitter.id")),beneficiaryContract:this.formMeta.getCatalog("beneficiary").get(this.model.get("beneficiary.id")),onError:function(e){return e.errorHandled=t.onSubmitError(e)},onSuccess:this.onPaymentConfirmed}).show()},n.prototype.getContract=function(t){return this.formMeta.getCatalog(t).get(this.model.get(t+".id"))},n.prototype.getSourceContract=function(){return this.getContract("remitter")},n.prototype.getTargetContract=function(){return this.getContract("beneficiary")},n.prototype.getSourceContractCurrency=function(){var t=this.getSourceContract();return t?t.get("currency"):void 0},n.prototype.getTargetContractCurrency=function(){var t=this.getTargetContract();return t?t.get("currency"):void 0},i.__decorate([l.autobind],n.prototype,"updateFormFields",null),i.__decorate([l.autobind],n.prototype,"updateBeneficiarySelect",null),i.__decorate([s.on("input input[name=amount\\.value]")],n.prototype,"handleAmountInput",null),i.__decorate([l.autobind],n.prototype,"handleCurrencyExchangeError",null),i.__decorate([l.autobind],n.prototype,"showCurrencyRates",null),i.__decorate([l.autobind],n.prototype,"updateAmountInput",null),i.__decorate([s.on("click [data-error-code]")],n.prototype,"handleInfoContainerWithErrorClick",null),i.__decorate([l.autobind],n.prototype,"onPaymentConfirmed",null),n=i.__decorate([s.mixins([c.WbGenericFormMixin,E])],n)}(a.default);e.default=R}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(460),r=n(379),s=n(404),a=n(135),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.page.events=o.__assign(o.__assign({},this.page.events),{"click .create-payment-template-link":this.handleCreateTemplateLinkClick,"click .create-recurrent-template-link":this.handleCreateRecurrentClick}),this.page.delegateEvents(),[2]}))}))},e.prototype.handleCreateRecurrentClick=function(t){t.preventDefault(),this.createTemplate(!0)},e.prototype.handleCreateTemplateLinkClick=function(t){t.preventDefault(),this.createTemplate()},e.prototype.createTemplate=function(t){void 0===t&&(t=!1),this.page.updateUrl();var e=new r((new r).fragment()),n=t?"createRecurrent":"create";e.setSearch({pageMode:n}),window.app.router.navigate(e.toString(),{trigger:!0})},e.prototype.submitAction=function(){return this.page.getPaymentModel().save()},e.prototype.onSubmitSuccess=function(){this.page.model.setExecutionStage(),this.page.showPaymentConfirmation()},e.prototype.context=function(){return{strategyType:i.StrategyType.DEFAULT,pageTitle:this.page.getPaymentName(),submitButtonTitle:a.t("Pay now")}},o.__decorate([s.autobind],e.prototype,"handleCreateRecurrentClick",null),o.__decorate([s.autobind],e.prototype,"handleCreateTemplateLinkClick",null),o.__decorate([s.autobind],e.prototype,"createTemplate",null),e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(460),s=n(135),a=n(404),c=n(377),u=n(380),l=n(392).AppCache,d=n(393),p=d.Template,h=(d.getUniqueTemplateName,n(433)),f=h.PaymentTemplateCompletePage,m=h.DeleteTemplateConfirmationDialog;!function(t){t[t.EDIT=0]="EDIT",t[t.EXECUTE=1]="EXECUTE"}(o=e.SubmitMode||(e.SubmitMode={}));var y=function(t){function e(e){var n=t.call(this)||this;return n.TemplateModelClass=p,n.submitMode=o.EXECUTE,n.templateId=e,n}return i.__extends(e,t),e.prototype.setup=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return this.templateModel=new this.TemplateModelClass({id:this.templateId}),this.paymentModel=this.page.getPaymentModel(),[4,Promise.all([l.get(l.KEYS.PAYMENT_TEMPLATES),l.get(l.KEYS.RECURRENT_PAYMENTS),l.get(l.KEYS.THRESHOLD_PAYMENTS),this.templateModel.fetch()])];case 1:return t=i.__read.apply(void 0,[e.sent(),3]),this.templates=t[0],this.rPayments=t[1],this.thPayments=t[2],this.page.getPaymentModel().set(i.__assign(i.__assign({},this.templateModel.get("payment")),{templateId:this.templateId})),this.page.events=i.__assign(i.__assign({},this.page.events),{"click [data-js-cancel]":this.handleCancelClick,"click [data-js-delete]":this.handleDeleteClick,"click [data-js-edit-template-name]":this.handleEditTemplateNameClick,"click [data-js-update]":this.handleUpdateClick,"click [data-js-submit]":this.handleSubmitClick}),this.page.delegateEvents(),[2]}}))}))},e.prototype.handleSubmitClick=function(){this.submitMode=o.EXECUTE},e.prototype.handleUpdateClick=function(t){t.preventDefault(),this.submitMode=o.EDIT,this.page.$form.submit()},e.prototype.handleCancelClick=function(t){t.preventDefault(),window.app.router.goBack()},e.prototype.handleDeleteClick=function(t){t.preventDefault(),new m({templateModel:this.templateModel}).show()},e.prototype.handleEditTemplateNameClick=function(t){t.preventDefault(),this.page.showInlineEditField(this.page.$(".template-name-edit-panel"),this.handleNameEdit,null,this.templateModel.get("name"),{required:!0,uniqueTemplateName:[this.templateModel.id||!0,this.templates,this.rPayments,this.thPayments]})},e.prototype.handleNameEdit=function(t){var e=this;this.templateModel.rename(t).then((function(){e.cleanTemplateCache(),e.page.$("[data-js-edit-template-name]").text(t),e.page.$("[name=templateName]").val(t)})).fail((function(t){var n=c.parseResponseSafe(t);if(n){var o=n._error;412===t.status&&o.code&&(e.page.showError(e.page.errorMessageFor(o)),t.errorHandled=!0)}}))},e.prototype.submitAction=function(){return this.page.addAuthDialog||(this.submitMode===o.EDIT?(this.page.model=this.templateModel,this.templateModel.set({payment:this.paymentModel.omit("paymentPeriod","status")})):(this.page.model=this.paymentModel,this.paymentModel.set("status","template"))),this.page.model.save()},e.prototype.onSubmitSuccess=function(){if(this.submitMode===o.EDIT)return window.app.router.navigate("",{trigger:!1}),this.cleanTemplateCache(),void window.app.router.showPage(u.mainMenuIds.PAYMENTS_TRANSFERS,f,{type:"update",template:this.templateModel});this.page.model.setExecutionStage(),this.page.showPaymentConfirmation()},e.prototype.context=function(){var t="active"===this.templateModel.get("status");return{contentHeaderClass:t?"editable":"",strategyType:r.StrategyType.EDIT,submitButtonTitle:s.t("Pay now"),templateName:this.templateModel.get("name"),isAllowExecute:!this.templateModel.isInvalid(),isActive:t}},i.__decorate([a.autobind],e.prototype,"handleSubmitClick",null),i.__decorate([a.autobind],e.prototype,"handleUpdateClick",null),i.__decorate([a.autobind],e.prototype,"handleCancelClick",null),i.__decorate([a.autobind],e.prototype,"handleDeleteClick",null),i.__decorate([a.autobind],e.prototype,"handleEditTemplateNameClick",null),i.__decorate([a.autobind],e.prototype,"handleNameEdit",null),e}(r.default);e.default=y},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(135),r=n(560),s=n(428).RecurrentPayment,a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.TemplateModelClass=s,t}return o.__extends(n,e),n.prototype.getValidationOptions=function(){return t.extend(!0,{},e.prototype.getValidationOptions.call(this),{rules:{"paymentPeriod.day":{required:!0,digits:!0,validPeriodDay:'[name="paymentPeriod.period"]'}}})},n.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,e.prototype.setup.call(this)];case 1:return n.sent(),this.paymentModel.set({paymentPeriod:{period:this.templateModel.get("schedule.period"),day:this.templateModel.get("schedule.periodDay")}}),(t=this.page.formMeta).set("fields",o.__assign(o.__assign({},t.get("fields")),this.getAppendFields())),t.resetFields(),[2]}}))}))},n.prototype.submitAction=function(){return this.page.addAuthDialog||(this.templateModel.set({name:this.page.$("[name=templateName]").val(),payment:this.paymentModel.omit("paymentPeriod"),status:"active",schedule:{period:this.paymentModel.get("paymentPeriod.period"),periodDay:this.paymentModel.get("paymentPeriod.day")}}),this.page.model=this.templateModel),this.page.model.save()},n.prototype.context=function(){return o.__assign(o.__assign({},e.prototype.context.call(this)),{pageTitle:i.t("Create recurrent payment")})},n.prototype.getAppendFields=function(){return{"paymentPeriod.period":{id:"paymentPeriod.period",name:i.t("Payment period"),role:"paymentPeriod.period",visible:!0,editable:!0,optional:!1},"paymentPeriod.day":{id:"paymentPeriod.day",name:i.t("Period day"),role:"paymentPeriod.day",htmlAttrs:{number:!0},visible:!0,editable:!0,optional:!1}}},n}(r.default);e.default=a}).call(this,n(14))},function(t,e,n){var o;void 0===(o=function(){return[{number:"401**********572",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],id:"331d19e9a486d077f495283fe780f5f28d0bdc36",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMainCredit",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"3029.00"},cr_limit:{currency:"RUR",value:"100.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"6834.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"012b87474d2bb675e190da4e09a3848a4b0a396c",product:{id:"SubCardVISACredit",name:"VISA Credit Card Prod",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!0},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-947554",isUserOwned:!0,card:{status:"active",paymentSystem:"visa",expiryDate:"10.2023",openDate:"2013-07-15",isForeign:!1,embossing:{firstName:"OLGA",lastName:"KOVALEVA",title:"MISS"},isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!1,userCanUnblock:!1}},{number:"541**********966",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],id:"47113a542e3cf513db794662b5450224827b6dcc",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMainCredit",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"012b87474d2bb675e190da4e09a3848a4b0a396c",product:{id:"SubCardMCCredit",name:"MS Credit Card Prod",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-947554",isUserOwned:!0,card:{status:"first_production",paymentSystem:"mastercard",primaryCardId:"331d19e9a486d077f495283fe780f5f28d0bdc36",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"QWQAWS",lastName:"WSQA",title:"MRS"},isReissueEnabled:!0,isCardholderAdditional:!1,userCanUnblock:!1,productionStatus:"in_production"}},{number:"401**********751",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva"},actions:[],name:"карта жены",id:"49cd2e20328ec8dfba19d7d9e5582da0e909ac47",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMainCredit",DBCR_FLAG:"NA",FIO:" Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"10000.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"012b87474d2bb675e190da4e09a3848a4b0a396c",product:{id:"SubCardVISACredit",name:"VISA Credit Card Prod",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!0},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-947554",isUserOwned:!1,card:{status:"active",paymentSystem:"visa",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"ADDITIONAL",lastName:"CARD",title:"MISS"},isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!0,userCanUnblock:!1}},{number:"401**********640",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"401**********640",id:"0de8f87c0706504949a7ea6fb79f2aea7ab16d8c",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMain",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"5576064b4db52a075e50b75e5576f60fd97eb8f3",product:{id:"SubCard",name:"SubCard",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-438760",isUserOwned:!0,card:{status:"first_production",paymentSystem:"visa",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"WSX",lastName:"EDC",title:"MR"},accountNumber:"123",isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!1,userCanUnblock:!1,productionStatus:"in_production"}},{number:"401**********822",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"new card aliase for card",id:"d297ebaae12cb245043cf3e4ff1b819cdf968048",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMain",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"5576064b4db52a075e50b75e5576f60fd97eb8f3",product:{id:"SubCard",name:"SubCard",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-438760",isUserOwned:!0,card:{status:"first_production",paymentSystem:"visa",primaryCardId:"0de8f87c0706504949a7ea6fb79f2aea7ab16d8c",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"QAZ",lastName:"QAZ",title:"MRS"},accountNumber:"123",isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!1,userCanUnblock:!1,productionStatus:"in_production"}},{number:"401**********335",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"401**********335",id:"221ae4e852b3e75db41a5773bcdf7a64c4e071d7",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMain",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"5576064b4db52a075e50b75e5576f60fd97eb8f3",product:{id:"SubCard",name:"SubCard",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-438760",isUserOwned:!0,card:{status:"first_production",paymentSystem:"visa",primaryCardId:"0de8f87c0706504949a7ea6fb79f2aea7ab16d8c",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"QWERT",lastName:"TYU",title:"MISS"},accountNumber:"123",isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!1,userCanUnblock:!1,productionStatus:"in_production"}},{number:"401**********223",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"dfgdgdffg",id:"42605dc6d07d223119dc5fd9a06a34eb9fdaef2d",type:"card",currency:"RUR",bic:"444555",addData:{AccountProductCode:"IssMain",DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},parentId:"5576064b4db52a075e50b75e5576f60fd97eb8f3",product:{id:"SubCard",name:"SubCard",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},parentNumber:"001-P-438760",isUserOwned:!0,card:{status:"first_production",paymentSystem:"visa",primaryCardId:"0de8f87c0706504949a7ea6fb79f2aea7ab16d8c",expiryDate:"10.2023",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"QWERTY",lastName:"QWE",title:"MISS"},accountNumber:"123",isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!1,userCanUnblock:!1,productionStatus:"in_production"}},{number:"401**********450",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],id:"6149e6adefff383fb73cbcf53c66bcafdbed39f6",type:"card",currency:"RUR",bic:"444555",addData:{DBCR_FLAG:"NA",FIO:"MISS Olga  Kovaleva",TYPE:"CARD",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{},product:{id:"AdvApplCode",name:"XML Advanced Application",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{transactionWindow:{displayName:"Card Guard",isActive:!1},smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},isUserOwned:!0,card:{status:"first_production",paymentSystem:"visa",expiryDate:"10.2016",openDate:"2013-10-08",isForeign:!1,embossing:{firstName:"SINGLE",lastName:"CARD",title:"MISS"},accountNumber:"4322667743422",isReissueEnabled:!0,isDinSupported:!0,isCardholderAdditional:!0,userCanUnblock:!1,productionStatus:"in_production"}},{number:"001-P-438760",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],id:"5576064b4db52a075e50b75e5576f60fd97eb8f3",type:"cardAccount",currency:"RUR",bic:"444555",addData:{DBCR_FLAG:"NA",BIC:"444555",FIO:"MISS Olga  Kovaleva",TYPE:"ACCOUNT",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"30.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},product:{id:"IssMain",name:"Iss Main Prod",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},isUserOwned:!0,cardAccount:{status:"active",openDate:"2013-10-08",accountNumber:"123",isVirtualEnabled:!0}},{number:"001-P-860047",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"MyLovelyCard",id:"f736a123b1b9480df7309d5293b0c3fe410167da",type:"cardAccount",currency:"RUR",bic:"444555",addData:{DBCR_FLAG:"NA",BIC:"444555",FIO:"MISS Olga  Kovaleva",TYPE:"ACCOUNT",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"0.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"0.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},product:{id:"IssMain",name:"Iss Main Prod",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},isUserOwned:!0,cardAccount:{status:"active",openDate:"2013-10-08",isVirtualEnabled:!0}},{number:"001-P-947554",owner:{fullName:"TEST_FIO",firstName:"Olga",lastName:"Kovaleva",itn:"8765432345612314"},actions:[],name:"001-P-947554",id:"012b87474d2bb675e190da4e09a3848a4b0a396c",type:"cardAccount",currency:"RUR",bic:"444555",addData:{DBCR_FLAG:"NA",BIC:"444555",FIO:"MISS Olga  Kovaleva",TYPE:"ACCOUNT",IsReady:"Y",StatusExternalCode:"00",StatusCategory:"VALID"},balances:{available:{currency:"RUR",value:"12909.00"},cr_limit:{currency:"RUR",value:"0.00"},interests:{currency:"RUR",value:"0.00"},overlimit:{currency:"RUR",value:"0.00"},blocked:{currency:"RUR",value:"6844.00"},minpay:{currency:"RUR",value:"0.00"},total_due:{currency:"RUR",value:"0.00"},overdue:{currency:"RUR",value:"0.00"}},product:{id:"IssMainCredit",name:"Iss Main Credit",brand:"null",group:"null"},financialInstitution:"0001",subscriptions:{smsNotifications:{displayName:"SMS auth notification",isActive:!1},userBlock:{displayName:"User Block",isActive:!1}},isUserOwned:!0,cardAccount:{status:"active",openDate:"2013-10-08",isVirtualEnabled:!0}},{number:"42307810634000450025",owner:{firstName:"av2",lastName:"av2"},actions:[],id:"329f344f5ec420d428ef50faa8ed92bd26f2f9f4",type:"current",currency:"RUR",current:{status:"active",openedOn:"2005-01-01",closedOn:"2017-01-01"},addData:{EXTRA_RS_CODE:"",ACC_INSTITUTION:"Some bank1",StatusExternalCode:"00",TYPE:"CURRENT",FIO:"Иван Иванов"},balances:{available:{currency:"RUR",value:"60000.00"}},product:{id:"MAIN_ACC",name:"Текущий счет в рублях",brand:"null",group:"null"},subscriptions:{},isUserOwned:!0},{number:"42307810634000450026",owner:{firstName:"av2",lastName:"av2"},actions:[],id:"25d11ff19ecd4657d861b50edd860334a2a78359",type:"current",currency:"RUR",current:{status:"closed",openedOn:"2005-01-01",closedOn:"2018-01-01"},addData:{EXTRA_RS_CODE:"",ACC_INSTITUTION:"Some bank1",StatusExternalCode:"14",TYPE:"CURRENT",FIO:"Иван Иванов"},balances:{available:{currency:"RUR",value:"35000.00"}},product:{id:"MAIN_ACC",name:"Закрытый счет в рублях",brand:"null",group:"null"},subscriptions:{},isUserOwned:!0},{number:"42304810735000500367",actions:[],id:"4ee1110d1d85073322fa86efa42a36cc6e0f4957",type:"deposit",currency:"USD",bic:"044525225",addData:{CLOSE_DATE:"2015-12-25",DEPOSIT_RATE:"4.5",AUTO_PROLONG:"Y",ALLOW_CLOSING:"N",INTEREST_PERIODICITY:"PER_MONTH",ALLOW_REPLENISHMENT:"Y",StatusExternalCode:"00",TYPE:"DEPOSIT",BIC:"444555",ALLOW_PARTIAL_WITHDRAWAL:"N",DURATION:"365"},balances:{available:{currency:"USD",value:"10000.00"}},product:{id:"MAIN_ACC",name:"Депозит Рождественский",brand:"null",group:"null"},subscriptions:{},deposit:{status:"active",duration:"365",openedOn:"2011-06-12",expiresOn:"2015-12-25",interest:"4.5"},isUserOwned:!0},{number:"45507840055000025892",owner:{firstName:"Max"},actions:[],name:"Кредит на квартиру",id:"c250500976a41e6575663978ad4ab04e6ba70ff7",type:"credit",currency:"RUR",bic:"044525225",addData:{EXTRA_RS_CODE:"",CREDIT_RATE:"18",CLOSE_DATE:"2019-06-11",NEXT_PAYMENT_DATE:"2012-12-18",NEXT_PAYMENT_AMOUNT:"27927",NEXT_PAYMENT_CURRENCY:"RUR",PENALTY_AMOUNT:"0.00",PAY_INTEREST_TYPE:"PER_MONTH",StatusExternalCode:"00",TYPE:"CREDIT",SOME_CODE:"SomeValue",BIC:"044525225",REPAYMENT_ACCOUNT:"84270012309812312"},balances:{available:{currency:"RUR",value:"2567850.00"},due:{currency:"RUR",value:"2567850000.00"}},product:{id:"MAIN_ACC",name:"Кредит на квартиру",brand:"null",group:"null"},subscriptions:{},isUserOwned:!0,credit:{status:"active",openedOn:"2011-06-12",expiresOn:"2019-06-11",nextPayment:{dueOn:"2012-12-18",amount:{currency:"RUR",value:"27927.00"}},interest:"18"}},{number:"3333.1409658619",owner:{firstName:"Max"},actions:[],id:"e98e51d1fa93de6418cb7654998b01ed9ec887dc",type:"credit",currency:"RUR",bic:"",addData:{CREDIT_AMOUNT:"2000000.00",CREDIT_PAYMENT_DUE_DATE:"10.06.2015",CREDIT_RATE:"22.5",CREDIT_CURRENCY:"KZT",CREDIT_DATE_CLOSE:"03.08.2017",CREDIT_CLIENT_FIO:"Pname2 13000003926504 Pname3 13000003926504 Pname1 13000003926504",CREDIT_BALANCE_CURRENCY:"KZT",CREDIT_DURATION:"38 месяцев",CREDIT_PAYMENT_DUE_AMOUNT:"68426.35",DISPLAY_NAME:"1315242000160915",CREDIT_NAME:"Народная (деньги заёмщика поступающие в будущем)",NEXT_PAYMENT_DATE:"2015-08-18",NEXT_PAYMENT_AMOUNT:"17927.45",NEXT_PAYMENT_CURRENCY:"RUR",CREDIT_CLIENT_IIN:"701023400269",CREDIT_DATE_OPEN:"03.06.2014",CLIENT_ID:"13000003926504",CREDIT_PAYMENT_DUE_CURRENCY:"KZT",CREDIT_BRANCH:"ЦПС 131524",DBCR_FLAG:"CREDIT",CREDIT_BALANCE_AMOUNT:"473628.00",StatusExternalCode:"00",CREDIT_INTEREST_RATE:"17.00",CREDIT_PLEDGE:""},balances:{available:{currency:"RUR",value:"1526371.65"},cr_limit:{currency:"RUR",value:"473628.00"}},cbsNumber:"1324.1409658619",product:{id:"null",name:"Автокредит",brand:"null",group:"null"},subscriptions:{},isUserOwned:!0,credit:{status:"active",openedOn:"2014-06-03",nextPayment:{dueOn:"2015-08-18",amount:{currency:"RUR",value:"17927.45"}},interest:"22.5"}}]}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){var o,i,r;
/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.4.3
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2015, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */i=[n(14)],void 0===(r="function"==typeof(o=function(t){t.timeago=function(e){return e instanceof Date?i(e):i("string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var e=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var n=this.settings.strings,o=n.prefixAgo,i=n.suffixAgo;if(this.settings.allowFuture&&e<0&&(o=n.prefixFromNow,i=n.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings.inPast;var r=Math.abs(e)/1e3,s=r/60,a=s/60,c=a/24,u=c/365;function l(o,i){var r=t.isFunction(o)?o(i,e):o,s=n.numbers&&n.numbers[i]||i;return r.replace(/%d/i,s)}var d=r<45&&l(n.seconds,Math.round(r))||r<90&&l(n.minute,1)||s<45&&l(n.minutes,Math.round(s))||s<90&&l(n.hour,1)||a<24&&l(n.hours,Math.round(a))||a<42&&l(n.day,1)||c<30&&l(n.days,Math.round(c))||c<45&&l(n.month,1)||c<365&&l(n.months,Math.round(c/30))||u<1.5&&l(n.year,1)||l(n.years,Math.round(u)),p=n.wordSeparator||"";return void 0===n.wordSeparator&&(p=" "),t.trim([o,d,i].join(p))},parse:function(e){var n=t.trim(e);return n=(n=(n=(n=(n=n.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2")).replace(/([\+\-]\d\d)$/," $100"),new Date(n)},datetime:function(n){var o=e.isTime(n)?t(n).attr("datetime"):t(n).attr("title");return e.parse(o)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var n={init:function(){var n=t.proxy(o,this);n();var i=e.settings;i.refreshMillis>0&&(this._timeagoInterval=setInterval(n,i.refreshMillis))},update:function(n){var i=e.parse(n);t(this).data("timeago",{datetime:i}),e.settings.localeTitle&&t(this).attr("title",i.toLocaleString()),o.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:e.parse(e.isTime(this)?t(this).attr("datetime"):t(this).attr("title"))}),o.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};function o(){if(!t.contains(document.documentElement,this))return t(this).timeago("dispose"),this;var n=function(n){if(!(n=t(n)).data("timeago")){n.data("timeago",{datetime:e.datetime(n)});var o=t.trim(n.text());e.settings.localeTitle?n.attr("title",n.data("timeago").datetime.toLocaleString()):!(o.length>0)||e.isTime(n)&&n.attr("title")||n.attr("title",o)}return n.data("timeago")}(this),o=e.settings;return isNaN(n.datetime)||(0==o.cutoff||Math.abs(r(n.datetime))<o.cutoff)&&t(this).text(i(n.datetime)),this}function i(t){return e.inWords(r(t))}function r(t){return(new Date).getTime()-t.getTime()}t.fn.timeago=function(t,e){var o=t?n[t]:n.init;if(!o)throw new Error("Unknown function name '"+t+"' for timeago");return this.each((function(){o.call(this,e)})),this},document.createElement("abbr"),document.createElement("time")})?o.apply(e,i):o)||(t.exports=r)},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d;return o(40),d=o(377),c=o(378),l=o(387).WbFormMixin,u=o(1107),s=o(1109),n=o(1110),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.mixins=[l,u],o.prototype.errorMessages={AUTHENTICATION_FAILED:t("Failed to perform operation. Try again later or contact support"),UNHANDLED_ERROR:t("Failed to perform operation. Try again later or contact support"),CAPTCHA_MISMATCH:t("Invalid captcha"),CAPTCHA_EXPIRED:t("Captcha expired"),INVALID_NEW_PASSWORD:t("Password does not comply to security policy"),PASSWORD_USED_BEFORE:t("You have used this password before. Please set different password")},o.prototype.initialize=function(){if(o.__super__.initialize.apply(this,arguments),!this.mode)throw new Error("Mode is not specified for inherited class");return this.bindings=i.extend(!0,{},this.bindings),this.initForm(),this.initCaptcha(),window.app.hideLoadingIndicator(),this.on("render.complete",(t=this,function(){return t.$(":input:visible:first").focus()}));var t},o.prototype.isCaptchaEnabled=function(){return window.app.session.isCaptchaRequired(this.mode)},o.prototype.showPage=function(){return o.__super__.showPage.apply(this,arguments),window.app.updatePageTitle()},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.$el.removeClass("in-progress")},o.prototype.showFormLoadingIndicator=function(){return this.$(".page-content").addClass("is-loading")},o.prototype.hideFormLoadingIndicator=function(){},o.prototype.context=function(){return r.extend(o.__super__.context.apply(this,arguments),{showCaptcha:this.useCaptcha,captchaPath:this.getCaptchaPath(),captchaMaxLength:this.getCaptchaLength()})},o.prototype.getValidationOptions=function(){return{errorPlacement:function(t,e){return t.appendTo(e.closest(".field-wrapper")),t.addClass("error-message")}}},o.prototype.toggleCustomValidationRules=function(t){var e,n,o,i,r;if(this.nextStepView.getValidationOptions){for(n in i=[],r=this.nextStepView.getValidationOptions())o=r[n],e=this.$("[name='"+n+"']"),t?i.push(e.rules("add",o)):i.push(e.rules("remove"));return i}},o.prototype.toggleNextStepBindings=function(t){var e,n;if(this.nextStepView.getBindings){if(n=this.nextStepView.getBindings(),t)r.extend(this.bindings,n);else for(e in n)delete this.bindings[e];return this.bindModel()}},o.prototype.destroyNextStepView=function(){if(this.nextStepView)return this.toggleCustomValidationRules(!1),this.toggleNextStepBindings(!1),this.nextStepView.remove(),this.nextStepView=null,i("<div />",{class:"next-step"}).insertAfter(this.$(".base-fields"))},o.prototype.handleAddAuth=function(){var t;return this.$el.addClass("in-progress"),this.destroyNextStepView(),this.model.get("confirmation.challenge")?this.nextStepView=new n({el:this.$(".next-step"),model:this.model,onOtpResend:(t=this,function(){return t.submit({requestOtpResend:!0})})}):this.model.get("confirmation.authTypes")&&(this.nextStepView=new s({el:this.$(".next-step"),model:this.model})),this.nextStepView.show().then(function(t){return function(){return t.toggleCustomValidationRules(!0),t.toggleNextStepBindings(!0)}}(this))},o.prototype.shouldKeepAttrs=function(t){return 401===t.status&&"confirmationRequired"===this.model.get("_status")||401===t.status&&"CHANGE_PASSWORD"===this.model.get("_error.code")||412===t.status&&"PASSWORD_USED_BEFORE"===this.model.get("_error.code")||412===t.status&&"INVALID_NEW_PASSWORD"===this.model.get("_error.code")},o.prototype.onSubmitSuccess=function(){throw new Error("Submit success callback should be overriden")},o.prototype.onSubmitError=function(t){var e,n;switch(this.$(".page-content").removeClass("is-loading"),(n=d.parseResponseSafe(t)).captchaRequired&&(window.app.session.set("captchaRequired",this.useCaptcha=!0),this.showCaptcha()),!1){case!(401===t.status&&"confirmationRequired"===n._status):return this.handleAddAuth(),null!=n._error&&this.showError(this.errorMessageFor(n._error)),!0;case 412!==t.status:return this.showValidationErrors(),this.reloadCaptcha(),!0;case 500!==t.status:return e=this.errorMessages.UNHANDLED_ERROR,(null!=n?n._error:void 0)&&(e=this.errorMessageFor(n._error)),window.app.showErrorMessage(e),this.reloadCaptcha(),!0;default:return l.onSubmitError.apply(this,arguments)}},o}(c)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="auth/password-input",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.policy=this.options.policy||{}},e.prototype.getBindings=function(){return{newPassword:'[name="new-password"]'}},e.prototype.getValidationOptions=function(){var t;return t={},this.policy.minLength&&(t.minlength=this.policy.minLength),this.policy.maxLength&&(t.maxlength=this.policy.maxLength),this.policy.characters&&(t.passwordChars=this.policy.characters),this.policy.regex&&(t.passwordRegex=this.policy.regex),{"new-password":t,"new-password-confirmation":{equalTo:'[name="new-password"]'}}},e.prototype.context=function(){return o.extend(e.__super__.context.apply(this,arguments),this.policy)},e}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s;return s=n(40),e=n(375).BaseModel,i=n(1114).UserSettings,function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.url=s.API_URL+"/user",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.settings=new i},e.prototype.parse=function(t,e){if(t)return s=t.settings||{},delete t.settings,this.settings=new i(s),t},e.prototype.getBindings=function(){return{}},e.prototype.viewContext=function(){return o.extend(e.__super__.viewContext.apply(this,arguments),{userSettings:this.settings.viewContext(),displayName:this.get("displayName")||this.get("shortName")})},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m,y,_,g,v,w,b,k,B;return B=o(380),n=o(392).AppCache,_=o(377),f=(w=o(462)).PaymentWizard,h=w.PaymentPage,p=w.PaymentCompletePage,d=o(867).InvoiceSubscriptionPage,b=o(459),u=b.InvoicePaymentMeta,a=b.InvoicePayment,l=b.InvoiceSubscription,y=o(394).WbGenericFormMixin,k=o(393),m=k.Template,v=k.getTemplateById,(g={}).SaveInvoiceSubscriptionMixin={onSubscriptionSave:function(e){var n;return new l(i.extend({name:e},this.formMeta.getInvoiceFootprint())).save().done((n=this,function(){return n.$(".create-subscription-link").remove(),window.app.showSuccessMessage(t('Subscription "%(name)s" successfully created',{name:e})),window.app.invoiceSubscriptions.resetLastSync()})).fail((function(e){var n,o;return e.errorHandled=!0,(n=null!=(o=_.parseResponseSafe(e))?o.respText:void 0)||(n=t("Subscription creation failed. Try again later or contact customer support")),window.app.showErrorMessage(n)}))},showCreateSubscriptionForm:function(){return this.showInlineEditField(this.$(".inline-edit-panel"),this.onSubscriptionSave.bind(this),null,this.formMeta.get("name"),{uniqueCollectionItem:window.app.invoiceSubscriptions.pluck("name")})},handleSetupSubscriptionClick:function(t){var e,n;return t.preventDefault(),(n=window.app.invoiceSubscriptions.getSubscriptionByInvoice(this.formMeta.getInvoiceFootprint()))?((e=n.clone()).set("autoPaymentEnabled",!0),window.app.router.navigate("#invoices/subscriptions/"+n.id,{trigger:!1,replace:!1}),void window.app.router.showPage(B.mainMenuIds.PAYMENTS_TRANSFERS,d,{model:e})):window.OW.features.INVOICE_AUTO_PAYMENTS?(window.app.router.navigate("#invoices/subscriptions/create",{trigger:!1,replace:!1}),void window.app.router.showPage(B.mainMenuIds.PAYMENTS_TRANSFERS,d,{model:this.formMeta.getSubscriptionModel()})):this.showCreateSubscriptionForm()}},g.InvoicePaymentPage=function(t){function e(){window.OW.features.INVOICE_SUBSCRIPTIONS&&(null==this.mixins&&(this.mixins=[]),this.mixins.push(g.SaveInvoiceSubscriptionMixin),i.extend(this.events,{"click [data-js-setup-subscription]":"handleSetupSubscriptionClick"})),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="payments/invoices/invoice-payment-page",e.prototype.getValidationOptions=function(){return{ignore:":hidden:not(select),:disabled,.measurement-date"}},e.prototype.updateUrl=function(){},e.prototype.redirectToCreateObjectPage=function(t,e){var n,o,i;return t.preventDefault(),o=this.formMeta.getRequiredTemplateFieldsAttrs().reduce((i=this,function(t,e){return t[e]=i.model.get(e),t}),{}),(n=new r(e+"/"+this.formMeta.get("id")+"/create")).addSearch(_.flattenObject(o)),window.app.router.navigate(n.toString(),{trigger:!0})},e.prototype.updateCustomAttributes=function(){var t,e,n,o,s,a,c;for(c=r.parseQuery(new r((new r).fragment()).search()),s=[],e=0,n=(t=i.filter(i.pairs(c),(function(t){return t[0].endsWith("manualAmountEntry")||t[0].endsWith("amountCorrectionApplied")}))).length;e<n;e++)a=(o=t[e])[0].split("$"),s.push(this.formMeta.fields.get(a[0]).set(a[1],"true"===o[1]));return s},e.prototype.updateModelFromUrl=function(){return this.model.initCalculations(),y.updateModelFromUrl.apply(this,arguments),this.updateCustomAttributes()},e.prototype.context=function(){var t;return t=!!window.OW.features.INVOICE_SUBSCRIPTIONS&&(this.formMeta.subscriptionAllowed()&&!window.app.invoiceSubscriptions.exists(this.formMeta.getInvoiceFootprint())),i.extend(e.__super__.context.apply(this,arguments),{name:this.formMeta.get("invoice.name"),allowSubscription:t})},e}(h),g.InvoicePaymentCompletePage=function(t){function e(){window.OW.features.INVOICE_SUBSCRIPTIONS&&(null==this.mixins&&(this.mixins=[]),this.mixins.push(g.SaveInvoiceSubscriptionMixin),i.extend(this.events,{"click [data-js-setup-subscription]":"handleSetupSubscriptionClick"})),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="payments/invoices/invoice-payment-complete-page",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.formMeta=this.options.formMeta},e.prototype.onTemplateSave=function(t){var e,o,i;return e=this.formMeta.getRequiredTemplateFieldsAttrs().reduce((i=this,function(t,e){return t[e]=i.model.get(e),t}),{}),(o=new m({serviceId:this.model.service.id,name:t,payment:e})).save().then(function(t){return function(){return n.reset(n.KEYS.PAYMENT_TEMPLATES),t.afterTemplateCreated=!0,t.templateModel=o,t.render()}}(this)).always((function(){return window.app.hideLoadingIndicator()}))},e.prototype.context=function(){var t,n;return t=e.__super__.context.apply(this,arguments),window.OW.features.INVOICE_SUBSCRIPTIONS&&(n=window.app.invoiceSubscriptions.getSubscriptionByInvoice(this.formMeta.getInvoiceFootprint()),t.invoiceSubscription=null!=n?n.viewContext():void 0),t.allowSubscription=window.OW.features.INVOICE_SUBSCRIPTIONS&&this.formMeta.subscriptionAllowed(),t.allowAutopayments=window.OW.features.INVOICE_AUTO_PAYMENTS&&this.formMeta.autoPaymentAllowed(),t.showEditPanel=t.showEditPanel||t.allowSubscription&&!t.allowAutopayments,t},e}(p),g.InvoicePaymentWizard=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t){return this.options=t,this.processUrlParams()},e.prototype.onPaymentExecuted=function(t){var n;return(window.OW.features.INVOICE_SUBSCRIPTIONS&&!window.app.invoiceSubscriptions.isFetched()?window.app.updateInvoiceSubscriptions():s.Deferred().resolve()).always((n=this,function(){return e.__super__.onPaymentExecuted.call(n,t)}))},e.prototype.processUrlParams=function(){var t;if(t=r.parseQuery(new r((new r).fragment()).search()),!i.has(t,"complete")){if(this.consumerId=t.customIdt,this.invoiceId=t.invoiceId,this.templateId=t.templateId,!this.consumerId||!this.invoiceId)throw new Error("Malformed invoice URL");return this.addParams=i.omit(t,"customIdt","invoiceId")}},e.prototype.createPaymentModel=function(){var t,e,n;return this.formMeta=new u({id:this.invoiceId,templateId:this.templateId},{invoiceId:this.invoiceId,billerId:this.options.billerId,consumerId:this.consumerId,addParams:this.addParams}),e=this.templateId?v(this.templateId).then((n=this,function(t){return n.templateModel=t})):s.Deferred().resolve(),s.when(this.formMeta.fetchIfEmpty(),null!=(t=window.app.invoiceSubscriptions)?t.fetchIfEmpty():void 0,e).then(function(t){return function(){return t.templateId&&!t.templateModel&&delete t.templateId,t.model=new a(i.extend({id:t.invoiceId},t.formMeta.getModelDefaults()),{service:t.formMeta,billerId:t.options.billerId,consumerId:t.consumerId,addParams:t.addParams,templateId:t.templateId})}}(this))},e.prototype.getPaymentRouterOptions=function(){var t;return(t=e.__super__.getPaymentRouterOptions.apply(this,arguments))[0]=g.InvoicePaymentPage,t},e.prototype.getCompleteRouterOptions=function(){var t;return(t=e.__super__.getCompleteRouterOptions.apply(this,arguments))[0]=g.InvoicePaymentCompletePage,t},e}(f),g.invoicePaymentWizard=function(t){var e,n;return e=r.parseQuery(new r((new r).fragment()).search()),i.has(e,"complete")&&window.app.data.cachedPayment?((n=new g.InvoicePaymentWizard).restorePaymentFromCache(),n.showStep(2)):(window.app.router.showEmptyPage(g.InvoicePaymentWizard.prototype.menuSectionId),new g.InvoicePaymentWizard({billerId:t}).showFirstStep())},g}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(379),o(14))},function(e,n,o){(function(i,r,s){var a,c={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m;return f=o(97),u=o(378),l=o(459).SubscriptionInvoices,d=o(387).WbFormMixin,p=o(411).WbServiceMethodsMixin,n=o(473).ConfirmActionDialog,a=o(1125).InvoiceAutopaymentOptionsView,m=o(380),(h={}).InvoiceSubscriptionPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/invoices/invoice-subscription-page",o.prototype.pageType=m.mainMenuIds.PAYMENTS_TRANSFERS,o.prototype.mixins=[d,p],o.prototype.formSelector="[data-js-form]",o.prototype.defaultErrorMessage=t("Subscription update failed. Try again later or contact customer support"),o.prototype.bindings={name:"[data-js-subscription-name]"},o.prototype.events={"click [data-js-edit-name]":"handleNameEdit","click [data-js-cancel-action]":"handleCancelClick","click [data-js-delete-subscription]":"handleDeleteSubscription","click [data-js-delete-invoice]":"handleDeleteInvoice"},o.prototype.initialize=function(){var t,e;return o.__super__.initialize.apply(this,arguments),this.subscriptionId=null!=(t=this.options)?t.subscriptionId:void 0,this.model=null!=(e=this.options)?e.model:void 0},o.prototype.fetchData=function(){return this.subscriptionId?(this.invoices=new l(null,{id:this.subscriptionId}),i.when(window.app.invoiceSubscriptions.fetchIfEmpty(),this.invoices.fetch())):window.app.invoiceSubscriptions.fetchIfEmpty()},o.prototype.show=function(){return this.subscriptionId||this.model||window.app.router.goBack(),this.fetchData().then((t=this,function(){return null==t.model&&(t.model=window.app.invoiceSubscriptions.get(t.subscriptionId).clone()),t.model.trackSavedValue(),t.editMode=!t.model.isNew(),o.__super__.show.apply(t,arguments)}));var t},o.prototype.onRender=function(){if(o.__super__.onRender.apply(this,arguments),this.$form=null,this.initForm(),window.OW.features.INVOICE_AUTO_PAYMENTS&&this.model.autoPaymentAllowed())return(this.autopaymentOptionsView=new a({el:this.$("[data-js-autopayment-section]"),model:this.model})).show()},o.prototype.onSubmitSuccess=function(){var e,n;return window.app.invoiceSubscriptions.resetLastSync(),this.editMode?window.app.showSuccessMessage(t("Subscription has been updated")):(n=f.get("previousMenuItemId"),e={url:window.app.data.menu.getItemUrl(n),text:t('Back to "%(pageName)s"',{pageName:window.app.data.menu.get(n).get("name")})},this.showOperationSuccess(t('Subscription "%(name)s" successfully created',{name:this.model.get("name")}),{backLink:e}))},o.prototype.getValidationOptions=function(){return{rules:{subscriptionName:{uniqueCollectionItem:r.without(window.app.invoiceSubscriptions.pluck("name"),this.model.get("name"))}},messages:{subscriptionName:{uniqueCollectionItem:t("Subscription with this name already exists")}}}},o.prototype.handleNameEdit=function(t){return t.preventDefault(),this.showInlineEditField(this.$(".subscription-name-edit-panel"),(e=this,function(t){return e.model.rename(t)}),null,this.model.get("name"),{uniqueCollectionItem:r.without(window.app.invoiceSubscriptions.pluck("name"),this.model.get("name"))});var e},o.prototype.handleCancelClick=function(t){return t.preventDefault(),window.app.router.goBack()},o.prototype.handleDeleteSubscription=function(e){return e.preventDefault(),new n({actionText:t("Do you really want to remove this subscription?"),onConfirm:(o=this,function(){return o.model.destroy().then((function(){return window.app.invoiceSubscriptions.resetLastSync(),window.app.router.goBack()}))})}).show();var o},o.prototype.handleDeleteInvoice=function(e){return e.preventDefault(),new n({actionText:t("Do you really want to remove this invoice?"),onConfirm:(o=this,function(){var t;return t=o.$(e.currentTarget).closest(".subscription-invoice").data("id"),o.invoices.get(t).destroy().then((function(){return window.app.invoiceSubscriptions.resetLastSync(),o.model.unset("unpaidTotalCount"),o.model.unset("unpaidTotalAmount"),o.model.fetch()})).then((function(){return o.render()}))})}).show();var o},o.prototype.getInvoiceLink=function(t){var e,n,o;return o=new s(""),e=this.model.getInvoiceFootprint(),n=r.extend({},e.addParams||{},{customIdt:e.customIdt,invoiceId:t.get("invoiceId")}),o.addSearch(n),"#invoices/"+e.serviceCode+"/pay"+o.toString()},o.prototype.context=function(){var t,e;return t=r.extend(o.__super__.context.apply(this,arguments),this.model.viewContext(),{isNew:this.model.isNew(),allowAutopayment:window.OW.features.INVOICE_AUTO_PAYMENTS}),this.invoices&&(t.invoices=this.invoices.map((e=this,function(t){return r.extend(t.viewContext(),{link:e.getInvoiceLink(t)})}))),t},o}(u),h}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(11),o(379))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(1147),r=n(1155);e.index=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){return(e=i.default.instance(t)).showStep(e.currentStep),[2]}))}))},e.earlyRepayment=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){return(e=r.default.instance(t)).showStep(e.currentStep),[2]}))}))}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=n(564),a=n(377),c=n(1168),u=n(404),l=n(11),d=n(135),p=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultPageTitle=d.t("Card order"),t}return o.__extends(n,e),n.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.model=this.getCardOrderModel(),this.on("render.complete",this.renderForm)},n.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},n.prototype.setCardExpiredDate=function(t){void 0===t&&(t=""),this.$("[data-js-card-expired-date]").html(t)},n.prototype.clearCardImage=function(){this.$("[data-js-card]").addClass("card-orders-page__card--default").css("background-image","")},n.prototype.setCardImage=function(t){this.$("[data-js-card]").removeClass("card-orders-page__card--default").css("background-image","url("+t+")")},n.prototype.setupCardImage=function(t,e){var n=this,o=this._lastCallSetupCardImage=performance.now();a.loadImage(s.default.getImagePath(t,e)).done((function(t){o===n._lastCallSetupCardImage&&n.setCardImage(t)})).fail((function(){o===n._lastCallSetupCardImage&&n.clearCardImage()}))},n.prototype.renderForm=function(){var e=this;return new Promise((function(n){window.app.clearMessages();var o=e.getCardOrderFormMetaGenerated(),i=o.formMeta,r=o.modelAttrs;if(e.formMeta&&l.isEqual(e.formMeta.toJSON(),i.toJSON()))n();else{e.formMeta&&(i.isLicenseAccepted=e.formMeta.isLicenseAccepted),e.model.set(r,{silent:!0}),e.formMeta=i;var s=t(document.querySelector("[data-js-form-wrapper]").cloneNode()),a=new c.default({el:s,model:e.model,formMeta:e.formMeta,invalidElementsNames:e.form?e.form.getInvalidElementsNames():[],onSubmit:e.onSubmit,onSubmitSuccess:e.onSubmitSuccess});a.on("render.complete",(function(){e.form&&e.form.clear(),e.$("[data-js-form-wrapper]").replaceWith(s),e.form=a,n()})),a.show()}}))},n.prototype.onSubmitSuccess=function(){window.app.data.contracts.dashboard.resetCache(),this.options.onSubmitSuccess.call(this)},n.prototype.fetchData=function(){return Promise.all([window.app.data.client.fetchIfEmpty(),window.app.data.cardOrderSettings.fetchIfNeedAndPossible()])},n.prototype.show=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.fetchData()];case 1:return n.sent(),[2,e.prototype.show.apply(this,o.__spread(t))]}}))}))},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{pageTitle:this.options.pageTitle||this.defaultPageTitle})},o.__decorate([r.on("click .content-header__back-button")],n.prototype,"handleBackClick",null),o.__decorate([u.autobind],n.prototype,"clearCardImage",null),o.__decorate([u.autobind],n.prototype,"setCardImage",null),o.__decorate([u.decorate(l.debounce,100)],n.prototype,"setupCardImage",null),o.__decorate([u.autobind],n.prototype,"renderForm",null),o.__decorate([u.autobind],n.prototype,"onSubmitSuccess",null),n=o.__decorate([r.template("card-orders/form-page")],n)}(i);e.default=p}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlRoot=function(){return r.API_URL+"/card-orders/card-types"},e}return o.__extends(e,t),e}(i.BaseModel);e.default=s},function(t,e,n){var o,i,r;!function(s){"use strict";i=[n(14)],void 0===(r="function"==typeof(o=function(t){var e=window.Slick||{};(n=0,e=function(e,o){var i,r,s=this;if(s.defaults={accessibility:!0,arrows:!0,autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return'<button type="button">'+(e+1)+"</button>"},dots:!1,draggable:!0,easing:"linear",fade:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,responsive:null,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,touchMove:!0,touchThreshold:5,vertical:!1},s.initials={animating:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},t.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.paused=!1,s.positionProp=null,s.$slider=t(e),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.windowWidth=0,s.windowTimer=null,s.options=t.extend({},s.defaults,o),s.originalSettings=s.options,(i=s.options.responsive||null)&&i.length>-1){for(r in i)i.hasOwnProperty(r)&&(s.breakpoints.push(i[r].breakpoint),s.breakpointSettings[i[r].breakpoint]=i[r].settings);s.breakpoints.sort((function(t,e){return e-t}))}s.autoPlay=t.proxy(s.autoPlay,s),s.autoPlayClear=t.proxy(s.autoPlayClear,s),s.changeSlide=t.proxy(s.changeSlide,s),s.setPosition=t.proxy(s.setPosition,s),s.swipeHandler=t.proxy(s.swipeHandler,s),s.dragHandler=t.proxy(s.dragHandler,s),s.keyHandler=t.proxy(s.keyHandler,s),s.autoPlayIterator=t.proxy(s.autoPlayIterator,s),s.instanceUid=n++,s.init()}).prototype.addSlide=function(e,n,o){var i=this;if("boolean"==typeof n)o=n,n=null;else if(n<0||n>=i.slideCount)return!1;i.unload(),"number"==typeof n?0===n&&0===i.$slides.length?t(e).appendTo(i.$slideTrack):o?t(e).insertBefore(i.$slides.eq(n)):t(e).insertAfter(i.$slides.eq(n)):!0===o?t(e).prependTo(i.$slideTrack):t(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).remove(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit()},e.prototype.animateSlide=function(e,n){var o={},i=this;!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,n):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,n):!1===i.cssTransitions?t({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(t){!1===i.options.vertical?(o[i.animType]="translate("+t+"px, 0px)",i.$slideTrack.css(o)):(o[i.animType]="translate(0px,"+t+"px)",i.$slideTrack.css(o))},complete:function(){n&&n.call()}}):(i.applyTransition(),!1===i.options.vertical?o[i.animType]="translate3d("+e+"px, 0px, 0px)":o[i.animType]="translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(o),n&&setTimeout((function(){i.disableTransition(),n.call()}),i.options.speed))},e.prototype.applyTransition=function(t){var e=this,n={};!1===e.options.fade?n[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:n[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.autoPlay=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer),t.slideCount>t.options.slidesToShow&&!0!==t.paused&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this;!1===t.options.infinite?1===t.direction?(t.currentSlide+1===t.slideCount-1&&(t.direction=0),t.slideHandler(t.currentSlide+t.options.slidesToScroll)):(t.currentSlide-1==0&&(t.direction=1),t.slideHandler(t.currentSlide-t.options.slidesToScroll)):t.slideHandler(t.currentSlide+t.options.slidesToScroll)},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow=t('<button type="button" class="slick-prev">Previous</button>').appendTo(e.$slider),e.$nextArrow=t('<button type="button" class="slick-next">Next</button>').appendTo(e.$slider),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled"))},e.prototype.buildDots=function(){var e,n,o=this;if(!0===o.options.dots&&o.slideCount>o.options.slidesToShow){for(n='<ul class="slick-dots">',e=0;e<=o.getDotCount();e+=1)n+="<li>"+o.options.customPaging.call(this,o,e)+"</li>";n+="</ul>",o.$dots=t(n).appendTo(o.$slider),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?t('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0===e.options.centerMode&&(e.options.infinite=!0,e.options.slidesToScroll=1,e.options.slidesToShow%2==0&&(e.options.slidesToShow=3)),t("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),!0===e.options.accessibility&&e.$list.prop("tabIndex",0),e.setSlideClasses(0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.checkResponsive=function(){var e,n,o=this;if(o.originalSettings.responsive&&o.originalSettings.responsive.length>-1&&null!==o.originalSettings.responsive){for(e in n=null,o.breakpoints)o.breakpoints.hasOwnProperty(e)&&t(window).width()<o.breakpoints[e]&&(n=o.breakpoints[e]);null!==n?null!==o.activeBreakpoint?n!==o.activeBreakpoint&&(o.activeBreakpoint=n,o.options=t.extend({},o.defaults,o.breakpointSettings[n]),o.refresh()):(o.activeBreakpoint=n,o.options=t.extend({},o.defaults,o.breakpointSettings[n]),o.refresh()):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=t.extend({},o.defaults,o.originalSettings),o.refresh())}},e.prototype.changeSlide=function(e){var n=this;switch(e.data.message){case"previous":n.slideHandler(n.currentSlide-n.options.slidesToScroll);break;case"next":n.slideHandler(n.currentSlide+n.options.slidesToScroll);break;case"index":n.slideHandler(t(e.target).parent().index()*n.options.slidesToScroll);break;default:return!1}},e.prototype.destroy=function(){var e=this;e.autoPlayClear(),e.touchObject={},t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&(e.$prevArrow.remove(),e.$nextArrow.remove()),e.$slides.unwrap().unwrap(),e.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style"),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$list.off(".slick"),t(window).off(".slick-"+e.instanceUid)},e.prototype.disableTransition=function(t){var e=this,n={};n[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.fadeSlide=function(t,e){var n=this;!1===n.cssTransitions?(n.$slides.eq(t).css({zIndex:1e3}),n.$slides.eq(t).animate({opacity:1},n.options.speed,n.options.easing,e)):(n.applyTransition(t),n.$slides.eq(t).css({opacity:1,zIndex:1e3}),e&&setTimeout((function(){n.disableTransition(t),e.call()}),n.options.speed))},e.prototype.filterSlides=function(t){var e=this;null!==t&&(e.unload(),e.$slideTrack.children(this.options.slide).remove(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},e.prototype.getDotCount=function(){var t,e=this,n=0,o=0,i=0;for(t=!0===e.options.infinite?e.slideCount+e.options.slidesToShow-e.options.slidesToScroll:e.slideCount;n<t;)i++,n=(o+=e.options.slidesToScroll)+e.options.slidesToShow;return i},e.prototype.getLeft=function(t){var e,n=this;return n.slideOffset=0,!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1),n.slideCount%n.options.slidesToScroll!=0&&t+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideCount%n.options.slidesToShow*n.slideWidth*-1)):n.slideCount%n.options.slidesToShow!=0&&t+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideCount%n.options.slidesToShow*n.slideWidth),!0===n.options.centerMode&&(n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth),!1===n.options.vertical?e=t*n.slideWidth*-1+n.slideOffset:(n.listHeight=n.$list.height(),e=!0===n.options.infinite?t*n.listHeight*-1-n.listHeight:t*n.listHeight*-1),e},e.prototype.init=function(){var e=this;t(e.$slider).hasClass("slick-initialized")||(t(e.$slider).addClass("slick-initialized"),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.checkResponsive()),null!==e.options.onInit&&e.options.onInit.call(this,e)},e.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.on("click.slick",{message:"next"},t.changeSlide))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&t("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide)},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),!0===e.options.pauseOnHover&&!0===e.options.autoplay&&(e.$list.on("mouseenter.slick",e.autoPlayClear),e.$list.on("mouseleave.slick",e.autoPlay)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),t(window).on("orientationchange.slick.slick-"+e.instanceUid,(function(){e.checkResponsive(),e.setPosition()})),t(window).on("resize.slick.slick-"+e.instanceUid,(function(){t(window).width!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout((function(){e.windowWidth=t(window).width(),e.checkResponsive(),e.setPosition()}),50))})),t(window).on("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.show(),!0===t.options.autoplay&&t.autoPlay()},e.prototype.keyHandler=function(t){37===t.keyCode?this.changeSlide({data:{message:"previous"}}):39===t.keyCode&&this.changeSlide({data:{message:"next"}})},e.prototype.lazyLoad=function(){var e,n,o,i,r=this;i=!0===r.options.centerMode?(o=r.options.slidesToShow+r.currentSlide-1)+r.options.slidesToShow+2:(o=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide)+r.options.slidesToShow,e=r.$slider.find(".slick-slide").slice(o,i),t("img[data-lazy]",e).not("[src]").each((function(){t(this).css({opacity:0}).attr("src",t(this).attr("data-lazy")).removeClass("slick-loading").load((function(){t(this).animate({opacity:1},200)}))})),r.currentSlide>=r.slideCount-r.options.slidesToShow?(n=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),t("img[data-lazy]",n).not("[src]").each((function(){t(this).css({opacity:0}).attr("src",t(this).attr("data-lazy")).removeClass("slick-loading").load((function(){t(this).animate({opacity:1},200)}))}))):0===r.currentSlide&&(n=r.$slider.find(".slick-cloned").slice(-1*r.options.slidesToShow),t("img[data-lazy]",n).not("[src]").each((function(){t(this).css({opacity:0}).attr("src",t(this).attr("data-lazy")).removeClass("slick-loading").load((function(){t(this).animate({opacity:1},200)}))})))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},e.prototype.postSlide=function(t){var e=this;null!==e.options.onAfterChange&&e.options.onAfterChange.call(this,e,t),e.animating=!1,e.setPosition(),e.swipeLeft=null,!0===e.options.autoplay&&!1===e.paused&&e.autoPlay(),e.setSlideClasses(e.currentSlide)},e.prototype.progressiveLazyLoad=function(){var e,n=this;t("img[data-lazy]").not("[src]").length>0&&(e=t(t("img[data-lazy]",n.$slider).not("[src]").get(0))).attr("src",e.attr("data-lazy")).removeClass("slick-loading").load((function(){n.progressiveLazyLoad()}))},e.prototype.refresh=function(){var e=this;e.destroy(),t.extend(e,e.initials),e.init()},e.prototype.reinit=function(){var e=this;e.$slides=t(e.options.slide+":not(.slick-cloned)",e.$slideTrack).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.setSlideClasses(0),e.setPosition(),null!==e.options.onReInit&&e.options.onReInit.call(this,e)},e.prototype.removeSlide=function(t,e){var n=this;if(t="boolean"==typeof t?!0===(e=t)?0:n.slideCount-1:!0===e?--t:t,n.slideCount<1||t<0||t>n.slideCount-1)return!1;n.unload(),n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).remove(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},e.prototype.setCSS=function(t){var e,n,o=this,i={};e="left"==o.positionProp?t+"px":"0px",n="top"==o.positionProp?t+"px":"0px",i[o.positionProp]=t,!1===o.transformsEnabled?o.$slideTrack.css(i):(i={},!1===o.cssTransitions?(i[o.animType]="translate("+e+", "+n+")",o.$slideTrack.css(i)):(i[o.animType]="translate3d("+e+", "+n+", 0px)",o.$slideTrack.css(i)))},e.prototype.setDimensions=function(){var t=this;t.options.centerMode,t.$slideTrack.children(".slick-slide").width(t.slideWidth),!1===t.options.vertical?(t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length)),!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding})):(t.$list.height(t.$slides.first().outerHeight()),t.$slideTrack.height(Math.ceil(t.listHeight*t.$slideTrack.children(".slick-slide").length)),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"}))},e.prototype.setFade=function(){var e,n=this;n.$slides.each((function(o,i){e=n.slideWidth*o*-1,t(i).css({position:"relative",left:e,top:0,zIndex:800,opacity:0})})),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},e.prototype.setPosition=function(){var t=this;t.setValues(),t.setDimensions(),!1===t.options.fade?t.setCSS(t.getLeft(t.currentSlide)):t.setFade()},e.prototype.setProps=function(){var t=this;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===document.body.style.WebkitTransition&&void 0===document.body.style.MozTransition&&void 0===document.body.style.msTransition||(t.cssTransitions=!0),void 0!==document.body.style.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition"),void 0!==document.body.style.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition"),void 0!==document.body.style.msTransform&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=null!==t.animType},e.prototype.setValues=function(){var t=this;t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow)},e.prototype.setSlideClasses=function(t){var e,n,o,i=this;i.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),n=i.$slider.find(".slick-slide"),!0===i.options.centerMode?(t>=(e=Math.floor(i.options.slidesToShow/2))&&t<=i.slideCount-1-e?i.$slides.slice(t-e,t+e+1).addClass("slick-active"):(o=i.options.slidesToShow+t,n.slice(o-e+1,o+e+2).addClass("slick-active")),0===t?n.eq(n.length-1-i.options.slidesToShow).addClass("slick-center"):t===i.slideCount-1&&n.eq(i.options.slidesToShow).addClass("slick-center"),i.$slides.eq(t).addClass("slick-center")):t>0&&t<i.slideCount-i.options.slidesToShow?i.$slides.slice(t,t+i.options.slidesToShow).addClass("slick-active"):(o=i.options.slidesToShow+t,n.slice(o,o+i.options.slidesToShow).addClass("slick-active")),"ondemand"===i.options.lazyLoad&&i.lazyLoad()},e.prototype.setupInfinite=function(){var e,n,o,i=this;if(!0!==i.options.fade&&!0!==i.options.vertical||(i.options.slidesToShow=1,i.options.slidesToScroll=1,i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(n=null,i.slideCount>i.options.slidesToShow)){for(o=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-o;e-=1)n=e-1,t(i.$slides[n]).clone().attr("id","").prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<o;e+=1)n=e,t(i.$slides[n]).clone().attr("id","").appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each((function(){t(this).attr("id","")}))}},e.prototype.slideHandler=function(t){var e,n,o,i,r,s=this;return!0!==s.animating&&(e=t,r=s.getLeft(e),o=s.getLeft(s.currentSlide),i=s.slideCount%s.options.slidesToScroll!=0?s.options.slidesToScroll:0,!1===s.options.infinite&&(t<0||t>s.slideCount-s.options.slidesToShow+i)?(e=s.currentSlide,s.animateSlide(o,(function(){s.postSlide(e)})),!1):(!0===s.options.autoplay&&clearInterval(s.autoPlayTimer),s.currentLeft=null===s.swipeLeft?o:s.swipeLeft,n=e<0?s.slideCount%s.options.slidesToScroll!=0?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount-s.options.slidesToScroll:e>s.slideCount-1?0:e,s.animating=!0,null!==s.options.onBeforeChange&&t!==s.currentSlide&&s.options.onBeforeChange.call(this,s,s.currentSlide,t),s.currentSlide=n,s.updateDots(),s.updateArrows(),!0===s.options.fade?(s.fadeSlide(n,(function(){s.postSlide(n)})),!1):void s.animateSlide(r,(function(){s.postSlide(n)}))))},e.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,e,n,o,i=this;return t=i.touchObject.startX-i.touchObject.curX,e=i.touchObject.startY-i.touchObject.curY,n=Math.atan2(e,t),(o=Math.round(180*n/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0||o<=360&&o>=315?"left":o>=135&&o<=225?"right":"vertical"},e.prototype.swipeEnd=function(e){var n=this;if(n.$list.removeClass("dragging"),void 0===n.touchObject.curX)return!1;if(n.touchObject.swipeLength>=n.touchObject.minSwipe)switch(t(e.target).on("click.slick",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.slick")})),n.swipeDirection()){case"left":n.slideHandler(n.currentSlide+n.options.slidesToScroll),n.touchObject={};break;case"right":n.slideHandler(n.currentSlide-n.options.slidesToScroll),n.touchObject={}}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},e.prototype.swipeHandler=function(t){var e=this;if("ontouchend"in document&&!1===e.options.swipe)return!1;if(!1===e.options.draggable&&!t.originalEvent.touches)return!1;switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},e.prototype.swipeMove=function(t){var e,n,o,i=this;return o=void 0!==t.originalEvent?t.originalEvent.touches:null,e=i.getLeft(i.currentSlide),!(!i.$list.hasClass("dragging")||o&&1!==o.length)&&(i.touchObject.curX=void 0!==o?o[0].pageX:t.clientX,i.touchObject.curY=void 0!==o?o[0].pageY:t.clientY,i.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(i.touchObject.curX-i.touchObject.startX,2))),"vertical"!==i.swipeDirection()&&(void 0!==t.originalEvent&&t.preventDefault(),n=i.touchObject.curX>i.touchObject.startX?1:-1,!1===i.options.vertical?i.swipeLeft=e+i.touchObject.swipeLength*n:i.swipeLeft=e+i.touchObject.swipeLength*(i.listHeight/i.listWidth)*n,!0!==i.options.fade&&!1!==i.options.touchMove&&(!0===i.animating?(i.swipeLeft=null,!1):void i.setCSS(i.swipeLeft))))},e.prototype.swipeStart=function(t){var e,n=this;if(1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow)return n.touchObject={},!1;void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==e?e.pageX:t.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==e?e.pageY:t.clientY,n.$list.addClass("dragging")},e.prototype.unfilterSlides=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).remove(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var e=this;t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&(e.$prevArrow.remove(),e.$nextArrow.remove()),e.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style")},e.prototype.updateArrows=function(){var t=this;!0===t.options.arrows&&!0!==t.options.infinite&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},e.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active"),t.$dots.find("li").eq(t.currentSlide/t.options.slidesToScroll).addClass("slick-active"))},t.fn.slick=function(t){return this.each((function(n,o){o.slick=new e(o,t)}))},t.fn.slickAdd=function(t,e,n){return this.each((function(o,i){i.slick.addSlide(t,e,n)}))},t.fn.slickFilter=function(t){return this.each((function(e,n){n.slick.filterSlides(t)}))},t.fn.slickGoTo=function(t){return this.each((function(e,n){n.slick.slideHandler(t)}))},t.fn.slickNext=function(){return this.each((function(t,e){e.slick.changeSlide({data:{message:"next"}})}))},t.fn.slickPause=function(){return this.each((function(t,e){e.slick.autoPlayClear(),e.slick.paused=!0}))},t.fn.slickPlay=function(){return this.each((function(t,e){e.slick.paused=!1,e.slick.autoPlay()}))},t.fn.slickPrev=function(){return this.each((function(t,e){e.slick.changeSlide({data:{message:"previous"}})}))},t.fn.slickRemove=function(t,e){return this.each((function(n,o){o.slick.removeSlide(t,e)}))},t.fn.slickSetOption=function(t,e,n){return this.each((function(o,i){i.slick.options[t]=e,!0===n&&(i.slick.unload(),i.slick.reinit())}))},t.fn.slickUnfilter=function(){return this.each((function(t,e){e.slick.unfilterSlides()}))},t.fn.unslick=function(){return this.each((function(t,e){e.slick.destroy()}))};var n})?o.apply(e,i):o)||(t.exports=r)}()},,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(t){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(o)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,o=t.ui.mouse.prototype,i=o._mouseInit,r=o._mouseDestroy;o._touchStart=function(t){!n&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,this._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},o._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},o._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},o._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),i.call(e)},o._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),r.call(e)}}}(t)}).call(this,n(14))},function(t,e,n){(function(t){var e;n(893),n(419),(e=t.datepicker)._updateDatepickerBase=e._updateDatepicker,e._updateDatepicker=function(t){return e._updateDatepickerBase.apply(this,arguments),t.dpDiv.find("select").chosen({disable_search:!0})},e._generateMonthYearHeader=function(t,e,n,o,i,r,s,a){var c,u,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x;if(c=this._get(t,"changeMonth"),u=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),p="",v="<span class='ui-datepicker-month'>"+s[e]+"</span>",g="",w=0,S="<span class='ui-datepicker-year'>"+n+"</span>",C="",x=0,!r||c){for(m=o&&o.getFullYear()===n,f=i&&i.getFullYear()===n,g+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",y=h=0;h<=11;y=++h)(!m||y>=o.getMonth())&&(!f||y<=i.getMonth())&&(g+="<option value='"+y+"'"+(y===e?" selected='selected'":"")+">"+s[y]+"</option>",w+=1);g+="</select>"}if(_=w>1?g:v,b||(p+=_+(!r&&c&&u?"":"&#xa0;")),!r||u){for(P=this._get(t,"yearRange").split(":"),k=(new Date).getFullYear(),l=function(t){var e;return e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?k+parseInt(t,10):parseInt(t,10),isNaN(e)?k:e},B=l(P[0]),d=Math.max(B,l(P[1]||"")),B=o?Math.max(B,o.getFullYear()):B,d=i?Math.min(d,i.getFullYear()):d,C+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";B<=d;)C+="<option value='"+B+"'"+(B===n?" selected='selected'":"")+">"+B+"</option>",B+=1,x+=1;C+="</select>"}return p+=x>1?C:S,p+=this._get(t,"yearSuffix"),b&&(p+=(!r&&c&&u?"":"&#xa0;")+_),p="<div class='ui-datepicker-title "+(1===w&&1===x?"ui-datepicker-title-static":"")+"'>"+p+"</div>"}}).call(this,n(14))},,function(t,e,n){(function(o,i,r,s){var a,c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(t){var e,o,a,l,d,p;return l=n(40),o=n(379),a=n(377),e=n(901).BaseRouter,d=n(442),p=n(380),function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.routes={"SHOWCASE/:id":"productDetails","contracts/:id/addCard":"addCard","contracts/add-external":"registerCard","contracts/:id/cards":"cardsList","contracts/:id/intracard-transfer":"intraCardTransfer","contracts/:id/reports/:reportId":"contractReport","contracts/:id/tdsEnroll":"tdsEnroll","contracts/:id/action/cashByCode":"cashByCode","contracts/:id/orderPlastic":"orderPlastic","contracts/:id/:tabId":"contractDetails","contracts/:id":"contractDetails","disputes/create":"createDispute","history/:operationId/repeat":"repeatPayment","history/:operationId/paymentTemplates/create":"createTemplateFromHistory","history/:operationId/recurrentPayments/create":"createRecurrentFromHistory","history/:operationId/thresholdPayments/create":"createThresholdFromHistory","templates/:id":"redirectToTemplate","payments(/:menuItemId)":"paymentsMenu","payment/beneficiaries":"beneficiariesManagement","payment/:id":"payment","paymentTemplates/:serviceId/create":"createPaymentTemplate","paymentTemplates/:templateId/edit":"editPaymentTemplate","thresholdPayments/:serviceId/create":"createThresholdPaymentTemplate","thresholdPayments/:templateId/edit":"editThresholdPaymentTemplate","recurrentPayments/:serviceId/create":"createRecurrentPaymentTemplate","recurrentPayments/:templateId/edit":"editRecurrentPaymentTemplate","application/:id":"application","deposits/create":"createDeposit","invoices/subscriptions/:subscriptionId":"editInvoiceSubscription","invoices/:billerId/pay":"invoicePayment","invoices/:billerId":"invoicesRequest","intracard-transfer":"intraCardTransfer","intracard-transfer/complete":"intraCardTransferComplete","intrabank-transfer":"intraBankTransfer","intrabank-transfer/complete":"intraBankTransferComplete","retrieve-money":"retrieveMoneyTransfer","menu/:parentId/:id":"submenu","menu/:id":"menu",certificates:"certificates",paymentCart:"paymentCart","card-orders":"cardOrders","payment-instalments/:id/earlyRepayment":"earlyRepayment","payment-instalments/plans":"operationInstalmentPlans","payment-instalments/:id":"operationInstalment"},e.prototype.publicRoutes={login:"login",enrollment:"enrollment","send2friend/:code/:userId/:uuid":"send2friend",test:"styleTest"},e.prototype.initialize=function(){var t;return e.__super__.initialize.apply(this,arguments),delete this.publicRoutes.test,this.addPublicRoutes(this.publicRoutes),this.once("route",(t=this,function(){return t.route("","home")})),this.on("route",(function(){return d.trackEvent("Navigation","navigate",window.location.hash)}))},e.prototype.storeContinuationLink=function(){if(window.location.hash)return Object.keys(this.publicRoutes).filter((function(t){return t.startsWith(window.location.hash.slice(1))})).length>0?void 0:window.localStorage.setItem("lastUrl",window.location.hash)},e.prototype.addPublicRoutes=function(t){return i.each(t,(e=this,function(t,n){var o;return o=e.checkBeforeRoute(e.resolve(t)),r.Router.prototype.route.call(e,n,t,o)}));var e},e.prototype.route=function(t,e,n){var o;return null==n&&(n=this.resolve(e)),o=this.checkBeforeRoute(this.requireLogin(n)),r.Router.prototype.route.call(this,t,e,o)},e.prototype.navigate=function(t,n){var i;return((i=window.navigator.userAgent).indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&(t=new o(a.cropUrl((new o).fragment(t).toString(),2032)).fragment()),e.__super__.navigate.call(this,t,n)},e.prototype.checkBeforeRoute=function(t){return e=this,function(){var n;return n=!0,i.isFunction(e.beforeRoute)&&(n=e.beforeRoute.apply(e,arguments)),!1!==n?t.apply(e,arguments):e.navigate(e.getPreviousLocation())};var e},e.prototype.resolve=function(t){var e;if(!(e=this[t]))throw new Error("Cannot find method "+t);return e},e.prototype.requireLogin=function(t){return e=this,function(){return window.app.session.isAuthenticated()?t.apply(e,arguments):(console.debug("auth required"),e.storeContinuationLink(),e.navigate("login",{trigger:!0,replace:!0}))};var e},e.prototype.repeatPayment=function(t,e){return(0,n(462).paymentWizard)(null,t,e)},e.prototype.redirectToTemplate=function(t){return(0,n(939).redirectToTemplate)(t)},e.prototype.pageNotAvailableToManager=function(){if(window.app.userIsManager())throw new Error("Page is not available to manager")},e.prototype.getPageClassByMenuId=function(t){var e,o;switch(i.last(t.split("."))){case p.mainMenuIds.CARDS_ACCOUNTS:case p.mainMenuIds.NEW_CARDS_ACCOUNTS:return n(940).CardsAccountsPage;case p.mainMenuIds.DIVISION_MAIN_CONTRACT:if(window.app.userIsManager())return n(943).DivisionMainContractPage;throw new Error("Page is only available to manager");case p.mainMenuIds.DIVISION_CONTRACTS:if(window.app.userIsManager())return n(972).DivisionContractsPage;throw new Error("Page is only available to manager");case"PAYMENTS_TRANSFERS":return n(973);case"GEO_SECURITY":return n(1045);case"SHOWCASE":return n(1048);case"MESSAGES":return window.OW.features.CHAT?n(1050).ChatPage:n(1051).MessagesPage;case"SET_LOGIN":return n(1052);case"SET_PASSWORD":return n(1053);case"CONTACT_INFO":return n(806).ContactInfoPage;case"SECURITY_SETTINGS":return n(1054).SecuritySettingsPage;case"CP_HISTORY":return n(850).HistoryPage;case"CP_APPLICATIONS":return!!l.USE_REST_APPLICATION_HISTORY&&n(850).ApplicationHistoryPage;case"DISPUTES":return n(851);case"NOTIFICATIONS":return n(1060).NotificationsPage;case"TWO_FACTOR_AUTH":return n(1068).TwoFactorAuthManagementPage;default:return!!((e=window.app.data.menu.get(t))&&e.isNative()&&e.isService()&&(o=e.get("service.id"),u.call(l.INFORMATION_SERVICES,o)>=0))&&n(1069).InformationServicePage}},e.prototype.start=function(t){var e,n;return t=t||window.app.data.menu.getAutoStartupItem(),(e=window.localStorage.getItem("lastUrl"))?(window.localStorage.removeItem("lastUrl"),n=e):n=window.app.data.menu.getItemUrl(t.id),this.navigate(n,{trigger:!0,replace:!0})},e.prototype.tryReplaceUrl=function(){var t;if(i.isFunction(window.history.replaceState)&&(t=window.WB.contextPath,window.location.pathname!==t+"/"))return window.history.replaceState({},document.title,t+"/#"+r.history.fragment)},e.prototype.home=function(){return window.app.showLoadingIndicator(),window.location.reload()},e.prototype.menu=function(t,e){var n;if(window.WB.currentSubMenuId=void 0,window.WB.currentMenuId=t,!t.endsWith(p.mainMenuIds.PAYMENTS_TRANSFERS)||!l.USE_TILED_PAYMENTS_PAGE)return(n=window.app.data.menu.getAutoStartupItem(t))&&!t.endsWith(p.mainMenuIds.PAYMENTS_TRANSFERS)?"NATIVE"===n.get("options.type")?(this.navigate(window.app.data.menu.getItemUrl(n.id),{trigger:!1,replace:!0}),this.submenu(t,n.id,e)):void(window.location.href=window.app.data.menu.getItemUrl(n.id)):"DEPOSITS"===i.last(t.split("."))?this.createDeposit():this.showPage(t,this.getPageClassByMenuId(t),{params:e});this.navigate("payments",{trigger:!0,replace:!0})},e.prototype.submenu=function(t,e,n){return window.WB.currentMenuId=t,window.WB.currentSubMenuId=e,this.showPage(t,this.getPageClassByMenuId(e),{params:n})},e.prototype.paymentsMenu=function(t){var e;return e=n(1070),this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{menuItemId:t})},e.prototype.payment=function(t,e){return(0,n(462).paymentWizard)(t,null,e)},e.prototype.cashByCode=function(t,e){return(0,n(1078).cashByCode)(t,e)},e.prototype.createPaymentTemplate=function(t){var e;return e=n(433).CreatePaymentTemplatePage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{serviceId:t})},e.prototype.editPaymentTemplate=function(t){var e;return e=n(433).EditPaymentTemplatePage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{templateId:t})},e.prototype.createTemplateFromHistory=function(t){var e;return e=n(433).CreatePaymentTemplatePage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{operationId:t})},e.prototype.createRecurrentPaymentTemplate=function(t){var e;return e=n(558).CreateRecurrentPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{serviceId:t})},e.prototype.editRecurrentPaymentTemplate=function(t){var e;return e=n(558).EditRecurrentPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{templateId:t})},e.prototype.createRecurrentFromHistory=function(t){var e;return e=n(558).CreateRecurrentPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{operationId:t})},e.prototype.createThresholdPaymentTemplate=function(t){var e;return e=n(559).CreateThresholdPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{serviceId:t})},e.prototype.editThresholdPaymentTemplate=function(t){var e;return e=n(559).EditThresholdPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{templateId:t})},e.prototype.createThresholdFromHistory=function(t){var e;return e=n(559).CreateThresholdPaymentPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{operationId:t})},e.prototype.productDetails=function(t){var e;return e=n(846),this.showPage("SHOWCASE",e,{productId:t})},e.prototype.contractRelatedPage=function(t,e){var n;return n=p.mainMenuIds.CARDS_ACCOUNTS,window.app.userIsManager()&&(n=p.mainMenuIds.DIVISION_CONTRACTS),this.showPage(n,t,e)},e.prototype.tdsEnroll=function(t,e){var o;return o=n(1079),this.contractRelatedPage(o,{contractId:t,tabId:e})},e.prototype.intraCardTransfer=function(t){var e;return window.OW.features.MCC_INTRA_TRANSFER?(e=n(855).IntraCardTransferPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{params:t})):this.showEmptyPage()},e.prototype.intraCardTransferComplete=function(){var t;return window.OW.features.MCC_INTRA_TRANSFER?(t=n(855).IntraCardTransferCompletePage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,t)):this.showEmptyPage()},e.prototype.intraBankTransfer=function(t){var e;return e=n(857).default,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{params:t})},e.prototype.intraBankTransferComplete=function(){var t;return t=n(1094).default,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,t)},e.prototype.retrieveMoneyTransfer=function(){return(new(0,n(1095).RetrieveMoneyTransferWizard)).showFirstStep()},e.prototype.contractDetails=function(t,e){var o;return o=n(794),this.contractRelatedPage(o,{contractId:t,tabId:e})},e.prototype.cardsList=function(t){var e;return e=n(1097).CardsListPage,this.contractRelatedPage(e,{contractId:t})},e.prototype.contractReport=function(t,e,o){var r;return new(0,n(1098).ReportDialog)({contractId:t,reportId:e}).show(),this.history.length>=1?i.defer((r=this,function(){return r.cancelLastUrlChange()})):this.navigate("#closeDialog",{trigger:!1,replace:!0})},e.prototype.knownPageId=function(t){var e,n;return n=t,(e=window.app.data.menu.getAutoStartupItem(t))&&"NATIVE"===e.get("options.type")&&(n=e.id),"DEPOSITS"===i.last(n.split("."))||!!this.getPageClassByMenuId(n)},e.prototype.showPage=function(t,e,n){var o;if(!e)throw new Error("Unknown page requested for "+t);return e.prototype.availableToManager||this.pageNotAvailableToManager(),this.tryReplaceUrl(),null!=(o=this.currentPage)&&o.trigger("page:remove"),(this.currentPage=new e(i.extend({menuId:t,el:s(".owwb-ls-alpha-content")},n))).show()},e.prototype.showAuthPage=function(t){if(!window.app.session.isAuthenticated())return this.tryReplaceUrl(),this.currentPage?this.currentPage.undelegateEvents():i.isFunction(window.history.pushState)&&window.history.pushState({},document.title,window.location.hash),(this.currentPage=new t({el:s(".owwb-ls-alpha-content")})).show();this.start()},e.prototype.styleTest=function(){},e.prototype.login=function(){var t;return t=n(1104).LoginPage,this.showAuthPage(t)},e.prototype.enrollment=function(){var t;return t=n(1113).EnrollmentPage,this.showAuthPage(t)},e.prototype.send2friend=function(t,e,o){var i;return i=n(1116).Send2FriendPage,this.showPage("SEND2FRIEND",i,{code:t,userId:e,uuid:o})},e.prototype.showEmptyPage=function(t){var e;return e=n(1118).EmptyPage,this.showPage(t||p.mainMenuIds.CARDS_ACCOUNTS,e)},e.prototype.disputes=function(){var t;return t=n(851),this.showPage(p.mainMenuIds.CP_HISTORY,t)},e.prototype.createDispute=function(){var t;return t=n(1119).DisputeCreationWizard,this.showEmptyPage(p.mainMenuIds.CP_HISTORY),t.instance().showFirstStep()},e.prototype.registerCard=function(){var t;return window.OW.features.FOREIGN_CARDS?(t=n(1120).ExternalCardRegistrationPage,this.showPage(p.mainMenuIds.CARDS_ACCOUNTS,t)):this.showEmptyPage()},e.prototype.application=function(t,e){var o,r,s;return o=n(1121).ApplicationPage,r=i.last(null!=(s=window.WB.currentMenuId)?s.split("."):void 0),this.showPage(r,o,{serviceId:t})},e.prototype.execute=function(){var t;return window.app.session.isAuthenticated()&&(null!=(t=this.currentPage)?t.hasUnsavedChanges():void 0)&&!window.confirm(this.currentPage.getUnsavedChangesWarning())?(this.navigate(this.getPreviousLocation()),!1):e.__super__.execute.apply(this,arguments)},e.prototype.beneficiariesManagement=function(){var t;return window.OW.features.BENEFICIARY_CLIENT?(t=n(1123).BeneficiariesManagementPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,t)):this.showEmptyPage()},e.prototype.invoicesRequest=function(t,e){var o;return o=n(1124).invoicesRequestWizard,this.showEmptyPage(p.mainMenuIds.PAYMENTS_TRANSFERS),o(t,e)},e.prototype.invoicePayment=function(t,e){var o;return o=n(866).invoicePaymentWizard,this.showEmptyPage(p.mainMenuIds.PAYMENTS_TRANSFERS),o(t,e)},e.prototype.editInvoiceSubscription=function(t){var e;return window.OW.features.INVOICE_SUBSCRIPTIONS?(e=n(867).InvoiceSubscriptionPage,this.showPage(p.mainMenuIds.PAYMENTS_TRANSFERS,e,{subscriptionId:t})):this.showEmptyPage()},e.prototype.createDeposit=function(){return window.OW.features.ONLINE_DEPOSITS?n(1126).DepositWizard.instance().showFirstStep():this.showEmptyPage()},e.prototype.certificates=function(){return n(1131).CertificateWizard.instance().showFirstStep()},e.prototype.paymentCart=function(t){var e;return(e=n(1134).default.instance(t)).showStep(e.currentStep)},e.prototype.operationInstalment=function(t){var e;return e=n(1144).default,this.showPage(p.mainMenuIds.CARDS_ACCOUNTS,e,{id:t})},e.prototype.operationInstalmentPlans=function(t){return n(868).index(t)},e.prototype.earlyRepayment=function(t){return n(868).earlyRepayment({instalmentId:t})},e.prototype.cardOrders=function(t){return n(563).index(t)},e.prototype.addCard=function(t){return n(563).addCard(t)},e.prototype.orderPlastic=function(t){return n(563).orderPlastic(t)},e}(e)}.call(e,n,e,t))||(t.exports=a)}).call(this,n(379),n(11),n(384),n(14))},,function(t,e,n){var o={"./countries.en.json":897,"./countries.ro.json":898,"./countries.ru.json":899,"./countries.ua.json":900};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=896},function(t){t.exports=JSON.parse('[{"name":"Afghanistan","alpha-2":"AF","country-code":"004"},{"name":"Åland Islands","alpha-2":"AX","country-code":"248"},{"name":"Albania","alpha-2":"AL","country-code":"008"},{"name":"Algeria","alpha-2":"DZ","country-code":"012"},{"name":"American Samoa","alpha-2":"AS","country-code":"016"},{"name":"Andorra","alpha-2":"AD","country-code":"020"},{"name":"Angola","alpha-2":"AO","country-code":"024"},{"name":"Anguilla","alpha-2":"AI","country-code":"660"},{"name":"Antarctica","alpha-2":"AQ","country-code":"010"},{"name":"Antigua and Barbuda","alpha-2":"AG","country-code":"028"},{"name":"Argentina","alpha-2":"AR","country-code":"032"},{"name":"Armenia","alpha-2":"AM","country-code":"051"},{"name":"Aruba","alpha-2":"AW","country-code":"533"},{"name":"Australia","alpha-2":"AU","country-code":"036"},{"name":"Austria","alpha-2":"AT","country-code":"040"},{"name":"Azerbaijan","alpha-2":"AZ","country-code":"031"},{"name":"Bahamas","alpha-2":"BS","country-code":"044"},{"name":"Bahrain","alpha-2":"BH","country-code":"048"},{"name":"Bangladesh","alpha-2":"BD","country-code":"050"},{"name":"Barbados","alpha-2":"BB","country-code":"052"},{"name":"Belarus","alpha-2":"BY","country-code":"112"},{"name":"Belgium","alpha-2":"BE","country-code":"056"},{"name":"Belize","alpha-2":"BZ","country-code":"084"},{"name":"Benin","alpha-2":"BJ","country-code":"204"},{"name":"Bermuda","alpha-2":"BM","country-code":"060"},{"name":"Bhutan","alpha-2":"BT","country-code":"064"},{"name":"Bolivia, Plurinational State of","alpha-2":"BO","country-code":"068"},{"name":"Bonaire, Sint Eustatius and Saba","alpha-2":"BQ","country-code":"535"},{"name":"Bosnia and Herzegovina","alpha-2":"BA","country-code":"070"},{"name":"Botswana","alpha-2":"BW","country-code":"072"},{"name":"Bouvet Island","alpha-2":"BV","country-code":"074"},{"name":"Brazil","alpha-2":"BR","country-code":"076"},{"name":"British Indian Ocean Territory","alpha-2":"IO","country-code":"086"},{"name":"Brunei Darussalam","alpha-2":"BN","country-code":"096"},{"name":"Bulgaria","alpha-2":"BG","country-code":"100"},{"name":"Burkina Faso","alpha-2":"BF","country-code":"854"},{"name":"Burundi","alpha-2":"BI","country-code":"108"},{"name":"Cambodia","alpha-2":"KH","country-code":"116"},{"name":"Cameroon","alpha-2":"CM","country-code":"120"},{"name":"Canada","alpha-2":"CA","country-code":"124"},{"name":"Cape Verde","alpha-2":"CV","country-code":"132"},{"name":"Cayman Islands","alpha-2":"KY","country-code":"136"},{"name":"Central African Republic","alpha-2":"CF","country-code":"140"},{"name":"Chad","alpha-2":"TD","country-code":"148"},{"name":"Chile","alpha-2":"CL","country-code":"152"},{"name":"China","alpha-2":"CN","country-code":"156"},{"name":"Christmas Island","alpha-2":"CX","country-code":"162"},{"name":"Cocos (Keeling) Islands","alpha-2":"CC","country-code":"166"},{"name":"Colombia","alpha-2":"CO","country-code":"170"},{"name":"Comoros","alpha-2":"KM","country-code":"174"},{"name":"Congo","alpha-2":"CG","country-code":"178"},{"name":"Congo, the Democratic Republic of the","alpha-2":"CD","country-code":"180"},{"name":"Cook Islands","alpha-2":"CK","country-code":"184"},{"name":"Costa Rica","alpha-2":"CR","country-code":"188"},{"name":"Côte d\'Ivoire","alpha-2":"CI","country-code":"384"},{"name":"Croatia","alpha-2":"HR","country-code":"191"},{"name":"Cuba","alpha-2":"CU","country-code":"192"},{"name":"Curaçao","alpha-2":"CW","country-code":"531"},{"name":"Cyprus","alpha-2":"CY","country-code":"196"},{"name":"Czech Republic","alpha-2":"CZ","country-code":"203"},{"name":"Denmark","alpha-2":"DK","country-code":"208"},{"name":"Djibouti","alpha-2":"DJ","country-code":"262"},{"name":"Dominica","alpha-2":"DM","country-code":"212"},{"name":"Dominican Republic","alpha-2":"DO","country-code":"214"},{"name":"Ecuador","alpha-2":"EC","country-code":"218"},{"name":"Egypt","alpha-2":"EG","country-code":"818"},{"name":"El Salvador","alpha-2":"SV","country-code":"222"},{"name":"Equatorial Guinea","alpha-2":"GQ","country-code":"226"},{"name":"Eritrea","alpha-2":"ER","country-code":"232"},{"name":"Estonia","alpha-2":"EE","country-code":"233"},{"name":"Ethiopia","alpha-2":"ET","country-code":"231"},{"name":"Falkland Islands (Malvinas)","alpha-2":"FK","country-code":"238"},{"name":"Faroe Islands","alpha-2":"FO","country-code":"234"},{"name":"Fiji","alpha-2":"FJ","country-code":"242"},{"name":"Finland","alpha-2":"FI","country-code":"246"},{"name":"France","alpha-2":"FR","country-code":"250"},{"name":"French Guiana","alpha-2":"GF","country-code":"254"},{"name":"French Polynesia","alpha-2":"PF","country-code":"258"},{"name":"French Southern Territories","alpha-2":"TF","country-code":"260"},{"name":"Gabon","alpha-2":"GA","country-code":"266"},{"name":"Gambia","alpha-2":"GM","country-code":"270"},{"name":"Georgia","alpha-2":"GE","country-code":"268"},{"name":"Germany","alpha-2":"DE","country-code":"276"},{"name":"Ghana","alpha-2":"GH","country-code":"288"},{"name":"Gibraltar","alpha-2":"GI","country-code":"292"},{"name":"Greece","alpha-2":"GR","country-code":"300"},{"name":"Greenland","alpha-2":"GL","country-code":"304"},{"name":"Grenada","alpha-2":"GD","country-code":"308"},{"name":"Guadeloupe","alpha-2":"GP","country-code":"312"},{"name":"Guam","alpha-2":"GU","country-code":"316"},{"name":"Guatemala","alpha-2":"GT","country-code":"320"},{"name":"Guernsey","alpha-2":"GG","country-code":"831"},{"name":"Guinea","alpha-2":"GN","country-code":"324"},{"name":"Guinea-Bissau","alpha-2":"GW","country-code":"624"},{"name":"Guyana","alpha-2":"GY","country-code":"328"},{"name":"Haiti","alpha-2":"HT","country-code":"332"},{"name":"Heard Island and McDonald Islands","alpha-2":"HM","country-code":"334"},{"name":"Holy See (Vatican City State)","alpha-2":"VA","country-code":"336"},{"name":"Honduras","alpha-2":"HN","country-code":"340"},{"name":"Hong Kong","alpha-2":"HK","country-code":"344"},{"name":"Hungary","alpha-2":"HU","country-code":"348"},{"name":"Iceland","alpha-2":"IS","country-code":"352"},{"name":"India","alpha-2":"IN","country-code":"356"},{"name":"Indonesia","alpha-2":"ID","country-code":"360"},{"name":"Iran, Islamic Republic of","alpha-2":"IR","country-code":"364"},{"name":"Iraq","alpha-2":"IQ","country-code":"368"},{"name":"Ireland","alpha-2":"IE","country-code":"372"},{"name":"Isle of Man","alpha-2":"IM","country-code":"833"},{"name":"Israel","alpha-2":"IL","country-code":"376"},{"name":"Italy","alpha-2":"IT","country-code":"380"},{"name":"Jamaica","alpha-2":"JM","country-code":"388"},{"name":"Japan","alpha-2":"JP","country-code":"392"},{"name":"Jersey","alpha-2":"JE","country-code":"832"},{"name":"Jordan","alpha-2":"JO","country-code":"400"},{"name":"Kazakhstan","alpha-2":"KZ","country-code":"398"},{"name":"Kenya","alpha-2":"KE","country-code":"404"},{"name":"Kiribati","alpha-2":"KI","country-code":"296"},{"name":"Korea, Democratic People\'s Republic of","alpha-2":"KP","country-code":"408"},{"name":"Korea, Republic of","alpha-2":"KR","country-code":"410"},{"name":"Kuwait","alpha-2":"KW","country-code":"414"},{"name":"Kyrgyzstan","alpha-2":"KG","country-code":"417"},{"name":"Lao People\'s Democratic Republic","alpha-2":"LA","country-code":"418"},{"name":"Latvia","alpha-2":"LV","country-code":"428"},{"name":"Lebanon","alpha-2":"LB","country-code":"422"},{"name":"Lesotho","alpha-2":"LS","country-code":"426"},{"name":"Liberia","alpha-2":"LR","country-code":"430"},{"name":"Libya","alpha-2":"LY","country-code":"434"},{"name":"Liechtenstein","alpha-2":"LI","country-code":"438"},{"name":"Lithuania","alpha-2":"LT","country-code":"440"},{"name":"Luxembourg","alpha-2":"LU","country-code":"442"},{"name":"Macao","alpha-2":"MO","country-code":"446"},{"name":"Macedonia, the former Yugoslav Republic of","alpha-2":"MK","country-code":"807"},{"name":"Madagascar","alpha-2":"MG","country-code":"450"},{"name":"Malawi","alpha-2":"MW","country-code":"454"},{"name":"Malaysia","alpha-2":"MY","country-code":"458"},{"name":"Maldives","alpha-2":"MV","country-code":"462"},{"name":"Mali","alpha-2":"ML","country-code":"466"},{"name":"Malta","alpha-2":"MT","country-code":"470"},{"name":"Marshall Islands","alpha-2":"MH","country-code":"584"},{"name":"Martinique","alpha-2":"MQ","country-code":"474"},{"name":"Mauritania","alpha-2":"MR","country-code":"478"},{"name":"Mauritius","alpha-2":"MU","country-code":"480"},{"name":"Mayotte","alpha-2":"YT","country-code":"175"},{"name":"Mexico","alpha-2":"MX","country-code":"484"},{"name":"Micronesia, Federated States of","alpha-2":"FM","country-code":"583"},{"name":"Moldova, Republic of","alpha-2":"MD","country-code":"498"},{"name":"Monaco","alpha-2":"MC","country-code":"492"},{"name":"Mongolia","alpha-2":"MN","country-code":"496"},{"name":"Montenegro","alpha-2":"ME","country-code":"499"},{"name":"Montserrat","alpha-2":"MS","country-code":"500"},{"name":"Morocco","alpha-2":"MA","country-code":"504"},{"name":"Mozambique","alpha-2":"MZ","country-code":"508"},{"name":"Myanmar","alpha-2":"MM","country-code":"104"},{"name":"Namibia","alpha-2":"NA","country-code":"516"},{"name":"Nauru","alpha-2":"NR","country-code":"520"},{"name":"Nepal","alpha-2":"NP","country-code":"524"},{"name":"Netherlands","alpha-2":"NL","country-code":"528"},{"name":"New Caledonia","alpha-2":"NC","country-code":"540"},{"name":"New Zealand","alpha-2":"NZ","country-code":"554"},{"name":"Nicaragua","alpha-2":"NI","country-code":"558"},{"name":"Niger","alpha-2":"NE","country-code":"562"},{"name":"Nigeria","alpha-2":"NG","country-code":"566"},{"name":"Niue","alpha-2":"NU","country-code":"570"},{"name":"Norfolk Island","alpha-2":"NF","country-code":"574"},{"name":"Northern Mariana Islands","alpha-2":"MP","country-code":"580"},{"name":"Norway","alpha-2":"NO","country-code":"578"},{"name":"Oman","alpha-2":"OM","country-code":"512"},{"name":"Pakistan","alpha-2":"PK","country-code":"586"},{"name":"Palau","alpha-2":"PW","country-code":"585"},{"name":"Palestinian Territory, Occupied","alpha-2":"PS","country-code":"275"},{"name":"Panama","alpha-2":"PA","country-code":"591"},{"name":"Papua New Guinea","alpha-2":"PG","country-code":"598"},{"name":"Paraguay","alpha-2":"PY","country-code":"600"},{"name":"Peru","alpha-2":"PE","country-code":"604"},{"name":"Philippines","alpha-2":"PH","country-code":"608"},{"name":"Pitcairn","alpha-2":"PN","country-code":"612"},{"name":"Poland","alpha-2":"PL","country-code":"616"},{"name":"Portugal","alpha-2":"PT","country-code":"620"},{"name":"Puerto Rico","alpha-2":"PR","country-code":"630"},{"name":"Qatar","alpha-2":"QA","country-code":"634"},{"name":"Réunion","alpha-2":"RE","country-code":"638"},{"name":"Romania","alpha-2":"RO","country-code":"642"},{"name":"Russian Federation","alpha-2":"RU","country-code":"643"},{"name":"Rwanda","alpha-2":"RW","country-code":"646"},{"name":"Saint Barthélemy","alpha-2":"BL","country-code":"652"},{"name":"Saint Helena, Ascension and Tristan da Cunha","alpha-2":"SH","country-code":"654"},{"name":"Saint Kitts and Nevis","alpha-2":"KN","country-code":"659"},{"name":"Saint Lucia","alpha-2":"LC","country-code":"662"},{"name":"Saint Martin (French part)","alpha-2":"MF","country-code":"663"},{"name":"Saint Pierre and Miquelon","alpha-2":"PM","country-code":"666"},{"name":"Saint Vincent and the Grenadines","alpha-2":"VC","country-code":"670"},{"name":"Samoa","alpha-2":"WS","country-code":"882"},{"name":"San Marino","alpha-2":"SM","country-code":"674"},{"name":"Sao Tome and Principe","alpha-2":"ST","country-code":"678"},{"name":"Saudi Arabia","alpha-2":"SA","country-code":"682"},{"name":"Senegal","alpha-2":"SN","country-code":"686"},{"name":"Serbia","alpha-2":"RS","country-code":"688"},{"name":"Seychelles","alpha-2":"SC","country-code":"690"},{"name":"Sierra Leone","alpha-2":"SL","country-code":"694"},{"name":"Singapore","alpha-2":"SG","country-code":"702"},{"name":"Sint Maarten (Dutch part)","alpha-2":"SX","country-code":"534"},{"name":"Slovakia","alpha-2":"SK","country-code":"703"},{"name":"Slovenia","alpha-2":"SI","country-code":"705"},{"name":"Solomon Islands","alpha-2":"SB","country-code":"090"},{"name":"Somalia","alpha-2":"SO","country-code":"706"},{"name":"South Africa","alpha-2":"ZA","country-code":"710"},{"name":"South Georgia and the South Sandwich Islands","alpha-2":"GS","country-code":"239"},{"name":"South Sudan","alpha-2":"SS","country-code":"728"},{"name":"Spain","alpha-2":"ES","country-code":"724"},{"name":"Sri Lanka","alpha-2":"LK","country-code":"144"},{"name":"Sudan","alpha-2":"SD","country-code":"729"},{"name":"Suriname","alpha-2":"SR","country-code":"740"},{"name":"Svalbard and Jan Mayen","alpha-2":"SJ","country-code":"744"},{"name":"Swaziland","alpha-2":"SZ","country-code":"748"},{"name":"Sweden","alpha-2":"SE","country-code":"752"},{"name":"Switzerland","alpha-2":"CH","country-code":"756"},{"name":"Syrian Arab Republic","alpha-2":"SY","country-code":"760"},{"name":"Taiwan, Province of China","alpha-2":"TW","country-code":"158"},{"name":"Tajikistan","alpha-2":"TJ","country-code":"762"},{"name":"Tanzania, United Republic of","alpha-2":"TZ","country-code":"834"},{"name":"Thailand","alpha-2":"TH","country-code":"764"},{"name":"Timor-Leste","alpha-2":"TL","country-code":"626"},{"name":"Togo","alpha-2":"TG","country-code":"768"},{"name":"Tokelau","alpha-2":"TK","country-code":"772"},{"name":"Tonga","alpha-2":"TO","country-code":"776"},{"name":"Trinidad and Tobago","alpha-2":"TT","country-code":"780"},{"name":"Tunisia","alpha-2":"TN","country-code":"788"},{"name":"Turkey","alpha-2":"TR","country-code":"792"},{"name":"Turkmenistan","alpha-2":"TM","country-code":"795"},{"name":"Turks and Caicos Islands","alpha-2":"TC","country-code":"796"},{"name":"Tuvalu","alpha-2":"TV","country-code":"798"},{"name":"Uganda","alpha-2":"UG","country-code":"800"},{"name":"Ukraine","alpha-2":"UA","country-code":"804"},{"name":"United Arab Emirates","alpha-2":"AE","country-code":"784"},{"name":"United Kingdom","alpha-2":"GB","country-code":"826"},{"name":"United States","alpha-2":"US","country-code":"840"},{"name":"United States Minor Outlying Islands","alpha-2":"UM","country-code":"581"},{"name":"Uruguay","alpha-2":"UY","country-code":"858"},{"name":"Uzbekistan","alpha-2":"UZ","country-code":"860"},{"name":"Vanuatu","alpha-2":"VU","country-code":"548"},{"name":"Venezuela, Bolivarian Republic of","alpha-2":"VE","country-code":"862"},{"name":"Viet Nam","alpha-2":"VN","country-code":"704"},{"name":"Virgin Islands, British","alpha-2":"VG","country-code":"092"},{"name":"Virgin Islands, U.S.","alpha-2":"VI","country-code":"850"},{"name":"Wallis and Futuna","alpha-2":"WF","country-code":"876"},{"name":"Western Sahara","alpha-2":"EH","country-code":"732"},{"name":"Yemen","alpha-2":"YE","country-code":"887"},{"name":"Zambia","alpha-2":"ZM","country-code":"894"},{"name":"Zimbabwe","alpha-2":"ZW","country-code":"716"},{"name":"Abkhazia","alpha-2":"AB","country-code":"895"}]')},function(t){t.exports=JSON.parse('{"AF":"Afganistan","ZA":"Africa de Sud","AL":"Albania","DZ":"Algeria","AD":"Andorra","AO":"Angola","AI":"Anguilla","AQ":"Antarctica","AG":"Antigua și Barbuda","AN":"Antilele Olandeze","SA":"Arabia Saudită","AR":"Argentina","AM":"Armenia","AW":"Aruba","AU":"Australia","AT":"Austria","AZ":"Azerbaidjan","BS":"Bahamas","BH":"Bahrain","BD":"Bangladesh","BB":"Barbados","BE":"Belgia","BZ":"Belize","BJ":"Benin","BM":"Bermuda","BT":"Bhutan","BY":"Bielorusia","BO":"Bolivia","BA":"Bosnia și Herțegovina","BW":"Botswana","BR":"Brazilia","BN":"Brunei","BG":"Bulgaria","BF":"Burkina Faso","BI":"Burundi","KH":"Cambodgia","CM":"Camerun","CA":"Canada","CV":"Capul Verde","CL":"Chile","CN":"China","TD":"Ciad","CY":"Cipru","CI":"Coasta de Fildeș","CO":"Columbia","KM":"Comore","CG":"Congo","KP":"Coreea de Nord","KR":"Coreea de Sud","CR":"Costa Rica","HR":"Croația","CU":"Cuba","DK":"Danemarca","DJ":"Djibouti","DM":"Dominica","EC":"Ecuador","EG":"Egipt","SV":"El Salvador","CH":"Eleveția","AE":"Emiratele Arabe Unite","ER":"Eritreea","EE":"Estonia","ET":"Etiopia","FJ":"Fiji","PH":"Filipine","FI":"Finlanda","FR":"Franța","GA":"Gabon","GM":"Gambia","GE":"Georgia","DE":"Germania","GH":"Ghana","GI":"Gibraltar","GR":"Grecia","GD":"Grenada","GL":"Groenlanda","GP":"Guadelupa","GU":"Guam","GT":"Guatemala","GG":"Guernsey","GN":"Guineea","GQ":"Guineea Ecuatorială","GW":"Guineea-Bissau","GY":"Guyana","GF":"Guyana Franceză","HT":"Haiti","HN":"Honduras","IN":"India","ID":"Indonezia","BV":"Insula Bouvet","CX":"Insula Christmas","HM":"Insula Heard și Insulele McDonald","IM":"Insula Man","AX":"Insulele Aland","KY":"Insulele Cayman","CC":"Insulele Cocos","CK":"Insulele Cook","FK":"Insulele Falkland","FO":"Insulele Feroe","GS":"Insulele Georgia de Sud și Sandwich de Sud","MP":"Insulele Mariane de Nord","MH":"Insulele Marshall","NF":"Insulele Norfolk","SB":"Insulele Solomon","TC":"Insulele Turks și Caicos","VG":"Insulele Virgine Britanice","VI":"Insulele Virgine S.U.A.","UM":"Insulele mici îndepărtate ale Statelor Unite ale Americii","JO":"Iordania","IQ":"Irak","IR":"Iran","IE":"Irlanda","IS":"Islanda","IL":"Israel","IT":"Italia","JM":"Jamaica","JP":"Japonia","JE":"Jersey","KZ":"Kazahstan","KE":"Kenya","KI":"Kiribati","KW":"Kuweit","KG":"Kârgâzstan","LA":"Laos","LS":"Lesotho","LV":"Letonia","LB":"Liban","LR":"Liberia","LY":"Libia","LI":"Liechtenstein","LT":"Lituania","LU":"Luxemburg","MK":"Macedonia","MG":"Madagascar","MY":"Malaezia","MW":"Malawi","MV":"Maldive","ML":"Mali","MT":"Malta","GB":"Marea Britanie","MA":"Maroc","MQ":"Martinica","MR":"Mauritania","MU":"Mauritius","YT":"Mayotte","MX":"Mexic","FM":"Micronezia","MC":"Monaco","MN":"Mongolia","MS":"Montserrat","MZ":"Mozambic","ME":"Muntenegru","MM":"Myanmar","NA":"Namibia","NR":"Nauru","NP":"Nepal","NI":"Nicaragua","NE":"Niger","NG":"Nigeria","NU":"Niue","NO":"Norvegia","NC":"Noua Caledonie","NZ":"Noua Zeelandă","NL":"Olanda","OM":"Oman","PK":"Pakistan","PW":"Palau","PA":"Panama","PG":"Papua Noua Guinee","PY":"Paraguay","PE":"Peru","PN":"Pitcairn","PF":"Polinezia Franceză","PL":"Polonia","PR":"Porto Rico","PT":"Portugalia","QA":"Qatar","HK":"R.A.S. Hong Kong a Chinei","MO":"R.A.S. Macao a Chinei","ZZ":"Regiune necunoscută sau nevalidă","CZ":"Republica Cehă","CF":"Republica Centrafricană","CD":"Republica Democrată Congo","DO":"Republica Dominicană","MD":"Republica Moldova","RE":"Reunion","RO":"România","RU":"Rusia","RW":"Rwanda","EH":"Sahara Occidentală","WS":"Samoa","AS":"Samoa Americană","SM":"San Marino","ST":"Sao Tome și Principe","SN":"Senegal","RS":"Serbia","CS":"Serbia și Muntenegru","SC":"Seychelles","SH":"Sfânta Elena","LC":"Sfânta Lucia","BL":"Sfântul Bartolomeu","KN":"Sfântul Kitts și Nevis","MF":"Sfântul Martin","PM":"Sfântul Pierre și Miquelon","VC":"Sfântul Vincent și Grenadine","SL":"Sierra Leone","SG":"Singapore","SY":"Siria","SK":"Slovacia","SI":"Slovenia","SO":"Somalia","ES":"Spania","LK":"Sri Lanka","US":"Statele Unite ale Americii","SD":"Sudan","SE":"Suedia","SR":"Surinam","SJ":"Svalbard și Jan Mayen","SZ":"Swaziland","TJ":"Tadjikistan","TW":"Taiwan","TZ":"Tanzania","TF":"Teritoriile Australe și Antarctice Franceze","IO":"Teritoriul Britanic din Oceanul Indian","PS":"Teritoriul Palestinian","TH":"Thailanda","TL":"Timorul de Est","TG":"Togo","TK":"Tokelau","TO":"Tonga","TT":"Trinidad-Tobago","TN":"Tunisia","TR":"Turcia","TM":"Turkmenistan","TV":"Tuvalu","UA":"Ucraina","UG":"Uganda","HU":"Ungaria","UY":"Uruguay","UZ":"Uzbekistan","VU":"Vanuatu","VA":"Vatican","VE":"Venezuela","VN":"Vietnam","WF":"Wallis și Futuna","YE":"Yemen","ZM":"Zambia","ZW":"Zimbabwe","AB":"Abhazia"}')},function(t){t.exports=JSON.parse('[{"country-code":"036","name":"Австралия","alpha-2":"AU"},{"country-code":"040","name":"Австрия","alpha-2":"AT"},{"country-code":"031","name":"Азербайджан","alpha-2":"AZ"},{"country-code":"008","name":"Албания","alpha-2":"AL"},{"country-code":"248","name":"Аландские острова","alpha-2":"AX"},{"country-code":"012","name":"Алжир","alpha-2":"DZ"},{"country-code":"016","name":"Американское Самоа","alpha-2":"AS"},{"country-code":"660","name":"Ангилья","alpha-2":"AI"},{"country-code":"024","name":"Ангола","alpha-2":"AO"},{"country-code":"020","name":"Андорра","alpha-2":"AD"},{"country-code":"010","name":"Антарктида","alpha-2":"AQ"},{"country-code":"028","name":"Антигуа и Барбуда","alpha-2":"AG"},{"country-code":"032","name":"Аргентина","alpha-2":"AR"},{"country-code":"051","name":"Армения","alpha-2":"AM"},{"country-code":"533","name":"Аруба","alpha-2":"AW"},{"country-code":"004","name":"Афганистан","alpha-2":"AF"},{"country-code":"044","name":"Багамы","alpha-2":"BS"},{"country-code":"050","name":"Бангладеш","alpha-2":"BD"},{"country-code":"052","name":"Барбадос","alpha-2":"BB"},{"country-code":"048","name":"Бахрейн","alpha-2":"BH"},{"country-code":"112","name":"Беларусь","alpha-2":"BY"},{"country-code":"084","name":"Белиз","alpha-2":"BZ"},{"country-code":"056","name":"Бельгия","alpha-2":"BE"},{"country-code":"204","name":"Бенин","alpha-2":"BJ"},{"country-code":"060","name":"Бермуды","alpha-2":"BM"},{"country-code":"100","name":"Болгария","alpha-2":"BG"},{"country-code":"068","name":"Боливия","alpha-2":"BO"},{"country-code":"070","name":"Босния и Герцеговина","alpha-2":"BA"},{"country-code":"072","name":"Ботсвана","alpha-2":"BW"},{"country-code":"076","name":"Бразилия","alpha-2":"BR"},{"country-code":"086","name":"Британская Территория в Индийском Океане","alpha-2":"IO"},{"country-code":"096","name":"Бруней-Даруссалам","alpha-2":"BN"},{"country-code":"854","name":"Буркина-Фасо","alpha-2":"BF"},{"country-code":"108","name":"Бурунди","alpha-2":"BI"},{"country-code":"064","name":"Бутан","alpha-2":"BT"},{"country-code":"548","name":"Вануату","alpha-2":"VU"},{"country-code":"336","name":"Ватикан","alpha-2":"VA"},{"country-code":"348","name":"Венгрия","alpha-2":"HU"},{"country-code":"862","name":"Венесуэла","alpha-2":"VE"},{"country-code":"092","name":"Виргинские острова, Британские","alpha-2":"VG"},{"country-code":"850","name":"Виргинские острова, США","alpha-2":"VI"},{"country-code":"704","name":"Вьетнам","alpha-2":"VN"},{"country-code":"266","name":"Габон","alpha-2":"GA"},{"country-code":"332","name":"Гаити","alpha-2":"HT"},{"country-code":"328","name":"Гайана","alpha-2":"GY"},{"country-code":"270","name":"Гамбия","alpha-2":"GM"},{"country-code":"288","name":"Гана","alpha-2":"GH"},{"country-code":"312","name":"Гваделупа","alpha-2":"GP"},{"country-code":"320","name":"Гватемала","alpha-2":"GT"},{"country-code":"324","name":"Гвинея","alpha-2":"GN"},{"country-code":"624","name":"Гвинея-Бисау","alpha-2":"GW"},{"country-code":"276","name":"Германия","alpha-2":"DE"},{"country-code":"292","name":"Гибралтар","alpha-2":"GI"},{"country-code":"340","name":"Гондурас","alpha-2":"HN"},{"country-code":"344","name":"Гонконг","alpha-2":"HK"},{"country-code":"308","name":"Гренада","alpha-2":"GD"},{"country-code":"304","name":"Гренландия","alpha-2":"GL"},{"country-code":"300","name":"Греция","alpha-2":"GR"},{"country-code":"268","name":"Грузия","alpha-2":"GE"},{"country-code":"316","name":"Гуам","alpha-2":"GU"},{"country-code":"208","name":"Дания","alpha-2":"DK"},{"country-code":"262","name":"Джибути","alpha-2":"DJ"},{"country-code":"212","name":"Доминика","alpha-2":"DM"},{"country-code":"214","name":"Доминиканская Республика","alpha-2":"DO"},{"country-code":"818","name":"Египет","alpha-2":"EG"},{"country-code":"894","name":"Замбия","alpha-2":"ZM"},{"country-code":"732","name":"Западная Сахара","alpha-2":"EH"},{"country-code":"716","name":"Зимбабве","alpha-2":"ZW"},{"country-code":"376","name":"Израиль","alpha-2":"IL"},{"country-code":"356","name":"Индия","alpha-2":"IN"},{"country-code":"360","name":"Индонезия","alpha-2":"ID"},{"country-code":"400","name":"Иордания","alpha-2":"JO"},{"country-code":"368","name":"Ирак","alpha-2":"IQ"},{"country-code":"364","name":"Иран, Исламская Республика","alpha-2":"IR"},{"country-code":"372","name":"Ирландия","alpha-2":"IE"},{"country-code":"352","name":"Исландия","alpha-2":"IS"},{"country-code":"724","name":"Испания","alpha-2":"ES"},{"country-code":"380","name":"Италия","alpha-2":"IT"},{"country-code":"887","name":"Йемен","alpha-2":"YE"},{"country-code":"132","name":"Кабо-Верде","alpha-2":"CV"},{"country-code":"398","name":"Казахстан","alpha-2":"KZ"},{"country-code":"116","name":"Камбоджа","alpha-2":"KH"},{"country-code":"120","name":"Камерун","alpha-2":"CM"},{"country-code":"124","name":"Канада","alpha-2":"CA"},{"country-code":"634","name":"Катар","alpha-2":"QA"},{"country-code":"404","name":"Кения","alpha-2":"KE"},{"country-code":"196","name":"Кипр","alpha-2":"CY"},{"country-code":"417","name":"Киргизия","alpha-2":"KG"},{"country-code":"296","name":"Кирибати","alpha-2":"KI"},{"country-code":"156","name":"Китай","alpha-2":"CN"},{"country-code":"166","name":"Кокосовые (Килинг) острова","alpha-2":"CC"},{"country-code":"170","name":"Колумбия","alpha-2":"CO"},{"country-code":"174","name":"Коморы","alpha-2":"KM"},{"country-code":"178","name":"Конго","alpha-2":"CG"},{"country-code":"408","name":"Корея, Народно-Демократическая Республика","alpha-2":"KP"},{"country-code":"410","name":"Корея, Республика","alpha-2":"KR"},{"country-code":"188","name":"Коста-Рика","alpha-2":"CR"},{"country-code":"384","name":"Кот Д\'Ивуар","alpha-2":"CI"},{"country-code":"192","name":"Куба","alpha-2":"CU"},{"country-code":"414","name":"Кувейт","alpha-2":"KW"},{"country-code":"418","name":"Лаосская Народно-Демократическая Республика","alpha-2":"LA"},{"country-code":"428","name":"Латвия","alpha-2":"LV"},{"country-code":"426","name":"Лесото","alpha-2":"LS"},{"country-code":"430","name":"Либерия","alpha-2":"LR"},{"country-code":"422","name":"Ливан","alpha-2":"LB"},{"country-code":"434","name":"Ливийская Арабская Джамахирия","alpha-2":"LY"},{"country-code":"440","name":"Литва","alpha-2":"LT"},{"country-code":"438","name":"Лихтенштейн","alpha-2":"LI"},{"country-code":"442","name":"Люксембург","alpha-2":"LU"},{"country-code":"480","name":"Маврикий","alpha-2":"MU"},{"country-code":"478","name":"Мавритания","alpha-2":"MR"},{"country-code":"450","name":"Мадагаскар","alpha-2":"MG"},{"country-code":"175","name":"Майотта","alpha-2":"YT"},{"country-code":"807","name":"Македония, бывшая Югославская Республика","alpha-2":"MK"},{"country-code":"454","name":"Малави","alpha-2":"MW"},{"country-code":"458","name":"Малайзия","alpha-2":"MY"},{"country-code":"466","name":"Мали","alpha-2":"ML"},{"country-code":"462","name":"Мальдивы","alpha-2":"MV"},{"country-code":"470","name":"Мальта","alpha-2":"MT"},{"country-code":"504","name":"Марокко","alpha-2":"MA"},{"country-code":"504","name":"Марокко","alpha-2":"MO"},{"country-code":"474","name":"Мартиника","alpha-2":"MQ"},{"country-code":"584","name":"Маршалловы острова","alpha-2":"MH"},{"country-code":"484","name":"Мексика","alpha-2":"MX"},{"country-code":"583","name":"Микронезия, Федеративные Штаты","alpha-2":"FM"},{"country-code":"508","name":"Мозамбик","alpha-2":"MZ"},{"country-code":"498","name":"Молдова, Республика","alpha-2":"MD"},{"country-code":"499","name":"Черногория","alpha-2":"ME"},{"country-code":"492","name":"Монако","alpha-2":"MC"},{"country-code":"496","name":"Монголия","alpha-2":"MN"},{"country-code":"500","name":"Монтсеррат","alpha-2":"MS"},{"country-code":"104","name":"Мьянма","alpha-2":"MM"},{"country-code":"516","name":"Намибия","alpha-2":"NA"},{"country-code":"520","name":"Науру","alpha-2":"NR"},{"country-code":"524","name":"Непал","alpha-2":"NP"},{"country-code":"562","name":"Нигер","alpha-2":"NE"},{"country-code":"566","name":"Нигерия","alpha-2":"NG"},{"country-code":"530","name":"Нидерландские Антилы","alpha-2":"AN"},{"country-code":"528","name":"Нидерланды","alpha-2":"NL"},{"country-code":"558","name":"Никарагуа","alpha-2":"NI"},{"country-code":"570","name":"Ниуэ","alpha-2":"NU"},{"country-code":"554","name":"Новая Зеландия","alpha-2":"NZ"},{"country-code":"540","name":"Новая Каледония","alpha-2":"NC"},{"country-code":"578","name":"Норвегия","alpha-2":"NO"},{"country-code":"784","name":"Объединенные Арабские Эмираты","alpha-2":"AE"},{"country-code":"512","name":"Оман","alpha-2":"OM"},{"country-code":"074","name":"Остров Буве","alpha-2":"BV"},{"country-code":"574","name":"Остров Норфолк","alpha-2":"NF"},{"country-code":"162","name":"Остров Рождества","alpha-2":"CX"},{"country-code":"334","name":"Остров Херд и острова Макдональд","alpha-2":"HM"},{"country-code":"136","name":"Острова Кайман","alpha-2":"KY"},{"country-code":"184","name":"Острова Кука","alpha-2":"CK"},{"country-code":"796","name":"Острова Теркс и Кайкос","alpha-2":"TC"},{"country-code":"158","name":"Тайвань","alpha-2":"TW"},{"country-code":"275","name":"Палестина","alpha-2":"PS"},{"country-code":"586","name":"Пакистан","alpha-2":"PK"},{"country-code":"585","name":"Палау","alpha-2":"PW"},{"country-code":"591","name":"Панама","alpha-2":"PA"},{"country-code":"598","name":"Папуа-Новая Гвинея","alpha-2":"PG"},{"country-code":"600","name":"Парагвай","alpha-2":"PY"},{"country-code":"604","name":"Перу","alpha-2":"PE"},{"country-code":"612","name":"Питкерн","alpha-2":"PN"},{"country-code":"616","name":"Польша","alpha-2":"PL"},{"country-code":"620","name":"Португалия","alpha-2":"PT"},{"country-code":"630","name":"Пуэрто-Рико","alpha-2":"PR"},{"country-code":"638","name":"Реюньон","alpha-2":"RE"},{"country-code":"643","name":"Россия","alpha-2":"RU"},{"country-code":"646","name":"Руанда","alpha-2":"RW"},{"country-code":"642","name":"Румыния","alpha-2":"RO"},{"country-code":"222","name":"Сальвадор","alpha-2":"SV"},{"country-code":"882","name":"Самоа","alpha-2":"WS"},{"country-code":"674","name":"Сан-Марино","alpha-2":"SM"},{"country-code":"678","name":"Сан-Томе и Принсипи","alpha-2":"ST"},{"country-code":"682","name":"Саудовская Аравия","alpha-2":"SA"},{"country-code":"748","name":"Свазиленд","alpha-2":"SZ"},{"country-code":"654","name":"Святая Елена","alpha-2":"SH"},{"country-code":"580","name":"Северные Марианские острова","alpha-2":"MP"},{"country-code":"690","name":"Сейшелы","alpha-2":"SC"},{"country-code":"666","name":"Сен-Пьер и Микелон","alpha-2":"PM"},{"country-code":"686","name":"Сенегал","alpha-2":"SN"},{"country-code":"670","name":"Сент-Винсент и Гренадины","alpha-2":"VC"},{"country-code":"659","name":"Сент-Китс и Невис","alpha-2":"KN"},{"country-code":"662","name":"Сент-Люсия","alpha-2":"LC"},{"country-code":"891","name":"Сербия и Черногория","alpha-2":"CS"},{"country-code":"702","name":"Сингапур","alpha-2":"SG"},{"country-code":"760","name":"Сирийская Арабская Республика","alpha-2":"SY"},{"country-code":"703","name":"Словакия","alpha-2":"SK"},{"country-code":"705","name":"Словения","alpha-2":"SI"},{"country-code":"826","name":"Великобритания","alpha-2":"GB"},{"country-code":"840","name":"Соединенные Штаты","alpha-2":"US"},{"country-code":"090","name":"Соломоновы острова","alpha-2":"SB"},{"country-code":"706","name":"Сомали","alpha-2":"SO"},{"country-code":"736","name":"Судан","alpha-2":"SD"},{"country-code":"740","name":"Суринам","alpha-2":"SR"},{"country-code":"694","name":"Сьерра-Леоне","alpha-2":"SL"},{"country-code":"762","name":"Таджикистан","alpha-2":"TJ"},{"country-code":"764","name":"Таиланд","alpha-2":"TH"},{"country-code":"834","name":"Танзания, Объединенная Республика","alpha-2":"TZ"},{"country-code":"626","name":"Тимор-Лесте","alpha-2":"TL"},{"country-code":"768","name":"Того","alpha-2":"TG"},{"country-code":"772","name":"Токелау","alpha-2":"TK"},{"country-code":"776","name":"Тонга","alpha-2":"TO"},{"country-code":"780","name":"Тринидад и Тобаго","alpha-2":"TT"},{"country-code":"798","name":"Тувалу","alpha-2":"TV"},{"country-code":"788","name":"Тунис","alpha-2":"TN"},{"country-code":"795","name":"Туркмения","alpha-2":"TM"},{"country-code":"792","name":"Турция","alpha-2":"TR"},{"country-code":"800","name":"Уганда","alpha-2":"UG"},{"country-code":"860","name":"Узбекистан","alpha-2":"UZ"},{"country-code":"804","name":"Украина","alpha-2":"UA"},{"country-code":"876","name":"Уоллис и Футуна","alpha-2":"WF"},{"country-code":"858","name":"Уругвай","alpha-2":"UY"},{"country-code":"234","name":"Фарерские острова","alpha-2":"FO"},{"country-code":"242","name":"Фиджи","alpha-2":"FJ"},{"country-code":"608","name":"Филиппины","alpha-2":"PH"},{"country-code":"246","name":"Финляндия","alpha-2":"FI"},{"country-code":"238","name":"Фолклендские острова (Мальвинские)","alpha-2":"FK"},{"country-code":"250","name":"Франция","alpha-2":"FR"},{"country-code":"254","name":"Французская Гвиана","alpha-2":"GF"},{"country-code":"258","name":"Французская Полинезия","alpha-2":"PF"},{"country-code":"260","name":"Французские Южные Территории","alpha-2":"TF"},{"country-code":"191","name":"Хорватия","alpha-2":"HR"},{"country-code":"140","name":"Центрально-Африканская Республика","alpha-2":"CF"},{"country-code":"148","name":"Чад","alpha-2":"TD"},{"country-code":"203","name":"Чешская Республика","alpha-2":"CZ"},{"country-code":"152","name":"Чили","alpha-2":"CL"},{"country-code":"756","name":"Швейцария","alpha-2":"CH"},{"country-code":"752","name":"Швеция","alpha-2":"SE"},{"country-code":"744","name":"Шпицберген и Ян Майен","alpha-2":"SJ"},{"country-code":"144","name":"Шри-Ланка","alpha-2":"LK"},{"country-code":"218","name":"Эквадор","alpha-2":"EC"},{"country-code":"226","name":"Экваториальная Гвинея","alpha-2":"GQ"},{"country-code":"232","name":"Эритрея","alpha-2":"ER"},{"country-code":"233","name":"Эстония","alpha-2":"EE"},{"country-code":"231","name":"Эфиопия","alpha-2":"ET"},{"country-code":"710","name":"Южная Африка","alpha-2":"ZA"},{"country-code":"239","name":"Южная Джорджия и Южные Сандвичевы острова","alpha-2":"GS"},{"country-code":"388","name":"Ямайка","alpha-2":"JM"},{"country-code":"392","name":"Япония","alpha-2":"JP"},{"name":"Республика Южный Судан","alpha-2":"SS","country-code":"728"},{"name":"Республика Конго","alpha-2":"CD","country-code":"180"},{"name":"Бонейр, Синт-Естатиус и Саба","alpha-2":"BQ","country-code":"535"},{"name":"Кюрасао","alpha-2":"CW","country-code":"531"},{"name":"Синт-Мартен","alpha-2":"SX","country-code":"534"},{"name":"Остров Мэн","alpha-2":"IM","country-code":"833"},{"name":"Гернси (остров)","alpha-2":"GG","country-code":"831"},{"name":"Джерси (остров)","alpha-2":"JE","country-code":"832"},{"name":"Абхазия","alpha-2":"AB","country-code":"895"}]')},function(t){t.exports=JSON.parse('[{"name":"Австралія","alpha-2":"AU","country-code":"036"},{"name":"Австрія","alpha-2":"AT","country-code":"040"},{"name":"Азербайджан","alpha-2":"AZ","country-code":"031"},{"name":"Албанія","alpha-2":"AL","country-code":"008"},{"name":"Аландські острови","alpha-2":"AX","country-code":"248"},{"name":"Алжир","alpha-2":"DZ","country-code":"012"},{"name":"Американське Самоа","alpha-2":"AS","country-code":"016"},{"name":"Ангілья","alpha-2":"AI","country-code":"660"},{"name":"Ангола","alpha-2":"AO","country-code":"024"},{"name":"Андорра","alpha-2":"AD","country-code":"020"},{"name":"Антарктида","alpha-2":"AQ","country-code":"010"},{"name":"Антигуа і Барбуда","alpha-2":"AG","country-code":"028"},{"name":"Аргентина","alpha-2":"AR","country-code":"032"},{"name":"Вірменія","alpha-2":"AM","country-code":"051"},{"name":"Аруба","alpha-2":"AW","country-code":"533"},{"name":"Афганістан","alpha-2":"AF","country-code":"004"},{"name":"Багами","alpha-2":"BS","country-code":"044"},{"name":"Бангладеш","alpha-2":"BD","country-code":"050"},{"name":"Барбадос","alpha-2":"BB","country-code":"052"},{"name":"Бахрейн","alpha-2":"BH","country-code":"048"},{"name":"Білорусь","alpha-2":"BY","country-code":"112"},{"name":"Беліз","alpha-2":"BZ","country-code":"084"},{"name":"Бельгія","alpha-2":"BE","country-code":"056"},{"name":"Бенін","alpha-2":"BJ","country-code":"204"},{"name":"Бермуди","alpha-2":"BM","country-code":"060"},{"name":"Болгарія","alpha-2":"BG","country-code":"100"},{"name":"Болівія","alpha-2":"BO","country-code":"068"},{"name":"Боснія і Герцоговина","alpha-2":"BA","country-code":"070"},{"name":"Ботсвана","alpha-2":"BW","country-code":"072"},{"name":"Бразилія","alpha-2":"BR","country-code":"076"},{"name":"Британські території Індійського океану","alpha-2":"IO","country-code":"086"},{"name":"Бруней","alpha-2":"BN","country-code":"096"},{"name":"Буркіна-Фасо","alpha-2":"BF","country-code":"854"},{"name":"Бурунді","alpha-2":"BI","country-code":"108"},{"name":"Бутан","alpha-2":"BT","country-code":"064"},{"name":"Вануату","alpha-2":"VU","country-code":"548"},{"name":"Ватикан","alpha-2":"VA","country-code":"336"},{"name":"Угорщина","alpha-2":"HU","country-code":"348"},{"name":"Венесуела","alpha-2":"VE","country-code":"862"},{"name":"Віргінські острови Британії","alpha-2":"VG","country-code":"092"},{"name":"Віргінські острови США","alpha-2":"VI","country-code":"850"},{"name":"Вʼєтнам","alpha-2":"VN","country-code":"704"},{"name":"Габон","alpha-2":"GA","country-code":"266"},{"name":"Гаїті","alpha-2":"HT","country-code":"332"},{"name":"Гайана","alpha-2":"GY","country-code":"328"},{"name":"Гамбія","alpha-2":"GM","country-code":"270"},{"name":"Гана","alpha-2":"GH","country-code":"288"},{"name":"Гваделупа","alpha-2":"GP","country-code":"312"},{"name":"Гватемала","alpha-2":"GT","country-code":"320"},{"name":"Гвінея","alpha-2":"GN","country-code":"324"},{"name":"Гвінея-Біссау","alpha-2":"GW","country-code":"624"},{"name":"Німеччина","alpha-2":"DE","country-code":"276"},{"name":"Гібралтар","alpha-2":"GI","country-code":"292"},{"name":"Гондурас","alpha-2":"HN","country-code":"340"},{"name":"Гонконґ О.А.Р. Китаю","alpha-2":"HK","country-code":"344"},{"name":"Гренада","alpha-2":"GD","country-code":"308"},{"name":"Гренландія","alpha-2":"GL","country-code":"304"},{"name":"Греція","alpha-2":"GR","country-code":"300"},{"name":"Грузія","alpha-2":"GE","country-code":"268"},{"name":"Гуам","alpha-2":"GU","country-code":"316"},{"name":"Данія","alpha-2":"DK","country-code":"208"},{"name":"Джібуті","alpha-2":"DJ","country-code":"262"},{"name":"Домінік","alpha-2":"DM","country-code":"212"},{"name":"Домініканська Республіка","alpha-2":"DO","country-code":"214"},{"name":"Єгипет","alpha-2":"EG","country-code":"818"},{"name":"Замбія","alpha-2":"ZM","country-code":"894"},{"name":"Західна Сахара","alpha-2":"EH","country-code":"732"},{"name":"Зімбабве","alpha-2":"ZW","country-code":"716"},{"name":"Ізраїль","alpha-2":"IL","country-code":"376"},{"name":"Індія","alpha-2":"IN","country-code":"356"},{"name":"Індонезія","alpha-2":"ID","country-code":"360"},{"name":"Йорданія","alpha-2":"JO","country-code":"400"},{"name":"Ірак","alpha-2":"IQ","country-code":"368"},{"name":"Іран","alpha-2":"IR","country-code":"364"},{"name":"Ірландія","alpha-2":"IE","country-code":"372"},{"name":"Ісландія","alpha-2":"IS","country-code":"352"},{"name":"Іспанія","alpha-2":"ES","country-code":"724"},{"name":"Італія","alpha-2":"IT","country-code":"380"},{"name":"Ємен","alpha-2":"YE","country-code":"887"},{"name":"Кабо-Верде","alpha-2":"CV","country-code":"132"},{"name":"Казахстан","alpha-2":"KZ","country-code":"398"},{"name":"Камбоджа","alpha-2":"KH","country-code":"116"},{"name":"Камерун","alpha-2":"CM","country-code":"120"},{"name":"Канада","alpha-2":"CA","country-code":"124"},{"name":"Катар","alpha-2":"QA","country-code":"634"},{"name":"Кенія","alpha-2":"KE","country-code":"404"},{"name":"Кіпр","alpha-2":"CY","country-code":"196"},{"name":"Киргизстан","alpha-2":"KG","country-code":"417"},{"name":"Кірибаті","alpha-2":"KI","country-code":"296"},{"name":"Китай","alpha-2":"CN","country-code":"156"},{"name":"Кокосові острови","alpha-2":"CC","country-code":"166"},{"name":"Колумбія","alpha-2":"CO","country-code":"170"},{"name":"Коморські Острови","alpha-2":"KM","country-code":"174"},{"name":"Конґо - Браззавіль","alpha-2":"CG","country-code":"178"},{"name":"Північна Корея","alpha-2":"KP","country-code":"408"},{"name":"Південна Корея","alpha-2":"KR","country-code":"410"},{"name":"Коста-Рика","alpha-2":"CR","country-code":"188"},{"name":"Кот д’Івуар","alpha-2":"CI","country-code":"384"},{"name":"Куба","alpha-2":"CU","country-code":"192"},{"name":"Кувейт","alpha-2":"KW","country-code":"414"},{"name":"Лаос","alpha-2":"LA","country-code":"418"},{"name":"Латвія","alpha-2":"LV","country-code":"428"},{"name":"Лесото","alpha-2":"LS","country-code":"426"},{"name":"Ліберія","alpha-2":"LR","country-code":"430"},{"name":"Ліван","alpha-2":"LB","country-code":"422"},{"name":"Лівія","alpha-2":"LY","country-code":"434"},{"name":"Литва","alpha-2":"LT","country-code":"440"},{"name":"Ліхтенштейн","alpha-2":"LI","country-code":"438"},{"name":"Люксембург","alpha-2":"LU","country-code":"442"},{"name":"Маврикій","alpha-2":"MU","country-code":"480"},{"name":"Мавританія","alpha-2":"MR","country-code":"478"},{"name":"Мадагаскар","alpha-2":"MG","country-code":"450"},{"name":"Майот","alpha-2":"YT","country-code":"175"},{"name":"Македонія","alpha-2":"MK","country-code":"807"},{"name":"Малаві","alpha-2":"MW","country-code":"454"},{"name":"Малайзія","alpha-2":"MY","country-code":"458"},{"name":"Малі","alpha-2":"ML","country-code":"466"},{"name":"Мальдіви","alpha-2":"MV","country-code":"462"},{"name":"Мальта","alpha-2":"MT","country-code":"470"},{"name":"Марокко","alpha-2":"MA","country-code":"504"},{"name":"Макао О.А.Р. Китаю","alpha-2":"MO","country-code":"504"},{"name":"Мартиніка","alpha-2":"MQ","country-code":"474"},{"name":"Маршаллові Острови","alpha-2":"MH","country-code":"584"},{"name":"Мексика","alpha-2":"MX","country-code":"484"},{"name":"Мікронезія","alpha-2":"FM","country-code":"583"},{"name":"Мозамбік","alpha-2":"MZ","country-code":"508"},{"name":"Молдова","alpha-2":"MD","country-code":"498"},{"name":"Чорногорія","alpha-2":"ME","country-code":"499"},{"name":"Монако","alpha-2":"MC","country-code":"492"},{"name":"Монголія","alpha-2":"MN","country-code":"496"},{"name":"Монсеррат","alpha-2":"MS","country-code":"500"},{"name":"Мʼянма","alpha-2":"MM","country-code":"104"},{"name":"Намібія","alpha-2":"NA","country-code":"516"},{"name":"Науру","alpha-2":"NR","country-code":"520"},{"name":"Непал","alpha-2":"NP","country-code":"524"},{"name":"Нігер","alpha-2":"NE","country-code":"562"},{"name":"Нігерія","alpha-2":"NG","country-code":"566"},{"name":"Нідерландські Антильські Острови","alpha-2":"AN","country-code":"530"},{"name":"Нідерланди","alpha-2":"NL","country-code":"528"},{"name":"Нікарагуа","alpha-2":"NI","country-code":"558"},{"name":"Нія","alpha-2":"NU","country-code":"570"},{"name":"Нова Зеландія","alpha-2":"NZ","country-code":"554"},{"name":"Нова Каледонія","alpha-2":"NC","country-code":"540"},{"name":"Норвегія","alpha-2":"NO","country-code":"578"},{"name":"Обʼєднані Арабські Емірати","alpha-2":"AE","country-code":"784"},{"name":"Оман","alpha-2":"OM","country-code":"512"},{"name":"Острів Буве","alpha-2":"BV","country-code":"074"},{"name":"Острів Норфолк","alpha-2":"NF","country-code":"574"},{"name":"Острів Різдва","alpha-2":"CX","country-code":"162"},{"name":"Острови Херд і Мак-Дональд","alpha-2":"HM","country-code":"334"},{"name":"Кайманові острови","alpha-2":"KY","country-code":"136"},{"name":"Острови Кука","alpha-2":"CK","country-code":"184"},{"name":"Теркс і Кайкос","alpha-2":"TC","country-code":"796"},{"name":"Тайвань","alpha-2":"TW","country-code":"158"},{"name":"Палестина","alpha-2":"PS","country-code":"275"},{"name":"Пакистан","alpha-2":"PK","country-code":"586"},{"name":"Палау","alpha-2":"PW","country-code":"585"},{"name":"Панама","alpha-2":"PA","country-code":"591"},{"name":"Папуа Нова Гвінея","alpha-2":"PG","country-code":"598"},{"name":"Парагвай","alpha-2":"PY","country-code":"600"},{"name":"Перу","alpha-2":"PE","country-code":"604"},{"name":"Піткерн","alpha-2":"PN","country-code":"612"},{"name":"Польща","alpha-2":"PL","country-code":"616"},{"name":"Португалія","alpha-2":"PT","country-code":"620"},{"name":"Пуерто-Ріко","alpha-2":"PR","country-code":"630"},{"name":"Реюньйон","alpha-2":"RE","country-code":"638"},{"name":"Росія","alpha-2":"RU","country-code":"643"},{"name":"Руанда","alpha-2":"RW","country-code":"646"},{"name":"Румунія","alpha-2":"RO","country-code":"642"},{"name":"Сальвадор","alpha-2":"SV","country-code":"222"},{"name":"Самоа","alpha-2":"WS","country-code":"882"},{"name":"Сан-Марино","alpha-2":"SM","country-code":"674"},{"name":"Сан-Томе і Прінсіпі","alpha-2":"ST","country-code":"678"},{"name":"Саудівська Аравія","alpha-2":"SA","country-code":"682"},{"name":"Свазіленд","alpha-2":"SZ","country-code":"748"},{"name":"Острів Святої Єлени","alpha-2":"SH","country-code":"654"},{"name":"Північні Маріанські Острови","alpha-2":"MP","country-code":"580"},{"name":"Сейшели","alpha-2":"SC","country-code":"690"},{"name":"Сен-Пʼєр і Мікелон","alpha-2":"PM","country-code":"666"},{"name":"Сенегал","alpha-2":"SN","country-code":"686"},{"name":"Сент-Вінсент і Гренадини","alpha-2":"VC","country-code":"670"},{"name":"Сент-Кітс і Невіс","alpha-2":"KN","country-code":"659"},{"name":"Сент-Люсія","alpha-2":"LC","country-code":"662"},{"name":"Сербія та Чорногорія","alpha-2":"CS","country-code":"891"},{"name":"Сінгапур","alpha-2":"SG","country-code":"702"},{"name":"Сирія","alpha-2":"SY","country-code":"760"},{"name":"Словакія","alpha-2":"SK","country-code":"703"},{"name":"Словенія","alpha-2":"SI","country-code":"705"},{"name":"Великобританія","alpha-2":"GB","country-code":"826"},{"name":"США","alpha-2":"US","country-code":"840"},{"name":"Соломонові Острови","alpha-2":"SB","country-code":"090"},{"name":"Сомалі","alpha-2":"SO","country-code":"706"},{"name":"Судан","alpha-2":"SD","country-code":"736"},{"name":"Суринам","alpha-2":"SR","country-code":"740"},{"name":"Сьєрра-Леоне","alpha-2":"SL","country-code":"694"},{"name":"Таджикистан","alpha-2":"TJ","country-code":"762"},{"name":"Таїланд","alpha-2":"TH","country-code":"764"},{"name":"Танзанія","alpha-2":"TZ","country-code":"834"},{"name":"Східний Тимор","alpha-2":"TL","country-code":"626"},{"name":"Того","alpha-2":"TG","country-code":"768"},{"name":"Токелау","alpha-2":"TK","country-code":"772"},{"name":"Тонга","alpha-2":"TO","country-code":"776"},{"name":"Тринідад і Тобаго","alpha-2":"TT","country-code":"780"},{"name":"Тувалу","alpha-2":"TV","country-code":"798"},{"name":"Туніс","alpha-2":"TN","country-code":"788"},{"name":"Туркменистан","alpha-2":"TM","country-code":"795"},{"name":"Туреччина","alpha-2":"TR","country-code":"792"},{"name":"Уганда","alpha-2":"UG","country-code":"800"},{"name":"Узбекистан","alpha-2":"UZ","country-code":"860"},{"name":"Україна","alpha-2":"UA","country-code":"804"},{"name":"Уолліс і Футуна","alpha-2":"WF","country-code":"876"},{"name":"Уругвай","alpha-2":"UY","country-code":"858"},{"name":"Фарерські острови","alpha-2":"FO","country-code":"234"},{"name":"Фіджі","alpha-2":"FJ","country-code":"242"},{"name":"Філіппіни","alpha-2":"PH","country-code":"608"},{"name":"Фінляндія","alpha-2":"FI","country-code":"246"},{"name":"Фолклендські острови","alpha-2":"FK","country-code":"238"},{"name":"Франція","alpha-2":"FR","country-code":"250"},{"name":"Французька Гвіана","alpha-2":"GF","country-code":"254"},{"name":"Французька Полінезія","alpha-2":"PF","country-code":"258"},{"name":"Французькі Південні Території","alpha-2":"TF","country-code":"260"},{"name":"Хорватія","alpha-2":"HR","country-code":"191"},{"name":"Центральноафриканська Республіка","alpha-2":"CF","country-code":"140"},{"name":"Чад","alpha-2":"TD","country-code":"148"},{"name":"Чеська республіка","alpha-2":"CZ","country-code":"203"},{"name":"Чилі","alpha-2":"CL","country-code":"152"},{"name":"Швейцарія","alpha-2":"CH","country-code":"756"},{"name":"Швеція","alpha-2":"SE","country-code":"752"},{"name":"Острови Свальбард та Ян-Маєн","alpha-2":"SJ","country-code":"744"},{"name":"Шрі-Ланка","alpha-2":"LK","country-code":"144"},{"name":"Еквадор","alpha-2":"EC","country-code":"218"},{"name":"Екваторіальна Гвінея","alpha-2":"GQ","country-code":"226"},{"name":"Еритрея","alpha-2":"ER","country-code":"232"},{"name":"Естонія","alpha-2":"EE","country-code":"233"},{"name":"Ефіопія","alpha-2":"ET","country-code":"231"},{"name":"ПАР","alpha-2":"ZA","country-code":"710"},{"name":"Південна Джорджія та Південні Сандвічеві Острови","alpha-2":"GS","country-code":"239"},{"name":"Ямайка","alpha-2":"JM","country-code":"388"},{"name":"Японія","alpha-2":"JP","country-code":"392"},{"name":"Республіка Південний Судан","alpha-2":"SS","country-code":"728"},{"name":"Республіка Конго","alpha-2":"CD","country-code":"180"},{"name":"Бонейр, Сінт-Естатіус і Саба","alpha-2":"BQ","country-code":"535"},{"name":"Кюрасао","alpha-2":"CW","country-code":"531"},{"name":"Сінт-Мартен","alpha-2":"SX","country-code":"534"},{"name":"Острів Мен","alpha-2":"IM","country-code":"833"},{"name":"Гернсі (острів)","alpha-2":"GG","country-code":"831"},{"name":"Джерсі (острів)","alpha-2":"JE","country-code":"832"},{"name":"Абхазія","alpha-2":"AB","country-code":"895"}]')},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty,a=[].slice;void 0===(r=function(t){var e;return e=n(384),n(401),{BaseRouter:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.debugRoutes=!0,n.prototype.initialize=function(){return this.history=[],this.on("route",(t=this,function(n,o){return null==o&&(o=[]),t.debugRoutes&&console.debug.apply(console,["Route: #"+e.history.fragment+" => "+n].concat(a.call(o))),t.addToHistory()}));var t},n.prototype.addToHistory=function(){return this.history.push(e.history.fragment)},n.prototype.cleanHistory=function(){return this.history=[]},n.prototype.reloadPage=function(){return e.history.loadUrl(e.history.fragment)},n.prototype.cancelLastUrlChange=function(){var t;if(this.history.pop(),null!=(t=i.last(this.history)))return this.navigate(t,{trigger:!1,replace:!0})},n.prototype.goBack=function(t){var e,n;return!t&&this.flowFinished?(e=this.flowEntry,this.toggleFlowTracking(!1),void this.goOrReturnTo(e)):(t||(t=1),t<=0?void console.warn("Invalid back steps amount: "+t):(this.isBackNavigation=!0,this.once("route",(n=this,function(){return n.isBackNavigation=!1})),this.history.splice(-(t+1)),window.history.go(-t)))},n.prototype.getPreviousLocation=function(){var t;return t=-2,i.last(this.history)!==e.history.fragment&&(t=-1),this.history.length<Math.abs(t)?null:this.history.slice(t)[0]},n.prototype.goOrReturnTo=function(t){var e;return-1===(e=this.history.lastIndexOf(t))?window.app.router.navigate(t,{trigger:!0,replace:!0}):window.app.router.goBack(this.history.length-1-e)},n.prototype.navigate=function(t,e){return e?(!0!==e.trigger&&!0!==e.replace?this.history.push(t):!0===e.replace&&this.history.length>0&&(this.history[this.history.length-1]=t),n.__super__.navigate.apply(this,arguments)):n.__super__.navigate.apply(this,arguments)},n.prototype.toggleFlowTracking=function(t,e){return t?(this.flowEntry=this.getPreviousLocation(),this.currentFlow=e,this.flowFinished=!1):(delete this.flowEntry,delete this.currentFlow,delete this.flowFinished)},n}(e.Router)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(384),n(11))},function(t,e,n){(function(e){var o,i=[].slice;n(40),(o={}).AppCache={_cache:{},get:function(){var t,n,r,s,a,c,u;for(a=1<=arguments.length?i.call(arguments,0):[],u=[],r=0,c=a.length;r<c;r++)s=a[r],(t=this._cache[s])?u.push((new e.Deferred).resolve(t).promise()):(n=o.fetchMethods[s])?function(t){return function(e){return u.push(n().done((function(n){return t._cache[e]=n})))}}(this)(s):console.error("Unknown cache key: ",s);return e.when.apply(e,u)},reset:function(){var t,e,n,o,r;if((n=1<=arguments.length?i.call(arguments,0):[]).length){for(r=[],t=0,o=n.length;t<o;t++)e=n[t],r.push(this._cache[e]=null);return r}return this._cache={}},KEYS:{PAYMENT_TEMPLATES:"PAYMENT_TEMPLATES",RECURRENT_PAYMENTS:"RECURRENT_PAYMENTS",THRESHOLD_PAYMENTS:"THRESHOLD_PAYMENTS"}},o.fetchMethods={},o.fetchMethods[o.AppCache.KEYS.PAYMENT_TEMPLATES]=function(){var t,o,i;return o=new e.Deferred,t=n(393).Templates,window.OW.features.PAYMENT_TEMPLATES?((i=new t).fetchIfEmpty().then((function(){return o.resolve(i)})),o.promise()):o.resolve(new t).promise()},o.fetchMethods[o.AppCache.KEYS.RECURRENT_PAYMENTS]=function(){var t,o,i;return o=new e.Deferred,t=n(428).RecurrentPayments,window.OW.features.RECURRENT_PAYMENTS?((i=new t).fetchIfEmpty().then((function(){return o.resolve(i)})),o.promise()):o.resolve(new t).promise()},o.fetchMethods[o.AppCache.KEYS.THRESHOLD_PAYMENTS]=function(){var t,o,i;return o=new e.Deferred,t=n(463).ThresholdPayments,window.OW.features.THRESHOLD_PAYMENTS?((i=new t).fetchIfEmpty().then((function(){return o.resolve(i)})),o.promise()):o.resolve(new t).promise()},window.ccc=o,t.exports=o}).call(this,n(14))},function(t,e,n){
/**
 * Backbone-Nested 2.0.4 - An extension of Backbone.js that keeps track of nested attributes
 *
 * http://afeld.github.com/backbone-nested/
 *
 * Copyright (c) 2011-2012 Aidan Feldman
 * MIT Licensed (LICENSE)
 */
t.exports=function(t,e,n){"use strict";return n.NestedModel=n.Model.extend({get:function(t){return n.NestedModel.walkThenGet(this.attributes,t)},previous:function(t){return n.NestedModel.walkThenGet(this._previousAttributes,t)},has:function(t){var n=this.get(t);return!(null===n||e.isUndefined(n))},set:function(t,o,i){var r,s,a,c=n.NestedModel.deepClone(this.attributes);if(e.isString(t)?r=n.NestedModel.attrPath(t):e.isArray(t)&&(r=t),r)i=i||{},this._setAttr(c,r,o,i);else{i=o||{};var u=t;for(var l in u)u.hasOwnProperty(l)&&this._setAttr(c,n.NestedModel.attrPath(l),i.unset?void 0:u[l],i)}return this._nestedChanges=n.NestedModel.__super__.changedAttributes.call(this),i.unset&&r&&1===r.length?((s={})[t]=void 0,this._nestedChanges=e.omit(this._nestedChanges,e.keys(s)),a=n.NestedModel.__super__.set.call(this,s,i)):(s=c,i.unset&&r?delete(i=e.extend({},i)).unset:i.unset&&e.isObject(t)&&(s=t),this._nestedChanges=e.omit(this._nestedChanges,e.keys(s)),a=n.NestedModel.__super__.set.call(this,s,i)),a?(this._runDelayedTriggers(),this):(this.changed={},this._nestedChanges={},!1)},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(t){this._nestedChanges={},t=t||{};var n=e.clone(this.attributes);if(!t.silent&&this.validate&&!this.validate(n,t))return!1;var o=this.changed={},i=this,r=function(t,n,s){e.each(t,(function(a,c){var u=n;e.isArray(t)?u+="["+c+"]":n?u+="."+c:u=c,a=t[c],e.isObject(a)&&r(a,u,s),s.silent||i._delayedChange(u,null,s),o[u]=null}))};return r(this.attributes,"",t),this.attributes={},t.silent||this._delayedTrigger("change"),this._runDelayedTriggers(),this},add:function(t,n,o){var i=this.get(t);if(!e.isArray(i))throw new Error("current value is not an array");return this.set(t+"["+i.length+"]",n,o)},remove:function(t,o){o=o||{};var i=n.NestedModel.attrPath(t),r=e.initial(i),s=this.get(r),a=e.last(i);if(!e.isArray(s))throw new Error("remove() must be called on a nested array");var c=!o.silent&&s.length>=a+1,u=s[a];if(s.splice(a,1),o.silent=!0,this.set(r,s,o),c){t=n.NestedModel.createAttrStr(r),this.trigger("remove:"+t,this,u);for(var l=r.length;l>=1;l--)t=n.NestedModel.createAttrStr(e.first(r,l)),this.trigger("change:"+t,this,u);this.trigger("change",this,u)}return this},changedAttributes:function(t){var o=n.NestedModel.__super__.changedAttributes.call(this,t);return!!e.isObject(o)&&e.extend({},this._nestedChanges,o)},toJSON:function(){return n.NestedModel.deepClone(this.attributes)},_getDelayedTriggers:function(){return void 0===this._delayedTriggers&&(this._delayedTriggers=[]),this._delayedTriggers},_delayedTrigger:function(){this._getDelayedTriggers().push(arguments)},_delayedChange:function(t,e,n){this._delayedTrigger("change:"+t,this,e,n),this.changed||(this.changed={}),this.changed[t]=e},_runDelayedTriggers:function(){for(;this._getDelayedTriggers().length>0;)this.trigger.apply(this,this._getDelayedTriggers().shift())},_setAttr:function(t,o,i,r){r=r||{};var s=o.length,a=this;n.NestedModel.walkPath(t,o,(function(t,c,u){var l=e.last(c),d=n.NestedModel.createAttrStr(c),p=!e.isEqual(t[l],i);if(c.length===s){if(r.unset){if(delete t[l],e.isArray(t)){var h=n.NestedModel.createAttrStr(e.initial(o));a._delayedTrigger("remove:"+h,a,t[l])}}else t[l]=i;if(!r.silent&&e.isObject(i)&&p){var f=[],m=function(t,n){var o,i;if(!(e.indexOf(f,t)>-1))for(var s in f.push(t),t)t.hasOwnProperty(s)&&(o=n+"."+s,i=t[s],e.isEqual(a.get(o),i)||a._delayedChange(o,i,r),e.isObject(i)&&m(i,o))};m(i,d)}}else t[l]||(e.isNumber(u)?t[l]=[]:t[l]={});r.silent||(c.length>1&&p&&a._delayedChange(d,t[l],r),e.isArray(t[l])&&a._delayedTrigger("add:"+d,a,t[l]))}))}},{attrPath:function(t){var n;return"string"==typeof t?-1===t.indexOf(".")&&-1===t.indexOf("[")?n=[t]:(n=t.match(/[^\.\[\]]+/g),t.indexOf("[")>-1&&(n=e.map(n,(function(t){return t.match(/^\d+$/)?parseInt(t,10):t})))):n=t,n},createAttrStr:function(t){var n=t[0];return e.each(e.rest(t),(function(t){n+=e.isNumber(t)?"["+t+"]":"."+t})),n},deepClone:function(e){return t.extend(!0,{},e)},walkPath:function(t,e,n,o){for(var i=t,r=0;r<e.length&&(n.call(o||this,i,e.slice(0,r+1),e[r+1]),i=i[e[r]]);r++);},walkThenGet:function(t,o){var i,r=n.NestedModel.attrPath(o);return n.NestedModel.walkPath(t,r,(function(t,n){var o=e.last(n);n.length===r.length&&(i=t[o])})),i}}),n}(n(14),n(11),n(384))},,function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x;return B=o(136),C=o(402),x=o(40),S=o(96),c=(P=o(375)).BaseModel,s=P.BaseCollection,k=o(906),b=o(907),f=o(401).INTEREST_OPTIONS_LABELS,p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.viewContext=function(){var t;return null==(t=this.toJSON()).icon&&(t.icon=this.id),i.isFunction(this.get("service.link"))&&(t.link=this.get("service.link")(this.collection.contract)),t},e}(c),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=p,e.prototype.initialize=function(t,n){return console.assert(n.contract,"Required options.contract"),this.contract=n.contract,e.__super__.initialize.apply(this,arguments)},e}(s),l={card:t("Card"),account:t("Account"),credit:t("Credit"),deposit:t("Deposit")},d={card:t("Cards"),account:t("Accounts"),credit:t("Credits"),deposit:t("Deposits")},w={card:{active:t("Card is active"),blocked:t("Card is blocked"),expired:t("Card has expired"),first_production:t("Card is being produced"),closed:t("Card is closed")},cardAccount:{active:t("Card account is active"),blocked:t("Card account is blocked"),closed:t("Card account is closed")},current:{active:t("Account is active"),closed:t("Account is closed")},deposit:{active:t("Deposit is active"),closed:t("Deposit is closed")},credit:{active:t("Credit is active"),closed:t("Credit has been repaid")}},g={in_production:t("In production"),produced:t("Produced, not activated yet")},n=["minpay","overdue","blocked"],_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=function(){return x.API_URL+"/contracts/"+this.contractId+"/instalments-summary"},e.prototype.initialize=function(t,n){if(e.__super__.initialize.apply(this,arguments),!(this.contractId=n.contractId))throw new Error('InstalmentsSummary. "contractId" param is required')},e}(c),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e}(c),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url=x.API_URL+"/instalments",e.prototype.model=y,e}(s),v={NOT_ALLOWED_STATUS:"isNotAllowed",ACTIVE_STATUS:"isActive",NOT_ACTIVE_STATUS:"isNotActive"},function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.ORDER_BY_TYPE=["cardAccount","card","mccCardAccount","aggregateCardAccount","current","credit","deposit"],o.prototype.urlRoot=x.API_URL+"/contracts",o.prototype.initialize=function(){var t;if(!(null!=(t=window.OW.contractsConfig)?t.actions:void 0))throw new Error("contracts.js must define 'actions' setting");if(!(null!=t?t.subscriptions:void 0))throw new Error("contracts.js must define 'subscriptions' setting");return o.__super__.initialize.apply(this,arguments),this.on("sync reset",this.calculateName,this),this.calculateName(),this.on("change:subscriptions.statementSubscription",this.initStatementSubscriptionStatus,this),this.initStatementSubscriptionStatus()},o.prototype.initStatementSubscriptionStatus=function(){var t;if(Boolean(this.get("subscriptions.statementSubscription"))&&window.OW.features.STATEMENT_SUBSCRIPTION)return t=Boolean(this.get("subscriptions.statementSubscription.isActive"))?v.ACTIVE_STATUS:v.NOT_ACTIVE_STATUS,this.set("statementSubscriptionActiveStatus",t);this.set("statementSubscriptionActiveStatus",v.NOT_ALLOWED_STATUS)},o.prototype.isStatementSubscriptionAllowed=function(){return this.get("statementSubscriptionActiveStatus")!==v.NOT_ALLOWED_STATUS},o.prototype.isStatementSubscriptionActive=function(){return this.get("statementSubscriptionActiveStatus")===v.ACTIVE_STATUS},o.prototype.isStatementSubscriptionNotActive=function(){return this.get("statementSubscriptionActiveStatus")===v.NOT_ACTIVE_STATUS},o.prototype.calculateName=function(){if(!window.OW.features.CONTRACT_ALIASES||!this.get("name"))return this.set("name",this.getDefaultName(),{silent:!0})},o.prototype.calculateActions=function(){throw new Error("Not implemented, use getActions in view context() method to avoid performance issues")},o.prototype.getStatus=function(){return this.get(this.get("type")+".status")},o.prototype.getActions=function(){var e,n,o,r,s;for(n=new h([],{contract:this}),o=0,r=(s=window.OW.contractsConfig.actions).length;o<r;o++)e=s[o],i.isFunction(e.condition)||console.warn("Condition for "+e.id+" is not defined"),i.isFunction(e.condition)&&e.condition(this,window.app)&&n.add(i.omit(e,"condition"));return this.isIntraCardTransferAllowed()&&n.add({id:"intracard-transfer",name:t("Transfer between card accounts"),service:{type:"native"}}),this.isPlasticCardOrderAvailable()&&n.add({id:"orderPlastic",name:t("Issue plastic card"),service:{type:"native"}}),n},o.prototype.getBankDetails=function(){var t,e;return t=[],i.isArray(window.OW.contractsConfig.bankDetails)?(window.OW.contractsConfig.bankDetails.forEach((e=this,function(n){if(i.isFunction(n.condition)&&!0===n.condition(e))return t.push({id:n.id,title:n.title,fields:n.fields(e)})})),i.isEmpty(t)?null:t):null},o.prototype.getAccountNumber=function(){return"card"===this.get("type")?this.get("card.accountNumber"):this.get("number")},o.prototype.getAccountNumberByCurrency=function(t){var e;return this.isMultiCurrencyCard()?(e=this.get("card.accounts").filter((function(e){return e.currency===t}))[0])?e.number:void console.warn("Account not found for currency: ",t):(t&&console.assert(this.get("currency")===t,"Specified currency "+t+" differs from contract currency "+this.get("currency")),this.getAccountNumber())},o.prototype.isMultiCurrencyCard=function(){return this.has("card.accounts")},o.prototype.supportsCurrency=function(t){return this.isMultiCurrencyCard()?u.call(this.get("card.accounts").map((function(t){return t.currency})),t)>=0:this.get("currency")===t},o.prototype.isActiveCard=function(){return"active"===this.get("card.status")},o.prototype.getCardholderName=function(){return"card"!==this.get("type")?"":i.compact([this.get("card.embossing.title"),this.get("card.embossing.firstName"),this.get("card.embossing.lastName")]).join(" ")},o.prototype.fetchInstalmentsSummary=function(){return this.get("instalments.instalmentsSummary")?r.Deferred().resolve():new _(null,{contractId:this.get("parentId")}).fetch().done((t=this,function(e){return t.setInstalmentsSummaryData(e)})).fail((function(t){return B.error("ContractDetails. Unable to get instalments summery.",t)}));var t},o.prototype.fetchInstalmentsList=function(){return this.get("instalments.instalmentsList")?r.Deferred().resolve():(new m).fetch({data:{contractId:this.get("id")}}).done((t=this,function(e){return t.setInstalmentsListData(e)})).fail((function(t){return B.error("ContractDetails. Unable to get instalments list.",t)}));var t},o.prototype.setInstalmentsSummaryData=function(e){var n,o,r,s;return n=(o=i.findWhere(e.limits,{type:"count"}))?o.countCurrent+" "+t("of")+" "+o.countLimit:null,r=!!e.nextPaymentAmount&&Boolean(e.nextPaymentAmount.value),s=Boolean(e.overduePaymentDate),this.set("instalments.instalmentsSummary",{limitAmount:this.get("balances.cr_limit"),availableAmount:this.get("balances.available"),count:n,fullRepaymentAmount:e.fullRepaymentAmount,monthlyFee:e.monthlyFee,nextPaymentDate:e.nextPaymentDate,nextPaymentAmount:e.nextPaymentAmount,overdueFee:e.overdueFee,overdueAmount:e.overdueAmount,overduePaymentDate:e.overduePaymentDate,totalOverdueAmount:e.totalOverdue,isOverdue:s,isNotPaid:r,isActive:r&&!s,statuses:{overdue:t("Overdue [instalments status]")}})},o.prototype.setInstalmentsListData=function(t){var e,n,o;return e=i.filter(t,(function(t){var e;return"active"===(e=t.status)||"overdue"===e})),o=i.filter(t,(function(t){var e;return"paid"===(e=t.status)||"closed"===e})),n=function(t){return i.map(t,(function(t){return{id:t.transaction.id,status:t.status,isPaid:"paid"===t.status,isClosed:"closed"===t.status,isOverdue:"overdue"===t.status,description:t.transaction.description,createdAt:t.createdAt,paidAt:t.paidAt,totalAmount:t.transaction.totalAmount,transaction:t.transaction}}))},this.set("instalments.instalmentsList",{hasCurrentInstalments:Boolean(i.size(e)),currentInstalments:n(e),currentInstalmentsCount:i.size(e),hasPaidOrClosedInstalments:Boolean(i.size(o)),paidOrClosedInstalments:n(o),paidOrClosedInstalmentsCount:i.size(o)})},o.prototype.viewContext=function(){var e,o,r,s;if((o=this.toJSON()).typeName=l[o.type]||o.type,o.typeNamePlural=d[o.type]||o.type,o.shortName=o.name?o.name.replace(/(\*+)/,"*"):"",o.inArchive=this.getInArchive(),o.isHceAllowed=this.isHceAllowed(),o.isHceEnrolled=this.isHceEnrolled(),o.isHceDefault=this.isHceDefault(),o.isHcePaymentAllowed=this.isHcePaymentAllowed(),o.isHceCardDeleted=this.isHceCardDeleted(),o.hceCardVan=this.getCardVan(),o.hceCardVanTail=this.getCardVanTail(),null==o.name&&(o.name=o.number),o.defaultName=this.getDefaultName(),o.accountNumber=this.getAccountNumber(),o.balances){for(r in s=o.balances)e=s[r],"available"===r&&(e.name=function(){switch(o.type){case"card":case"cardAccount":case"current":return t("Available");case"deposit":return t("Deposit amount");case"credit":return t("Amount owed");case"bonus":return t("Bonus amount");default:return t("Balance")}}()),u.call(n,r)>=0&&e.value&&(e.value=e.value.replace(/^-/,""));window.OW.features.LOYALTY&&this.areBonusesSupported()||delete o.balances.bonus}return o.hideActions=this.get("card.isForeign"),o.card&&(o.card.isActive=this.isActiveCard(),o.card.isBlocked="blocked"===this.get("card.status"),o.card.isCredit="credit"===this.get("product.group"),o.card.isAdditional=!!this.get("card.isAdditional"),o.card.isMultiCurrency=this.isMultiCurrencyCard(),o.card.statusName=w.card[o.card.status],o.card.embossing&&(o.card.embossing.fullName=o.card.embossing.firstName+" "+o.card.embossing.lastName),o.card.productionStatusName=g[o.card.productionStatus],o.card.wbProductColor=this.getProductColor(),o.card.hasAdditionalBalances=this.hasBonuses(),o.card.showBalance=o.card.isAdditional,o.card.isAppleWalletAllowed=this.isAppleWalletAllowed()),o.deposit&&(o.deposit.interestPayment&&(o.deposit.interestPaymentLabel=f[o.deposit.interestPayment]),this.has("addData.DEPOSIT_INTEREST_AMOUNT")&&(o.balances=i.extend(o.balances||{},{interest:{value:this.get("addData.DEPOSIT_INTEREST_AMOUNT"),currency:o.currency}}))),i.extend(o,this.getStatusContext(o)),o},o.prototype.getStatusContext=function(t){var e,n;if(t.type&&"aggregateCardAccount"!==(e=t.type)&&"mccCardAccount"!==e)return{status:n=t[t.type].status,statusName:w[t.type][n]}},o.prototype.getSubscriptionsContext=function(){return i.extend({},this.getTransactionWindowContext(),this.getSmsNotificationsContext())},o.prototype.getTransactionWindowContext=function(){var t;return{transactionWindow:null!=(t=this.transactionWindow||this.getTransactionWindow())?t.viewContext():void 0}},o.prototype.getSmsNotificationsContext=function(){var t;return{smsNotifications:null!=(t=this.smsNotifications||this.getSmsNotifications())?t.viewContext():void 0}},o.prototype.getActionsContext=function(){return this.getActions().viewContext()},o.prototype.getTransactionWindow=function(){var t;return(t=this.get("subscriptions.transactionWindow"))?new k(t,{contractId:this.id}):null},o.prototype.getSmsNotifications=function(){var t;return(t=this.get("subscriptions.smsNotifications"))?new b(t,{contractId:this.id}):null},o.prototype.rename=function(t){var e;return null==t&&(t=""),e={path:"/name"},(t=t.trim())?(e.op="replace",e.value=t,this.set("name",t)):(e.op="remove",this.set("name",this.getDefaultName())),this.sendPatch([e])},o.prototype.revert=function(){return this.savedValue?(this.set({name:this.savedValue.name,silent:!0}),this.calculateName(),this.trigger("change:name"),this.trigger("change")):console.warn("Call trackSavedValue() to allow revert()")},o.prototype.hasSubscriptions=function(){var t,e;return!this.get("card.isForeign")&&(e=window.OW.contractsConfig.subscriptions,t=this.get("subscriptions"),!i.isEmpty(e)&&!i.isEmpty(t)&&0!==i.intersection(Object.keys(e),Object.keys(t)).length)},o.prototype.fetchSubscriptions=function(){return r.when(this.fetchSmsNotifications(),this.fetchTransactionWindow())},o.prototype.fetchSmsNotifications=function(){var t;return this.smsNotifications=this.getSmsNotifications(),null!=(t=this.smsNotifications)?t.fetch():void 0},o.prototype.fetchTransactionWindow=function(){var t;return this.transactionWindow=this.getTransactionWindow(),null!=(t=this.transactionWindow)?t.fetch():void 0},o.prototype.isCardExpiringInLessThan=function(t){return!(!this.has("card.expiryDate")||"active"!==this.get("card.status"))&&S(this.get("card.expiryDate"),"MM.YYYY").endOf("month")<=S().add(S.duration(t)).endOf("month")},o.prototype.getDefaultName=function(){var t;return"aggregateCardAccount"!==(t=this.get("type"))&&"mccCardAccount"!==t||this.get("name"),"deposit"===t?this.get("product.name")||this.get("addData.DEPOSIT_NAME")||this.get("number"):this.has("product.name")&&"credit"===t?this.get("product.name"):"card"===t?C.formatWithMask(this.get("number"),x.MASKS.cardNumber):this.get("number")},o.prototype.inArchive=function(){var t,e;return e="expired"===this.get("card.status"),t="closed"===this.getStatus(),e||t},o.prototype.getInArchive=function(){var t,e,n;return t=this.inArchive(),this.collection&&!t&&(n=this.get("parentId"))&&(e=this.collection.get(n))&&(t=e.getInArchive()),t},o.prototype.isHceAllowed=function(){var t;return"card"===this.get("type")&&this.get("card.isTokenizationEnabled")&&!this.getInArchive()&&"active"===this.get("card.status")&&!0!==this.get("card.isForeign")&&(null!=(t=window.app.data.hceProvider)?t.isAvailable():void 0)},o.prototype.isHceEnrolled=function(){var t;return!!this.isHceAllowed()&&(!!window.app.data.hceProfile&&(null!=(t=window.app.data.hceProfile)?t.hasCard(this.get("number")):void 0))},o.prototype.isHceDefault=function(){var t;return!!this.isHceEnrolled()&&(null!=(t=window.app.data.hceProfile)?t.isDefaultCard(this.get("number")):void 0)},o.prototype.isHcePaymentAllowed=function(){var t;return!!this.isHceAllowed()&&(!!window.app.data.hceProfile&&(null!=(t=window.app.data.hceProfile)?t.isCardActive(this.get("number")):void 0))},o.prototype.isHceCardDeleted=function(){var t;return!!this.isHceAllowed()&&(!!window.app.data.hceProfile&&(null!=(t=window.app.data.hceProfile)?t.isCardDeleted(this.get("number")):void 0))},o.prototype.setAsDefaultHceCard=function(){return this.isHceEnrolled()?window.app.data.hceProfile.setDefaultCard(this.get("number")):(new r.Deferred).resolve(!1).promise},o.prototype.getCardVan=function(){return this.isHceEnrolled()?window.app.data.hceProfile.getCardVan(this.get("number")):""},o.prototype.getCardVanTail=function(){return this.isHceEnrolled()?window.app.data.hceProfile.getVanTail(this.get("number")):""},o.prototype.isAppleWalletAllowed=function(){return"card"===this.get("type")&&this.get("card.isApplePayTokenizationEnabled")&&!this.getInArchive()&&"active"===this.get("card.status")&&!0!==this.get("card.isForeign")},o.prototype.isHistorySupported=function(){var t;return"card"===(t=this.get("type"))||"cardAccount"===t},o.prototype.notificationsSupported=function(){return"card"===this.get("type")&&!0!==this.get("card.isForeign")&&!this.getInArchive()},o.prototype.isIntraCardTransferAllowed=function(){return this.isMultiCurrencyCard()&&window.OW.features.MCC_INTRA_TRANSFER},o.prototype.isPlasticCardOrderAvailable=function(){return window.OW.features.CARD_PLASTIC_ORDER&&Boolean(this.get("card.type.isDigital"))&&!Boolean(this.get("card.plastic"))},o.prototype.isDefault=function(){return!0===this.get("defaultSource")},o.prototype.areBonusesSupported=function(){return Boolean(this.get(this.get("type")+".isLoyaltyEnabled"))},o.prototype.isInstalmentsEnabled=function(){return Boolean(this.get("card.isInstalmentsEnabled"))},o.prototype.hasBonuses=function(){return this.areBonusesSupported()&&this.get("balances.bonus.value")>0},o.prototype.getParent=function(){var t,e;return(e=this.get("parentId"))&&(t=this.collection.get(e))?t:null},o.prototype.getProductColor=function(){switch(!1){case!/\bGold\b/g.test(this.get("product.brand")||""):return"gold";case!/\bPlatinum\b|\bInfinite\b/g.test(this.get("product.brand")||""):return"black";case!this.get("card.isVirtual"):return"orange";case!(this.get("card.isCredit")||this.get("card.isForeign")):return"green";default:return"blue"}},o.prototype.getSortIndex=function(){var t;return-1!==(t=this.ORDER_BY_TYPE.indexOf(this.get("type")))?t:99},o}(c)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty,s=[].slice;void 0===(i=function(t){var e,i,a;return a=n(40),e=n(375).BaseModel,i=n(96),function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.url=function(){return a.API_URL+"/contracts/"+this.contractId+"/subscriptions/transactionWindow"},e.prototype.defaults={status:null,durationHours:0,durationMinutes:0,durationSeconds:0,operationsRemaining:0,isOpen:!1,showSeconds:!1},e.prototype.initialize=function(t,e){var n,o;if(!(this.transactionWindowSettings=null!=(n=window.OW.contractsConfig)&&null!=(o=n.subscriptions)?o.transactionWindow:void 0))throw new Error("contracts.js must define 'subscriptions.transactionWindow' setting");if(!e.contractId)throw new Error("id=contractId required");return this.contractId=e.contractId,this.on("destroy",(function(){return window.app.trigger("change:contracts")}))},e.prototype.isNew=function(){return!this.get("isActive")},e.prototype.sync=function(t,n,i){return"delete"===t||(o.isEmpty(this.get("amountAllowed.value"))?this.unset("amountAllowed"):o.isEmpty(this.get("amountAllowed.currency"))&&this.get("currency.id")&&this.set("amountAllowed.currency",this.get("currency.id")),"create"===t&&this.once("sync",(function(){return window.app.trigger("change:contracts")}))),e.__super__.sync.apply(this,arguments)},e.prototype.viewContext=function(){var t,n,r,a;return this.set("isOpen","open"===this.get("status")),this.get("isOpen")&&this.get("expiresAt")&&(n=i.duration(i(this.get("expiresAt")).diff(i())),this.set("durationHours",Math.floor(n.as("hours"))),this.set("durationMinutes",n.minutes()),this.set("durationSeconds",n.seconds()),this.set("showSeconds",n.as("seconds")<60)),t=e.__super__.viewContext.apply(this,arguments),o.isFunction(this.transactionWindowSettings.serviceLinks)?(a=this.transactionWindowSettings.serviceLinks(this),r=o.without.apply(o,[["activate","deactivate","open"]].concat(s.call(o.keys(a)))),console.assert(o.isEmpty(r),"Required link(s) `"+r+"` not found in transactionWindow settings"),o.extend(t,{serviceLinks:a})):t},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty,s=[].slice;void 0===(i=function(t){var e;return e=n(40),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=function(){return e.API_URL+"/contracts/"+this.contractId+"/subscriptions/smsNotifications"},n.prototype.initialize=function(t,e){var n;if(!(this.notificationsSettings=null!=(n=window.OW.contractsConfig.subscriptions)?n.smsNotifications:void 0))throw new Error("contracts.js must define 'subscriptions.smsNotifications' setting");if(!e.contractId)throw new Error("id=contractId required");return this.contractId=e.contractId,this.on("destroy",(function(){return window.app.trigger("change:contracts")}))},n.prototype.viewContext=function(){var t,e,n;return t=this.toJSON(),o.isFunction(this.notificationsSettings.serviceLinks)?(n=this.notificationsSettings.serviceLinks(this),e=o.without.apply(o,[["activate","change"]].concat(s.call(o.keys(n)))),console.assert(o.isEmpty(e),"Required rervice link(s) `"+e+"` not found in smsNotifications settings"),o.extend(t,{serviceLinks:n})):t},n}(n(375).BaseModel)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(i=function(t){var e,i,s,a,c;return n(573),c=n(40),a=n(136),s={},i=n(909),e=n(910),s.renderToString=function(t,n,s){var u;return u=function(e){var i;return i=new o.Deferred,c.DEBUG_PERFORMANCE&&console.time("render "+t),e(n,(function(n,o){return c.DEBUG_PERFORMANCE&&console.timeEnd("render "+t),n?(a.error("Error rending template:",n.toString(),e),i.reject(n)):i.resolve(o)})),i.promise()},t="./"+t,u(r.call(i.keys(),t)>=0?i(t):e(t))},s.render=function(t,e,n,o){var i;return i=o.$el||n.$el,s.renderToString(t,e,o).done((function(t){return i.removeClass("loading error"),i.html(t),n.trigger("render")}))},s}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){var o={"./auth/enrollment-form":576,"./auth/enrollment-form.dust":576,"./auth/login-page":577,"./auth/login-page.dust":577,"./contracts/add-product":578,"./contracts/add-product.dust":578,"./contracts/cards-accounts-page":579,"./contracts/cards-accounts-page.dust":579,"./contracts/contract-list":580,"./contracts/contract-list.dust":580,"./contracts/contracts-actions-popup":581,"./contracts/contracts-actions-popup.dust":581,"./contracts/information-tab":498,"./contracts/information-tab.dust":498,"./history/report-dialog":582,"./history/report-dialog.dust":582};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=909},function(t,e,n){var o={"./add-auth-dialog":501,"./add-auth-dialog.dust":501,"./applications/application-conditions-dialog":583,"./applications/application-conditions-dialog.dust":583,"./applications/application-page":584,"./applications/application-page.dust":584,"./auth/auth-card-method":585,"./auth/auth-card-method.dust":585,"./auth/auth-login-method":586,"./auth/auth-login-method.dust":586,"./auth/auth-login-pw-method":587,"./auth/auth-login-pw-method.dust":587,"./auth/captcha-block":443,"./auth/captcha-block.dust":443,"./auth/enrollment-form":588,"./auth/enrollment-form.dust":588,"./auth/enrollment-page":589,"./auth/enrollment-page.dust":589,"./auth/login-add-auth-confirmation":590,"./auth/login-add-auth-confirmation.dust":590,"./auth/login-add-auth-method-selector":591,"./auth/login-add-auth-method-selector.dust":591,"./auth/login-change-password":592,"./auth/login-change-password.dust":592,"./auth/login-page":593,"./auth/login-page.dust":593,"./auth/password-input":506,"./auth/password-input.dust":506,"./auth/set-login-page":594,"./auth/set-login-page.dust":594,"./auth/set-password-page":595,"./auth/set-password-page.dust":595,"./card-orders/complete-page":596,"./card-orders/complete-page.dust":596,"./card-orders/confirmation-dialog":597,"./card-orders/confirmation-dialog.dust":597,"./card-orders/form":598,"./card-orders/form-page":599,"./card-orders/form-page.dust":599,"./card-orders/form.dust":598,"./card-orders/index-page":600,"./card-orders/index-page.dust":600,"./certificates/certificate-form":601,"./certificates/certificate-form-page":602,"./certificates/certificate-form-page.dust":602,"./certificates/certificate-form.dust":601,"./certificates/certificate-success-page":603,"./certificates/certificate-success-page.dust":603,"./common/add-auth-confirmation-input":604,"./common/add-auth-confirmation-input.dust":604,"./common/add-auth-method-selector":605,"./common/add-auth-method-selector.dust":605,"./common/add-auth-without-form-dialog":445,"./common/add-auth-without-form-dialog.dust":445,"./common/app-dialog":606,"./common/app-dialog.dust":606,"./common/attachments-panel":607,"./common/attachments-panel.dust":607,"./common/checkbox":608,"./common/checkbox.dust":608,"./common/contract-select":609,"./common/contract-select.dust":609,"./common/currency-rates-dialog":610,"./common/currency-rates-dialog.dust":610,"./common/dialog":385,"./common/dialog.dust":385,"./common/empty":611,"./common/empty-page":612,"./common/empty-page.dust":612,"./common/empty.dust":611,"./common/error-dialog":613,"./common/error-dialog.dust":613,"./common/feedback-dialog":614,"./common/feedback-dialog.dust":614,"./common/footer":615,"./common/footer.dust":615,"./common/header":616,"./common/header.dust":616,"./common/map/map-dialog":617,"./common/map/map-dialog.dust":617,"./common/map/map-filters-panel":618,"./common/map/map-filters-panel.dust":618,"./common/map/map-view":619,"./common/map/map-view.dust":619,"./common/map/service-points-info-panel":620,"./common/map/service-points-info-panel.dust":620,"./common/operation-error-message":621,"./common/operation-error-message.dust":621,"./common/operation-success-message":622,"./common/operation-success-message.dust":622,"./common/page":376,"./common/page.dust":376,"./common/print-header":623,"./common/print-header.dust":623,"./common/prompt-dialog":624,"./common/prompt-dialog.dust":624,"./common/simple-dialog":625,"./common/simple-dialog.dust":625,"./common/wb-language-switch":626,"./common/wb-language-switch.dust":626,"./contracts/actions/cash-by-code-complete-page":627,"./contracts/actions/cash-by-code-complete-page.dust":627,"./contracts/actions/cash-by-code-page":628,"./contracts/actions/cash-by-code-page.dust":628,"./contracts/actions/contract-block-dialog":629,"./contracts/actions/contract-block-dialog.dust":629,"./contracts/actions/contract-unblock-dialog":630,"./contracts/actions/contract-unblock-dialog.dust":630,"./contracts/activate-transaction-window-dialog":631,"./contracts/activate-transaction-window-dialog.dust":631,"./contracts/additional-cards-tab":507,"./contracts/additional-cards-tab.dust":507,"./contracts/archive-toggle":632,"./contracts/archive-toggle.dust":632,"./contracts/balance-attr":500,"./contracts/balance-attr.dust":500,"./contracts/balance-tab":508,"./contracts/balance-tab.dust":508,"./contracts/balances-for-manager":446,"./contracts/balances-for-manager.dust":446,"./contracts/cards-accounts-page":496,"./contracts/cards-accounts-page.dust":496,"./contracts/cards-list":465,"./contracts/cards-list-page":633,"./contracts/cards-list-page.dust":633,"./contracts/cards-list.dust":465,"./contracts/contract-details-page":509,"./contracts/contract-details-page.dust":509,"./contracts/contract-group-stats":634,"./contracts/contract-group-stats.dust":634,"./contracts/contract-list":497,"./contracts/contract-list.dust":497,"./contracts/deactivate-transaction-window-dialog":635,"./contracts/deactivate-transaction-window-dialog.dust":635,"./contracts/deposit-calculator-page":636,"./contracts/deposit-calculator-page.dust":636,"./contracts/deposit-creation-page":637,"./contracts/deposit-creation-page.dust":637,"./contracts/deposit-result-page":638,"./contracts/deposit-result-page.dust":638,"./contracts/details-attr":464,"./contracts/details-attr.dust":464,"./contracts/division-contract-list":639,"./contracts/division-contract-list.dust":639,"./contracts/division-contracts-page":640,"./contracts/division-contracts-page.dust":640,"./contracts/division-main-contract-page":641,"./contracts/division-main-contract-page.dust":641,"./contracts/external-card-form":466,"./contracts/external-card-form.dust":466,"./contracts/external-card-registration-page":642,"./contracts/external-card-registration-page.dust":642,"./contracts/history-tab":513,"./contracts/history-tab.dust":513,"./contracts/information-tab":499,"./contracts/information-tab.dust":499,"./contracts/limits-tab":511,"./contracts/limits-tab.dust":511,"./contracts/online-deposit-management":643,"./contracts/online-deposit-management.dust":643,"./contracts/open-transaction-window-dialog":644,"./contracts/open-transaction-window-dialog.dust":644,"./contracts/payment-info-tab":514,"./contracts/payment-info-tab.dust":514,"./contracts/payment-requisites-section":515,"./contracts/payment-requisites-section.dust":515,"./contracts/security-tab":512,"./contracts/security-tab.dust":512,"./contracts/services-tab":510,"./contracts/services-tab.dust":510,"./contracts/statement-subscription-dialog":645,"./contracts/statement-subscription-dialog.dust":645,"./contracts/subscriptions":646,"./contracts/subscriptions.dust":646,"./contracts/tds-enroll-page":647,"./contracts/tds-enroll-page.dust":647,"./digital-card/digital-card-resend-params-result-dialog-view":648,"./digital-card/digital-card-resend-params-result-dialog-view.dust":648,"./digital-card/digital-card-resend-params-view":649,"./digital-card/digital-card-resend-params-view.dust":649,"./digital-card/digital-card-reveal-card-number-view":650,"./digital-card/digital-card-reveal-card-number-view.dust":650,"./disputes/dispute-form":651,"./disputes/dispute-form.dust":651,"./disputes/dispute-operations-choice":652,"./disputes/dispute-operations-choice.dust":652,"./disputes/dispute-view":653,"./disputes/dispute-view.dust":653,"./disputes/disputes-page":654,"./disputes/disputes-page.dust":654,"./disputes/flat-history-list":655,"./disputes/flat-history-list.dust":655,"./disputes/selectable-history-list":656,"./disputes/selectable-history-list.dust":656,"./error-page":657,"./error-page.dust":657,"./form-fields/amount":658,"./form-fields/amount.dust":658,"./form-fields/base":409,"./form-fields/base.dust":409,"./form-fields/beneficiaries-collection":659,"./form-fields/beneficiaries-collection.dust":659,"./form-fields/card-number":660,"./form-fields/card-number.dust":660,"./form-fields/checkbox":661,"./form-fields/checkbox.dust":661,"./form-fields/collection-select":516,"./form-fields/collection-select.dust":516,"./form-fields/contact":662,"./form-fields/contact.dust":662,"./form-fields/contract-select":663,"./form-fields/contract-select.dust":663,"./form-fields/date-range":664,"./form-fields/date-range.dust":664,"./form-fields/hint":449,"./form-fields/hint.dust":449,"./form-fields/international-destination":665,"./form-fields/international-destination.dust":665,"./form-fields/invoice-amount-correction":666,"./form-fields/invoice-amount-correction.dust":666,"./form-fields/invoice-item":667,"./form-fields/invoice-item-amount":668,"./form-fields/invoice-item-amount.dust":668,"./form-fields/invoice-item.dust":667,"./form-fields/invoice-tariff-info":669,"./form-fields/invoice-tariff-info.dust":669,"./form-fields/invoice-total":670,"./form-fields/invoice-total.dust":670,"./form-fields/map":671,"./form-fields/map.dust":671,"./form-fields/measurement-field":672,"./form-fields/measurement-field.dust":672,"./form-fields/payment-period":673,"./form-fields/payment-period.dust":673,"./form-fields/radio-button-group-as-tabs":674,"./form-fields/radio-button-group-as-tabs.dust":674,"./form-fields/readonly":518,"./form-fields/readonly-dynamic":675,"./form-fields/readonly-dynamic.dust":675,"./form-fields/readonly.dust":518,"./form-fields/select":676,"./form-fields/select.dust":676,"./form-fields/switch":677,"./form-fields/switch.dust":677,"./form-fields/text":517,"./form-fields/text.dust":517,"./form-fields/textarea":678,"./form-fields/textarea.dust":678,"./form-fields/update-balance":679,"./form-fields/update-balance.dust":679,"./form-sample":680,"./form-sample.dust":680,"./history/application-card-order-details-dialog":681,"./history/application-card-order-details-dialog.dust":681,"./history/application-certificate-details-dialog":682,"./history/application-certificate-details-dialog.dust":682,"./history/application-history-list":683,"./history/application-history-list.dust":683,"./history/application-service-details-dialog":684,"./history/application-service-details-dialog.dust":684,"./history/category-operation-details-dialog":685,"./history/category-operation-details-dialog.dust":685,"./history/certificate-details":522,"./history/certificate-details.dust":522,"./history/filters/contract":686,"./history/filters/contract.dust":686,"./history/filters/period":687,"./history/filters/period.dust":687,"./history/filters/text-search":688,"./history/filters/text-search.dust":688,"./history/history-analytics":689,"./history/history-analytics-list":690,"./history/history-analytics-list.dust":690,"./history/history-analytics-panel":691,"./history/history-analytics-panel.dust":691,"./history/history-analytics.dust":689,"./history/history-bonus-chart":692,"./history/history-bonus-chart.dust":692,"./history/history-chart":693,"./history/history-chart.dust":693,"./history/history-filters":694,"./history/history-filters.dust":694,"./history/history-page":695,"./history/history-page.dust":695,"./history/history-panel":696,"./history/history-panel.dust":696,"./history/invoice-details-section":521,"./history/invoice-details-section.dust":521,"./history/operation-description":467,"./history/operation-description.dust":467,"./history/operation-details":520,"./history/operation-details-dialog":519,"./history/operation-details-dialog.dust":519,"./history/operation-details.dust":520,"./history/report-dialog":697,"./history/report-dialog.dust":697,"./history/simple-history-list":447,"./history/simple-history-list.dust":447,"./history/statement-dialog":698,"./history/statement-dialog.dust":698,"./instalment/create-plan-result":699,"./instalment/create-plan-result.dust":699,"./instalment/details-page":700,"./instalment/details-page.dust":700,"./instalment/dialog-message":701,"./instalment/dialog-message.dust":701,"./instalment/early-repayment-confirmation-dialog":702,"./instalment/early-repayment-confirmation-dialog.dust":702,"./instalment/early-repayment-form":703,"./instalment/early-repayment-form.dust":703,"./instalment/early-repayment-page":704,"./instalment/early-repayment-page.dust":704,"./instalment/early-repayment-result-page":705,"./instalment/early-repayment-result-page.dust":705,"./instalment/operation-history-popup":706,"./instalment/operation-history-popup.dust":706,"./instalment/operation-instalment-data-info":523,"./instalment/operation-instalment-data-info.dust":523,"./instalment/operation-instalment-list":707,"./instalment/operation-instalment-list.dust":707,"./instalment/plan-info":708,"./instalment/plan-info.dust":708,"./instalment/plans-page":709,"./instalment/plans-page.dust":709,"./instalment/plans-popup":710,"./instalment/plans-popup.dust":710,"./instalment/slider":524,"./instalment/slider.dust":524,"./main-menu":711,"./main-menu.dust":711,"./marketing/banners-carousel":712,"./marketing/banners-carousel.dust":712,"./marketing/product-details-page":713,"./marketing/product-details-page.dust":713,"./marketing/product-link":714,"./marketing/product-link.dust":714,"./marketing/promo-messages":715,"./marketing/promo-messages.dust":715,"./marketing/showcase-page":716,"./marketing/showcase-page.dust":716,"./partials/addauth/add-auth-method-switch":444,"./partials/addauth/add-auth-method-switch.dust":444,"./partials/addauth/otp_list-method":503,"./partials/addauth/otp_list-method.dust":503,"./partials/addauth/otp_mma-method":504,"./partials/addauth/otp_mma-method.dust":504,"./partials/addauth/otp_sms-method":502,"./partials/addauth/otp_sms-method.dust":502,"./partials/addauth/random_auth-method":505,"./partials/addauth/random_auth-method.dust":505,"./partials/beneficiary-title":468,"./partials/beneficiary-title.dust":468,"./partials/details-attr":382,"./partials/details-attr.dust":382,"./partials/empty-message":448,"./partials/empty-message.dust":448,"./partials/payment-info-field":435,"./partials/payment-info-field.dust":435,"./payments/beneficiaries-management-page":717,"./payments/beneficiaries-management-page.dust":717,"./payments/beneficiary-edit-form":718,"./payments/beneficiary-edit-form.dust":718,"./payments/beneficiary-info":469,"./payments/beneficiary-info.dust":469,"./payments/cart/complete-page":719,"./payments/cart/complete-page.dust":719,"./payments/cart/confirmation-details":720,"./payments/cart/confirmation-details.dust":720,"./payments/cart/empty-popup":721,"./payments/cart/empty-popup.dust":721,"./payments/cart/index-page":722,"./payments/cart/index-page.dust":722,"./payments/cart/invoice-edit-page":723,"./payments/cart/invoice-edit-page.dust":723,"./payments/cart/not-working-popup":724,"./payments/cart/not-working-popup.dust":724,"./payments/cart/payment-list":725,"./payments/cart/payment-list.dust":725,"./payments/cart/preview-page":726,"./payments/cart/preview-page.dust":726,"./payments/cart/template-edit-page":727,"./payments/cart/template-edit-page.dust":727,"./payments/information-service":728,"./payments/information-service.dust":728,"./payments/invoices/invoice-autopayment-options":729,"./payments/invoices/invoice-autopayment-options.dust":729,"./payments/invoices/invoice-payment-complete-page":730,"./payments/invoices/invoice-payment-complete-page.dust":730,"./payments/invoices/invoice-payment-page":525,"./payments/invoices/invoice-payment-page.dust":525,"./payments/invoices/invoice-subscription-page":731,"./payments/invoices/invoice-subscription-page.dust":731,"./payments/invoices/invoice-subscriptions-panel":732,"./payments/invoices/invoice-subscriptions-panel.dust":732,"./payments/invoices/invoices-list":733,"./payments/invoices/invoices-list.dust":733,"./payments/invoices/invoices-request-form":734,"./payments/invoices/invoices-request-form.dust":734,"./payments/invoices/invoices-request-page":735,"./payments/invoices/invoices-request-page.dust":735,"./payments/native/ic-payment-page":736,"./payments/native/ic-payment-page.dust":736,"./payments/native/intra-bank-transfer-currency-limitation-popup":737,"./payments/native/intra-bank-transfer-currency-limitation-popup.dust":737,"./payments/native/intra-bank-transfer-limit-popup":738,"./payments/native/intra-bank-transfer-limit-popup.dust":738,"./payments/native/retrieve-money-transfer-page":739,"./payments/native/retrieve-money-transfer-page.dust":739,"./payments/native/transfer-complete-page":740,"./payments/native/transfer-complete-page.dust":740,"./payments/native/transfer-page":741,"./payments/native/transfer-page.dust":741,"./payments/payment-3d-processing-page":742,"./payments/payment-3d-processing-page.dust":742,"./payments/payment-complete-page":527,"./payments/payment-complete-page.dust":527,"./payments/payment-details":743,"./payments/payment-details.dust":743,"./payments/payment-page":526,"./payments/payment-page.dust":526,"./payments/payment-template-complete-page":744,"./payments/payment-template-complete-page.dust":744,"./payments/payment-template-edit-page":745,"./payments/payment-template-edit-page.dust":745,"./payments/payment-template-page":746,"./payments/payment-template-page.dust":746,"./payments/payment-templates":747,"./payments/payment-templates.dust":747,"./payments/payments-menu":748,"./payments/payments-menu.dust":748,"./payments/payments-page":749,"./payments/payments-page.dust":749,"./payments/protected-payment-confirmation-dialog":750,"./payments/protected-payment-confirmation-dialog.dust":750,"./payments/recurrent-payments":751,"./payments/recurrent-payments.dust":751,"./payments/region-select":752,"./payments/region-select.dust":752,"./payments/remittance-details":753,"./payments/remittance-details.dust":753,"./payments/send2friend-page":754,"./payments/send2friend-page.dust":754,"./payments/simple-payment-confirmation-dialog":755,"./payments/simple-payment-confirmation-dialog.dust":755,"./payments/threshold-payments":756,"./payments/threshold-payments.dust":756,"./payments/tiles/payment-items-list":436,"./payments/tiles/payment-items-list.dust":436,"./payments/tiles/payments-menu":757,"./payments/tiles/payments-menu-item":470,"./payments/tiles/payments-menu-item.dust":470,"./payments/tiles/payments-menu-section":758,"./payments/tiles/payments-menu-section.dust":758,"./payments/tiles/payments-menu.dust":757,"./payments/tiles/payments-page":759,"./payments/tiles/payments-page.dust":759,"./payments/tiles/recurrent-payments":760,"./payments/tiles/recurrent-payments-list":761,"./payments/tiles/recurrent-payments-list.dust":761,"./payments/tiles/recurrent-payments.dust":760,"./payments/tiles/templates-list":762,"./payments/tiles/templates-list.dust":762,"./payments/tiles/threshold-payments-list":763,"./payments/tiles/threshold-payments-list.dust":763,"./security/amount-limiter":764,"./security/amount-limiter.dust":764,"./security/bank-limiters":765,"./security/bank-limiters.dust":765,"./security/geo-limiter":766,"./security/geo-limiter.dust":766,"./security/geo-limiters-page":767,"./security/geo-limiters-page.dust":767,"./security/geo-limiters-regions-tags":768,"./security/geo-limiters-regions-tags.dust":768,"./security/limiter-title":471,"./security/limiter-title.dust":471,"./security/limiters-panel":769,"./security/limiters-panel.dust":769,"./security/switch-limiter":770,"./security/switch-limiter.dust":770,"./settings/audit-logins":771,"./settings/audit-logins.dust":771,"./settings/contact-info-form":772,"./settings/contact-info-form.dust":772,"./settings/contact-info-page":773,"./settings/contact-info-page.dust":773,"./settings/notifications-page":774,"./settings/notifications-page.dust":774,"./settings/otp-receipt":775,"./settings/otp-receipt.dust":775,"./settings/personalized-devices":776,"./settings/personalized-devices-edit":777,"./settings/personalized-devices-edit.dust":777,"./settings/personalized-devices.dust":776,"./settings/security-settings-page":778,"./settings/security-settings-page.dust":778,"./settings/two-factor-auth-management-page":779,"./settings/two-factor-auth-management-page.dust":779,"./style-test-page":780,"./style-test-page.dust":780,"./submenu-switch":781,"./submenu-switch.dust":781};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=910},function(e,n,o){(function(n){var i,r;r=o(136),i={errorMessages:{},_errorMessages:{NO_PASSWORDS:t("You have no one-time passwords left. Please contact the bank to solve this problem."),NO_AUTH_METHODS:t("There're no available methods to confirm operation. Please contact support"),INVALID_ONE_TIME_PASSWORD:t("Incorrect one-time password"),OTP_ATTEMPTS_EXCEEDED:t("Exceeded number of attempts to enter one-time password"),NO_PHONE_NUMBER:t("Cannot use SMS verification without phone number information for your account.")+" "+t("Please contact technical support"),AUTH_METHOD_NOT_AVAILABLE:t("Authentication method is not available. Use other method or contact customer support"),AUTHENTICATION_FAILED:t("Unable to perform additional authentication. Please contact the bank to solve this problem."),RESEND_ATTEMPTS_EXCEEDED:t("Exceeded number of attempts to resend one-time password"),OPERATION_REJECTED:t("Operation rejected"),UNKNOWN_BENEFICIARY:t("Can not proceed payment while beneficiary not found"),INVALID_SESSION:t("Please re-login to pay with foreign cards"),OTP_EXPIRED:t("The time to enter one-time password has expired"),INVALID_LOGIN_OR_PASSWORD:t("Incorrect one-time password"),ACCOUNT_BLOCKED:t("Exceeded number of attempts to enter one-time password"),INSUFFICIENT_FUNDS:t("Insufficient funds")},defaultErrorMessage:t("Could not perform operation. Try again later or contact customer support"),initErrorHandlerMixin:function(){return this.errorMessages=n.extend({},this._errorMessages,this.errorMessages)},clearMessages:function(){return window.app.clearMessages()},showError:function(t){return r.warn("Form error: "+t),this.clearMessages(),window.app.showErrorMessage(t)},handleXhrError:function(t){var e,n,o,i;return e=(i=JSON.parse(t.responseText))._error,400===t.status?(n=i.respText||this.errorMessageFor(e),this.showError(n),!0):!(302!==(o=t.status)&&401!==o&&412!==o||!(null!=e?e.code:void 0))&&(n=this.errorMessageFor(e),this.showError(n),!0)},errorMessageFor:function(t){var e;return(null!=(e=this.errorMessages)?e[t.code]:void 0)||t.message||this.defaultErrorMessage},errorMessageForCode:function(t){var e;return(null!=(e=this.errorMessages)?e[t]:void 0)||this.defaultErrorMessage}},e.exports=i}).call(this,o(11))},function(e,n,o){(function(e){var i,r;i=o(913),r={FORMAT_INDICATOR:"00",MERCHANT_ACCOUNT_NUMBER:"02",MERCHANT_CATEGORY_CODE:"52",CURRENCY_CODE:"53",AMOUNT:"54",TIP_INDICATOR:"55",FEE_AMOUNT:"56",FEE_PERCENT:"57",MERCHANT_COUNTRY:"58",MERCHANT_NAME:"59",MERCHANT_CITY:"60",ADD_DATA:"62",CRC:"63"},n.ADD_DATA_FIELD_LABELS={"01":t("Bill number [mvisa]"),"02":t("Mobile number [mvisa]"),"03":t("Store number [mvisa]"),"04":t("Loyalty number [mvisa]"),"05":t("Reference label [mvisa]"),"06":t("Customer label [mvisa]"),"07":t("Terminal label [mvisa]"),"08":t("Purpose of transaction [mvisa]")},n.MVisaData=function(){function t(t){t?this.init(t):console.warn("There is no point is mVisa data model initialization w/o encoded string")}return t.prototype.mandatoryCodes=[r.FORMAT_INDICATOR,r.MERCHANT_ACCOUNT_NUMBER,r.MERCHANT_CATEGORY_CODE,r.CURRENCY_CODE,r.MERCHANT_COUNTRY,r.MERCHANT_NAME,r.MERCHANT_CITY,r.CRC],t.prototype.init=function(t){var e;if(this.data={},this.parsedData=this._parseEncodedStringPart(t),null!==this.parsedData)return this.parsedData.forEach((e=this,function(t){var n;return n=t.code===r.ADD_DATA?e._parseEncodedStringPart(t.value):t.value,e.data[t.code]=n}))},t.prototype._parseEncodedStringPart=function(t){var e,n,o,i,r,s;for(r=[],n={},o=0;o<t.length;){if(e=t.substr(o,2),o+=2,i=parseInt(t.substr(o,2),10),o+=2,s=t.substr(o,i),o+=i,n[e])return null;r.push({code:e,value:s}),n[e]=1}return r},t.prototype._checkCrc=function(){var t,e,n,o,i,s,a,c;for(o=65535,4129,n="",this.parsedData.forEach((function(t){return n+=t.code+t.value.length.toLocaleString("en",{minimumIntegerDigits:2})+(t.code!==r.CRC?t.value:"")})),s=0,c=n.length;s<c;s++)for(t=n[s].charCodeAt(0),i=a=0;a<=7;i=++a)e=1==(o>>15&1),o<<=1,e^1==(t>>7-i&1)&&(o^=4129);return(o&=65535)===parseInt(this.getByCode(r.CRC),16)},t.prototype.hasCode=function(t){return null!=this.data&&this.data.hasOwnProperty(t)},t.prototype.getByCode=function(t){var e;return null!=(e=this.data)?e[t]:void 0},t.prototype.isValid=function(){var t,n,o,i;return!!this.parsedData&&(i=e.pluck(this.parsedData,"code"),n=0===e.difference(this.mandatoryCodes,i).length,o=e.last(i)===r.CRC,t=!this.hasCode(r.ADD_DATA)||null!==this.getByCode(r.ADD_DATA),n&&o&&t&&this._checkCrc())},t.prototype.getCurrency=function(){var t,e;return t=null!=(e=i.number(this.getByCode(r.CURRENCY_CODE)))?e.code:void 0,console.assert(t,"Presented currency seems not to exist"),t},t.prototype.getMerchantData=function(){return{merchantAccountNumber:this.getByCode(r.MERCHANT_ACCOUNT_NUMBER),merchantCity:this.getByCode(r.MERCHANT_CITY),merchantCountry:this.getByCode(r.MERCHANT_COUNTRY),merchantCategoryCode:this.getByCode(r.MERCHANT_CATEGORY_CODE),merchantName:this.getByCode(r.MERCHANT_NAME)}},t.prototype.getAmount=function(){var t;return t=this.getCurrency(),this.hasCode(r.AMOUNT)?{value:parseFloat(this.getByCode(r.AMOUNT)),currency:t}:{currency:t}},t.prototype.getFee=function(){var t;return t=this.getCurrency(),"01"===this.getByCode(r.TIP_INDICATOR)||this.hasCode(r.FEE_PERCENT)?{currency:t}:this.hasCode(r.FEE_AMOUNT)?{value:parseFloat(this.getByCode(r.FEE_AMOUNT)),currency:t}:void 0},t.prototype.getFeePercent=function(){return this.getByCode(r.FEE_PERCENT)},t.prototype.getAddData=function(){var t,n;if(this.hasCode(r.ADD_DATA))return t=this.getByCode(r.ADD_DATA),n=function(t){return t?{id:t.code,value:"***"!==t.value?t.value:void 0}:null},e.compact(t.map(n).splice(0,2))},t}()}).call(this,o(11))},,,,,function(e,n,o){(function(i,r){var s;void 0===(s=function(e){var n,s;return n=o(137),(s={}).ServiceMethodsMixin={getMissingMandatoryFields:function(){return this.formMeta.getFields({_filter:(t=this,function(e){return e.isMissingMandatoryField(t.model)})}).leafs();var t},getMissingMandatoryFieldsWarning:function(){var t,e,n,o;if((o=this.getMissingMandatoryFields()).length)return t=[],n=[],i.each(o,(function(e){var o;return(o=e.getEmptyMessage())?n.push(o):t.push(e.get("name"))})),t.length&&(e=tn("There is missing mandatory field on form:","There are missing mandatory fields on form:",t.length),e+=" "+t.join(", "),n.push(e)),n},getAmount:function(){var t,e,n,o;return o=0,e="",(t=this.formMeta.getField({_filter:function(t){return"amount.value"===t.get("role")}}))&&(o=1*this.model.get(t.get("attr")),n=t.getMyCurrencyField(),e=this.model.get(n.getModelAttrPath())),{value:o,currency:e}},isBalanceEnoughToAmount:function(t){var e,n,o,i,r,s,a;return!(s=this.formMeta.getField({role:"source"}))||(r=s.resolveValue(this.model.get(s.getAttrPath())),a=(n=t||this.getAmount()).value,e=n.currency,!(r&&a>0)||(r.toJSON&&(r=r.toJSON()),e!==r.currency||1*(null!=(o=r.balances)&&null!=(i=o.available)?i.value:void 0)>=a))},getMissingFieldError:function(e,n){var o,i,r,s,a,c,u;return null==n&&(n=""),o={fieldId:e},(i=this.formMeta.getField({id:e}))?(s=i.getEmptyMessage(),i.get("visible")?i.get("editable")&&(o.target=i.get("attr")):i.hasParameterReferences()&&1===(u=i.getParameterReferences()).length&&(a=u[0].value,c=this.formMeta.fields.getByReference(a),o.target=c.get("attr"))):s=n,s||(r=(null!=i?i.get("name"):void 0)||e,s=t("Field %(fieldId)s is missing",{fieldId:r})),o.message=s,o},getMissingFieldsErrors:function(t){var e,n,o,i,r;for(t.errorHandled=!0,i=[],n=0,o=(r=JSON.parse(t.responseText).fields).length;n<o;n++)e=r[n],i.push(this.getMissingFieldError(e.id,e.message));return i},tryHandleMissingP2PBeneficiary:function(t){var e,n,o;return n=JSON.parse(t.responseText),!("P2P_BY_PHONE"!==this.formMeta.id||!i.isArray(n.fields)||n.fields.length>1||"CONTRACT_BY_PHONE"!==n.fields[0].id)&&(e=this.formMeta.getField({id:"CONTRACT_BY_PHONE"}),!!(o=this.getSendToFriendServiceLink(e.get("addData.SERVICE_SEND_TO_FRIEND"),this.formMeta.id,Boolean(this.templateId)))&&(t.errorHandled=!0,window.app.router.navigate(o,{trigger:!0,replace:!0}),!0))},getSendToFriendServiceLink:function(t,e,n){var o;if(null==t&&(t=""),null==e&&(e=""),null==n&&(n=!1),t&&e)return this.updateUrl(),o=new r((new r).fragment()),n?o.segment(["payment",t]):o.segment(i.indexOf(o.segment(),e),t),"#"+o.addSearch({CONTACT_TO_PHONE:o.search(!0).DESTINATION,FROM_P2P:!0}).removeSearch("DESTINATION").valueOf()},isZeroAmountAllowed:function(){var t;return"Y"===(null!=(t=this.formMeta.getField({role:"amount.value"}))?t.get("addData.ALLOW_ZERO_AMOUNT"):void 0)},isZeroAmount:function(){var t;return(t=this.model.getAmount())&&!n.parseFloat(t.value)}},s}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(379))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){var e;return n(374).BaseView,n(384),e=function(){function t(t){this.initialize(t)}return t.prototype.currentStep=0,t.prototype.getPageViewForStep=function(t){throw new Error("Wizard subclass must implement getPageViewForStep")},t.prototype.initialize=function(){},t.prototype.showFirstStep=function(){return this.showStep(0)},t.prototype.showNextStep=function(t){return this.currentStep+=1,this.showStep(this.currentStep,t)},t.prototype.showStep=function(t){return console.assert(!1,"Wizard.showStep must be defined")},t.prototype.throwStepNotSupported=function(t){throw new Error("There's no step "+t+" in this wizard")},t}(),o.extend(e.prototype,i.Events),e}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(384))},function(t,e,n){(function(o,i,r){var s,a=[].slice,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(s=function(t){var e,s,u,l,d,p,h;return n(136),p=n(405),s=n(398).FormMeta,u=n(782),h=n(406).Constants,d=h.ViewToModel,l=h.ModelToView,e=n(434),{GenericFormMixin:o.extend({},{initGenericForm:function(){var t,n,r,a;for(n in console.assert(null!==this.formMeta||null!==this.formMetaConfig,"formMeta or formMetaConfig required"),this.formMeta||(this.formMeta=new s(this.formMetaConfig)),this.formMeta.bindChangeListeners(this.model),this.updateModelFromUrl(),r=this.formMeta.getRemoteCatalogs())t=r[n],this.listenTo(t,"syncError reset",this.updateCatalogsErrors.bind(this));return this.renderGenericFields().done((a=this,function(){if(a.$form=a.$(a.formSelector),a.initForm(),a.trigger("render.complete",{formNotReady:o.keys(r).length>0}),o.keys(r).length)return i.when.apply(i,a.formMeta.fetchCatalogs()).then((function(){return u.markFormAsReady.apply(a,arguments)})).fail((function(){var o;for(n in o=[],r)(t=r[n]).state!==e.States.READY?o.push(a.listenTo(t,"sync reset",a.tryMarkFormAsReady.bind(a))):o.push(void 0);return o}))})),this.setupHandbookLockedHandler(),!1},tryMarkFormAsReady:function(){if(!this.formReady)return o.all(o.values(this.formMeta.getRemoteCatalogs()),(function(t){return t.state===e.States.READY}))?u.markFormAsReady.apply(this,arguments):void 0},formIsValid:function(){var t,e;if(!(e="function"==typeof(t=this.model).getEmptyAttributeError?t.getEmptyAttributeError():void 0))return u.formIsValid.apply(this,arguments);this.showError(e)},renderGenericFields:function(){var t,e,n,r;return e=this.formMeta.getCatalogs(),function(){var r,s,a,c;for(c=[],r=0,s=(a=o.values(e)).length;r<s;r++)t=a[r],n=new i.Deferred,c.push(this.listenTo(t,"reset",(function(){return n.resolve(t)})));return c}.call(this),this.showFields({catalogs:e}).done((r=this,function(){return r.setupAmountThresholdFields(),r.initHiddenRemoteCatalogs()}))},setupAmountThresholdFields:function(){var t,e,n,r,s,a,c,u;if(c={},this.getFields().forEach((function(t){var e,n,i;if((e=t.get("addData"))&&(i=e.THRESHOLD_CURRENCY,(n=e.THRESHOLD_AMOUNT)&&i)){if(n=parseFloat(n),!o.isNaN(n))return c[t.get("attr")]={amount:n,currency:i};console.warn("Field `amount` exists but contains not a number")}})),!o.isEmpty(c))if(e=this.formMeta.getField({role:"amount.currency"}))if(n=this.formMeta.getField({role:"amount.value"})){if(!e.get("editable"))return r=this.model.get(e.get("attr")),t=n.get("attr"),u=this,a=function(){var e;return e=parseFloat(u.model.get(t))||0,o.forEach(c,(function(t,n){var o,a,c,l,d,p,h,f,m;if(t.currency===r)return h=e>=t.amount,(a=u.$el.find("[name="+n.replace(/(\.)/g,"\\$1")+"]")).prop("required",h),a.is("select")&&a.trigger("chosen:updated"),!s&&(c=a.get(0),f=(m=i(c.form).validate()).settings.validClass,l=m.settings.errorClass,p=(o=a.closest(".control-container, .ui-field-contain")).hasClass(f)||a.hasClass(f),d=o.hasClass(l)||a.hasClass(l),p||d)?a.valid():void 0;console.warn("The currency of threshold and form currency must be identical")}))},s=!0,a(),s=!1,this.model.on("change:"+t,a)}else console.warn("The form has thresholds rules, but missing value field");else console.warn("The form has thresholds rules, but missing currency field")},getFields:function(){return this.formMeta.getFields({visible:!0,_reject:function(t){return"N"===t.get("addData.SHOW_ON_INPUT")}})},enhanceFieldView:function(t,e,n){var i,r;return e.collection=((null!=n?n.catalogs:void 0)||{})[t.getAttrPath()],r=this,i=function(){return r.updateBindings(),r.fillEmptyFormFields(r.options),r.listenTo(e,"selectView.refresh",(function(){return r.updateBindings({viewToModel:!0})}))},this.listenTo(e,"selectView.ready",function(t){return function(e){return o.defer((function(){return t.modelBinder?i():t.once("render.complete",(function(){return i()}))}))}}(this)),this.listenTo(e,"updateUrl",function(t){return function(e){return t.updateUrl(e)}}(this))},getFieldsViews:function(){return o.flatten(this.views)},getFieldView:function(t){return this.getFieldsViews().find((function(e){var n,i;if(o.isFunction(t))return t(e);if(o.isObject(t)){for(n in t)if(i=t[n],e.model.get(n)!==i)return!1;return!0}throw new Error("Predicate isn't function or object")}))},showFields:function(t){var e,n,s,a,c;return s=r.parseQuery(new r((new r).fragment()).search()),e=this.getFields(),c=this,n=function(i){var r,a;if((r=s[i.get("attr")])&&c.model.set(i.get("attr"),r),a=c.fieldViewFor(i,c.formMeta,c.model))return c.enhanceFieldView(i,a,t),i.isGroup()?(a.views=e.getChildrenOf(i).map((function(t){return n(t)})),a.views=o.compact(a.views),[a,a.views]):a},a=e.map((function(t){return n(t)})),a=o.compact(a),this.views=a,i.when.apply(i,o.invoke(o.flatten(a),"show")).done(function(t){return function(){return t.arrangeViews(a)}}(this))},arrangeViews:function(t){var e,n,i,r,s,a;for(e=this.$(".form-fields"),n=function(t,e){var i;if(e)return o.isArray(e)?(e[1].forEach((function(t){var o;if(t)return n(("function"==typeof(o=e[0]).getFieldContainer?o.getFieldContainer(t.model):void 0)||e[0].$el,t)})),i=e[0]):i=e,t.append(i.$el),e.extraEls?t.append(i.extraEls):void 0},s=[],i=0,r=t.length;i<r;i++)a=t[i],s.push(n(e,a));return s},fieldViewFor:function(){return console.error("GenericFormMixin.fieldViewFor must be implemented")},bindModel:function(){return this.updateBindings()},updateBindings:function(t){return(null!=t?t.viewToModel:void 0)&&(this.modelBinderOptions=o.extend({},this.modelBinderOptions,{initialCopyDirection:d})),(null!=t?t.modelToView:void 0)&&(this.modelBinderOptions=o.extend({},this.modelBinderOptions,{initialCopyDirection:l})),this.modelBinder.bind(this.model,this.$form,this.getBindings(),this.modelBinderOptions),this.fillEmptyModelAttributes(),this.model.trigger("model.binded")},fillEmptyModelAttributes:function(){var t,e,n,r,s,a;for(t in a=[],s=this.modelBinder._attributeBindings)e=s[t],o.isEmpty(this.model.get(t))?a.push(function(){var t,s,a,c;for(c=[],t=0,s=(a=e.elementBindings).length;t<s;t++)n=a[t],c.push(function(){var t,e,s,a;for(a=[],t=0,e=(s=n.boundEls).length;t<e;t++)r=s[t],o.isEmpty(i(r).val())?a.push(void 0):a.push(i(r).trigger("change"));return a}());return c}()):a.push(void 0);return a},fillEmptyFormFields:function(t){var e,n,o,i,r,s,a,c;for(a=[],i=0,r=(s=this.formMeta.getFields({editable:!0}).leafs()).length;i<r;i++)(null!=(c=t[(n=s[i]).getAttrPath()])?c.id:void 0)&&(c=c.id),c?(o=n.get("attr"),this.model.set(""+o,c),(e=this.$(":input[name='"+o+"']"))&&!e.data("filled")?(e.is("select")?e.trigger("change"):e.trigger("keyup"),a.push(e.data("filled",!0))):a.push(void 0)):a.push(void 0);return a},initHiddenRemoteCatalogs:function(){var t,n,i,r;for(n in r=[],i=this.formMeta.getRemoteCatalogs())t=i[n],r.push(function(t){return function(n,i){if(!1===t.formMeta.getByAttrPath(n).get("visible")){switch(i.state){case e.States.AWAITING_PARAMS:t.listenToOnce(i,"state:"+e.States.NEW,(function(){return i.fetch({reset:!0})}));break;case e.States.NEW:i.fetch({reset:!0})}if(i.query)return t.listenTo(i.query,"change",o.debounce((function(){if(i.state!==e.States.AWAITING_PARAMS)return i.fetch()}),t.catalogRefreshDelay))}}}(this)(n,t));return r},updateCatalogsErrors:function(){var t,n,o,i,r;for(n in i=[],r=this.formMeta.getRemoteCatalogs())(t=r[n]).state===e.States.FAILED&&(o=t.getFailureMessage())&&(i.push(o),t.reset());if(this.hideCatalogsSyncErrors(),i.length)return this.showCatalogsSyncErrors(i)},showCatalogsSyncErrors:function(t){throw new Error("Abstract method should be overriden")},hideCatalogsSyncErrors:function(){throw new Error("Abstract method should be overriden")},getBindings:function(){var t,e,n,o,i,r,s,a,c,u,l,d,h,f;for(i in n=this.formMeta.getFormBindings(),u=this.formMeta.getRemoteCatalogs())(o=u[i]).isFetched()||delete n[o.field.get("attr")];if(this.formMeta.externalCardAllowed()&&this.canAddExternalCard){for(f=this.formMeta.getSourceField().get("id"),r=0,a=(l=["number","embossedName","securityCode"]).length;r<a;r++)n[f+"."+(t=l[r])]={selector:"[name="+t+"]",converter:p.defaultConverter};n[f+".expiryDate"]={selector:"[name=expiryDate]",converter:p.expirationDateConverter}}if(this.formMeta.get("allowInternational")&&(e=null!=(d=this.formMeta.getField({_filter:function(t){return t.isBeneficiaryField()}}))?d.getAttrPath():void 0))for(s=0,c=(h=["cardNumber","firstName","lastName"]).length;s<c;s++)n[e+"."+(t=h[s])]={selector:"[name='beneficiary."+t+"']",converter:p.defaultConverter};return n},getAdditionalUrlParams:function(){return{}},updateModelFromUrl:function(){var t,e,n;if(n=r.parseQuery(new r((new r).fragment()).search()),!o.isEmpty(n)&&(n.licenseAccepted&&(this.formMeta.isLicenseAccepted=!0),e=this.formMeta.getModelAttrPaths(),t=o.pick.apply(o,[n].concat(a.call(e))),!o.isEmpty(t)))return this.model.set(t)},updateUrl:function(t,e){var n,i,s,a,u,l,d,p,h,f,m,y,_;for(l in null==e&&(e=[]),e=e.concat(["number","embossedName","securityCode"]),(m="function"==typeof(i=this.formMeta).getSourceField?i.getSourceField():void 0)&&!("function"==typeof(s=this.model).getSource?s.getSource():void 0)&&e.push(m.getAttrPath()+".id"),a=(y=new r((new r).fragment())).search(!0))_=a[l],o.isUndefined(_)&&delete a[l];for(h={},u=0,d=(f=this.formMeta.getModelAttrPaths()).length;u<d;u++)n=f[u],c.call(e,n)<0&&this.model.get(n)&&(h[n]=this.model.get(n));return o.extend(h,t),this.formMeta.has("license")&&o.extend(h,{licenseAccepted:!0}),o.extend(h,this.getAdditionalUrlParams()),p=o.extend({},a,h),window.app.router.navigate(y.search(p).toString(),{replace:!0})},setupHandbookLockedHandler:function(){return this.getFieldsViews().forEach((t=this,function(e){return e.on("error",(function(e){var n;if("RESOURCE_LOCKED"===(n=e.errorCode)||"HANDBOOK_LOCKED"===n)return t.handbookLockedHandler(t.errorMessageForCode(e.errorCode))}))}));var t},handbookLockedHandler:function(t){return new Promise((e=this,function(n,o){var i;return i=function(){return t&&(window.app.clearMessages(),e.showError(t)),e.disableForm(),e.toggleSubmit(!0),n()},e.formReady?i():e.once("form.ready",i)}));var e}})}}.call(e,n,e,t))||(t.exports=s)}).call(this,n(11),n(14),n(379))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(787),r=n(381),s=n(921),a=n(936),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initialize=function(e){var n;t.prototype.initialize.call(this,e);var o=null===(n=this.model.getParameterReferences()[0])||void 0===n?void 0:n.value;if(this.valueField=this.formMeta.fields.getByReference(o),!this.valueField)throw new Error("This implementation of MapFieldView currently works only for card order service")},e.prototype.handleClick=function(){var t=this,e=this.valueField.get("attr");this.mapDialog=new s.default({selected:this.dataModel.get(e),isAllowedSelection:!0,onSelect:function(n){t.dataModel.set(e,n),t.mapDialog.close(),t.render()},servicePoints:new a.default}),this.mapDialog.show()},o.__decorate([r.on("click")],e.prototype,"handleClick",null),e=o.__decorate([r.template("form-fields/map")],e)}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(922),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"map-dialog"},enumerable:!0,configurable:!0}),e.prototype.onRender=function(e){var n=this;return this.mapView=new r.default({el:this.$("[data-js-map-dialog-content]"),isAllowedSelection:this.options.isAllowedSelection,selected:this.options.selected,onSelect:function(t){var e,o;return null===(o=(e=n.options).onSelect)||void 0===o?void 0:o.call(e,t)},userFilters:this.options.userFilters,servicePoints:this.options.servicePoints}),this.listenTo(this.mapView,"show",(function(){n.ensureAlignment()})),this.mapView.show(),t.prototype.onRender.call(this,e)},e=o.__decorate([i.template("common/map/map-dialog")],e)}(n(386));e.default=s},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=n(923),a=n(933),c=n(404),u=n(531),l=n(934),d=n(11),p=n(935),h=n(40),f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.userFilters=new u.ServicePointsFilters(this.options.userFilters)},n.prototype.show=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,e.prototype.show.call(this,t)];case 1:return o.sent(),n=this,[4,window.app.isGeoLocationAvailable()];case 2:return n.geoLocationAvailable=o.sent(),this.initInfoPanel(),[4,this.loadMapView()];case 3:return o.sent(),this.initSelectedInfoView(),this.initFiltering(),[2]}}))}))},n.prototype.loadMapView=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return e=t(".map-dialog__map-canvas"),this.mapLoader=new s.default(this,e,this.servicePoints,this.infoPanel,p.MAP_MESSAGES),[4,this.mapLoader.loadMap()];case 1:return n.sent(),[2]}}))}))},n.prototype.initInfoPanel=function(){return this.infoPanel=new a.default(this.getInfoPanelOptions()),this.infoPanel.show()},n.prototype.initSelectedInfoView=function(){this.options.selected&&google.maps.event.addListenerOnce(this,"markers_created",this.tryFocusMapOnSelectedServicePoint)},n.prototype.tryFocusMapOnSelectedServicePoint=function(){var t=this,e=this.servicePoints.find((function(e){var n;return(null===(n=e.get("info.id"))||void 0===n?void 0:n.toString())===t.options.selected}));if(e){var n=Number(e.get("lat")),o=Number(e.get("lng")),i=this.getMap();i&&(i.setCenter({lat:n,lng:o}),i.panBy(0,i.getDiv().clientHeight/6)),console.assert(this.mapLoader),console.assert(this.mapLoader.clusterer),console.assert(this.mapLoader.infoViewProvider);var r=this.mapLoader.clusterer.createMarkerProxy(e.viewContext());this.mapLoader.infoViewProvider.showInfoView([r])}},n.prototype.getMap=function(){return this.mapLoader&&this.mapLoader.getMap()},n.prototype.getInfoPanelOptions=function(){var t=this;return{el:this.$(".map-dialog__info-panel"),isAllowedSelection:this.options.isAllowedSelection,selected:this.options.selected,onSelect:function(e){var n,o;return null===(o=(n=t.options).onSelect)||void 0===o?void 0:o.call(n,e)}}},n.prototype.getFiltersPanelOptions=function(){return{el:this.$(".map-dialog__filters-panel"),model:this.userFilters,filters:p.SERVICE_POINT_FILTERS,servicePoints:this.servicePoints}},n.prototype.getFilteringFunc=function(t){return function(e){if(!t)return!0;var n={};for(var o in t.servicePoint&&d.extend(n,null!=p.SERVICE_POINT_FILTERS[t.servicePoint]?p.SERVICE_POINT_FILTERS[t.servicePoint].filters:void 0),t.textsearch&&d.extend(n,null!=p.SERVICE_POINT_FILTERS.search?p.SERVICE_POINT_FILTERS.search.filters:void 0),n){var i=n[o],r=t[o];if(r&&!i(e,r))return!1}return!0}},n.prototype.filterMarkers=function(){google.maps.event.trigger(this,"filter_markers",this.getFilteringFunc(this.userFilters.viewContext()))},n.prototype.initFiltering=function(){var t=this;google.maps.event.addListenerOnce(this,"markers_created",(function(){t.filtersPanel=new l.default(t.getFiltersPanelOptions()),t.filtersPanel.show(),t.userFilters.on("change",(function(){t.filterMarkers()})),t.filterMarkers(),google.maps.event.addListener(t,"street_view_changed",(function(e){e||t.filterMarkers()})),t.on("filtering_finished",(function(e){t.filtersPanel.showFilteringResult(e)}))}))},n.prototype.toggleLocateMeLink=function(t){this.$(".map-dialog__locate-me").toggle(t)},n.prototype.handleLocateMeClick=function(){google.maps.event.trigger(this,"locate_me",!1)},n.prototype.handleShowSearchClick=function(){this.isShowTextSearch()&&(this.$(".map-dialog__search").toggleClass("map-dialog__search--opened"),this.filtersPanel.$el.toggleClass("hidden"))},n.prototype.isShowTextSearch=function(){return h.MAP_SHOW_TEXT_SEARCH},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{isShowTextSearch:this.isShowTextSearch()})},o.__decorate([c.autobind],n.prototype,"tryFocusMapOnSelectedServicePoint",null),o.__decorate([c.autobind],n.prototype,"filterMarkers",null),o.__decorate([r.on("click .map-dialog__locate-me")],n.prototype,"handleLocateMeClick",null),o.__decorate([r.on("click .map-dialog__search")],n.prototype,"handleShowSearchClick",null),n=o.__decorate([r.template("common/map/map-view"),r.requiredOptions(["servicePoints"])],n)}(i.TemplateView);e.default=f}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),i=n(924),r=n(788),s=n(930),a=n(789),c=n(932),u=n(40),l=n(136),d=function(){function e(t,e,n,o,i){this.map=null,this.geomarker=null,this.clusterer=null,this.infoViewProvider=null,this.pageView=null,this.$el=null,this.pageView=t,this.$el=e,this.servicePointsCollection=n,this.infoView=o,this.mapMessages=i}return e.prototype.loadMap=function(){var e=this;a.default.start("map_rendered");var n=window.app.ensureMapsLoaded().then((function(){var t,n,o;e.geomarker=null!==(t=e.geomarker)&&void 0!==t?t:new i.default(e.pageView),e.geomarkerPromise=e.geomarker.init(),e.clusterer=null!==(n=e.clusterer)&&void 0!==n?n:new r.default(e.pageView,e.mapMessages),e.clustererPromise=e.clusterer.init(),e.infoViewProvider=null!==(o=e.infoViewProvider)&&void 0!==o?o:new c.default(e.pageView,e.infoView),e.infoViewProvider.init()}));return t.when(this.getCoarseGeolocation(),n).then((function(t){e.map=e.initMap(t,e.$el),e.geomarkerPromise.then((function(){console.assert(e.geomarker),e.geomarker.enable(e.map)})),e.clustererPromise.then((function(){console.assert(e.clusterer),e.clusterer.enable(e.map)})),console.assert(e.infoViewProvider),e.infoViewProvider.enable(e.map),google.maps.event.addListenerOnce(e.map,"idle",(function(){return a.default.stop("map_rendered"),o.defer((function(){return e.loadServicePoints(e.clustererPromise)}))}))}))},e.prototype.getCoarseGeolocation=function(){var e=this,n=t.Deferred(),o={zoom:u.MAP_STARTING_ZOOM,latitude:u.MAP_CENTER[0],longitude:u.MAP_CENTER[1],accuracy:0};return navigator.geolocation?this.pageView.geoLocationAvailable?(navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.accuracy;return e<u.MAP_COARSE_ACCURACY_MAX?n.resolve({zoom:u.MAP_LOCATE_ME_ZOOM,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:e}):n.resolve(o)}),(function(t){return console.warn("coarse geoposition error",t),e.pageView.toggleLocateMeLink(!1),n.resolve(o)}),{enableHighAccuracy:!1,timeout:400,maximumAge:0}),n.promise()):n.resolve(o).promise():(console.warn("coarse geoposition is unavailable"),n.resolve(o).promise())},e.prototype.initMap=function(t,e){var n=this,i={center:new google.maps.LatLng(t.latitude,t.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,mapTypeControl:!1,overviewMapControl:!1,panControl:!1,rotateControl:!1,scaleControl:!1,zoomControl:!1,streetViewControl:u.MAP_STREET_VIEW_ENABLED,scrollwheel:!0,zoom:t.zoom,minZoom:3,maxZoom:u.MAP_MAX_ZOOM};e.show();var r=new google.maps.Map(e.get(0),o.extend(i,u.MAP_OPTIONS)),a=r.getStreetView();return a.set("addressControl",!1),a.set("panControl",!1),a.set("enableCloseButton",!1),a.set("zoomControl",!1),a.set("linksControl",!0),new s.default(this.mapMessages).tieTo(a),google.maps.event.addListener(a,"visible_changed",(function(){return google.maps.event.trigger(n.pageView,"street_view_changed",a.getVisible())})),r},e.prototype.loadServicePoints=function(t){var e=this;return google.maps.event.trigger(this.pageView,"show_message",this.mapMessages.LOADING),this.servicePointsCollection.fetchIfEmpty().then((function(){var n=e.servicePointsCollection.viewContext();google.maps.event.trigger(e.pageView,"loading_data_complete",n),t.then((function(){a.default.time("markers_create",(function(){console.assert(e.clusterer),e.clusterer.createMarkers(n),google.maps.event.trigger(e.pageView,"markers_created")}))}))}),(function(t){return l.error("loading data... error",t)})).always((function(){return google.maps.event.trigger(e.pageView,"hide_message",e.mapMessages.LOADING)}))},e.prototype.getMap=function(){return this.map},e.prototype.remove=function(){return null!=this.geomarker&&this.geomarker.detach(),this.map=null},e}();e.default=d}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(40),r=function(){function e(t){this.pageView=null,this.marker=null,this.map=null,this.initPromise=null,this.detached=!1,this.pageView=t}return e.prototype.init=function(){return this.initPromise||(this.initPromise=t.Deferred(),this._init(this.initPromise)),this.initPromise.promise()},e.prototype.getMarkerClass=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,window.app.ensureMapsLoaded()];case 1:return t.sent(),[2,n(925).default]}}))}))},e.prototype._init=function(e){var n=this;return this.getMarkerClass().then((function(o){return n.marker=new o,n.marker.setPageView(n.pageView),n.marker.setPositionOptions({timeout:72e5,maximumAge:36e5,enableHighAccuracy:!0}),n.marker.setMarkerOptions({icon:new google.maps.MarkerImage(i.LOCAL_IMAGE_URL+"/map-geolocation-marker.png",new google.maps.Size(28,28),null,new google.maps.Point(14,14),new google.maps.Size(28,28))}),n.marker.setCircleOptions({fillColor:"#aaa"}),google.maps.event.addListenerOnce(n.marker,"position_changed",(function(){return n.pageView.toggleLocateMeLink(!0),n.panToMe(!0)})),google.maps.event.addListener(n.marker,"geolocation_error",(function(t){return console.error("init geolocation... error",t),n.pageView.toggleLocateMeLink(!1)})),google.maps.event.addListener(n.pageView,"locate_me",(function(t){return n.panToMe(t)})),t(document).on("resume",(function(){return n.enable()})),t(document).on("pause",(function(){return n.disable()})),e.resolve()}))},e.prototype.panToMe=function(t){if(null==t&&(t=!1),null!=this.marker){var e=this.marker.getMap(),n=this.marker.getPosition();if(e&&n){var o=e.getCenter().equals(n);if(o||e.panTo(n),o||t){var r=this.marker.getBounds();return r&&this.marker.getAccuracy()>i.MAP_SCREEN_FIT_ACCURACY?e.fitBounds(r):e.setZoom(i.MAP_LOCATE_ME_ZOOM)}}}},e.prototype.enable=function(t){if(!this.detached)return t&&(this.map=t),this.map&&null!=this.marker?this.marker.setMap(this.map):void 0},e.prototype.disable=function(){if(!this.detached)return null!=this.marker?this.marker.setMap(null):void 0},e.prototype.detach=function(){return this.disable(),this.detached=!0,this.map=null},e}();e.default=r}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.streetViewListener=null,e}return o.__extends(e,t),e.prototype.setPageView=function(t){this.pageView=t},e.prototype.setMap=function(e){var n=this;return t.prototype.setMap.apply(this,o.__spread(Array.from(arguments))),e?this.streetViewListener=google.maps.event.addListener(this.pageView,"street_view_changed",(function(t){return n.marker_.setVisible(!t)})):google.maps.event.removeListener(this.streetViewListener)},e.prototype.updatePosition_=function(e){return t.prototype.updatePosition_.apply(this,o.__spread(Array.from(arguments))),this.circle_.unbind("map"),this.circle_.setMap(null),this.circle_.bindTo("map",this.marker_)},e.prototype.watchPosition_=function(){if(this.pageView.geoLocationAvailable)return t.prototype.watchPosition_.apply(this,o.__spread(Array.from(arguments)))},e.prototype.clearWatch_=function(){if(this.pageView.geoLocationAvailable)return t.prototype.clearWatch_.apply(this,o.__spread(Array.from(arguments)))},e}(n(926));e.default=i},function(t,e){
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @name GeolocationMarker for Google Maps v3
 * @version version 1.0
 * @author Chad Killingsworth [chadkillingsworth at missouristate.edu]
 * Copyright 2012 Missouri State University
 * @fileoverview
 * This library uses geolocation to add a marker and accuracy circle to a map.
 * The marker position is automatically updated as the user position changes.
 */
function n(t,e,n){var o={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:new google.maps.MarkerImage("https://google-maps-utility-library-v3.googlecode.com/svn/trunk/geolocationmarker/images/gpsloc.png",new google.maps.Size(34,34),null,new google.maps.Point(8,8),new google.maps.Size(17,17)),optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};e&&(o=this.copyOptions_(o,e));var i={clickable:!1,radius:0,strokeColor:"1bb6ff",strokeOpacity:.4,fillColor:"61a0bf",fillOpacity:.4,strokeWeight:1,zIndex:1};n&&(i=this.copyOptions_(i,n)),this.marker_=new google.maps.Marker(o),this.circle_=new google.maps.Circle(i),this.accuracy=null,this.position=null,this.map=null,this.set("minimum_accuracy",null),this.set("position_options",{enableHighAccuracy:!0,maximumAge:1e3}),this.circle_.bindTo("map",this.marker_),t&&this.setMap(t)}n.prototype=new google.maps.MVCObject,n.prototype.set=function(t,e){if(/^(?:position|accuracy)$/i.test(t))throw"'"+t+"' is a read-only property.";/map/i.test(t)?this.setMap(e):google.maps.MVCObject.prototype.set.apply(this,arguments)},n.prototype.marker_=null,n.prototype.circle_=null,n.prototype.getMap=function(){return this.map},n.prototype.getPositionOptions=function(){return this.get("position_options")},n.prototype.setPositionOptions=function(t){this.set("position_options",t)},n.prototype.getPosition=function(){return this.position},n.prototype.getBounds=function(){return this.position?this.circle_.getBounds():null},n.prototype.getAccuracy=function(){return this.accuracy},n.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")},n.prototype.setMinimumAccuracy=function(t){this.set("minimum_accuracy",t)},n.prototype.watchId_=-1,n.prototype.setMap=function(t){this.map=t,this.notify("map"),t?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.accuracy=null,this.position=null,this.clearWatch_(),this.watchId_=-1,this.marker_.setMap(t))},n.prototype.setMarkerOptions=function(t){this.marker_.setOptions(this.copyOptions_({},t))},n.prototype.setCircleOptions=function(t){this.circle_.setOptions(this.copyOptions_({},t))},n.prototype.updatePosition_=function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),n=null==this.marker_.getMap();if(n){if(null!=this.getMinimumAccuracy()&&t.coords.accuracy>this.getMinimumAccuracy())return;this.marker_.setMap(this.map),this.marker_.bindTo("position",this),this.circle_.bindTo("center",this,"position"),this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=t.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",t.coords.accuracy),!n&&null!=this.position&&this.position.equals(e)||google.maps.MVCObject.prototype.set.call(this,"position",e)},n.prototype.watchPosition_=function(){var t=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition((function(e){t.updatePosition_(e)}),(function(e){google.maps.event.trigger(t,"geolocation_error",e)}),this.getPositionOptions()))},n.prototype.clearWatch_=function(){navigator.geolocation&&navigator.geolocation.clearWatch(this.watchId_)},n.prototype.copyOptions_=function(t,e){for(var o in e)!0!==n.DISALLOWED_OPTIONS[o]&&(t[o]=e[o]);return t},n.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0},t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(40),i=function(){function t(t){this.delegate=t}return t.prototype.isStub=function(){return this.delegate.isStub},t.prototype.getDraggable=function(){return this.delegate.getDraggable()},t.prototype.getPosition=function(){return this.delegate.getPosition()},t.prototype.getMap=function(){return this.delegate.getMap()},t.prototype.setMap=function(t){return this.delegate.setMap(t)},t.prototype.getVisible=function(){return this.delegate.getVisible()},t.prototype.setVisible=function(t){return this.delegate.setVisible(t)},t.getServicePointMarkerIconUrl=function(t){return o.LOCAL_IMAGE_URL+"/map-marker-"+t+".svg"},t.getServicePointMarkerActiveIconUrl=function(t){return console.error("Active icon not defined")},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.startTime={},this.stats={}}return t.prototype.start=function(t){return this.startTime[t]&&console.debug("reseting timings for '"+t+"'"),this.startTime[t]=(new Date).getTime()},t.prototype.stop=function(t,e){if(null==e&&(e=1),this.startTime[t])return this.stats[t]=((new Date).getTime()-this.startTime[t])/e;console.warn("'"+t+"' was not started")},t.prototype.report=function(){for(var t in console.debug("------------- stats -------------"),this.stats){if(!this.stats.hasOwnProperty(t))return;var e=t+": "+this.stats[t]+" ms";console.debug(e)}},t.prototype.time=function(t,e,n){null==n&&(n=1),this.start(t);for(var o=1,i=n,r=1<=i;r?o<=i:o>=i;r?o++:o--)e();return this.stop(t,n)},t}();e.default=o},function(t,e){
/**
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function n(t,e){t.getMarkerClusterer().extend(n,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function o(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new n(this,t.getStyles())}function i(t,e,n){this.extend(i,google.maps.OverlayView),e=e||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.imagePath_=n.imagePath||i.IMAGE_PATH,this.imageExtension_=n.imageExtension||i.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||i.IMAGE_SIZES,this.calculator_=n.calculator||i.CALCULATOR,this.batchSize_=n.batchSize||i.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||i.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}n.prototype.onAdd=function(){var t,e,n=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",(function(){e=t})),google.maps.event.addDomListener(this.div_,"mousedown",(function(){t=!0,e=!1})),google.maps.event.addDomListener(this.div_,"click",(function(o){if(t=!1,!e){var i,r,s=n.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",n.cluster_),google.maps.event.trigger(s,"clusterclick",n.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),i=n.cluster_.getBounds(),s.getMap().fitBounds(i),setTimeout((function(){s.getMap().fitBounds(i),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)}),100)),o.cancelBubble=!0,o.stopPropagation&&o.stopPropagation()}})),google.maps.event.addDomListener(this.div_,"mouseover",(function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)})),google.maps.event.addDomListener(this.div_,"mouseout",(function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)}))},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].replace(/^\s+|\s+$/g,""),10),o=parseInt(e[1].replace(/^\s+|\s+$/g,""),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),t="<img src='"+this.url_+"' style='position: absolute; top: "+o+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*o+"px, "+(-1*n+this.width_)+"px, "+(-1*o+this.height_)+"px, "+-1*n+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},n.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var n=this.styles_[e];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},n.prototype.setCenter=function(t){this.center_=t},n.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},n.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},o.prototype.getSize=function(){return this.markers_.length},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getCenter=function(){return this.center_},o.prototype.getMap=function(){return this.map_},o.prototype.getMarkerClusterer=function(){return this.markerClusterer_},o.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(t=0;t<n.length;t++)e.extend(n[t].getPosition());return e},o.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},o.prototype.addMarker=function(t){var e,n,o;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,r=(this.center_.lat()*(i-1)+t.getPosition().lat())/i,s=(this.center_.lng()*(i-1)+t.getPosition().lng())/i;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,null!==(o=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>o)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(e=0;e<n;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},o.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},o.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},o.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)this.clusterIcon_.hide();else if(t<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(o),this.clusterIcon_.show()}},o.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},i.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",(function(){t.resetViewport_(!1),this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")})),google.maps.event.addListener(this.getMap(),"idle",(function(){t.redraw_()}))]},i.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},i.prototype.draw=function(){},i.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},i.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),n=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)n.extend(e[t].getPosition());this.getMap().fitBounds(n)},i.prototype.getGridSize=function(){return this.gridSize_},i.prototype.setGridSize=function(t){this.gridSize_=t},i.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},i.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},i.prototype.getMaxZoom=function(){return this.maxZoom_},i.prototype.setMaxZoom=function(t){this.maxZoom_=t},i.prototype.getStyles=function(){return this.styles_},i.prototype.setStyles=function(t){this.styles_=t},i.prototype.getTitle=function(){return this.title_},i.prototype.setTitle=function(t){this.title_=t},i.prototype.getZoomOnClick=function(){return this.zoomOnClick_},i.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},i.prototype.getAverageCenter=function(){return this.averageCenter_},i.prototype.setAverageCenter=function(t){this.averageCenter_=t},i.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},i.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},i.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},i.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},i.prototype.getImageExtension=function(){return this.imageExtension_},i.prototype.setImageExtension=function(t){this.imageExtension_=t},i.prototype.getImagePath=function(){return this.imagePath_},i.prototype.setImagePath=function(t){this.imagePath_=t},i.prototype.getImageSizes=function(){return this.imageSizes_},i.prototype.setImageSizes=function(t){this.imageSizes_=t},i.prototype.getCalculator=function(){return this.calculator_},i.prototype.setCalculator=function(t){this.calculator_=t},i.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},i.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},i.prototype.getClusterClass=function(){return this.clusterClass_},i.prototype.setClusterClass=function(t){this.clusterClass_=t},i.prototype.getMarkers=function(){return this.markers_},i.prototype.getTotalMarkers=function(){return this.markers_.length},i.prototype.getClusters=function(){return this.clusters_},i.prototype.getTotalClusters=function(){return this.clusters_.length},i.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},i.prototype.addMarkers=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&this.pushMarkerTo_(t[n]);e||this.redraw_()},i.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",(function(){e.ready_&&(this.isAdded=!1,e.repaint())}))}t.isAdded=!1,this.markers_.push(t)},i.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},i.prototype.removeMarkers=function(t,e){var n,o,i=!1;for(n=0;n<t.length;n++)o=this.removeMarker_(t[n]),i=i||o;return!e&&i&&this.repaint(),i},i.prototype.removeMarker_=function(t){var e,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){n=e;break}return-1!==n&&(t.setMap(null),this.markers_.splice(n,1),!0)},i.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},i.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout((function(){var e;for(e=0;e<t.length;e++)t[e].remove()}),0)},i.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(o);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(i),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},i.prototype.redraw_=function(){this.createClusters_(0)},i.prototype.resetViewport_=function(t){var e,n;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)(n=this.markers_[e]).isAdded=!1,t&&n.setMap(null)},i.prototype.distanceBetweenPoints_=function(t,e){var n=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},i.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},i.prototype.addToClosestCluster_=function(t){var e,n,i,r,s=4e4,a=null;for(e=0;e<this.clusters_.length;e++)(r=(i=this.clusters_[e]).getCenter())&&(n=this.distanceBetweenPoints_(r,t.getPosition()))<s&&(s=n,a=i);a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):((i=new o(this)).addMarker(t),this.clusters_.push(i))},i.prototype.createClusters_=function(t){var e,n,o,i=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),o=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(o),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;e<s;e++)!(n=this.markers_[e]).isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);s<this.markers_.length?this.timerRefStatic=setTimeout((function(){i.createClusters_(s)}),0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},i.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},i.CALCULATOR=function(t,e){for(var n=0,o=t.length.toString(),i=o;0!==i;)i=parseInt(i/10,10),n++;return{text:o,index:n=Math.min(n,e),title:""}},i.BATCH_SIZE=2e3,i.BATCH_SIZE_IE=500,i.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",i.IMAGE_EXTENSION="png",i.IMAGE_SIZES=[53,56,66,78,90],t.exports=i},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=function(e){function n(t){var n=e.call(this)||this;return n.mapMessages={},n.mapMessages=t,n}return o.__extends(n,e),n.prototype.position=function(){return google.maps.ControlPosition.TOP_RIGHT},n.prototype.tieTo=function(n){e.prototype.tieTo.call(this,n),t(this.el).on("click",(function(){return n.setVisible(!1)}))},n.prototype.html=function(){return'<div title="'+this.mapMessages.CLOSE_STREET_VIEW+'" class="close-street-view"></div>'},n}(n(931).default);e.default=i}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(){this.mapMessages={},this.el=document.createElement("div"),t(this.el).html(this.html())}return e.prototype.position=function(){return google.maps.ControlPosition.RIGHT_TOP},e.prototype.tieTo=function(t){return this.map=t,t.controls[this.position()].push(this.el)},e}();e.default=n}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(531),i=n(11),r=n(788),s=n(40),a=function(){function t(t,e){this.pageView=t,this.infoView=e}return t.prototype.init=function(){var t=this;google.maps.event.addListener(this.pageView,"show_info_view",(function(e,n){t.showInfoView(e,n)})),google.maps.event.addListener(this.pageView,"hidden_markers",(function(e){t.hideInfoView(e)})),google.maps.event.addListener(this.pageView,"hide_info_view",(function(){t.hideInfoView()}))},t.prototype.setActiveMarkerIcon=function(t,e){if(e&&s.MAP_HIGHLIGHT_ACTIVE_MARKER)return e.setIcon(r.default.getServicePointMarkerIcon(t.servicePoint,{active:!0}))},t.prototype.unsetActiveMarkerIcon=function(t,e){if(e&&s.MAP_HIGHLIGHT_ACTIVE_MARKER)return e.setIcon(r.default.getServicePointMarkerIcon(t.servicePoint))},t.prototype.showInfoView=function(t,e){if(this.isEnabled()){(null!=this.currentData?this.currentData.marker:void 0)&&this.unsetActiveMarkerIcon(this.currentData.proxies[0],this.currentData.marker);var n=new o.ServicePointsInfo(t.map((function(t){return t.servicePoint.info})));this.infoView.renderWith(n),e&&(this.setActiveMarkerIcon(t[0],e),this.infoView.once("hide",this.unsetActiveMarkerIcon.bind(this,t[0],e))),this.currentData={proxies:t,marker:e}}},t.prototype.hideInfoView=function(t){this.isEnabled()&&((i.isEmpty(t)||this.currentData&&0===i.difference(this.currentData.proxies,t).length)&&this.infoView.hide(),this.currentData=null)},t.prototype.isEnabled=function(){return Boolean(this.map)},t.prototype.enable=function(t){t&&(this.map=t)},t.prototype.disable=function(){this.map=null},t}();e.default=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(135),s=n(11),a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),Object.defineProperty(n.prototype,"$wrapper",{get:function(){return this.$("[data-js-info-panel-wrapper]")},enumerable:!0,configurable:!0}),n.prototype.show=function(){return this.render()},n.prototype.onRender=function(){e.prototype.onRender.apply(this,o.__spread(Array.from(arguments))),this.$wrapper.toggleClass("service-point-info__wrapper--hidden",!Boolean(this.collection)),this.$("[data-js-service-point-list]").accordion({collapsible:!0})},n.prototype.renderWith=function(t){return this.collection=t,this.render()},n.prototype.hide=function(t){t&&t.preventDefault(),this.collection=null,this.$wrapper.addClass("service-point-info__wrapper--hidden"),this.trigger("hide")},n.prototype.handleSelectionButtonClick=function(e){var n,o;e.preventDefault();var i=t(e.currentTarget).data("id");null===(o=(n=this.options).onSelect)||void 0===o||o.call(n,i.toString())},n.prototype.context=function(){var t,n,i;if(this.collection){var a=this.collection.at(0);i=a.get("streetAddress"),1===this.collection.length&&(i=a.get("title")||a.get("textType")),i=i||r.t("Service points list")}return s.extend(e.prototype.context.apply(this,o.__spread(Array.from(arguments))),{title:i,servicePoints:null===(n=null===(t=this.collection)||void 0===t?void 0:t.viewContext)||void 0===n?void 0:n.call(t),isAllowedSelection:Boolean(this.options.isAllowedSelection),selected:this.options.selected})},o.__decorate([i.on("click [data-js-close]")],n.prototype,"hide",null),o.__decorate([i.on("click [data-js-select]")],n.prototype,"handleSelectionButtonClick",null),n=o.__decorate([i.template("common/map/service-points-info-panel")],n)}(n(374).TemplateView);e.default=a}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(374),s=n(11),a=n(404),c=n(135),u=n(40),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initialize=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.initialize.apply(this,o.__spread(e)),this.currentFilters={},this.filters=this.getOnlyAvailableFilters()},e.prototype.onRender=function(){t.prototype.onRender.apply(this,o.__spread(Array.from(arguments))),this.$searchResultBlock=this.$(".map-filters-panel__search-result"),this.$textSearch=this.$("[name=textsearch]")},e.prototype.getOnlyAvailableFilters=function(){var t=s.uniq(this.servicePoints.pluck("type"));return s.mapObject(this.filters,(function(e,n){return"search"!==n&&(e.showInFilters=e.showInFilters&&-1!==t.indexOf(n)),e}))},e.prototype.onTextSearch=function(){this.onFiltersChanged()},e.prototype.handleSearchCleanClick=function(){this.$textSearch.val(""),this.onTextSearch()},e.prototype.onFiltersChanged=function(){var t=this.$textSearch.val(),e={};(!t||t.length>1)&&s.extend(e,{textsearch:t}),this.model.set(e),this.trigger("render.complete")},e.prototype.showFilteringResult=function(t){var e=this;this.once("render.complete",(function(){var n;e.timeoutCode&&clearTimeout(e.timeoutCode),n=t?c.tn("Found %(num)s place","Found %(num)s places",t):c.t("No places found"),e.$searchResultBlock.text(n).slideDown(),e.timeoutCode=s.delay((function(){e.$searchResultBlock.slideUp()}),5e3)}))},e.prototype.context=function(){return s.extend(t.prototype.context.apply(this,o.__spread(Array.from(arguments))),{isShowTextSearch:u.MAP_SHOW_TEXT_SEARCH,textSearch:this.model.get("textsearch")})},o.__decorate([a.decorate(s.debounce,500),i.on("input [name=textsearch]"),i.on("change [name=textsearch]")],e.prototype,"onTextSearch",null),o.__decorate([i.on("click .map-filters-panel__search-clear")],e.prototype,"handleSearchCleanClick",null),e=o.__decorate([i.requiredOptions(["model","filters","servicePoints"]),i.template("common/map/map-filters-panel")],e)}(r.TemplateView);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),i=n(135),r=n(40);e.FILTER={BY_CCY:function(t,e){return!o.isEmpty(t.info.currencies)&&o.contains(t.info.currencies,e)},BY_CASH_IN:function(t,e){return e&&!0===t.info.cashIn},BY_TYPE:function(t){return function(e){return o.contains(t,e.type)}},BY_BONUS_CATEGORY:function(t,e){return t.merchantCategory===e},BY_BARCODE_SCANNER:function(t){return t.info.barCodeScanner},BY_TEXT:function(t,e){if(!e)return!0;var n=t.info.streetAddress||(null!=t.address?t.address.streetAddress:void 0)||"",o=new RegExp(RegExp.escape(e),"i");return o.test(t.info.title)||o.test(n)||o.test(t.merchantCategory)}},e.SERVICE_POINT_FILTERS={atm:{name:i.t("all atms [service point]"),showInFilters:!0,specificInputsContainer:"atm",filters:{servicePoint:e.FILTER.BY_TYPE(["atm","atm24"]),currency:e.FILTER.BY_CCY,cashIn:e.FILTER.BY_CASH_IN}},atm24:{name:i.t("atm24 [service point]"),showInFilters:!0,specificInputsContainer:"atm",filters:{servicePoint:e.FILTER.BY_TYPE(["atm24"]),currency:e.FILTER.BY_CCY,cashIn:e.FILTER.BY_CASH_IN}},branch:{name:i.t("branch [service point]"),showInFilters:!0,specificInputsContainer:"",filters:{servicePoint:e.FILTER.BY_TYPE(["branch"])}},kiosk:{name:i.t("kiosk [service point]"),showInFilters:!0,specificInputsContainer:"",filters:{servicePoint:e.FILTER.BY_TYPE(["kiosk"])}},bonus:{name:i.t("bonus club partners [service point]"),showInFilters:r.MAP_SHOW_BONUSES_IN_FILTER,specificInputsContainer:"bonus",filters:{servicePoint:e.FILTER.BY_TYPE(["bonus"]),category:e.FILTER.BY_BONUS_CATEGORY}},search:{showInFilters:!1,filters:{textsearch:e.FILTER.BY_TEXT}}},e.MAP_MESSAGES={ZOOM_IN:i.t("Zoom in to see the service points"),LOADING:i.t("Loading service points..."),CLOSE_STREET_VIEW:i.t("Close street view")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(40),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return i.API_URL+"/card-orders/delivery-branches-locations"},e}return o.__extends(e,t),e}(n(531).ServicePoints);e.default=r},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u;return n=o(386),c=o(387).WbFormMixin,s=o(938).PromptModel,(u={}).PromptDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.id="prompt-dialog",n.prototype.template="common/prompt-dialog",n.prototype.mixins=[c],n.prototype.allowImplicitClose=!1,n.prototype.required=!0,n.prototype.requiredOptions=["title","message","onProceed"],n.prototype.bindings={promptText:"[name=promptText]"},n.prototype.okButtonTitle=t("OK"),n.prototype.cancelButtonTitle=t("Cancel"),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model=new s({promptText:this.options.defaultValue||""}),i.has(this.options,"required")&&(this.required=this.options.required),this.initForm()},n.prototype.getValidationOptions=function(){var t;return t={},this.options.getValidationOptions&&(t=this.options.getValidationOptions()),i.extend(t,{errorPlacement:function(t,e){return t.appendTo(e.parent()),t.addClass("error-message")},showErrors:function(){var t,e,n;return n=Boolean(this.numberOfInvalids()),t=r(this.currentForm),e=r(this.currentForm).closest(".prompt-dialog").find("button.proceed"),n?(this.currentElements.trigger("validation:failed"),e.attr("disabled","disabled")):i.all(t.find("[required]").filter(":visible"),(function(t){return!i.isEmpty(r(t).val())}))&&(this.currentElements.trigger("validation:success"),e.removeAttr("disabled")),this.defaultShowErrors()}}),t},n.prototype.showFormLoadingIndicator=function(){return this.showLoadingIndicator(),this.applyLoadingStateToButton(this._getButton(".proceed"))},n.prototype.hideFormLoadingIndicator=function(){},n.prototype.submitAction=function(){return r.when(this.onProceed({value:this.model.get("promptText")}))},n.prototype.onSubmitError=function(t){return t.errorHandled=!0,this.close(),!0},n.prototype.onSubmitSuccess=function(){return this.close()},n.prototype.dialogOptions=function(){return{title:this.title,buttons:[{text:this.cancelButtonTitle,class:"link-button cancel",click:(t=this,function(e){if(!t.processing)return t.close()})},{text:this.okButtonTitle,class:"wb-button proceed",click:function(t){return function(e){if(!t.processing)return t.$form.submit()}}(this)}]};var t},n.prototype.context=function(){return{required:this.required,message:this.message}},n}(n),u}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(375).BaseModel,n(40),{PromptModel:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e}(e)}}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i){var r;void 0===(r=function(e){var n,r,s,a,c,u,l,d,p;return o(40),u=o(377),n=o(392).AppCache,d=o(393),c=d.getTemplateById,s=d.TEMPLATE_TYPES,r=o(532).NotificationDialog,p=o(380),l=function(e){var o;return"SERVICE_UNAVAILABLE"===(null!=(o=u.parseResponseSafe(e)._error)?o.code:void 0)?new r({title:t("Attention"),text:t("This service is no longer available, the template will be deleted."),onProceed:function(){return n.reset(n.KEYS.PAYMENT_TEMPLATES,n.KEYS.RECURRENT_PAYMENTS,n.KEYS.THRESHOLD_PAYMENTS),window.app.router.goBack()}}).show():window.location.replace("#")},(a={}).redirectToTemplate=function(t){return window.app.router.showEmptyPage(p.mainMenuIds.PAYMENTS_TRANSFERS),c(t).then((function(e,n){var o,r;return!e&&n?l(n):e?(o=function(){switch(e.get("type")){case s.COMMON:return"paymentTemplates";case s.RECURRENT:return"recurrentPayments";case s.THRESHOLD:return"thresholdPayments"}}(),r=new i(o+"/"+t+"/edit"),window.location.replace("#"+r.toString())):window.location.replace("#")}))},a}.call(n,o,n,e))||(e.exports=r)}).call(this,o(379))},function(t,e,n){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0});var i=n(373),r=n(941),s=n(374).TemplateView,a=n(395).ContractListActions,c=n(793).getContractsPageSettings,u=n(381),l=n(11),d=n(386),p=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,i.__spread(e))||this;return r.addProductWrapper=o("<div class='add-product-wrapper'></div>"),r}return i.__extends(e,t),e.prototype.context=function(){var e=t.prototype.context.call(this);return i.__assign(i.__assign({},e),{onlineDepositsSupported:e.onlineDepositsSupported&&!window.OW.mainConfig.ONLINE_DEPOSITS_HIDE_ADDITIONAL_ENTRY_POINTS})},e.prototype.onRender=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.addProductWrapper.prependTo(this.$el);new h({el:this.addProductWrapper}).show();return t.prototype.onRender.apply(this,i.__spread(e))},e}(r.CardsAccountsPage),h=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,i.__spread(e))||this}return i.__extends(e,t),e.prototype.context=function(){var e=t.prototype.context.call(this),n=this.getActionsContext();return n.length?i.__assign(i.__assign({},e),{actions:n}):e},e.prototype.onAddLinkClick=function(t){t.preventDefault(),new f({actions:this.context().actions}).show()},e.prototype.getActionsContext=function(){var t,e,n=new a([]),o=c();if(o.actions)try{for(var r=i.__values(o.actions),s=r.next();!s.done;s=r.next()){var u=s.value;u.condition&&!l.isFunction(u.condition)&&console.warn("Condition for #{action.id} is defined, but is not a function"),(!u.condition||l.isFunction(u.condition)&&u.condition(window.app))&&n.add(l.omit(u,"condition"))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n.viewContext()},i.__decorate([u.on("click [data-js-add-link]")],e.prototype,"onAddLinkClick",null),e=i.__decorate([u.template("contracts/add-product")],e)}(s),f=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,i.__spread(e))||this}return i.__extends(e,t),e.prototype.context=function(){return i.__assign(i.__assign({},t.prototype.context.call(this)),{actions:this.options.actions})},e.prototype.ensureAlignment=function(){this.$el.dialog("option","position",{my:"right bottom",at:"center",of:".add-link",collision:"none"})},Object.defineProperty(e.prototype,"id",{get:function(){return"contracts-actions-popup"},enumerable:!0,configurable:!0}),e.prototype.dialogOptions=function(){return{dialogClass:"dialog-without-title dialog-actions-popup",width:284,buttons:[]}},e.prototype.handleActionClick=function(t){this.close()},i.__decorate([u.on("click [data-js-action-link]")],e.prototype,"handleActionClick",null),e=i.__decorate([u.template("contracts/contracts-actions-popup"),u.requiredOptions(["actions"])],e)}(d);t.exports=i.__assign(i.__assign({},r),{CardsAccountsPage:p,AddProduct:h,ActionsPopup:f})}).call(this,n(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_;return h=o(377),p=o(374).TemplateView,d=o(378),y=o(395),c=y.Contracts,y.DashboardContracts,n=o(792).ContractList,l=o(942).default,_=o(380),f=window.OW.contractsConfig,m={},s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.archiveSelected=!1,e.prototype.archiveSize=0,e.prototype.context=function(){var t,n;return t=new c(this.collection.filter((n=this,function(t){return n.archiveSelected||!t.getInArchive()}))),this.archiveSize=this.collection.length-t.length,e.__super__.context.call(this,{collection:t})},e.prototype.toggleArchive=function(t){return this.archiveSelected=t,this.render()},e}(n),m.ArchiveToggle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="contracts/archive-toggle",e.prototype.requiredOptions=["archiveSize","archiveSelected"],e.prototype.context=function(){return{archiveSelected:this.archiveSelected,archiveSize:this.archiveSize}},e}(p),m.CardsAccountsPage=function(e){function n(){return this.fetchDataAndUpdateSectionViews=u(this.fetchDataAndUpdateSectionViews,this),n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/cards-accounts-page",n.prototype.pageType=_.mainMenuIds.CARDS_ACCOUNTS,n.prototype.events={"click .archiveLink":"toggleArchive"},n.prototype.fetchedSectionViews=[],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.fetchedSectionViews=[],this.pageSettings=null!=f?f.wbCardsAccountsPage:void 0,this.pageSettings||(console.debug("Using default cards & accounts settings - wbCardsAccountsPage is undefined"),this.pageSettings={sections:[{urlQuery:f.queries.dashboard||"",title:t("Cards and Accounts"),emptyMessage:t("You have no cards, accounts, credits or deposits")}]}),this.contractsCache=window.app.data.contracts.dashboard},n.prototype.getTitle=function(){return t("Cards and accounts")},n.prototype.show=function(){return window.app.data.cardOrderSettings.fetchIfNeedAndPossible().then((t=this,function(){return window.app.data.operationInstalments.fetchIfNeedAndPossible().then((function(){return n.__super__.show.apply(t,arguments)}))}));var t},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),this.archiveToggleView=new m.ArchiveToggle({el:this.$(".archive-toggle"),archiveSelected:!1,archiveSize:0}),this.fetchDataAndUpdateSectionViews(),this.contractsCache.ready().then((t=this,function(e){return console.debug("all contracts rendered"),t.trigger("render.complete")})),!1},n.prototype.fetchDataAndUpdateSectionViews=function(t){var e,n,o,a,c,u,d,p,h,f,m,y;for(null==t&&(t=!1),t&&(this.contractsCache.resetCache(),this.fetchedSectionViews=[]),this.contractsCache.fetchIfEmpty(this.pageSettings.sections),m=i.pairs(i.groupBy(this.pageSettings.sections,"urlQuery")),(n=r(".block__cards-accounts .contracts")).empty(),d=[],c=0,u=m.length;c<u;c++)a=m[c],f=[],d.push(function(){var t,c,u,d;for(d=[],t=0,c=(u=a[1]).length;t<c;t++)"instalment"===(p=u[t]).type?(this.operationInstalmentListView=new l({el:this.$(".instalment-section"),title:p.title,emptyMessage:p.emptyMessage}),d.push(this.operationInstalmentListView.show())):(e=r('<div class="contracts-section"/>').appendTo(n),h=new s(i.extend(p,{el:e})),f.push(h),h.show(),y="undefined"===a[0]?"":a[0],o=i.find(this.contractsCache.sources,(function(t){return t.urlQuery===y})),d.push(function(t){return function(e,n){return e.promise.done((function(){var o,r,s;for(s=[],o=0,r=n.length;o<r;o++)h=n[o],t.fetchedSectionViews.push(h),s.push(h.applyCollection(e.collection).then((function(){return t.updateArchiveControl().then((function(){if(i.isFunction(t.onFirstSectionReady))return t.onFirstSectionReady()}))})));return s})).fail((function(e){return t.handleError(e,n)}))}}(this)(o,f)));return d}.call(this));return d},n.prototype.handleError=function(e,n){var o,i,r,s,a,c;for(r="SERVER_TIMEOUT"===(null!=(s=h.parseResponseSafe(e)._error)?s.code:void 0)?t("System is not available right now.  Try again later"):t("Failed to load data.  Try again later"),e.errorHandled=!0,a=[],o=0,i=n.length;o<i;o++)c=n[o],a.push(c.handleError(r));return a},n.prototype.updateArchiveControl=function(){var t,e;return this.archiveToggleView.archiveSize=i.reduce(i.pluck(this.fetchedSectionViews,"archiveSize"),(function(t,e){return t+e})),null!=(t=this.archiveToggleView)&&(t.archiveSize=(null!=(e=this.archiveToggleView)?e.archiveSize:void 0)+window.app.data.operationInstalments.getInActiveInstalmentCount()),this.archiveToggleView.render()},n.prototype.toggleArchive=function(t){var e,n,o,i;for(t.preventDefault(),this.archiveToggleView.archiveSelected=!this.archiveToggleView.archiveSelected,e=0,n=(o=this.fetchedSectionViews).length;e<n;e++)o[e].toggleArchive(this.archiveToggleView.archiveSelected);return this.updateArchiveControl(),null!=(i=this.operationInstalmentListView)?i.toggleArchive():void 0},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{externalCardsSupported:window.OW.features.FOREIGN_CARDS,onlineDepositsSupported:window.OW.features.ONLINE_DEPOSITS,incomeCertificatesSupported:window.OW.features.INCOME_CERTIFICATES,cardOrdersSupported:window.app.data.cardOrderSettings.get("enabled")})},n}(d),m}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.show=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return[4,window.app.data.operationInstalments.fetchIfNeedAndPossible()];case 1:return n.sent(),[4,t.prototype.show.call(this,e)];case 2:return n.sent(),[2]}}))}))},e.prototype.toggleArchive=function(){this.$(".section-hidden-instalment").toggle()},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{title:this.options.title,emptyMessage:this.options.emptyMessage,collection:window.app.data.operationInstalments.getActiveInstalments().viewContext(),collectionHidden:window.app.data.operationInstalments.getInactiveInstalments().viewContext()})},e=o.__decorate([r.template("instalment/operation-instalment-list")],e)}(i.TemplateView);e.default=s},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c;return c=n(40),n(378),i=n(794),e=n(420),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=c.API_URL+"/division/main-contract",e.prototype.getStatusContext=o.noop,e.prototype.getActionsContext=function(){return[]},e.prototype.hasSubscriptions=function(){return!1},e.prototype.isHistorySupported=function(){return!1},e}(e),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.availableToManager=!0,e.prototype.requiredOptions=[],e.prototype.template="contracts/division-main-contract-page",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.model=new s},e.prototype.fetchData=function(){return this.model.fetch().then((t=this,function(){return t.model}));var t},e.prototype.onRender=function(){return this.$(".page-content").addClass("division-main-contract"),e.__super__.onRender.apply(this,arguments)},e.prototype.context=function(){return o.extend(e.__super__.context.apply(this,arguments),{isDivisionMainContract:!0})},e.prototype.getAdditionalCards=o.noop,e.prototype.getLimitsTabVisibility=o.noop,e}(i),{DivisionContract:s,DivisionMainContractPage:a}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u;return n(451),u=n(945),a=u.Limiters,i=u.BankLimiters,s=n(946),c=n(947),e=n(948),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="security/limiters-panel",n.prototype.views={},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.limiters=new a(null,{contractId:this.options.contractId}),this.bankLimiters=new i(null,{contractId:this.options.contractId}),this.limiters.once("sync",(t=this,function(){return t.propagateSwitchStatus(),t.initListeners()}));var t},n.prototype.propagateSwitchStatus=function(){return this.limiters.asGroups(),this.limiters.each((function(t){var e;if("switch"===t.get("type")&&"forbidden"===(null!=(e=t.parent)?e.get("status"):void 0))return t.set("status","forbidden")}))},n.prototype.initListeners=function(){return this.limiters.each((t=this,function(e){if("switch"===e.get("type"))return e.on("change:status",(function(){return t.toggleSwitchLimiter(e)}))}));var t},n.prototype.toggleSwitchLimiter=function(t){var e,n,o,i;return e=(n=(i=this.views[t.id]).$el).parent().children(".child-limiters"),o="unlimited"===t.get("status"),i.toggleSwitch(o),n.toggleClass("denied",!o),o?e.slideDown():e.slideUp()},n.prototype.show=function(){return this.showLoadingIndicator(),o.when(this.limiters.fetch(),this.bankLimiters.fetch()).then((t=this,function(){return t.render()}));var t},n.prototype.renderLimiter=function(t,n,o){switch(t){case"switch":return(this.views[o.id]=new c({el:n,model:o})).show();case"amount":case"single_amount":return(this.views[o.id]=new e({el:n,model:o})).show();default:return!1}},n.prototype.onRender=function(){var t;if(o("li.limiter").each((t=this,function(e,n){var i,r,s,a,c;if(r=(i=o(n)).children(".limiter-container"),c=i.data("limiter-type"),a=i.data("limiter-id"),s=t.limiters.get(a),!t.renderLimiter(c,r,s))return console.warn("Unsupported limiter type: "+c)})),this.$(".help-panel").multiAccordion({childSelector:".info-block"}),this.bankLimiters.size()>0)return new s({el:this.$(".bank-limiters-panel"),model:this.bankLimiters}).show().then(function(t){return function(){return t.$(".bank-limiters-block").multiAccordion({childSelector:".info-block"})}}(this))},n.prototype.context=function(){return{limiters:this.limiters.asGroups().viewContext(),hasBankLimiters:this.bankLimiters.size()>0}},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty,l=[].slice;void 0===(a=function(e){var n,a,u,d,p,h;return h=o(40),d=o(377),a=(p=o(375)).BaseModel,n=p.BaseCollection,(u={}).Limiter=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.ensureLimitField(),this.trackSavedValue()},n.prototype.ensureLimitField=function(){var t;if(("amount"===(t=this.get("type"))||"single_amount"===t)&&!this.has("limit"))return this.set("limit",{currency:this.get("currency")}),"forbidden"===this.get("status")?this.set("limit.value","0"):void 0},n.prototype.changedFields=function(){var t,e,n;return e=new u.Limiter(this.savedValue),t=i.filter(i.keys(this.toJSON()),(n=this,function(t){return!i.isEqual(e.get(t),n.get(t))})),t=i.filter(t,(function(t){return!t.match("^_")&&"confirmation"!==t})),i.object(t,i.map(t,function(t){return function(e){return t.get(e)}}(this)))},n.prototype.hasUnsavedChanges=function(){var t,e;return this.changedFields().limit?(t=this.getValueToSave(),e=this.savedValue,(t.limit.value?parseFloat(t.limit.value):null)!==(e.limit.value?parseFloat(e.limit.value):null)||!i.isEqual(i.omit(e,"limit"),i.omit(t,"limit"))):n.__super__.hasUnsavedChanges.apply(this,arguments)},n.prototype.getProgress=function(){var t;return"limited"===this.get("status")&&(t=this.get("currentValue"))?1*t.value/this.get("limit.value"):null},n.prototype.isGroup=function(){return!!this.items},n.prototype.getSwitchChildren=function(){return this.isGroup()?this.items.filter((function(t){return t.isSwitch()})):[]},n.prototype.getSwitchParents=function(){return i.filter(this.listParentLimiters(),(function(t){return t.isSwitch()}))},n.prototype.listParentLimiters=function(){var t,e;for(e=[],t=this;t.parent;)t=t.parent,e.push(t);return e},n.prototype.isSwitch=function(){return"switch"===this.get("type")},n.prototype.viewContext=function(){var e,o,r,s,a,c;return"single_amount"===this.get("type")&&(o=t("per operation")),null==o&&(o=function(){switch(this.get("period")){case"1d":return t("per day");case"1w":return t("per week");case"1m":return t("per month");default:return null}}.call(this)),(e=i.extend(n.__super__.viewContext.apply(this,arguments),{periodName:o,isGroup:this.isGroup(),hasChildGroups:!!(null!=(r=this.items)?r.hasChildGroups():void 0),items:null!=(s=this.items)?s.viewContext():void 0,showChildren:this.isGroup()&&!("forbidden"===this.get("status")),progress:this.getProgress()})).progress&&i.extend(e,{progressIsFull:Boolean(e.progress>=1),progressPercent:i.min([100*e.progress,100]),remainingPercent:i.max([100*(1-e.progress),0])}),e.showGroupEditLink=e.showChildren||e.editable,e.isGroup&&i.extend(e,{groupChildren:i.invoke((null!=(a=this.items)?a.filter((function(t){return t.isGroup()})):void 0)||[],"viewContext"),leafChildren:i.invoke((null!=(c=this.items)?c.filter((function(t){return!t.isGroup()})):void 0)||[],"viewContext")}),e},n}(a),u.Limiters=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=u.Limiter,e.prototype.initialize=function(t,n){var o;if(this.options=n,e.__super__.initialize.apply(this,arguments),this.contractId=null!=(o=this.options)?o.contractId:void 0,null==this.contractId)throw new Error("Contract id must be initialized!");return this.url=h.API_URL+"/contracts/"+this.contractId+"/limiters"},e.prototype.asGroups=function(){var t,n,o;return n=this.groupBy((function(t){return t.get("parent")})),t=this.map((o=this,function(t){var r;return r=n[t.get("id")],r=new e(r=i.forEach(r,(function(e){return e.parent=t})),o.options),o.options.comparator&&r.sort(),r&&r.length>0&&(t.items=r),t})),t=i.reject(t,(function(t){return t.parent})),new u.Limiters(t,{contractId:this.contractId})},e.prototype.hasChildGroups=function(){return this.any((function(t){return t.isGroup()}))},e.prototype.getSubtree=function(t){var e,n,o,i,r,s;for(e=function(n){var o,i,r,s,a;if(n.id===t)return n;if(n.items)for(o=0,r=(s=n.items.models).length;o<r;o++){if((i=s[o]).id===t)return i;if(a=e(i))return a}},o=0,i=(r=this.asGroups().models).length;o<i;o++)if(n=r[o],s=e(n))return s;throw new Error("Element "+t+" not found")},e.prototype.getPatch=function(){var t,e;return e=function(t,n,o,r){var s,a,c,d;if(null==o&&(o=[]),null==r&&(r=[]),i.isObject(n)){for(a in n)d=n[a],r.push(e(t,d,l.call(o).concat([a])));return i.chain(r).flatten(r).compact().value()}if(n!==(s=new u.Limiter(t.savedValue)).get(o.join("."))){if("/limit/currency"===(c={op:s.has(o.join("."))?null!=n?"replace":"remove":"add",path:"/"+o.join("/"),value:n}).path)return;return"/limit/value"===c.path&&("remove"===c.op||"replace"===c.op&&i.isEmpty(String(c.value)))&&(c={op:"replace",path:"/status",value:"unlimited"}),c}},t=this.reject((function(t){return i.isEmpty(t.changedFields())})),{_patches:i.chain(t).map((function(t){var n;return(n={})[t.id]=e(t,t.changedFields()),n})).flatten().compact().reduce((function(t,e){return i.extend(t,e)}),{}).value()}},e.prototype.save=function(t){var e,n;return e=this.getPatch(),t&&i.extend(e,{confirmation:t}),i.isEmpty(e._patches)?s.Deferred().resolve().promise():(e=d.sanitizeValues(e),r.sync("patch",this,{url:this.url,data:JSON.stringify(e),contentType:"application/json"}).fail((n=this,function(t){return n.onAjaxError(t)})))},e}(n),u.BankLimiters=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.url=this.url+"/bank"},e}(u.Limiters),u}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(384),o(14))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="security/bank-limiters",e.prototype.context=function(){return o.extend(e.__super__.context.apply(this,arguments),{limiters:this.model.asGroups().viewContext(),hasModifiableByCall:null!=this.model.find((function(t){return t.get("modifiableByCall")}))})},e}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return n(423),e=n(405),i=n(442),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="security/switch-limiter",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.on("change:status",(t=this,function(){if(!0!==t.model.silent)return i.trackEvent("Limiters","set limiter status to "+t.model.get("status")),t.onStatusChange()}));var t},n.prototype.getBindings=function(){if(this.model.get("editable"))return{status:{selector:":checkbox",converter:e.limiterSwitchConverter}}},n.prototype.ensureParentsStatus=function(){return this.model.affectedLimiters=[],o.each(this.model.getSwitchParents(),(t=this,function(e){if("forbidden"===e.get("status"))return e.silent=!0,e.set("status","unlimited"),e.silent=!1,t.model.affectedLimiters.push(e)}));var t},n.prototype.ensureChildrenStatus=function(){return this.model.affectedLimiters=[],o.each(this.model.getSwitchChildren(),(t=this,function(e){if("unlimited"===e.get("status"))return e.silent=!0,e.set("status","forbidden"),e.silent=!1,t.model.affectedLimiters.push(e)}));var t},n.prototype.onStatusChange=function(){return"forbidden"===this.model.get("status")&&this.ensureChildrenStatus(),"unlimited"===this.model.get("status")&&this.ensureParentsStatus(),this.submit()},n.prototype.rollback=function(){var t;return t=[this.model],this.model.affectedLimiters&&(t=t.concat(this.model.affectedLimiters)),o.each(t,(function(t){return t.silent=!0,t.set(t.savedValue),t.silent=!1})),this.model.affectedLimiters=null},n.prototype.onSubmitSuccess=function(){return this.model.affectedLimiters&&o.each(this.model.affectedLimiters,(function(t){return t.trigger("sync")})),this.model.affectedLimiters=null,n.__super__.onSubmitSuccess.apply(this,arguments)},n.prototype.toggleSwitch=function(t){return this.$(":checkbox").switchButton("option",{checked:t})},n.prototype.onRender=function(){return this.$(":checkbox").switchButton({show_labels:!1}),this.$el.toggleClass("denied","forbidden"===this.model.get("status"))},n.prototype.context=function(){var t;return(t=n.__super__.context.apply(this,arguments)).fullName=t.name,t},n}(n(795))}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u,l,d;return l=n(40),i=n(137),c=n(405),u=n(391),a=n(377),d=n(442),e=n(795),s=n(387).WbFormMixin,function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="security/amount-limiter",e.prototype.events={"click .editable a.limit-amount":"showEditPanel","click .limiter-edit-panel .make-unlimited":"makeUnlimited","click .limiter-edit-panel .cancel":"cancelLimitEdit","click .ui-widget-overlay":"cancelLimitEdit","keypress .limiter-edit-panel input":"onKeyPress","keyup .limiter-edit-panel input":"onKeyUp","paste .limiter-edit-panel input":function(t){return a.sanitizePastedAmount(t)}},e.prototype.getValidationOptions=function(){return{errorElement:"p",errorPlacement:function(t,e){var n;return n=e.closest(".limiter-edit-panel"),o(".limiter-edit-panel-error",n).append(t)},showErrors:function(){var t,e;return this.defaultShowErrors(),e=0===this.numberOfInvalids(),o(".save",t).prop("disabled",!e),e?o(".limiter-edit-panel-error",t).slideUp():(t=o(this.currentForm),o(".limiter-edit-panel-error",t).slideDown())}}},e.prototype.initFormMixin=function(){return this.$form=this.$("form"),s.initFormMixin.apply(this,arguments)},e.prototype.showEditPanel=function(t){var e,n,i,r;return t.preventDefault(),e=this.$(".limiter-edit-panel"),n=o("input.limit-amount",e),(i=Math.floor(this.model.get("limit.value")))&&!isNaN(i)||(i=l.DEFAULT_LIMIT),n.val(i).focus().trigger("paste.mask"),e.addClass("visible"),(this.$overlay=u.createOverlay(e.parent())).click((r=this,function(){return r.cancelLimitEdit()})),n.blur().focus()},e.prototype.hideEditPanel=function(){return this.$(".limiter-edit-panel").removeClass("visible"),this.$overlay.remove()},e.prototype.makeUnlimited=function(t){return t.preventDefault(),this.rollback(),this.model.set("status","unlimited",{silent:!0}),this.submit()},e.prototype.beforeSubmit=function(){var t;return 0===(t=this.model.get("limit.value"))&&"limited"===this.model.get("status")?this.model.set("status","forbidden",{silent:!0}):t?this.model.set("status","limited",{silent:!0}):(this.model.savedValue.limit&&this.model.set("limit",this.model.savedValue.limit,{silent:!0}),this.model.set("status","unlimited",{silent:!0}))},e.prototype.submit=function(){return this.model.hasUnsavedChanges()?s.submit.apply(this,arguments):(this.processing=!1,void this.hideEditPanel())},e.prototype.submitAction=function(){var t;if(this.hideEditPanel(),(t=this.model.get("limit.value"))&&isNaN(t=i.parseFloat(t)))throw new Error("Invalid limit amount");switch(this.model.get("status")){case"forbidden":d.trackEvent("Limiters","set limiter status to forbidden");break;case"unlimited":d.trackEvent("Limiters","set limiter status to unlimited");break;default:d.trackEvent("Limiters","change limit amount")}return this.render(),e.__super__.submitAction.apply(this,arguments)},e.prototype.cancelLimitEdit=function(){return this.model.set(this.model.savedValue,{silent:!0}),this.hideEditPanel()},e.prototype.getBindings=function(){if(this.model.has("limit")&&!0===this.model.get("editable"))return{"limit.value":{selector:"input.limit-amount",converter:c.makeDecimalConverter(0)}}},e.prototype.onKeyUp=function(t){if(27===t.which)return this.cancelLimitEdit()},e.prototype.onKeyPress=function(t){if(!a.checkNumberSymbol(t))return t.preventDefault()},e.prototype.context=function(){var t;return(t=e.__super__.context.apply(this,arguments)).defaultValue=l.DEFAULT_LIMIT,null==t.name&&(t.name=t.periodName),t},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="history/history-filters",e.prototype.requiredOptions=["query","filters"],e.prototype.show=function(){return e.__super__.show.apply(this,arguments).then((t=this,function(){var e;return e=t.filters.map((function(e){var n,i;return n=o('<div class="filter"></div>'),t.$el.append(n),(i=new e({el:n,query:t.query})).show(),i.readyPromise.promise()})),o.when.apply(o,e)}));var t},e}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){var o,i,r,s;o=n(475).APPLICATION_HISTORY_ITEM_TYPES,r=n(797).ApplicationCertificateDetailsDialog,s=n(951).ApplicationServiceDetailsDialog,i=n(798).default,e.getApplicationDetailsDialogClass=function(t){switch(t){case o.INCOME_CERTIFICATE:return r;case o.CARD_ORDER:return i;default:return s}},e.showApplicationDetailsDialog=function(t){return new(e.getApplicationDetailsDialogClass(t.applicationType))(t).show()}},function(e,n,o){var i,r,s,a={}.hasOwnProperty;s=o(402),r=o(475).ApplicationHistoryItem,i=o(534).AbstractApplicationDetailsDialog,n.ApplicationServiceDetailsDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="history/application-service-details-dialog",n.prototype.initModel=function(){return this.model=new r({id:this.applicationId})},n.prototype.handleFailedLoad=function(e){return this.close(),window.app.clearMessages(),window.app.showErrorMessage(t("Failed to load application details")),e.errorHandled=!0},n.prototype.show=function(){var t,e;return(t=this.model.fetch()).catch((e=this,function(t){return e.handleFailedLoad(t)})),t.then(function(t){return function(){return t.render()}}(this)).then(function(t){return function(){return s.applyMasks(t.$el)}}(this)),n.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})},n}(i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(430),r=n(96),s=n(452),a=n(372),c=n(40),u=function(t){function e(e,n,o,r){var s=t.call(this,e)||this;s.formMeta=n,s.cardTypes=o;var a=s.model.get(i.Fields.CARD_TYPE+".id");return s.cardType=s.cardTypes.get(a),s.client=r,s}return o.__extends(e,t),e.prototype.getFieldValueFromCatalog=function(t,e,n){var o,i;void 0===e&&(e="name"),void 0===n&&(n=!1);var r=n?t:t+".id",s=this.model.get(r);return null===(i=null===(o=this.formMeta.catalogs[t])||void 0===o?void 0:o.get(s))||void 0===i?void 0:i.get(e)},e.prototype.getAccountField=function(){return o.__assign(o.__assign({},t.prototype.getAccountField.call(this)),{value:this.getFieldValueFromCatalog(i.Fields.ACCOUNT)})},e.prototype.getTariffField=function(){return o.__assign(o.__assign({},t.prototype.getTariffField.call(this)),{value:this.cardType.get(i.Fields.TARIFF)})},e.prototype.getCardTypeField=function(){return o.__assign(o.__assign({},t.prototype.getCardTypeField.call(this)),{value:this.getFieldValueFromCatalog(i.Fields.CARD_TYPE)})},e.prototype.getCardExpiryField=function(){var e=this.cardType.get(i.Fields.MAX_PERIOD);return o.__assign(o.__assign({},t.prototype.getCardExpiryField.call(this)),{value:e&&r().add(r.duration(e)).format("MM/YY")})},e.prototype.getCurrencyField=function(){return o.__assign(o.__assign({},t.prototype.getCurrencyField.call(this)),{value:this.getFieldValueFromCatalog(i.Fields.CURRENCY,void 0,!0)})},e.prototype.getFeeValue=function(t){var e=c.DEFAULT_CURRENCY,n=this.cardType.get(t);return e&&n?a.filters.money({currency:e,value:n}):""},e.prototype.getIssuingFeeField=function(){var e=this.cardType.get("isDigital"),n=t.prototype.getIssuingFeeField.call(this);return e&&(n.value=""),n},e.prototype.getPaymentSystemField=function(){return o.__assign(o.__assign({},t.prototype.getPaymentSystemField.call(this)),{value:this.cardType.get(i.Fields.PAYMENT_SYSTEM)})},e.prototype.getDeliveryBranchNameField=function(){var e=this.formMeta.getField({id:i.Fields.BRANCH}),n=null==e?void 0:e.resolveValue(null,this.model);return o.__assign(o.__assign({},t.prototype.getDeliveryBranchNameField.call(this)),{value:(null==n?void 0:n.get("name"))||""})},e.prototype.getCardholderNameField=function(){return o.__assign(o.__assign({},t.prototype.getCardholderNameField.call(this)),{value:this.client.getEmbossingFullName()})},e}(s.default);e.default=u},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c;return n(451),r=n(954),e=n(956).HistoryBonusChartView,a=n(374).TemplateView,c=n(40),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="history/history-analytics",n.prototype.requiredOptions=["history"],n.prototype.events={"click .label":"applyFilter","click .reset-filter":"resetFilter","click .toggle-bonus-analytics":"toggleBonusAnalytics"},n.prototype.applyFilter=function(t){var e;if(e=o(t.currentTarget).data("group")){if(this.history.query.get("operationGroup")!==e)return this.history.query.setFilters({operationGroup:e});this.history.query.resetFilter("operationGroup")}},n.prototype.resetFilter=function(t){return t.preventDefault(),this.history.query.get("category")?this.history.query.resetFilter("category"):this.history.query.resetFilter("operationGroup")},n.prototype.toggleBonusAnalytics=function(t){return t.preventDefault(),this.history.query.setFilters({bonusOperations:o(t.currentTarget).data("mode")})},n.prototype.render=function(){var t,e;return t=window.OW.historyAnalyticsConfig.isAnalyzableContract,this.groupedOperations=this.history.asGroups(),i.isFunction(t)&&i.each(this.groupedOperations,(e=this,function(n,o){return e.groupedOperations[o]=i.filter(n,(function(e){var n,o;return o=e.get("contractId"),(n=window.app.data.contracts.history.get(o))&&t(n)}))})),n.__super__.render.apply(this,arguments)},n.prototype.onRender=function(){if(this.history.length)return this.history.query.get("bonusOperations")?new e({el:this.$(".bonus-chart-block"),history:this.history,operations:this.history.getBonusOperations()}).show():(this.$(".bottom-panel").multiAccordion({childSelector:".info-block"}),new r({el:this.$(".chart-block"),history:this.history,operations:this.groupedOperations.expenses||[]}).show())},n.prototype.getSummary=function(t,e){var n;if(null==e&&(e=!1),"auth"===t||"online"===t||"cashOut"===t||"spent"===t)switch(n=this.groupedOperations.expenses||[],t){case"auth":n=n.filter((function(t){return t.get("isAuth")}));break;case"online":n=n.filter((function(t){return t.get("isOnline")}));break;case"cashOut":n=n.filter((function(t){return t.get("merchantCategory")===c.CASH_OUT_CATEGORY}))}else n=this.groupedOperations[t]||[];if(n&&(n.length||e))return{summary:{value:n.reduce((function(t,e){return t+Math.abs(parseFloat(e.get("analyzableAmount.value")))}),0),currency:this.history.getBaseCurrency()}}},n.prototype.getAnotherCurrencySummary=function(t){var e,n,o,r,s;if(o=this.groupedOperations[t],e=this.history.getBaseCurrency(),delete(o=i.groupBy(o,(function(t){return t.get("analyzableAmount.currency")})))[e],i.size(o)>0){for(n in s={currencies:[],operationsQuantity:0},o)r=o[n],s.operationsQuantity+=r.length,s.currencies.push({value:r.reduce((function(t,e){return t+Math.abs(parseFloat(e.get("analyzableAmount.value")))}),0),currency:n});return s}},n.prototype.getBonusSummary=function(t){var e,n;if(e=function(e){var n;return!!(n=e.getBonusAmount())&&(t&&n>0||!t&&n<0)},(n=this.history.filter(e)).length)return{summary:{value:n.reduce((function(t,e){return t+Math.abs(e.getBonusAmount())}),0),currency:this.history.getBaseCurrency()}}},n.prototype.getCashbackSummary=function(){var t,e;if(t=function(t){return t.isOperationWithCashback()},(e=this.history.filter(t)).length)return{summary:{value:e.reduce((function(t,e){return t+Math.abs(e.getCashbackAmount())}),0),currency:this.history.getBaseCurrency()}}},n.prototype.context=function(){var t,e,o;return e=this.history.query.get("category"),o=this.history.query.get("operationGroup"),(t={}).income=this.getSummary("income",!0),t.anotherCurrencyIncome=this.getAnotherCurrencySummary("anotherCurrencyIncome"),t.spent=this.getSummary("spent",!0),t.cashOut=this.getSummary("cashOut"),t.online=this.getSummary("online"),t.auth=this.getSummary("auth"),t.anotherCurrency=this.getAnotherCurrencySummary("anotherCurrency"),t.bonusIncome=this.getBonusSummary(!0),t.bonusSpent=this.getBonusSummary(!1),t.cashback=this.getCashbackSummary(),i.extend(n.__super__.context.apply(this,arguments),{showAnalytics:this.history.length>0,hasFilter:!(!e&&!o),categoryFilter:e,operationGroupFilter:o,categories:t,showExpensesDetails:!!(t.cashOut||t.online||t.auth),bonusAnalyticsAvailable:window.OW.features.BONUS_PIECHART,bonusMode:this.history.query.get("bonusOperations")})},n}(a)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s;return n=o(372),o(40),s=o(391),function(e){function c(){return c.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(c,e),c.prototype.template="history/history-chart",c.prototype.requiredOptions=["history","operations"],c.prototype.chartSize=240,c.prototype.chartThickness=25,c.prototype.chartSelectedThickness=36,c.prototype.chartSectorExtension="inward",c.prototype.initialize=function(){var t,e,n,o;for(t in c.__super__.initialize.apply(this,arguments),this.categories=[],this.summary=0,o=[],n=i.groupBy(this.operations,(function(t){return t.get("merchantCategory")})))e={amount:n[t].reduce((function(t,e){return t+Math.abs(parseFloat(e.get("analyzableAmount.value")))}),0),description:t},this.categories.push(e),o.push(this.summary+=e.amount);return o},c.prototype.handleChartClick=function(t){var e;if(t){if(e=t.additionalData.description,this.history.query.get("category")!==e)return this.history.query.setFilters({category:e});this.history.query.resetFilter("category")}},c.prototype.getHighlightColor=function(t){var e,n;return n=Math.min(t[2]+10,100),e=i.isUndefined(t[3])?1:t[3],[t[0],t[1],n,e]},c.prototype.renderTooltip=function(t){var e,o,i,a,c,u;return t?(u=(i={value:t.point.value,currency:this.history.getBaseCurrency()}).value/this.summary*100,(a=t.point.label)!==this.history.query.get("category")?(c=s.getOperationCategoryName(a),(o=(e=r(t.chart.canvas).closest(".chart-block")).find(".tooltip")).attr("data-category",a),o.children(".percentage").html(n.filters.percentage(u)),o.children(".label").text(c),o.children(".amount").html(n.filters.money(i)),e.find(".summary").addClass("hidden"),o.removeClass("hidden")):void 0):(this.$(".tooltip").addClass("hidden"),void this.$(".summary").removeClass("hidden"))},c.prototype.getChartData=function(){var t,e,n,o,i,r,a,c,u,l,d;if(!this.categories.length)return[];for(r=this.history.query.get("category"),d=this.categories.sort((function(t,e){return e.amount-t.amount})),i=[],n=window.OW.historyAnalyticsConfig.categories,c=a=0,u=d.length;a<u;c=++a)o=(null!=(l=n[(e=d[c]).description])?l.color:void 0)||n.default.color,r&&e.description!==r&&(o=[o[0],o[1],o[2],.5]),(t=e).isSelected=e.description===r,i.push({value:e.amount,label:e.description,additionalData:t,color:s.toHSLA(o),highlight:s.toHSLA(this.getHighlightColor(o))});return i},c.prototype.renderChart=function(t){var e,n,i,r,s,a;if(e=o(802),o(955),i=this.getChartData(),this.$el.toggleClass("empty",!i.length),i.length)return r=(a=function(t){return parseFloat((100*t).toFixed(2))})((this.chartSize-2*this.chartThickness)/this.chartSize),s=a((this.chartSize-2*this.chartSelectedThickness)/this.chartSize),n={size:this.chartSize,customTooltips:this.renderTooltip.bind(this),clickHandler:this.handleChartClick.bind(this),segmentStrokeColor:"rgba(0,0,0,0)",segmentShowStroke:!1,animationEasing:"linear",animationSteps:10,animation:!0,anumateRotate:!1,animateScale:!0,selectedSectorDirection:this.chartSectorExtension,percentageInnerCutout:r,selectedItemPercentageExtension:r-s},new e(t.get(0).getContext("2d")).OwDoughnut(i,n)},c.prototype.onRender=function(){return this.renderChart(this.$(".chart-area"))},c.prototype.getSummary=function(){var e,n,o,r,a,c;return(e=this.history.query.get("category"))&&(n=i.findWhere(this.categories,{description:e})),n?(c=n.amount,o=s.getOperationCategoryName(e),r=c/this.summary*100):(c=this.summary,o=t("Offline [operations category]")),a={summary:{value:c,currency:this.history.getBaseCurrency()},label:o},r&&(a.percentage=r),a},c.prototype.context=function(){var e;return(e=i.extend(c.__super__.context.apply(this,arguments),this.getSummary(),s.getAnalyticsColorsContext())).category=this.history.query.get("category"),e.hasData=!!e.summary.value,e.hasData||(e.label=t("No offline operations")),e},c}(o(374).TemplateView)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){(function(o){var i;void 0===(i=function(t){var e,i;return e=n(802),i=e.helpers,e.types.Doughnut.extend({name:"OwDoughnut",initialize:function(t){var n,r;return this.segments=[],n=this.options.size||i.min([this.chart.width,this.chart.height]),this.outerRadius=(n-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,(r=this,function(t){var e;return e="mouseout"!==t.type?r.getSegmentsAtEvent(t):[],i.each(r.segments,(function(t){return t.restore(["fillColor"])})),i.each(e,(function(t){return t.fillColor=t.highlightColor})),r.showTooltip(e),r.chart.canvas.style.cursor=e.length?"pointer":"auto"})),this.calculateTotal(t),i.each(t,function(t){return function(e,n){return t.addData(e,n,!0)}}(this)),this.options.clickHandler&&o(this.chart.canvas).on("click.doughnut",function(t){return function(e){var n;return n=t.getSegmentsAtEvent(e),t.options.clickHandler(n[0],t)}}(this)),this.render()},addData:function(t,e,n){var o;if(o=e||this.segments.length,this.segments.splice(o,0,new this.SegmentArc({value:t.value,outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.calculateCircumference(t.value),label:t.label,additionalData:t.additionalData})),!n)return this.reflow(),this.update()},draw:function(t){var e,n;return e=t||1,this.clear(),i.each(this.segments,(n=this,function(t,o){var i,r,s,a,c;if(r=(null!=(a=t.additionalData)?a.isSelected:void 0)?n.options.selectedItemPercentageExtension:0,s=n.outerRadius,i=n.outerRadius/100*n.options.percentageInnerCutout,"inward"===n.options.selectedSectorDirection?i-=n.outerRadius*(r/100):s+=n.outerRadius*(r/100),t.transition({circumference:n.calculateCircumference(t.value),outerRadius:s,innerRadius:i},(null!=(c=t.additionalData)?c.isSelected:void 0)?e:1),t.endAngle=t.startAngle+t.circumference,t.draw(),0===o&&(t.startAngle=1.5*Math.PI),o<n.segments.length-1)return n.segments[o+1].startAngle=t.endAngle}))},transformValue:function(t){return t},calculateTotal:function(t){return this.total=0,i.each(t,(e=this,function(t){return e.total+=e.transformValue(t.value)}));var e},calculateCircumference:function(t){return 2*Math.PI*(this.transformValue(t)/this.total)},showTooltip:function(t,n){var o,r,s,a,c,u,l,d;if(void 0===this.activeElements&&(this.activeElements=[]),function(t){var e,n;return e=!1,t.length!==this.activeElements.length?e=!0:(i.each(t,(n=this,function(t,o){if(t!==n.activeElements[o])return e=!0})),e)}.call(this,t)||n){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(a=(u=this.datasets).length-1;a>=0&&(o=(s=u[a]).points||s.bars||s.segments,-1===(r=indexOf(o,t[0])));a+=-1);d=[],l=[],c=(p=this,function(t){var e,n,o,s,a,c,u;return e=[],s=[],u=[],i.each(p.datasets,(function(t){var n;if((n=t.points||t.bars||t.segments)[r]&&n[r].hasValue())return e.push(n[r])})),i.each(e,(function(t){return s.push(t.x),u.push(t.y),d.push(i.template(p.options.multiTooltipTemplate,t)),l.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})})),c=min(u),a=max(u),o=min(s),n=max(s),{x:o(p.chart.width/2)?o:n,y:(c+a)/2}})(r),new e.MultiTooltip({x:c.x,y:c.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:d,legendColors:l,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else i.each(t,function(t){return function(n){var o;return o=n.tooltipPosition(),new e.Tooltip({x:Math.round(o.x),y:Math.round(o.y),xPadding:t.options.tooltipXPadding,yPadding:t.options.tooltipYPadding,fillColor:t.options.tooltipFillColor,textColor:t.options.tooltipFontColor,fontFamily:t.options.tooltipFontFamily,fontStyle:t.options.tooltipFontStyle,fontSize:t.options.tooltipFontSize,caretHeight:t.options.tooltipCaretSize,cornerRadius:t.options.tooltipCornerRadius,text:i.template(t.options.tooltipTemplate,n),chart:t.chart,custom:t.options.customTooltips,point:n}).draw()}}(this));var p;return this}}})}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u;return o(372),u=o(40),c=o(391),n=o(374).TemplateView,(s={}).HistoryBonusChartView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="history/history-bonus-chart",n.prototype.requiredOptions=["history","operations"],n.prototype.events={"click .bonus-chart-section":"toggleFilter"},n.prototype.initialize=function(){var t,e,o,r,s;for(t in n.__super__.initialize.apply(this,arguments),this.categories=[],this.summary=0,this.bonusCurrency=(null!=(r=this.operations[0])?r.get("fees.bonus.currency"):void 0)||u.DEFAULT_CURRENCY,s=[],o=i.groupBy(this.operations,(function(t){return"expenses"===t.getGroup()?t.get("merchantCategory"):"notExpenses"})))e={amount:o[t].reduce((function(t,e){return t+Math.abs(e.getBonusAmount())}),0),description:t},this.categories.push(e),s.push(this.summary+=e.amount);return s},n.prototype.toggleFilter=function(t){var e;if(e=r(t.currentTarget).data("filter"))if(e="notExpenses"===e?{operationGroup:e}:{category:e},this.history.query.get("category")!==e.category){if(this.history.query.get("operationGroup")!==e.operationGroup)return this.history.query.setFilters(e);this.history.query.resetFilter("operationGroup")}else this.history.query.resetFilter("category")},n.prototype.getChartData=function(){var e,n;return e=this.history.query.get("category")||this.history.query.get("operationGroup"),this.categories.sort((function(t,e){return e.amount-t.amount})).map((n=this,function(o){return{amount:{value:o.amount,currency:n.bonusCurrency},category:o.description,label:"notExpenses"===o.description?t("Other [operations category]"):c.getOperationCategoryName(o.description),percentage:(o.amount/n.summary*100).toFixed(2),isSelected:o.description===e,filteredOut:!(!e||o.description===e)}}))},n.prototype.context=function(){var t;return t={value:this.summary,currency:this.bonusCurrency},i.extend(n.__super__.context.apply(this,arguments),{categories:this.getChartData(),summary:t},c.getAnalyticsColorsContext())},n}(n),s}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i,r){var s;void 0===(s=function(e){var n,s,a;return a=o(40),s=o(98),n=o(472).ContactInfoCountries,["required","minlength","maxlength"],{ContactInfoFormMixin:{defaultErrorMessage:t("Failed to save contact information"),loadSettingsAndData:function(){return i.when(this.loadSettings().fail((function(){throw new Error("Failed to load contact info settings")})),this.model.fetch()).done((t=this,function(){return t.checkSettings(),t.initSettings(),i.when.apply(i,r.invoke(t.collections,"fetchIfEmpty"))}));var t},loadSettings:function(){return s(a.API_URL+"/conf/contactInfo.js").done((function(){var t;if(!(t=window.OW.contactInfoConfig))throw new Error("client/contactInfo.js must define OW.contactInfoConfig");return t}))},overrideSection:function(t){var e,n,o,i,s,a;for(a in n=r.find(this.sections,(function(e){return e.id===t})),e=r.find(this.sections,(function(t){return t.id===n.optionalOverrideOf})),i=r.object(e.fields.map((function(t){return[t.type,t.id]}))),o=[],s=r.object(n.fields.map((function(t){return[t.type,t.id]}))))s[a],o.push(this.model.set(s[a],this.model.get(i[a])));return o},compareSections:function(t,e){var n,o,i,s,a;for(a in n=r.object(t.fields.map((function(t){return[t.type,t.id]}))),i=r.object(e.fields.map((function(t){return[t.type,t.id]})))){if(s=i[a],!(o=n[a]))throw new Error("no corresponding field in section with id: "+t.id);if(this.model.get(o)!==this.model.get(s))return!1}return!0},initOverridenSectionsState:function(){var t,e,n,o,i,r,s,a,c,u,l;for(t=[],e=0,o=(c=this.sections).length;e<o;e++)if((l=c[e]).optionalOverrideOf){if(s=l.optionalOverrideOf,0===(r=this.sections.filter((function(t){return t.id===s}))).length)throw new Error("no overridable section with id: "+s);if(r.length>1)throw new Error("more than 1 section has id: "+s);t.push([r[0],l])}if(t.length){for(u=[],n=0,i=t.length;n<i;n++)a=t[n],u.push(a[1].isInherited=this.compareSections(a[0],a[1]));return u}},initReadOnlySections:function(){var t,e,n,o,i;for(o=[],t=0,e=(n=this.sections).length;t<e;t++)(i=n[t]).readOnly&&o.push(i.isEmpty=!r.any(i.fields,function(t){return function(e){return t.model.get(e.id)}}(this)));return o},checkSettings:function(){var t,e,n,o,i,r,s;if(!window.OW.contactInfoConfig.sections)throw new Error("sections are not defined in conf/contactInfo.js");if(!window.OW.contactInfoConfig.fieldTypes)throw new Error("field types are not defined in conf/contactInfo.js");for(r=[],n=0,o=(i=window.OW.contactInfoConfig.sections).length;n<o;n++){if(!(s=i[n]).fields||!s.fields.length)throw new Error("fields are not defined for section: "+s.title);r.push(function(){var n,o,i,r;for(r=[],n=0,o=(i=s.fields).length;n<o;n++){if(t=i[n],!(e=window.OW.contactInfoConfig.fieldTypes[t.type]))throw new Error("field type not found: "+t.type);if(e.collection){if(!e.collectionType)throw new Error("collection type is not defined for: "+t.id);if("country"!==e.collectionType)throw new Error("unsupported collection type: "+e.collectionType)}null==e.validationRules&&(e.validationRules={}),e.validationRules.hasOwnProperty("required")?(e.required=e.validationRules.required,delete e.validationRules.required,r.push(console.warn("'required' property inside validation rules is obsolete, field: "+t.id))):r.push(void 0)}return r}())}return r},initSettings:function(){var t,e,o,r,s,a,c,u,l,d,p,h,f;for(this.sections=i.extend(!0,[],window.OW.contactInfoConfig.sections),this.collections={},t={},c=0,l=(p=this.sections).length;c<l;c++)for(s=u=0,d=(h=(f=p[c]).fields).length;u<d;s=++u){if(e=h[s],(o=i.extend(!0,{},window.OW.contactInfoConfig.fieldTypes[e.type],e)).validationAttributes=i.map(o.validationRules,(function(t,e){return{name:e,value:t}})),r="text",(a=o.inputType||"text").match(/^phone/i)||"number"===a||"pin"===a||"cardNumber"===a?r="tel":"email"===a?(r="email",o.autocomplete=!0):"password"===a&&(r=a),o.htmlInputType=r,o.inputType=a,o.collection)switch(o.collectionType){case"country":o.items=this.collections[o.collectionType]||(this.collections[o.collectionType]=new n)}t[o.id]='[name="'+o.id+'"]',f.fields[s]=o}return this.initOverridenSectionsState(),this.initReadOnlySections(),this.bindings=t},getValidationOptions:function(){var t,e,n,o,i,r,s,a;for(a={},e=0,o=(r=this.sections).length;e<o;e++)for(n=0,i=(s=r[e].fields).length;n<i;n++)a[(t=s[n]).id]=t.validationRules,t.required&&(a[t.id].required=!0);return{rules:a}},getSectionsContext:function(){var t,e,n,o,i,s,a,c,u,l,d;for(l=[],e=0,o=(s=this.sections).length;e<o;e++){for(d=s[e],(u=r.omit(d,"fields")).fields=[],n=0,i=(a=d.fields).length;n<i;n++)(t=a[n]).items?((c=r.omit(t,"items")).items=t.items.viewContext(),u.fields.push(c)):u.fields.push(t);l.push(u)}return l}}}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d,p;return p=n(40),u=n(374).TemplateView,d=n(959),a=d.OpenTransactionWindowDialog,e=d.ActivateTransactionWindowDialog,r=d.DeactivateTransactionWindowDialog,l=n(136),c=WB.contextPath+"/services/",{AdditionalServicesView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="contracts/subscriptions",n.prototype.events={"click .transaction-window-action":"activateTransactionWindow"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.on("subscriptions.updated",(t=this,function(){return t.refresh()}));var t},n.prototype.show=function(){return this.showLoadingIndicator(),this.model.fetchSubscriptions().then((t=this,function(){return t.render()})).fail(function(t){return function(e){return l.error("Failed to load subscriptions",e),t.$el.hide()}}(this));var t},n.prototype.refresh=function(){return this.showLoadingIndicator(),this.model.fetch().then((t=this,function(){return t.model.fetchSubscriptions().then((function(){return t.render()}))}));var t},n.prototype.activateTransactionWindow=function(t){var n,i,s;if(p.USE_REST_TRANSACTION_WINDOW){switch(s={contractId:(n=o(t.target)).data("contract-id"),parentPage:this},n.data("action")){case"activate":i=new e(s);break;case"deactivate":i=new r(s);break;case"open":i=new a(s)}if(i)return t.preventDefault(),window.app.clearMessages(),i.show()}},n.prototype.context=function(){return i.extend(this.model.viewContext(),{serviceUrlPrefix:c,subscriptions:this.model.getSubscriptionsContext()})},n}(u)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p;return p=o(40),n=o(420),s=o(398).FormMeta,u=o(387).WbFormMixin,l=o(394).WbGenericFormMixin,d={},c=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.id="transaction-window-dialog",o.prototype.requiredOptions=["contractId"],o.prototype.mixins=[u],o.prototype.dialogTitle="",o.prototype.actionButtonText="",o.prototype.invalidStateMessage="",o.prototype.allowImplicitClose=!1,o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.contract=new n({id:this.options.contractId})},o.prototype.show=function(){var t,e;return p.USE_REST_TRANSACTION_WINDOW||this.close(),t=new i.Deferred,this.contract.fetch().then((e=this,function(){if(e.model=e.contract.getTransactionWindow(),!e.model)throw new Error("Transaction is not available for the contract");return e.model.fetchIfEmpty().done((function(){return t.resolve()}))})),t.done(function(t){return function(){return o.__super__.show.apply(t,arguments)}}(this))},o.prototype.dialogOptions=function(){return{title:this.dialogTitle,buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.showLoadingIndicator(),e.close()})},{text:this.actionButtonText,class:"wb-button proceed",click:function(t){return function(e){if(!t.processing)return t.$form.valid()?(t.applyLoadingStateToButton(i(e.currentTarget)),t.$form.submit()):void 0}}(this)}]};var e},o.prototype.beforeSubmit=function(){return this.close()},o.prototype.onAddAuthCancel=function(){return this.close()},o.prototype.onSubmitSuccess=function(){return this.close(),this.options.parentPage.trigger("subscriptions.updated")},o.prototype.onInvalidState=function(){return this.close(),window.app.clearMessages(),window.app.showSuccessMessage(this.invalidStateMessage),this.options.parentPage.trigger("subscriptions.updated")},o}(o(386)),d.ActivateTransactionWindowDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/activate-transaction-window-dialog",n.prototype.dialogTitle=t("Activate Transaction Window for extra security on this card's transactions"),n.prototype.actionButtonText=t("Enable protection"),n.prototype.invalidStateMessage=t("Card protection already activated"),n.prototype.id="activate-transaction-window-dialog",n.prototype.isStateValid=function(){return!this.model.get("isActive")},n.prototype.onRender=function(){return this.isStateValid()?(this.initForm(),this.ensureAlignment()):this.onInvalidState()},n.prototype.submitAction=function(){return this.model.save()},n.prototype.context=function(){return r.extend(n.__super__.context.apply(this,arguments),{contract:this.contract.viewContext()})},n}(c),d.DeactivateTransactionWindowDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/deactivate-transaction-window-dialog",n.prototype.dialogTitle=t("Deactivate Transaction Window"),n.prototype.actionButtonText=t("Disable protection"),n.prototype.invalidStateMessage=t("Card protection already disabled"),n.prototype.id="deactivate-transaction-window-dialog",n.prototype.isStateValid=function(){return!!this.model.get("isActive")},n.prototype.submitAction=function(t){return this.model.destroy(t)},n}(d.ActivateTransactionWindowDialog),d.OpenTransactionWindowDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/open-transaction-window-dialog",n.prototype.dialogTitle=t("Allow operations"),n.prototype.actionButtonText=t("Continue"),n.prototype.id="open-transaction-window-dialog",n.prototype.mixins=[l],n.prototype.formMetaConfig={name:t("Allow operations"),fields:{durationMinutes:{attr:"durationMinutes",name:t("Activation period"),dataSource:{values:[{id:"5",name:t("5 minutes")},{id:"10",name:t("10 minutes")},{id:"30",name:t("Half an hour")},{id:"60",name:t("An hour")}]}},operationsAllowed:{name:t("Operations allowed"),inputType:"number",defaultValue:1},amountAllowed:{attr:"amountAllowed.value",name:t("Maximum amount"),inputType:"amount",role:"amount.value",placeholder:t("no limit"),optional:!0,hasClear:!0,clearButtonText:t("remove limit")},currency:{attr:"amountAllowed.currency",role:"amount.currency",value:null,editable:!1}}},n.prototype.initialize=function(t){return n.__super__.initialize.apply(this,arguments),this.formMeta=new s(this.formMetaConfig)},n.prototype.onRender=function(){var t;return t=this.contract.get("currency"),this.formMeta.set("fields.currency.value",t),this.model.set(this.formMeta.getModelDefaults()),this.initGenericForm(),this.ensureAlignment()},n.prototype.context=function(){return this.formMeta.viewContext({model:this.model})},n}(c),d}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u,l;return l=o(405),c=o(374).TemplateView,n=o(429).ContractSelectView,a=o(395).DepositFlowContracts,u=o(387).WbFormMixin,r=o(450).Deposit,{OnlineDepositManagementView:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="contracts/online-deposit-management",o.prototype.mixins=[u],o.prototype.requiredOptions=["contract"],o.prototype.debounceDelay=500,o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new r(this.contract.viewContext()),this.model.trackSavedValue(),this.targetContracts=new a(null,{currency:this.model.get("currency")}),this.addDepositListener(),this.initForm()},o.prototype.getBindings=function(){var t;return t={"deposit.target.id":{selector:"[name=target]",converter:l.defaultConverter}},this.model.get("deposit.autoProlongationAllowed")&&(t["deposit.autoProlongation"]={selector:"[name=autoProlongation]",converter:l.makeFlipSwitchConverter({true:"true",false:"false"})}),t},o.prototype.onRender=function(){var e,o;return this.$autoProlongationCb=this.$("[name=autoProlongation]"),this.once("render.complete",(o=this,function(){return o.$autoProlongationCb.switchButton("destroy"),o.$autoProlongationCb.prop("disabled",0===o.targetContracts.length),o.$autoProlongationCb.switchButton({show_labels:!1})})),this.$autoProlongationCb.switchButton({show_labels:!1}),e=this.model.get("reinvestInterest")?t("Target account for transfer of funds after the closing of the deposit"):t("Target account for accrual of interest and transfer of funds after the closing of the deposit"),this.contractsList=new n({el:this.$(".contract-select"),showAllCardsItem:!1,inputName:"target",label:e,collection:this.targetContracts}),this.contractsList.on("ready",function(t){return function(){return t.trigger("render.complete")}}(this)),this.contractsList.show(),!1},o.prototype.addDepositListener=function(){return this.listenTo(this.model,"change:deposit",i.debounce((t=this,function(){return t.changeDepositSettings()}),this.debounceDelay));var t},o.prototype.changeDepositSettings=function(){if(this.model.get("deposit.target.id"))return this.model.off("change:deposit"),window.app.clearMessages(),this.$form.submit()},o.prototype.onAddAuthCancel=function(){return this.model.set("deposit",this.model.savedValue.deposit),this.$autoProlongationCb.switchButton("option",{checked:this.model.get("deposit.autoProlongation")}),this.addDepositListener()},o.prototype.onSubmitSuccess=function(){return window.app.data.contracts.dashboard.resetCache(),window.app.showSuccessMessage(t("Deposit settings has been updated")),this.addDepositListener()},o.prototype.context=function(){return this.model.viewContext()},o}(c)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(e,n,o){(function(n){var i,r,s,a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;o(40),s=o(387).WbFormMixin,i=o(386),r=o(962).StatementSubscriptionModel,(a={}).StatementSubscriptionDialogAbstract=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.id="statement-subscription-dialog",n.prototype.template="contracts/statement-subscription-dialog",n.prototype.requiredOptions=["contractId"],n.prototype.mixins=[s],n.prototype.bindings={email:"[name=email]"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model=new r({contractId:this.options.contractId}),this.model.trackSavedValue(),this.initForm()},n.prototype.dialogOptions=function(){return{title:t("Monthly Statement [title]"),width:490}},n.prototype.fetchData=function(){var t;return null!=(t=this.model)?t.fetch():void 0},n.prototype.show=function(){return this.fetchData().then((e=this,function(){return n.__super__.show.apply(e,arguments)})).fail(function(e){return function(n){return n.errorHandled=!0,e.clearMessages(),window.app.showErrorMessage(t("statementSubscription.message.loadFailed"))}}(this));var e},n.prototype.context=function(){return{email:this.model.get("email"),isActive:this.model.get("isActive"),descriptionForDisabled:t("statementSubscription.info.disabled"),descriptionForEnabled:t("statementSubscription.info.enabled")}},n}(i),a.StatementSubscriptionEnableDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.setSubmitEnableOptions=function(){return this.submitAction=function(){return this.model.enable()},this.onSubmitSuccess=function(){return this.close(),this.trigger("statementSubscriptionChanged"),window.app.showFlashMessage(t("statementSubscription.message.subscribed"))}},o.prototype.dialogOptions=function(){return n.extend(o.__super__.dialogOptions.apply(this,arguments),{buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){return e.close()})},{text:t("Enable"),class:"wb-button proceed",click:function(t){return function(){if(t.setSubmitEnableOptions(),t.$form.valid())return t.$form.submit()}}(this)}]});var e},o}(a.StatementSubscriptionDialogAbstract),a.StatementSubscriptionEditDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.setSubmitDestroyOptions=function(){return this.submitAction=function(){return this.model.destroy()},this.onSubmitSuccess=function(){return this.close(),window.app.showFlashMessage(t("statementSubscription.message.unsubscribed")),this.trigger("statementSubscriptionChanged")}},o.prototype.setSubmitChangeOptions=function(){return this.submitAction=function(){return this.model.setEmail()},this.onSubmitSuccess=function(){return this.close(),window.app.showFlashMessage(t("statementSubscription.message.updated"))}},o.prototype.dialogOptions=function(){return n.extend(o.__super__.dialogOptions.apply(this,arguments),{buttons:[{text:t("Disable"),class:"link-button disable",click:(e=this,function(){return e.setSubmitDestroyOptions(),e.$form.submit()})},{text:t("Cancel"),class:"link-button cancel",click:function(t){return function(){return t.close()}}(this)},{text:t("Save"),class:"wb-button proceed",click:function(t){return function(e){if(t.setSubmitChangeOptions(),t.$form.valid())return t.$form.submit()}}(this)}]});var e},o}(a.StatementSubscriptionDialogAbstract),e.exports=a}).call(this,o(11))},function(t,e,n){(function(e){var o,i,r,s={}.hasOwnProperty;r=n(40),o=n(375).BaseModel,(i={}).StatementSubscriptionModel=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=function(){return r.API_URL+"/contracts/"+this.get("contractId")+"/subscriptions/statement"},n.prototype.initialize=function(t,e){if(n.__super__.initialize.apply(this,arguments),!this.get("contractId"))throw new Error("contractId is required")},n.prototype.destroy=function(t){return null==t&&(t={}),this.isNew=function(){return!1},t.data=JSON.stringify(this.toJSON()),n.__super__.destroy.call(this,t)},n.prototype.isAuthConfirmationModel=function(){return Boolean(this.get("confirmation"))},n.prototype.setEmail=function(){var t;return this.hasUnsavedChanges()?(t={path:"/email",op:"replace",value:this.get("email")},this.isAuthConfirmationModel()&&(t.confirmation=this.get("confirmation")),this.sendPatch([t])):e.Deferred().resolve()},n.prototype.enable=function(){return this.save()},n}(o),t.exports=i}).call(this,n(14))},function(e,n,o){(function(n){var i,r,s,a,c,u=function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty;c={},r=o(386),a=o(394).WbGenericFormMixin,i=o(964).ContractAction,s=o(398).FormMeta,c.BLOCK_REASONS=[{id:"",name:t("Select reason")},{id:"stolen",name:t("Stolen")},{id:"lost",name:t("Lost")},{id:"other",name:t("Other")}],c.FORM_METAS={block:{name:t("Block card"),fields:{reason:{id:"reason",attr:"reason",name:t("Reason"),optional:!1,dataSource:{values:c.BLOCK_REASONS}},description:{id:"description",name:t("Comment"),input:"textarea",optional:!0,htmlAttrs:{placeholder:t("Leave a comment, might be empty")}}}},unblock:{name:t("Unblock card"),fields:{description:{id:"description",name:t("Comment"),input:"textarea",optional:!0,htmlAttrs:{placeholder:t("Leave a comment, might be empty")}}}}},c.MESSAGES={block:{action:t("Block"),success:t("Card has been blocked"),error:t("Failed to block card. Please contract customer support")},unblock:{action:t("Unblock"),success:t("Card has been unblocked"),error:t("Failed to unblock card. Please contract customer support")}},c.AbstractBlockingActionDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return u(o,e),o.prototype.id="blocking-action-dialog",o.prototype.mixins=[a],o.prototype.requiredOptions=["contract"],o.prototype.initialize=function(){if(o.__super__.initialize.apply(this,arguments),!this.actionId)throw new Error("actionId is not defined, check implementation of AbstractBlockingActionDialog");return this.model=new i({actionId:this.actionId,contractId:this.contract.id}),this.formMeta=new s(c.FORM_METAS[this.actionId]),this.messages=c.MESSAGES[this.actionId],this.defaultErrorMessage=this.messages.error||this.defaultErrorMessage},o.prototype.onRender=function(){return this.initGenericForm(),o.__super__.onRender.apply(this,arguments)},o.prototype.dialogOptions=function(){return{title:this.formMeta.get("name"),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:this.messages.action,class:"wb-button proceed",click:function(t){return function(e){if(!t.processing&&t.$form.valid())return t.applyLoadingStateToButton(n(e.currentTarget)),t.$form.submit()}}(this)}]};var e},o.prototype.onSubmitError=function(){return this.close(),a.onSubmitError.apply(this,arguments)},o.prototype.onSubmitSuccess=function(){var t;return this.close(),"function"==typeof(t=this.options).onSuccess?t.onSuccess(this.messages.success):void 0},o}(r),c.ContractBlockDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.actionId="block",e.prototype.template="contracts/actions/contract-block-dialog",e}(c.AbstractBlockingActionDialog),c.ContractUnblockDialog=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.actionId="unblock",e.prototype.template="contracts/actions/contract-unblock-dialog",e}(c.AbstractBlockingActionDialog),e.exports=c}).call(this,o(14))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e,o,r;return r=n(40),e=n(375).BaseModel,n(398).FormMeta,(o={}).ContractAction=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.initialize=function(t){if(!t.contractId||!t.actionId)throw new Error("contractId and actionId are required, ","contractId="+t.contractId+", actionId="+t.actionId);return e.__super__.initialize.apply(this,arguments),this.contractId=t.contractId,this.url=r.API_URL+"/contracts/"+t.contractId+"/actions/"+t.actionId},e.prototype.sync=function(t){return"read"!==t&&this.once("sync",(function(){return window.app.trigger("change:contracts")})),e.__super__.sync.apply(this,arguments)},e}(e),o}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=n(966),a=n(404),c=n(968),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.handleResendButtonClick=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return t.preventDefault(),[4,(e=new s.DigitalCardResendParamsConfirmationDialogView({contractId:this.options.contractId,onSubmitSuccess:this.onSubmitSuccess})).show()];case 1:return n.sent(),e.submit(),[2]}}))}))},e.prototype.onSubmitSuccess=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,new c.DigitalCardResendParamsResultDialogView({contractId:this.options.contractId}).show()];case 1:return t.sent(),[2]}}))}))},o.__decorate([r.on("click [data-js-card-resend-params]")],e.prototype,"handleResendButtonClick",null),o.__decorate([a.autobind],e.prototype,"onSubmitSuccess",null),e=o.__decorate([r.template("digital-card/digital-card-resend-params-view")],e)}(i.TemplateView);e.DigitalCardResendParamsView=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(967),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=new i.DigitalCardResendParams({contractId:e.options.contractId}),e}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"digital-card-resend-params-popup"},enumerable:!0,configurable:!0}),e}(n(477).AddAuthWithoutFormDialogView);e.DigitalCardResendParamsConfirmationDialogView=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return r.API_URL+"/contracts/"+e.get("contractId")+"/actions/resend-params"},e}return o.__extends(e,t),e}(i.BaseModel);e.DigitalCardResendParams=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(386),r=n(381),s=n(793),a=function(t){function e(e){var n=t.call(this,e)||this;return n.dialogCssClass="ui-dialog-without-header block__complete block__complete--dialog",n}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"digital-card-resend-params-result-dialog"},enumerable:!0,configurable:!0}),e.prototype.show=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return[4,window.app.data.contracts.dashboard.fetchIfEmpty(s.getContractsPageSettings().sections)];case 1:return n.sent(),[4,t.prototype.show.apply(this,o.__spread(e))];case 2:return n.sent(),[2]}}))}))},e.prototype.context=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(n))),{cardNumber:null===(e=window.app.data.contracts.dashboard.get(this.options.contractId))||void 0===e?void 0:e.get("number")})},e=o.__decorate([r.template("digital-card/digital-card-resend-params-result-dialog-view")],e)}(i);e.DigitalCardResendParamsResultDialogView=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=n(970),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.revealCardNumberModel=new s.DigitalCardRevealCardNumber({id:e.options.contract.get("id")}),e}return o.__extends(e,t),e.prototype.handleToggleCardNumberClick=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,i;return o.__generator(this,(function(o){switch(o.label){case 0:return this.revealCardNumberModel.get("number")?[3,2]:[4,this.revealCardNumberModel.fetch()];case 1:o.sent(),o.label=2;case 2:return t=this.$("[data-js-toggle-card-number]"),e=this.$("[data-js-card-number]"),"digital-card-reveal-card-number__icon--opened",t.toggleClass("digital-card-reveal-card-number__icon--opened"),n=t.hasClass("digital-card-reveal-card-number__icon--opened"),i=n?this.revealCardNumberModel.get("number"):this.options.contract.get("number"),e.html(i),[2]}}))}))},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{cardNumber:this.options.contract.get("number")})},o.__decorate([r.on("click [data-js-toggle-card-number]")],e.prototype,"handleToggleCardNumberClick",null),e=o.__decorate([r.template("digital-card/digital-card-reveal-card-number-view")],e)}(i.TemplateView);e.DigitalCardRevealCardNumberView=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=function(){return r.API_URL+"/contracts/"+t.get("id")+"/actions/reveal-number"},t}return o.__extends(n,e),n.prototype.fetch=function(){var e=this,n=t.post(this.url());return n.done((function(t){e.set(t)})),n},n}(i.BaseModel);e.DigitalCardRevealCardNumber=s}).call(this,n(14))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(40),{DivisionContactInfo:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=function(){return e.API_URL+"/division/"+this.contractId+"/contact"},n.prototype.initialize=function(t,e){if(n.__super__.initialize.apply(this,arguments),!(this.contractId=e.contractId))throw new Error("divisionId is undefined")},n}(n(472).ContactInfo)}}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m,y;return o(535),y=o(40),m=o(142),f=o(374).TemplateView,h=o(378),n=o(420),u=o(395).Contracts,c=o(792).ContractList,window.OW.contractsConfig,null==y.DIVISION_SEARCH_MIN_LENGTH&&(y.DIVISION_SEARCH_MIN_LENGTH=2),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(){if(!this.get("owner.fullName"))return console.warn("owner.fullName is missing from employee contract",this.id)},e.prototype.getSortIndex=function(){return this.get("owner.fullName")},e}(n),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/division-contract-list",n.prototype.requiredOptions=[],n.prototype.emptyMessage="&mdash;",n.prototype.emptySearchResultMessage=t("No matches"),n.prototype.searchText="",n.prototype.lastSearchText="",n.prototype.context=function(t){var e,o;return null==t&&(t={}),this.searchText.length>=y.DIVISION_SEARCH_MIN_LENGTH&&(console.time("search"),e=function(){switch(!1){case!/^\d+$/.test(this.searchText):return t=this,function(e){return"card"!==e.get("type")&&e.get("number").indexOf(t.searchText)>-1};case!/^\*+\d+$/.test(this.searchText):return function(t){return function(e){return"card"===e.get("type")&&e.get("number").endsWith(t.searchText)}}(this);default:return o=new RegExp(".*(^|[\\s()-])"+m.escape(this.searchText),"i"),function(t){return o.test(t.get("owner.fullName"))}}var t}.call(this),t.collection=new u(this.collection.withParents(this.collection.filter(e))),console.timeEnd("search"),console.debug("Searching by '"+this.searchText+"', "+t.collection.length+" results"),t.emptyMessage=this.emptySearchResultMessage),n.__super__.context.apply(this,arguments)},n.prototype.searchBy=function(t){var e,n;if(this.searchText=t,e=Boolean(this.collection.length),n=this.lastSearchText!==this.searchText&&i.max([this.searchText.length,this.lastSearchText.length])>=y.DIVISION_SEARCH_MIN_LENGTH,e&&n)return this.lastSearchText=this.searchText,this.render()},n}(c),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.APPROACHING_CREDIT_LIMIT_THRESHOLD=.8,e.prototype.template="contracts/contract-group-stats",e.prototype.events={"click .group":"onGroupClick"},e.prototype.initialize=function(){if(!this.collection)throw new Error("collection is required")},e.prototype.getContractGroups=function(){return{allContracts:{filter:function(t){return!0}},inactiveCards:{title:function(t){return tn("inactive card","inactive cards",t)},filter:function(t){var e;return"blocked"===(e=t.get("card.status"))||"expired"===e}},expiringCards:{title:function(t){return tn("card about to expire","cards about to expire",t)},filter:function(t){return t.isCardExpiringInLessThan("P1M")}},producedCards:{title:function(t){return tn("card being issued","cards being issued",t)},filter:function(t){return"first_production"===t.get("card.status")||"in_production"===t.get("card.productionStatus")}},approachingLimit:{title:function(t){return tn("card approaching credit limit","cards approaching credit limit",t)},filter:(t=this,function(e){var n,o;return!!("card"===e.get("type")&&(n=e.get("balances.available"))&&(o=e.get("balances.cr_limit"))&&n.currency===o.currency&&Number(n.value)<=Number(o.value)*(1-t.APPROACHING_CREDIT_LIMIT_THRESHOLD))})}};var t},e.prototype.calculateGroups=function(){var t,e,n,o,r,s,a,c,u,l;for(r in this.groups=this.getContractGroups(),l=[],a=this.groups)n=a[r],s=this.collection.filter(n.filter),n.size=s.length,n.contractsArray=this.collection.withParents(s),"allContracts"===r?(o=i.groupBy(s,(function(t){return t.get("type")})),n.size=(null!=(c=o.cardAccount)?c.length:void 0)||0,n.numCards=(null!=(u=o.card)?u.length:void 0)||0,e=tn("employee","employees",n.size),t=tn("%(num)s card","%(num)s cards",n.numCards),l.push(n.title=e+"<br/>("+t+")")):l.push(n.title=n.title(n.size));return l},e.prototype.context=function(){return{groups:i.map(this.groups,(function(t,e){return i.extend(t,{id:e})}))}},e.prototype.onGroupClick=function(t){return t.preventDefault(),this.selectGroup(r(t.currentTarget).attr("data-group-id"))},e.prototype.selectGroup=function(t){var e;if(this.$(".group.selected").removeClass("selected"),this.$(".group[data-group-id='"+t+"']").addClass("selected"),this.activeGroupId=t,!(e=this.groups[this.activeGroupId]))throw new Error("Failed to find selected group by id: "+this.activeGroupId);return console.debug("Selected group: "+this.activeGroupId),this.onSelectGroup(e)},e.prototype.selectDefaultGroup=function(){return this.selectGroup(i.keys(this.groups)[0])},e.prototype.onSelectGroup=function(t){return console.log("Override onSelectGroup to do something")},e}(f),d=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.availableToManager=!0,n.prototype.template="contracts/division-contracts-page",n.prototype.events={"change .search-input":"onSearch"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.collection=new u(null,{model:p}),window.app.data.contracts.dashboard=this.collection},n.prototype.show=function(){return this.showLoadingIndicator(),this.render().then((e=this,function(){return e.$searchInput=e.$(".search-input"),e.$searchInput.search(),e.contractList=new l({collection:e.collection,el:e.$(".contracts-section")}),e.contractList.showLoadingIndicator(),e.fetchData()})).fail(function(e){return function(n){return n.errorHandled=!0,e.contractList.handleError(t("Failed to load corporate cards"))}}(this)).then(function(t){return function(){return console.debug("Contracts: "+t.collection.length),t.groupStatsView=new s({collection:t.collection,el:t.$(".block__contract-group-stats")}),t.groupStatsView.onSelectGroup=function(e){return console.time("render contracts"),t.contractList.applyCollection(new u(e.contractsArray)).done((function(){return console.timeEnd("render contracts")}))},t.groupStatsView.calculateGroups(),t.groupStatsView.render()}}(this)).then(function(t){return function(){return t.groupStatsView.selectDefaultGroup()}}(this));var e},n.prototype.fetchData=function(){return this.collection.fetch({reset:!0})},n.prototype.onSearch=function(){var t;return t=this.$searchInput.val().trim(),this.contractList.searchBy(t)},n}(h),{DivisionContractList:l,ContractGroupStats:s,DivisionContractsPage:d}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h;return o(476),s=o(378),h=o(380),d=o(807),c=o(536),l=o(974),p=o(975),u=o(976),n=o(809).InvoiceSubscriptionsPanelView,function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/payments-page",o.prototype.pageType=h.mainMenuIds.PAYMENTS_TRANSFERS,o.prototype.getTitle=function(){return t("Payment and transfers")},o.prototype.initializeChildViews=function(){var t;return t=[],window.OW.features._REGION_FILTERING&&t.push((this.regionSelect=new d({el:this.$(".regions-select")})).show()),window.OW.features.PAYMENT_TEMPLATES&&t.push((this.paymentTemplates=new c({el:this.$(".payment-templates")})).show()),t.push((this.paymentsMenu=new u({el:this.$(".payments-menu")})).show()),window.OW.features.RECURRENT_PAYMENTS&&t.push((this.recurrentPayments=new l({el:this.$(".recurrent-payments")})).show()),window.OW.features.THRESHOLD_PAYMENTS&&t.push((this.thresholdPayments=new p({el:this.$(".threshold-payments")})).show()),window.OW.features.INVOICE_SUBSCRIPTIONS&&t.push((this.invoiceSubscriptions=new n({el:this.$(".invoice-subscriptions")})).show()),i.when.apply(i,t)},o.prototype.show=function(){return this.render().then((t=this,function(){return t.$el.children().hide(),t.initializeChildViews()})).then(function(t){return function(){return t.$el.children().show(),t.onWidgetsShown()}}(this));var t},o.prototype.onWidgetsShown=function(){return this.initSearch(),this.showPage()},o.prototype.onRender=function(){},o.prototype.performSearch=function(){var t,e,n,o;return t=this.$("#payments-search"),o=t.val().trim(),n=[this.paymentTemplates,this.recurrentPayments,this.thresholdPayments,this.paymentsMenu],r.each(n,(function(t){if(t)return t.$el.trigger("search",o)})),null!=(e=this.invoiceSubscriptions)?e.applySearch(o):void 0},o.prototype.initSearch=function(){var t,e;return(t=this.$("#payments-search")).search(),t.change((e=this,function(){return e.performSearch()})),this.$(".payments-menu").on("render.complete",function(t){return function(){if(t.$(".no-payments").hide(),!t.$(".payment-group:visible").length)return t.$(".no-payments").css({visibility:"inherit"}).show()}}(this))},o.prototype.cleanUp=function(){return[this.regionSelect,this.paymentTemplates,this.paymentsMenu,this.recurrentPayments,this.thresholdPayments,this.invoiceSubscriptions].forEach((function(t){return null!=t?t.remove():void 0}))},o.prototype.context=function(){return r.extend(o.__super__.context.apply(this,arguments),{showPaymentCart:window.OW.features.PAYMENT_CART&&!this.options.menuItemId})},o}(s)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r;return e=n(392).AppCache,r=n(536),n(428).RecurrentPayments,function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/recurrent-payments",n.prototype.expandedByDefault=!1,n.prototype.fetchData=function(){return e.get(e.KEYS.RECURRENT_PAYMENTS).then((t=this,function(e){return t.collection=e}));var t},n.prototype.onSearch=function(t,e){if(n.__super__.onSearch.apply(this,arguments),this.$(".active, .inactive").show(),e)return this.$(".active, .inactive").each((function(){return o(this).toggle(o(this).find(".highlight").length>0)}))},n.prototype.context=function(){var t;return t=this.collection.viewContext(),{active:i.filter(t,(function(t){return"active"===t.status})),inactive:i.filter(t,(function(t){var e;return"invalid"===(e=t.status)||"inactive"===e})),currentMenuId:this.options.menuId,contextPath:window.WB.contextPath}},n}(r)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return e=n(392).AppCache,i=n(536),n(463).ThresholdPayments,function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/threshold-payments",n.prototype.expandedByDefault=!1,n.prototype.fetchData=function(){return e.get(e.KEYS.THRESHOLD_PAYMENTS).then((t=this,function(e){return t.collection=e}));var t},n.prototype.onSearch=function(t,e){if(n.__super__.onSearch.apply(this,arguments),this.$(".active, .inactive").show(),e)return this.$(".active, .inactive").each((function(){return o(this).toggle(o(this).find(".highlight").length>0)}))},n.prototype.context=function(){return{collection:this.collection.viewContext(),currentMenuId:this.options.menuId,contextPath:window.WB.contextPath}},n}(i)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){(function(o){var i,r=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;void 0===(i=function(t){var e,i;return i=n(97),n(40),e=n(374).TemplateView,n(453).WbPaymentsMenu,n(808),n(451),function(t){function e(){return this.toggleItemsLimit=r(this.toggleItemsLimit,this),e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="payments/payments-menu",e.prototype.events={"click .payment-group .ui-accordion-header":"onGroupToggle","click .toggle-show-all":"toggleItemsLimit"},e.prototype.searchQuery="",e.prototype.initialize=function(){var t;return e.__super__.initialize.apply(this,arguments),this.region=i.get("SELECTED_REGION"),this.collection=this.originalCollection=window.app.data.paymentsMenu,o(".regions-select").change((t=this,function(e,n){return t.region=n,t.renderWithFilters()})),this.$el.on("search",function(t){return function(e,n){if(n!==t.searchQuery)return t.searchQuery=n,t.renderWithFilters()}}(this)),this.once("render.complete",function(t){return function(){return t.accordionStates=[],o(".payment-group .ui-accordion-header").each((function(){return t.accordionStates.push(!1)}))}}(this)),this.on("render.complete",function(t){return function(){var e;return(e=t.$(".multi-accordion-container")).multiAccordion({childSelector:".payment-group",activeState:t.accordionStates}),t.searchQuery.length&&e.on("multiAccordionCreated",(function(){return e.multiAccordion("expandAll")})),t.updateHighlights()}}(this))},e.prototype.show=function(){return this.originalCollection.fetchIfEmpty().then((t=this,function(){return t.renderWithFilters()}));var t},e.prototype.renderWithFilters=function(){return this.collection=this.originalCollection,this.region&&(this.collection=this.collection.filterByRegion(this.region)),this.searchQuery?(this.collection=this.collection.search(this.searchQuery),this.collection.disableLimits()):this.collection.enableLimits(),this.render()},e.prototype.updateHighlights=function(){var t;return(null!=(t=this.searchQuery)?t.length:void 0)?this.$("a").highlight(this.searchQuery):this.$("a").removeHighlight()},e.prototype.onGroupToggle=function(t){var e;return e=o.inArray(t.target,this.$(".payment-group .ui-accordion-header")),this.accordionStates[e]=!this.accordionStates[e]},e.prototype.toggleItemsLimit=function(t){var e;return e=o(t.target).closest(".payment-group").data("menu-id"),this.collection.toggleItemsLimit(e),this.renderWithFilters()},e.prototype.context=function(){return{collection:this.collection.viewContext(),contextPath:window.WB.contextPath}},e}(e)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u,l;return l=n(40),c=n(377),u=n(375),e=u.BaseModel,s=u.SingleFetchBaseCollection,i=n(400).IC_PAYMENT_TYPES,a={},l.PAYMENTS_MENU_ICONS_PATH=l.IMAGE_PATH,a.MenuItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),this.has("items")&&this.has("service")&&(console.warn("Removed children from item with service:",this.toJSON()),this.unset("items")),this.ensureNativeCode(this),this.has("items"))return this.get("items").forEach((t=this,function(e){return e.parentId=t.id,t.ensureNativeCode(e)}));var t},n.prototype.ensureNativeCode=function(t){var n;if("MONEY_REQUEST"===(n=o.last(t.id.split(".")))||"INTRA_CARD_TRANSFER"===n||"INTRA_BANK_TRANSFER"===n||"MVISA_TRANSFER"===n||"RETRIEVE_MONEY_TRANSFER"===n)return t instanceof e?t.set("nativeCode",n):t.nativeCode=n},n.prototype.getSuitableIcons=function(){return c.getSuitableIcons({menuId:this.id,hasItems:this.has("items"),icon:this.get("options.icon"),invoiceCode:this.get("options.invoiceCode"),serviceId:this.get("service.id"),parentMenuId:this.get("parentId"),paymentType:a.MenuItem.getIcPaymentType(this.id)})},n.getIcPaymentType=function(t){var e;return e=o.last(t.split(".")).toLowerCase(),o.values(i).includes(e)||(e=void 0),e},n.prototype.viewContext=function(t){var e,i,r,s;return null==t&&(t={}),e=n.__super__.viewContext.apply(this,arguments),t.allowLimits&&t.itemsLimit&&this.has("items")&&(s=e.items.length,t.limitEnabled&&(e.items=o.first(e.items,t.itemsLimit)),e.allowLimits=t.allowLimits,e.limitApplicable=s>t.itemsLimit,e.limitActive=s>e.items.length),(r=function(t){var e,n;if(t.isInvoiceItem=!!(null!=(e=t.options)?e.invoiceCode:void 0),t.isInvoiceItemWithSearch=t.isInvoiceItem&&!!(null!=(n=t.options)?n.search:void 0),t.isInvoiceItemSimple=t.isInvoiceItem&&!t.isInvoiceItemWithSearch,t.isInvoiceItemWithSearch)return t.options.search=t.options.search.split(",")})(e),null!=(i=e.items)&&i.forEach(r),e},n}(e),a.Menu=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.model=a.MenuItem,e.prototype.subtreeAttr="items",e.prototype.url=l.API_URL+"/menu"+(l.MENU_PAYMENTS_ROOT?"/"+l.MENU_PAYMENTS_ROOT+"/items":""),e.prototype.itemsOptions={},e.prototype.allowLimits=!0,e.prototype.menuItemsLimit=null,e.prototype.initialize=function(t,n){var o;if(e.__super__.initialize.apply(this,arguments),this._menuPlainList=null,this._subtreeCache={},this.on("sync reset",(o=this,function(){return o._menuPlainList=null,o._subtreeCache={}})),this.menuItemsLimit=null!=n?n.menuItemsLimit:void 0,this.menuItemsLimit)return this.once("sync",function(t){return function(){var e,n,o,i,r;for(r=[],e=0,n=(i=t.models).length;e<n;e++)o=i[e],r.push(t.itemsOptions[o.id]={itemsLimit:t.menuItemsLimit,limitEnabled:!0});return r}}(this))},e.prototype.get=function(t){var n,o,i,r,s,a;if(i=e.__super__.get.apply(this,arguments))return i;for(n=0,o=(r=this.models).length;n<o;n++)if(i=r[n],a=null!=(s=this.getChildrenOf(i))?s.get(t):void 0)return a;return null},e.prototype.hasService=function(t){return console.assert(t,"serviceId is required"),!!o.findWhere(this.calculateMenuPlainList(),{serviceId:t})},e.prototype.getServiceMenuItemId=function(t){var e;return console.assert(t,"serviceId is required"),null!=(e=o.findWhere(this.calculateMenuPlainList(),{serviceId:t}))?e.menuId:void 0},e.prototype.getInvoiceMenuItemId=function(t){var e;return console.assert(t,"invoiceCode is required"),null!=(e=o.findWhere(this.calculateMenuPlainList(),{invoiceCode:t}))?e.menuId:void 0},e.prototype.getPaymentMenuItemId=function(t){var e;return console.assert(t,"paymentType is required"),t=t.toUpperCase(),null!=(e=o.find(this.calculateMenuPlainList(),(function(e){return o.last(e.menuId.split("."))===t})))?e.menuId:void 0},e.prototype.getInvoiceSearchMenuItemId=function(t){var e;return console.assert(t,"serviceId is required"),null!=(e=o.find(this.calculateMenuPlainList(),(function(e){return o.contains(e.invoiceSearchServices,t)})))?e.menuId:void 0},e.prototype.getParentMenuItemId=function(t){var e;return console.assert(t,"itemId is required"),null!=(e=o.findWhere(this.calculateMenuPlainList(),{menuId:t}))?e.parentMenuId:void 0},e.prototype.getItemIdsToRoot=function(t){var e;for(e=[];t;)e.push(t),t=this.getParentMenuItemId(t);return e},e.prototype.calculateMenuPlainList=function(){var t;return o.isNull(this._menuPlainList)&&(t=function(e,n){return o.map(e,(function(e){var o,i,r,s,c,u;return u=[{menuId:e.id,parentMenuId:n,serviceId:null!=(o=e.service)?o.id:void 0,invoiceCode:null!=(i=e.options)?i.invoiceCode:void 0,invoiceSearchServices:(null!=(r=e.options)&&null!=(s=r.search)?s.split(","):void 0)||[],hasItems:!!e.items,icon:null!=(c=e.options)?c.icon:void 0,paymentType:a.MenuItem.getIcPaymentType(e.id)}],null!=e.items&&u.push(t(e.items,e.id)),u}))},this._menuPlainList=o.flatten(t(this.toJSON()))),this._menuPlainList},e.prototype.isFlat=function(){return!this.any((function(t){return!o.isEmpty(t.get("items"))}))},e.prototype.getChildrenOf=function(t){var e,n;return e=t.get("id"),!(n=this._subtreeCache[e])&&t.has(this.subtreeAttr)&&(n=this._subtreeCache[e]=new this.constructor(t.get(this.subtreeAttr))),n},e.prototype.isParent=function(t,e){var n;return!(!(n=t?this.get(t):this)||!n.has("items"))&&Boolean(this.getChildrenOf(n).find((function(t){return t.id===e})))},e.prototype.isChild=function(t,e){return this.isParent(e,t)},e.prototype.search=function(t,e){var n,i,r,s,a,c,u,l,d,p,h,f;if(null==e&&(e=!0),t.length>1e3)return new this.constructor;for(d=[],i={},l=new RegExp(RegExp.escape(t),"i"),f=this,h=function(t){var e,n,o,r,s,a,c;for(r=[],n=0,o=(s=t[f.subtreeAttr]||[]).length;n<o;n++)(e=s[n])[f.subtreeAttr]?r=r.concat(h(e)):l.test(e.name)&&(c=null!=(a=e.service)?a.id:void 0,i[c]||(r.push(e),e.service&&(i[c]=!0)));return r},r=0,s=(u=this.models).length;r<s;r++)(a=u[r]).has(this.subtreeAttr)?(n=h(a.toJSON())).length>0&&(e?(c=new this.model(o.clone(a.omit(this.subtreeAttr))),a.has(this.subtreeAttr)&&c.set(this.subtreeAttr,n,{silent:!0}),d.push(c)):d.push.apply(d,n)):l.test(a.get("name"))&&d.push(a);return(p=new this.constructor).add(d),p},e.prototype.enableLimits=function(){return this.allowLimits=!0},e.prototype.disableLimits=function(){return this.allowLimits=!1},e.prototype.filterByRegion=function(t){var e,n,i;return i=this,e=function(n){var r,s,a,c;for(s=0,a=(c=o.filter(n,(function(e){return o.isEmpty(e.regions)||o.contains(e.regions,t)}))).length;s<a;s++)(r=c[s])[i.subtreeAttr]&&(r[i.subtreeAttr]=e(r[i.subtreeAttr]));return o.filter(c,(function(t){var e,n,r,s,a;return e=!o.isEmpty(t[i.subtreeAttr]),r=!o.isEmpty(t.service),n=(null!=(s=t.options)?s.invoiceCode:void 0)||"NATIVE"===(null!=(a=t.options)?a.type:void 0),r||n||e}))},(n=new this.constructor).add(e(this.toJSON())),n},e.prototype.leafs=function(){var t,e,n,o,i,r;for(r=[],e=0,n=(i=this.models).length;e<n;e++)o=i[e],(t=this.getChildrenOf(o))?r.push.apply(r,t.leafs()):r.push(o);return r},e.prototype.sanityCheck=function(){var t,e,n,o,i,r,s;for(s=this,t=function(e){var n,o,i,r,a;if(e.has("service")&&e.has("items")&&console.warn("Model has both service and items",e.toJSON()),e.has("items")){for(a=[],o=0,i=(r=new s.constructor(e.get("items")).models).length;o<i;o++)n=r[o],a.push(t(n));return a}},r=[],e=0,n=(i=this.models).length;e<n;e++)o=i[e],r.push(t(o));return r},e.prototype.toggleItemsLimitSuspend=function(t){var e,n,o,i;for(e in i=[],o=this.itemsOptions)n=o[e],i.push(n.itemsLimit=t?null:this.menuItemsLimit);return i},e.prototype.toggleItemsLimit=function(t){if(!t)throw new Error("target menu item id is not defined");return this.itemsOptions[t].limitEnabled=!this.itemsOptions[t].limitEnabled},e.prototype.viewContext=function(){var t,e,n,o,i,r;for(t=[],e=0,n=(i=this.models).length;e<n;e++)o=i[e],(r=this.itemsOptions[o.id])&&(r.allowLimits=this.allowLimits),t.push(o.viewContext(r));return t},e}(s),a}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,o){var i,r={}.hasOwnProperty;void 0===(i=function(e){var n,i,s,a;return o(451),n=o(844).GeoLimiter,i=o(1046),s=o(378),a=o(380),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="security/geo-limiters-page",o.prototype.pageType=a.mainMenuIds.SECURITY,o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.geoLimiter=new n},o.prototype.getTitle=function(){return t("Geo-limiter management")},o.prototype.show=function(){return this.geoLimiter.fetch().done((t=this,function(){return t.render()}));var t},o.prototype.onRender=function(){return this.$(".help-panel").multiAccordion({childSelector:".info-block"}),new i({el:this.$(".limiters-panel"),model:this.geoLimiter}).show(),o.__super__.onRender.apply(this,arguments)},o}(s)}.call(n,o,n,e))||(e.exports=i)},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l;return o(419),c=o(374).TemplateView,s=o(844).GeoLimiterRegions,n=o(1047),u=o(387).WbFormMixin,l=o(442),function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="security/geo-limiter",o.prototype.mixins=[u],o.prototype.events={'change [name="is-active"]':"onLimiterSwitch","click .remove-tag":"onRegionRemove"},o.prototype.initialize=function(){var t;return o.__super__.initialize.apply(this,arguments),this.updateBindings(),this.initForm(),this.regions=new s,this.model.on("change:allowedCountries",(t=this,function(){return t.regionsHashCloud.render(),t.model.get("allowedCountries").length||t.toggleSecurity(),clearTimeout(t.saveTimeout),t.saveTimeout=setTimeout((function(){return t.onChange()}),1e3)})),this.model.on("change:isActive",function(t){return function(){return clearTimeout(t.saveTimeout),t.saveTimeout=setTimeout((function(){return t.onChange()}),1e3)}}(this))},o.prototype.updateBindings=function(){return this.model.get("isActive")?this.bindings={allowedCountries:'[name="geo-regions"]'}:this.bindings={}},o.prototype.toggleSecurity=function(){return this.model.set("isActive",!this.model.get("isActive")),this.updateBindings()},o.prototype.onLimiterSwitch=function(t){return t.preventDefault(),this.toggleSecurity(),l.trackEvent("Geo limiter","switch geo limiter "+(this.model.get("isActive")?"on":"off")),this.render()},o.prototype.onChange=function(){if(this.$("input").blur(),!this.model.get("isActive")||!i.isEmpty(this.model.get("allowedCountries")))return this.isSaving=!0,this.blockUi(),this.submit()},o.prototype.show=function(){return r.when(this.regions.fetch()).then((t=this,function(){return t.render()}));var t},o.prototype.blockUi=function(){return this.$el.addClass("loading")},o.prototype.unblockUi=function(){return this.$el.removeClass("loading")},o.prototype.onRender=function(){if(this.$('[name="is-active"]').chosen({disable_search_threshold:500}),this.model.get("isActive"))return this.regionsHashCloud=new n({el:this.$(".selected-regions"),geoLimiter:this.model,regions:this.regions}),this.regionsHashCloud.show(),this.$("[name=geo-regions]").chosen({display_selected_options:!0,backstroke_delete:!1,no_results_text:t("No results match:"),custom_element:function(e){return e.text+" <span class='already-added'>("+t("Already added")+")</span>"}})},o.prototype.onSubmitSuccess=function(){return this.isSaving=!1,this.unblockUi(),this.render()},o.prototype.saveChanges=function(){return this.model.save()},o.prototype.resetAttrsOnError=function(){return this.isSaving=!1,this.model.set(this.model.savedValue,{silent:!0}),this.updateBindings(),this.render()},o.prototype.context=function(){var t,e,n,o,i;for(i=this.regions.viewContext(),t=this.model.get("allowedCountries"),e=0,n=i.length;e<n;e++)(o=i[e]).selected=-1!==t.indexOf(o.id);return{regions:i,geoLimiter:this.model.viewContext()}},o}(c)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="security/geo-limiters-regions-tags",e.prototype.events={"click .remove-tag":"onRegionRemove"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.geoLimiter=this.options.geoLimiter,this.regions=this.options.regions||[]},e.prototype.onRegionRemove=function(t){var e;return t.preventDefault(),e=o(t.currentTarget).closest("li").data("region-id"),this.geoLimiter.set("allowedCountries",i.without(this.geoLimiter.get("allowedCountries"),e))},e.prototype.getSelectedRegions=function(){var t;return t=this.geoLimiter.get("allowedCountries"),this.regions.viewContext().filter((function(e){return-1!==t.indexOf(e.id)}))},e.prototype.context=function(){return{regions:this.getSelectedRegions()}},e}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.context=function(){var e=t.prototype.context.call(this);return r(r({},e),{onlineDepositsSupported:e.onlineDepositsSupported&&!window.OW.mainConfig.ONLINE_DEPOSITS_HIDE_ADDITIONAL_ENTRY_POINTS})},e}(n(1049));t.exports=s},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c;return n=o(378),a=o(845).Showcase,r=o(846),c=o(391),function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="marketing/showcase-page",n.prototype.pageType="SHOWCASE",n.prototype.events={"click .details-link":"openDetails"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model=new a},n.prototype.getTitle=function(){return t("Bank offers")},n.prototype.show=function(){return this.model.fetch().done((t=this,function(){return t.render()}));var t},n.prototype.openDetails=function(t){var e;return e=i(t.target).data("product-id"),new r({el:this.$el,model:this.model.get(e)}).show(),window.app.router.navigate("SHOWCASE/"+e),t.preventDefault()},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),t=this,this.$(".product-preview").each((function(){var e;return e=i(this),c.appendExistingImage(e,e.data("image-src"),(function(){return t.fitPreview(i("img",e),e)}))}))},n.prototype.fitPreview=function(t,e){var n;return n=e.width()/t.width(),t.height()*n>=e.height()?t.css({width:e.width()}):t.css({height:e.height()}),c.centerElement(t)},n.prototype.context=function(){return{products:this.model.viewContext(),staticPath:window.WB.STATIC_PATH,contextPath:window.WB.contextPath,currentMenuId:window.WB.currentMenuId,externalCardsSupported:window.OW.features.FOREIGN_CARDS,onlineDepositsSupported:window.OW.features.ONLINE_DEPOSITS,incomeCertificatesSupported:window.OW.features.INCOME_CERTIFICATES}},n}(n)}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].slice;void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_,g,v;return y=o(96),c=o(137),g=o(40),l=o(378),v=o(380),o(377),(_=o(847)).Chat,n=_.ChatMessage,p=o(557).ReactCheckbox,d=o(399),h=o(440),s=d.DOM,m=function(t){var e;return(e=y(t)).isSame(y(),"day")?c.formatDate(e.toDate(),{raw:"HH:mm"}):c.formatDate(e.toDate(),{raw:"d MMMM, HH:mm"})},(f={}).ChatMarketingMessage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.onMessageMarked=function(t){return this.props.onMessageMarked(t)},n.prototype.getDeleteElement=function(){if(this.props.deletable)return d.createElement(p,{onChange:this.onMessageMarked.bind(this)})},n.prototype.getMessageLink=function(){switch(this.props.link.type){case"url":return s.a({href:this.props.link.url,target:"_blank"},t("Details"));case"product":return s.a({href:"#SHOWCASE/"+this.props.link.id},t("Order"));default:return console.warn("Link type "+this.props.link.type+" is not supported")}},n.prototype.render=function(){return s.div({className:"message-item marketing-message incoming priority-"+this.props.priority},this.getDeleteElement(),s.div({className:"message-avatar"}),s.div({className:"message-body"},s.div({className:"message-text",dangerouslySetInnerHTML:{__html:this.props.body}}),this.props.link?s.div({className:"message-link"},this.getMessageLink()):void 0,s.div({className:"message-date"},m(this.props.date))))},n}(d.Component),f.ChatRegularMessage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.onMessageMarked=function(t){return this.props.onMessageMarked(t)},e.prototype.getAttachments=function(){return this.props.attachments.map((function(t){return s.div({className:"message-attachment",key:t.id},s.a({href:t.url,target:"_blank"},t.name))}))},e.prototype.getDeleteElement=function(){if(this.props.deletable)return d.createElement(p,{onChange:this.onMessageMarked.bind(this)})},e.prototype.render=function(){return s.div({className:"message-item chat-message "+(this.props.incoming?"incoming":"outgoing")},this.getDeleteElement(),s.div({className:"message-avatar"}),s.div({className:"message-body"},s.div({className:"message-text"},this.props.text),this.props.attachments?s.div({className:"message-attachments"},this.getAttachments()):void 0,s.div({className:"message-date"},m(this.props.date))))},e}(d.Component),f.ChatMessageFileInput=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.state={file:""}}return a(n,e),n.prototype.onFileSelected=function(){var t,e;if(t=null!=(e=this.refs.input.files[0])?e.name:void 0)return this.setState({file:t}),this.props.onChange(t);this.props.onRemove()},n.prototype.render=function(){return s.label({className:"file-input-wrapper "+(this.props.empty?"empty":"attachment"),title:t("Add attachment")},s.input({accept:".pdf,.jpeg,.jpg,.gif,.png,.bmp",type:"file",name:this.props.empty?"":"file",className:"file-input",ref:"input",onChange:this.onFileSelected.bind(this)}))},n}(d.Component),f.ChatActionsForm=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.state=this.getEmptyState()}return a(n,e),n.prototype.getEmptyState=function(){return{text:"",files:[{index:0}],inProgress:!1}},n.prototype.onDeleteModeClick=function(t,e){return e.preventDefault(),this.props.onDeleteModeToggle(t)},n.prototype.onToggleMarketingClick=function(t){return t.preventDefault(),this.props.onToggleMarketing(!this.props.noMarketing)},n.prototype.onFileChange=function(t,e){var n,o,r,s,a;for(n=0,r=(a=this.state.files).length;n<r;n++)if((s=a[n]).index===t){s.fileName=e;break}return(o=i.last(this.state.files)).fileName&&this.state.files.push({index:o.index+1}),this.setState({files:this.state.files})},n.prototype.onFileRemove=function(t,e){var n;if(e.preventDefault(),-1!==(n=i.findIndex(this.state.files,(function(e){return e.index===t}))))return this.state.files.splice(n,1),this.setState({files:this.state.files})},n.prototype.onSendMessage=function(t){if(t.preventDefault(),!this.state.inProgress&&(this.state.text.trim()||1!==this.state.files.length))return this.refs.message.blur(),this.setState({inProgress:!0}),this.props.onSendMessage(new FormData(this.refs.form))},n.prototype.onTextChange=function(){return this.setState({text:this.refs.message.value})},n.prototype.onDeleteClick=function(){return this.setState({inProgress:!0}),this.props.onDelete()},n.prototype.getFileInputs=function(){return this.state.files.map((t=this,function(e){return d.createElement(f.ChatMessageFileInput,{key:"file-"+e.index,empty:!e.fileName,onChange:t.onFileChange.bind(t,e.index)})}));var t},n.prototype.getAttachments=function(){return i.filter(this.state.files,(function(t){return t.fileName})).map((e=this,function(n){return s.div({className:"attachment"},n.fileName,s.a({href:"#",title:t("Remove attachment"),className:"file-remove-link",onClick:e.onFileRemove.bind(e,n.index)}))}));var e},n.prototype.getDeleteModeContent=function(){return s.div({className:"controls-row delete"},s.a({href:"#",className:"cancel-edit-mode",onClick:this.onDeleteModeClick.bind(this,!1)},t("Cancel")),s.button({type:"button",className:"wb-button delete-messages "+(this.state.inProgress?"loading-button":""),onClick:this.onDeleteClick.bind(this)},t("Delete")))},n.prototype.render=function(){var e;return e=this.props.noMarketing?t("Show marketing messages"):t("Hide marketing messages"),s.form({className:"chat-actions "+(this.state.inProgress?"is-loading":""),ref:"form",onSubmit:this.onSendMessage.bind(this)},this.state.files.length>1?s.div.apply(s,[{className:"attachments"}].concat(u.call(this.getAttachments()))):void 0,s.div({className:"controls-row send "+(this.props.deleteMode?"hidden":"")},s.a({href:"#",className:"delete-mode-link",title:t("Delete messages"),onClick:this.onDeleteModeClick.bind(this,!0)}),s.a({href:"#",className:"toggle-marketing-link "+(this.props.noMarketing?"disabled":"enabled"),title:e,onClick:this.onToggleMarketingClick.bind(this)}),this.getFileInputs(),s.input({type:"text",name:"text",className:"message-input",placeholder:t("Enter message"),ref:"message",value:this.state.text,onChange:this.onTextChange.bind(this)}),s.button({type:"button",title:t("Send message"),className:"send-message-button",onClick:this.onSendMessage.bind(this)})),this.props.deleteMode?this.getDeleteModeContent():void 0)},n.prototype.componentWillReceiveProps=function(){return this.setState(this.getEmptyState())},n}(d.Component),f.ChatHistory=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.state={updatePending:!1,messages:this.props.noMarketing?this.props.messages.filter((function(t){return"chatMessage"===t.get("type")})):this.props.messages}}return a(n,e),n.prototype.onMessageMarked=function(t,e){return this.props.onMessageMarked(t,e)},n.prototype.render=function(){return this.state.messages.length?s.div({className:"chat-history "+(this.state.updatePending?"is-loading":""),ref:"history"},this.state.messages.map((e=this,function(t){var n;return n="chatMessage"===t.get("type")?f.ChatRegularMessage:f.ChatMarketingMessage,d.createElement(n,i.extend(t.viewContext(),{key:t.id,deletable:e.props.deleteMode,onMessageMarked:e.onMessageMarked.bind(e,t)}))}))):s.div({className:"chat-history empty"},s.div({className:"empty-message"},t("You have no messages")));var e},n.prototype.componentDidMount=function(){if(this.refs.history&&(this.refs.history.scrollTop=this.refs.history.scrollHeight,this.state.messages.length&&this.props.hasUnfetchedMessages))return r(this.refs.history).on("scroll",i.throttle(this.onScroll.bind(this),100))},n.prototype.componentDidUpdate=function(){if(this.refs.history)return this.props.hasUnfetchedMessages||r(this.refs.history).off("scroll"),this.state.showLatest?this.refs.history.scrollTop=this.refs.history.scrollHeight:void 0},n.prototype.onScroll=function(){if(!this.refs.history.scrollTop)return this.scrollHandler()},n.prototype.scrollHandler=function(){return this.setState({updatePending:!0}),this.props.onPreviousRequested()},n.prototype.componentWillReceiveProps=function(t){var e,n,o,r,s,a;return o=t.noMarketing?t.messages.filter((function(t){return"chatMessage"===t.get("type")})):t.messages,e=null!=(r=i.last(this.state.messages))?r.get("date"):void 0,n=null!=(s=i.last(o))?s.get("date"):void 0,a=!e||!n||y(e).isBefore(n),this.setState({messages:o,updatePending:!1,showLatest:a})},n}(d.Component),f.ChatBlock=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.chatMessages=window.app.chatMessages.clone(),this.state={deleteMode:!1,noMarketing:!1},this.state.messages=this.getMessages()}return a(o,e),o.prototype.onMessageMarked=function(t,e){return t.toDelete=e},o.prototype.onDeleteModeToggle=function(t){return t||this.state.messages.forEach((function(t){return t.toDelete=!1})),this.setState({deleteMode:t})},o.prototype.onToggleMarketing=function(t){return this.setState({noMarketing:t})},o.prototype.onDelete=function(){var t,e,n,o,i;return o=this.state.messages.filter((function(t){return t.toDelete})),n=window.app.messages.deleteMessages(o.filter((function(t){return"marketingMessage"===t.get("type")}))),t=o.filter((function(t){return"chatMessage"===t.get("type")})),e=this.chatMessages.deleteMessages(t),r.when(n,e).then((i=this,function(){return window.app.chatMessages.remove(t),i.setState({messages:i.getMessages(),deleteMode:!1})}))},o.prototype.sendMessage=function(e){return r.ajax({url:g.API_URL+"/chat",data:e,type:"POST",contentType:!1,processData:!1}).done((o=this,function(t){return o.chatMessages.add(new n(t)),o.setState({messages:o.getMessages()})})).fail(function(e){return function(n){switch(n.status){case 413:window.app.showFlashMessage(t("Unable to send message. Allowed attachments size exceeded"));break;default:window.app.showFlashMessage(t("Unable to send message. Try again later or contact support"))}return n.errorHandled=!0,e.setState({inProgress:!1})}}(this));var o},o.prototype.getMessages=function(){var t,e;return t=this.chatMessages.getMessages(),e=window.app.messages.models,[].concat(t).concat(e).sort((function(t,e){return Date.parse(t.get("date"))-Date.parse(e.get("date"))}))},o.prototype.loadPreviousMessages=function(){var t;if(this.chatMessages.hasUnfetchedMessages())return this.chatMessages.fetch().done((t=this,function(){var e;return e=t.getMessages(),t.chatMessages.markAsRead(e.filter((function(t){return!t.get("read")&&"chatMessage"===t.get("type")}))),t.setState({messages:e})}))},o.prototype.render=function(){return s.div({className:"block__chat"},d.createElement(f.ChatHistory,{messages:this.state.messages,noMarketing:this.state.noMarketing,deleteMode:this.state.deleteMode,onMessageMarked:this.onMessageMarked.bind(this),onPreviousRequested:this.loadPreviousMessages.bind(this),hasUnfetchedMessages:this.chatMessages.hasUnfetchedMessages()}),d.createElement(f.ChatActionsForm,{deleteMode:this.state.deleteMode,noMarketing:this.state.noMarketing,onSendMessage:this.sendMessage.bind(this),onDeleteModeToggle:this.onDeleteModeToggle.bind(this),onToggleMarketing:this.onToggleMarketing.bind(this),onDelete:this.onDelete.bind(this)}))},o}(d.Component),f.ChatPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="common/page",n.prototype.pageType=v.mainMenuIds.MESSAGES,n.prototype.availableToManager=!0,n.prototype.getTitle=function(){return t("Chat")},n.prototype.show=function(){var t;return("pending"===window.app.messagingPromise.state()?window.app.messagingPromise:window.app.updateMessages()).done((t=this,function(){return t.render().then((function(){return t.container=t.$(".content")[0],window.app.messages.invoke("markAsRead"),window.app.chatMessages.markAsRead(window.app.chatMessages.getMessages().filter((function(t){return!t.get("read")}))),h.render(d.createElement(f.ChatBlock),t.container)}))})).fail((function(){return window.app.showErrorPage()}))},n.prototype.cleanUp=function(){if(n.__super__.cleanUp.apply(this,arguments),this.container)return h.unmountComponentAtNode(this.container)},n}(l),f}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h;return o(451),d=o(372),s=o(378),u=o(557).ReactCheckbox,h=o(380),c=o(399),l=o(440),n=c.DOM,(p={}).ALLOW_BATCH_EDIT=!0,p.MessagesActionsPanel=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.handleToggleAllClick=function(t){return t.preventDefault(),this.props.onToggleAll(!this.props.allSelected)},o.prototype.handleMarkAsReadClick=function(t){return t.preventDefault(),this.props.onMarkAsRead()},o.prototype.handleRemoveClick=function(t){return t.preventDefault(),this.props.onRemove()},o.prototype.render=function(){var e,o;return o=this.props.allSelected?t("Deselect all"):t("Select all"),e=this.props.noneSelected?"message-action--inactive":"",n.div({className:"messages-actions"},n.a({className:"message-action message-action--toggle",onClick:this.handleToggleAllClick.bind(this)},o),n.a({className:"message-action message-action--mark-as-read "+e,onClick:this.handleMarkAsReadClick.bind(this)},t("Mark as read")),n.a({className:"message-action message-action--remove "+e,onClick:this.handleRemoveClick.bind(this)}))},o}(c.Component),p.MessageItem=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.onSelectionChange=function(t){return this.props.onSelectionChange(t)},o.prototype.render=function(){var e;if(this.props.link)switch(this.props.link.type){case"url":e=n.a({className:"wb-button details-link",href:this.props.link.url,target:"_blank"},t("Details"));break;case"product":e=n.a({className:"wb-button order-link",href:"#SHOWCASE/"+this.props.link.id},t("Order"));break;default:console.warn("Link type "+this.props.link.type+" is not supported")}return n.div({className:"message-wrapper"},n.div({id:this.props.id,className:"message status-"+this.props.status+" priority-"+this.props.priority,key:this.props.key},n.h4({onClick:this.props.onActivate},n.span({className:"priority-icon"}),n.span({className:"message-icon"}),n.span({className:"message-title"},this.props.title),n.span({className:"message-time"},d.filters.letterTime(this.props.date))),n.div({className:"message-body"},n.div(null,n.div({className:"message-text",dangerouslySetInnerHTML:{__html:this.props.body}}),e),n.a({className:"remove-message",href:"#",onClick:this.props.onRemove},t("Remove")))),p.ALLOW_BATCH_EDIT?c.createElement(u,{checked:this.props.isSelected,onChange:this.onSelectionChange.bind(this),cssClass:"message-checkbox"}):void 0)},o}(c.Component),p.NoMessages=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.render=function(){return n.div({className:"no-messages"},t("You don't have any messages"))},o}(c.Component),p.MessageList=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.prepareCollectionForRender(),this.state={models:this.props.collection.models}}return a(e,t),e.prototype.prepareCollectionForRender=function(){var t;return t=this.props.activeMessageId,i.each(this.props.collection.models,(function(e){return e.isOpened=!!t&&t===e.get("id")}))},e.prototype.removeHandler=function(t,e){var n,o;return e.preventDefault(),(n=this.props.collection.get(t)).destroy().then((o=this,function(){return o.setState({models:i.without(o.state.models,n)})}))},e.prototype.activateHandler=function(t,e){var n,o;if((n=this.props.collection.get(t)).isOpened=!n.isOpened,"unread"===n.get("status"))return n.markAsRead().then((o=this,function(){return o.setState({models:o.state.models})}))},e.prototype.selectionHandler=function(t,e){return this.props.collection.get(t).isSelected=e,this.setState({models:this.state.models})},e.prototype.toggleAllHandler=function(t){return this.props.collection.forEach((function(e){return e.isSelected=t})),this.setState({models:this.state.models})},e.prototype.markSelectedAsReadHandler=function(){var t,e;if((t=this.props.collection.filter((function(t){return t.isSelected}))).length)return this.props.collection.markAsRead(t).then((e=this,function(){return e.props.collection.forEach((function(t){return t.isSelected=!1})),e.setState({models:e.props.collection.models})}))},e.prototype.removeSelectedHandler=function(){var t,e;if((t=this.props.collection.filter((function(t){return t.isSelected}))).length)return this.props.collection.deleteMessages(t).then((e=this,function(){return e.setState({models:e.props.collection.models})}))},e.prototype.render=function(){return n.div({className:"block__messages "+(this.state.models.length?"":"empty")},this.state.models.length&&p.ALLOW_BATCH_EDIT?c.createElement(p.MessagesActionsPanel,{allSelected:this.state.models.every((function(t){return t.isSelected})),noneSelected:this.state.models.every((function(t){return!t.isSelected})),onToggleAll:this.toggleAllHandler.bind(this),onMarkAsRead:this.markSelectedAsReadHandler.bind(this),onRemove:this.removeSelectedHandler.bind(this)}):void 0,n.div({ref:"container"},this.state.models.length?this.state.models.map((t=this,function(e){return c.createElement(p.MessageItem,i.extend(e.viewContext(),{key:e.id,isSelected:e.isSelected,onActivate:t.activateHandler.bind(t,e.id),onRemove:t.removeHandler.bind(t,e.id),onSelectionChange:t.selectionHandler.bind(t,e.id)}))})):c.createElement(p.NoMessages)));var t},e.prototype.enhance=function(){var t;return t=this.state.models.map((function(t){return t.isOpened})),r(this.refs.container).children().each((function(e,n){return r(n).children(".message").accordion({active:!!t[e]&&0,collapsible:!0})}))},e.prototype.componentDidMount=function(){return this.enhance()},e.prototype.componentDidUpdate=function(){return this.enhance()},e.prototype.componentWillUpdate=function(){return r(this.refs.container).children().each((t=this,function(e,n){var o,i;if(o=r(n).children(".message"),!(i=t.props.collection.get(o.attr("id")))||i.isRead())return o.accordion("destroy")}));var t},e}(c.Component),p.MessagesPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="common/page",n.prototype.pageType=h.mainMenuIds.MESSAGES,n.prototype.availableToManager=!0,n.prototype.initialize=function(){var t;return n.__super__.initialize.apply(this,arguments),this.activeMessageId=(null!=(t=this.options.params)?t.id:void 0)||null},n.prototype.getTitle=function(){return t("Messages")},n.prototype.show=function(){return r.when(this.render(),window.app.messagingPromise).done((t=this,function(){return l.render(c.createElement(p.MessageList,{collection:window.app.messages,activeMessageId:t.activeMessageId}),t.$(".content")[0])})).done(function(t){return function(){return t.tryScrollToMessage()}}(this)).fail((function(){return window.app.showErrorPage()}));var t},n.prototype.tryScrollToMessage=function(){var t;if(this.activeMessageId)return(t=r("#"+this.activeMessageId)).length?r(document).scrollTop(t.offset().top):void 0},n}(s),p}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c;return a=o(848).WbLoginSchema,n=o(378),r=o(387).WbFormMixin,c=o(380),function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.availableToManager=!0,n.prototype.template="auth/set-login-page",n.prototype.mixins=[r],n.prototype.pageType=c.mainMenuIds.SECURITY,n.prototype.errorMessages=a.ERROR_MESSAGES,n.prototype.bindings={login:"[name=login]",oldLogin:"[name=oldLogin]"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model=new a},n.prototype.show=function(){return window.app.data.user.fetchIfEmpty().then((t=this,function(){return t.model.set("oldLogin",window.app.data.user.get("login")),t.initForm(),n.__super__.show.apply(t,arguments)}));var t},n.prototype.getTitle=function(){return t("Change login")},n.prototype.onSubmitSuccess=function(){return window.app.data.user.set("login",this.model.get("login")),i.defer((e=this,function(){return e.showOperationSuccess(t("Login has been changed"))}));var e},n}(n)}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u,l;return u=o(848),c=u.WbPwaSchema,a=u.WbPwaPolicy,n=o(378),r=o(387).WbFormMixin,l=o(380),function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.availableToManager=!0,n.prototype.template="auth/set-password-page",n.prototype.mixins=[r],n.prototype.pageType=l.mainMenuIds.SECURITY,n.prototype.attrsToResetOnError=["password","passwordConfirmation"],n.prototype.errorMessages=c.ERROR_MESSAGES,n.prototype.bindings={password:"[name=password]",passwordConfirmation:"[name=passwordConfirmation]"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model=new c,this.policy=new a,this.initForm()},n.prototype.getTitle=function(){return t("Change password")},n.prototype.getValidationOptions=function(){var t;return t={password:{},passwordConfirmation:{equalTo:"[name=password]"}},this.policy.get("characters")&&(t.password.passwordChars=this.policy.get("characters")),this.policy.get("regex")&&(t.password.passwordRegex=this.policy.get("regex")),{rules:t}},n.prototype.show=function(){return this.policy.fetch().then((t=this,function(){return n.__super__.show.apply(t,arguments)}));var t},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{policy:this.policy.viewContext()})},n.prototype.onSubmitSuccess=function(){return i.defer((e=this,function(){return e.showOperationSuccess(t("Password has been changed"))}));var e},n}(n)}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(e,n,o){var i,r,s,a,c,u={}.hasOwnProperty;s=o(378),a=o(1055).PersonalizedDevicesView,r=o(1057).OtpReceiptView,i=o(1058).AuditLoginsView,c=o(380),(n={}).SecuritySettingsPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="settings/security-settings-page",n.prototype.pageType=c.mainMenuIds.SECURITY,n.prototype.getTitle=function(){return t("Settings and Security")},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.personalizedDevicesView=new a({el:this.$(".personalaized-devices")}),this.otpReceiptView=new r({el:this.$(".otp-receipt")}),this.personalizedDevicesView.show(),this.otpReceiptView.show(),!window.OW.features.LOGIN_HISTORY||(this.auditLoginsView=new i({el:this.$(".audit-logins")}),this.auditLoginsView.show())},n}(s),e.exports=n},function(e,n,o){(function(n,i,r){var s,a,c,u,l,d,p=function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},h={}.hasOwnProperty;u=o(374).TemplateView,c=o(1056).PersonalizedDevices,a=o(530).InlineEditView,s=o(386),d=o(136),(l={}).PersonalizedDevicesView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return p(o,e),o.prototype.template="settings/personalized-devices",o.prototype.events={"click .column-device":"editPersonalizedDeviceName","click .action_delete":"showDeletePersonalizedDeviceConfirmationDialog"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.editDeviceViews=[],this.personalizedDevices=new c,this.modelBinder=new n.ModelBinder},o.prototype.show=function(){return this.showLoadingIndicator(),this.fetchData().then((t=this,function(){return o.__super__.show.apply(t,arguments)})).fail(function(t){return function(){return t.$el.empty()}}(this));var t},o.prototype.fetchData=function(){return this.personalizedDevices.fetch().fail((t=this,function(e){return t.onAjaxError(e)}));var t},o.prototype.onAjaxError=function(e){return d.error("AjaxError. Failed to load devices with access code.",e),window.app.showErrorMessage(t("Failed to load devices with access code")),e.errorHandled=!0},o.prototype.editPersonalizedDeviceName=function(t){return t.preventDefault(),this.showEditDeviceView(i(t.target).closest(".personalized-device-item"))},o.prototype.showEditDeviceView=function(t){var e,n,o;if(e=null!=t?t.data("id"):void 0)return n=this.personalizedDevices.get(e),this.bindDeviceModel(n,this.$el.find(".personalized-device-item[data-id='"+e+"']")),this.editDeviceViews[e]?this.editDeviceViews[e].showEditPanel():(o=new l.PersonalizedDeviceEditPanelView({el:i(t).find(".actions-panel"),model:n}),this.editDeviceViews[e]=o,o.show().then((function(){return o.showEditPanel()})))},o.prototype.bindDeviceModel=function(t,e){return this.modelBinder.bind(t,e,{name:".title"})},o.prototype.showDeletePersonalizedDeviceConfirmationDialog=function(t){var e,n,o,r,s;return t.preventDefault(),o=(e=i(t.target).closest(".personalized-device-item")).data("id"),r=this.personalizedDevices.get(o),(n=new l.DeletePersonalizedDeviceConfirmationDialog({model:r})).show(),this.listenTo(n,"delete.complete",(s=this,function(){return s.removeDevice(e)}))},o.prototype.removeDevice=function(t){if(t.remove(),0===this.personalizedDevices.length)return this.remove()},o.prototype.context=function(){return{personalizedDevices:this.personalizedDevices.viewContext()}},o}(u),l.PersonalizedDeviceEditPanelView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.template="settings/personalized-devices-edit",e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.initEditPanel(),this.model.trackSavedValue(),this.modelBinder=new n.ModelBinder,this.modelBinder.bind(this.model,this.$el,{name:".personalized-device-name"})},e.prototype.initEditPanel=function(){return this.editPanel=new a({el:this.$el.find(".personalized-device-edit-panel")},{validationRules:{required:!0,personalizedDeviceName:!0}}),this.editPanel.on("cancel",(t=this,function(){return r.defer((function(){return t.model.revert()}))})).on("save",function(t){return function(e){return t.model.rename(e)}}(this));var t},e.prototype.showEditPanel=function(){return this.editPanel.show()},e}(u),l.DeletePersonalizedDeviceConfirmationDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,e),n.prototype.id="delete-personalized-device-dialog",n.prototype.requiredOptions=["model"],n.prototype.dialogOptions=function(){return{title:t('The code for device "%(deviceModel)s" will be deleted.',{deviceModel:this.model.get("name")}),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:t("Delete"),class:"wb-button proceed",click:function(e){return function(n){if(!e.processing)return e.showLoadingIndicator(),e.applyLoadingStateToButton(i(n.currentTarget)),e.model.destroy().then((function(){return e.trigger("delete.complete"),e.close()})).fail((function(e){return d.error("AjaxError. Failed to remove device with access code.",e),window.app.showErrorMessage(t("Failed to remove personalized device"))}))}}(this)}]};var e},n}(s),e.exports=l}).call(this,o(384),o(14),o(11))},function(t,e,n){(function(e,o){var i,r,s,a,c,u=function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty;c=n(40),n(97),r=(a=n(375)).BaseModel,i=a.BaseCollection,(s={}).PersonalizedDevice=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return u(n,t),n.prototype.url=function(){return this.id?c.API_URL+"/user/personalized-devices/"+this.id:c.API_URL+"/user/personalized-devices/enroll"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.on("remove",(function(){return window.app.session.fetch()}))},n.prototype.defaults=function(){return{deviceId:window.cordova?window.app.getDeviceInfo().uuid:"noCordova"}},n.prototype.toJSON=function(){var t;return delete(t=e.clone(this.attributes)).pinConfirmation,t},n.prototype.save=function(){return n.__super__.save.apply(this,arguments).done((t=this,function(){if(t.cleanAttributes(),t.unset("pin"),t.unset("pinConfirmation"),!t.get("transactionCounter"))return t.set("transactionCounter",0)}));var t},n.prototype.updateTransactionCounter=function(t){return this.set("transactionCounter",t)},n.prototype.rename=function(t){var e,n,o;if(t)return n={path:"/name",op:"replace",value:t=t.trim()},e=this.get("name"),this.set("name",t),this.sendPatch([n]).done((function(){return window.app.session.fetch()})).fail((o=this,function(){return o.set("name",e)}))},n}(r),s.PersonalizedDevices=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=s.PersonalizedDevice,e.prototype.url=c.API_URL+"/user/personalized-devices",e.prototype.closeOtpMmaScheme=function(t){return t?this.get(t).destroy():o.Deferred().reject(new Error('PersonalizedDevices.closeOtpMmaScheme. "otpMmaSchemeId" is needed for close Otp Mma Scheme.'))},e}(i),t.exports=s}).call(this,n(11),n(14))},function(e,n,o){(function(n,i){var r,s,a,c,u,l=function(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},d={}.hasOwnProperty;s=o(849).OtpReceipt,a=o(374).TemplateView,r=o(386),u=o(136),(c={}).OtpReceiptView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return l(o,e),o.prototype.template="settings/otp-receipt",o.prototype.events={"click .action_delete":"showDeleteOtpReceiptConfirmationDialog"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.otpReceipt=new s},o.prototype.show=function(){return this.showLoadingIndicator(),this.fetchData().then((t=this,function(){return o.__super__.show.apply(t,arguments)})).fail(function(t){return function(){return t.$el.empty()}}(this));var t},o.prototype.fetchData=function(){return this.otpReceipt.fetch().fail((t=this,function(e){return t.onAjaxError(e)}));var t},o.prototype.onAjaxError=function(e){return u.error("AjaxError. Failed to load check with passwords.",e),window.app.showErrorMessage(t("Failed to load check with passwords")),e.errorHandled=!0},o.prototype.showDeleteOtpReceiptConfirmationDialog=function(t){var e,n;return t.preventDefault(),(e=new c.DeleteOtpReceiptConfirmationDialog({model:this.otpReceipt})).show(),this.listenTo(e,"delete.complete",(n=this,function(){return n.remove()}))},o.prototype.context=function(){var t;return t=this.otpReceipt.viewContext(),{isExists:!n.isEmpty(t),otpReceipt:t}},o}(a),c.DeleteOtpReceiptConfirmationDialog=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,e),n.prototype.id="delete-otp-receipt-dialog",n.prototype.requiredOptions=["model"],n.prototype.dialogOptions=function(){return{title:t("The check with passwords №%(number)s will be deleted.",{number:this.model.get("chequeNumber")}),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(){if(!e.processing)return e.close()})},{text:t("Delete"),class:"wb-button proceed",click:function(e){return function(n){if(!e.processing)return e.showLoadingIndicator(),e.applyLoadingStateToButton(i(n.currentTarget)),e.model.sendDelete().then((function(){return e.trigger("delete.complete"),e.close()})).fail((function(e){return u.error("AjaxError. Failed to delete otp check.",e),window.app.showErrorMessage(t("Failed to delete check with passwords"))}))}}(this)}]};var e},n}(r),e.exports=c}).call(this,o(11),o(14))},function(e,n,o){var i,r,s,a={}.hasOwnProperty;i=o(849).AuditLogins,r=o(374).TemplateView,o(386),s=o(136),(n={}).AuditLoginsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="settings/audit-logins",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.auditLogins=new i},n.prototype.show=function(){return this.showLoadingIndicator(),this.fetchData().then((t=this,function(){return n.__super__.show.apply(t,arguments)})).fail(function(t){return function(){return t.$el.empty()}}(this));var t},n.prototype.fetchData=function(){return this.auditLogins.fetch().fail((t=this,function(){return t.onAjaxError()}));var t},n.prototype.onAjaxError=function(e){return s.error("AjaxError. Failed to load history of logins activity.",e),window.app.showErrorMessage(t("Failed to load history of logins activity")),e.errorHandled=!0},n.prototype.reformatAuditLogins=function(t){var e,n,o,i;for(i=[],n=0,o=t.length;n<o;n++)e=t[n],i.push({isDevice:!!e.os,isBrowser:!(!e.browser||e.os),ipAddress:e.ipAddress,name:this.defineAuditLoginName(e),date:e.createdAt});return i},n.prototype.defineAuditLoginName=function(e){return e.deviceName?e.deviceName:e.os?"Android"===e.os?t("App for Android"):t("App for iPhone"):e.browser?e.browser:""},n.prototype.context=function(){return{auditLogins:this.reformatAuditLogins(this.auditLogins.viewContext())}},n}(r),e.exports=n},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return i=n(374).TemplateView,e=n(853).FlatHistoryListView,function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="disputes/dispute-view",n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return t.$el.toggleClass("hidden",t.model.isClosed())}));var t},n.prototype.onRender=function(){return new e({el:this.$(".operations"),history:this.model.transactions}).show()},n.prototype.context=function(){var t;return(t=o.extend(n.__super__.context.apply(this,arguments),this.model.viewContext())).statusName=window.OW.disputesConfig.statuses[t.status],t},n}(i)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p;return p=o(380),c=o(378),n=o(487).Notifications,d=o(387).WbFormMixin,u=o(399),l=o(440),s=o(1062).NotificationsSettings,{NotificationsPage:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="settings/notifications-page",o.prototype.pageType=p.mainMenuIds.SECURITY,o.prototype.availableToManager=!0,o.prototype.mixins=[d],o.prototype.initialize=function(t){var e;return o.__super__.initialize.apply(this,arguments),this.model=new n,this.contractId=null!=(e=this.options.params)?e.contractId:void 0,this.initForm()},o.prototype.getTitle=function(){return t("Notifications management")},o.prototype.getValidationOptions=function(){return{ignore:":hidden, :checkbox"}},o.prototype.onSubmitSuccess=function(){return window.app.showSuccessMessage(t("Notifications settings has been updated")),window.app.data.contracts.dashboard.resync()},o.prototype.show=function(){var t,e,n,o;return this.showLoadingIndicator(),e=null!=(n=window.OW.contractsConfig)?n.wbCardsAccountsPage:void 0,t=window.app.data.contracts.dashboard,i.when(this.model.fetch(),t.fetchIfEmpty(e.sections)).then((o=this,function(){return o.render()})).then(function(e){return function(){return e.model.isValid?(l.render(u.createElement(s,{model:e.model,contracts:t,contractId:e.contractId}),e.$(".notifications-settings-wrapper")[0]),e.trigger("render.complete")):window.app.showErrorPage({errorText:e.model.validationError})}}(this)).fail((function(){return window.app.showErrorPage()}))},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),!1},o.prototype.context=function(){return r.extend(o.__super__.context.apply(this,arguments),{isReadOnlyForm:this.model.isSettingsEditable()})},o}(c)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(n,i){var r,s,a,c,u,l,d=function(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},p={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};l=o(40),c=o(377),s=(u=o(375)).BaseModel,r=u.BaseCollection,(a={}).NOTIFICATION_CHANNELS={SMS:"SMS",EMAIL:"EMAIL",PUSH:"PUSH"},a.CHANNELS_NAMES={SMS:t("SMS"),EMAIL:t("E-mail")},a.CHANNELS_MASKS={SMS:"PHONERU"},a.NotificationsList=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.url=l.API_URL+"/notifications",e.prototype.isEmpty=function(){return this.all((function(t){return 0===t.get("values").length}))},e.prototype.addItem=function(t,e,n){var o,i;if(null==n&&(n=!1),i=(o=this.getOfType(t)).get("values"),!(h.call(i,e)>=0))return i.push(e),n||o.set("enabled",!!i.length),this.trigger("change change:add",t,e);console.warn("Tried to add already existing item: { type: "+t+", value: "+e+" }")},e.prototype.removeItem=function(t,e,n){var o,i,r;if(null==n&&(n=!1),-1!==(o=(r=(i=this.getOfType(t)).get("values")).indexOf(e)))return r.splice(o,1),n||i.set("enabled",!!r.length),this.trigger("change change:remove",t,e);console.warn("Tried to remove unexisting item: { type: "+t+", value: "+e+" }")},e.prototype.editItem=function(t,e,n){var o,i;if(-1!==(o=(i=this.getOfType(t).get("values")).indexOf(e))){if(!(h.call(i,n)>=0))return i.splice(o,1,n),this.trigger("change change:edit",t,n,e);console.warn("Entered value already exists: { type: "+t+", value: "+n+" }")}else console.warn("Tried to edit unexisting item: { type: "+t+", value: "+e+" }")},e.prototype.toggleItem=function(t,e){var n;if(n=this.getOfType(t))return n.set("enabled",e);console.warn("Tried to toggle unexisting type: "+t)},e.prototype.getTypes=function(){return this.pluck("type")},e.prototype.hasOfType=function(t){var e;return!!(null!=(e=this.getOfType(t))?e.get("values").length:void 0)},e.prototype.getOfType=function(t){return this.findWhere({type:t})},e}(r),a.Notifications=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.url=l.API_URL+"/notifications",e.prototype.hasContractSettings=function(t){return n.has(this.contractSettings,t)&&this.getContractNotifications(t).length>0},e.prototype.getTypesToAdd=function(t){var e,n,o,i,r;for(r=[],e=0,o=(i=this.get("properties")).length;e<o;e++)n=i[e],this.canAddOfType(t,n.channel)&&r.push(n.channel);return r},e.prototype.canAddOfType=function(t,e){var o,i,r;return!(l=n.findWhere(this.get("properties"),{channel:e}))||0!==l.maxItems&&(i=t?this.contractSettings[t]:this.clientSettings,!(h.call(i.getTypes(),e)<0)&&(o=(r=i.getOfType(e)).get("editable")&&r.get("values").length<l.maxItems,"SMS"===e&&(o=o&&!1!==this.get("phoneNumbersEditable")),o))},e.prototype.getContractNotifications=function(t){return this.contractSettings[t]},e.prototype.syncClientSettingsChange=function(t,e,n){var o,i,r,s,a;for(o in a=[],s=this.contractSettings)(r=(i=s[o]).getOfType(t))&&r.get("editable")&&!r.get("external")&&(n?a.push(i.editItem(t,n,e)):a.push(i.addItem(t,e,!0)));return a},e.prototype.syncOnUpdate=function(t){var e,o,i,r,s,c,u,l,d;for(r in d=t.contractSettings,s=[],o=this.contractSettings)e=o[r],(u=d[r])?(u=new a.NotificationsList(u.notifications),s.push(function(){var t,o,r,s;for(s=[],t=0,o=(r=e.getTypes()).length;t<o;t++)c=r[t],i=e.getOfType(c),l=u.getOfType(c),n.isEqual(i.toJSON(),l.toJSON())||(e.remove(i),e.add(l),s.push(e.trigger("change:sync")));return s}())):console.warn("Settings for contract "+r+" are missing after update");return s},e.prototype.parse=function(t,e){var n,o,i;if(t.confirmation)return t;for(n in t.clientSettings&&(this.clientSettings=new a.NotificationsList(t.clientSettings.notifications),delete t.clientSettings),this.contractSettings={},i=t.contractSettings)o=i[n],this.contractSettings[n]=new a.NotificationsList(o.notifications);return delete t.contractSettings,t.globalProperties},e.prototype.fetch=function(){return e.__super__.fetch.apply(this,arguments).done((t=this,function(){return t.validate()})).done(function(t){return function(){if(t.clientSettings)return t.clientSettings.on("change:edit change:add",t.syncClientSettingsChange.bind(t))}}(this));var t},e.prototype.validate=function(){var t,e,n,o;if(n=this.get("overrideMode"),this.clientSettings&&"CONTRACT_OVERRIDE"===n)for(t=0,e=(o=this.clientSettings).length;t<e;t++)if(o[t].get("values").length>1)return this.isValid=!1,void(this.validationErrorCode="ERR_TOO_MANY_CHANNEL_METHODS");return this.isValid=!0},e.prototype.getJSON=function(){var t,e,n,o,i;for(e in o={contractSettings:{}},(t=this.get("confirmation"))&&(o.confirmation=t),this.clientSettings&&(o.clientSettings={notifications:this.clientSettings.toJSON()}),i=this.contractSettings)n=i[e],o.contractSettings[e]={notifications:n.toJSON()};return o},e.prototype.isSettingsEditable=function(){return n.values(this.contractSettings).some((function(t){return t.some((function(t){return t.get("editable")}))}))},e.prototype.save=function(){return i.sync("update",this,{url:this.url,data:JSON.stringify(c.sanitizeValues(this.getJSON())),contentType:"application/json"}).done((t=this,function(e){return t.syncOnUpdate(e),t.trigger("sync")})).fail(function(t){return function(e){return t.onAjaxError(e)}}(this));var t},e}(s),a.NotificationsPreferences=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.url=l.API_URL+"/notifications/preferences",e.prototype.isNew=function(){return!0},e.prototype.toJSON=function(){return n.omit(e.__super__.toJSON.apply(this,arguments),["account"])},e.prototype.isPreferredChannel=function(t){return this.get("preferredChannel")===t},e.prototype.isPrimaryPushDevice=function(t){return this.isPreferredChannel(a.NOTIFICATION_CHANNELS.PUSH)&&t===this.get("account.device.id")},e.prototype.viewContext=function(){var t;return(t=this.get("account"))?n.extend(e.__super__.viewContext.apply(this,arguments),{account:t}):e.__super__.viewContext.apply(this,arguments)},e}(s),e.exports=a}).call(this,o(11),o(384))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e,o,r,s;return s=n(399),e=s.DOM,r=n(1063).NotificationsSettingsMenu,o=n(1064).NotificationsList,{NotificationsSettings:function(t){function n(){n.__super__.constructor.apply(this,arguments),this.contracts=this.getFilteredContracts(),this.state={activeItem:this.getDefaultActiveItem()}}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.getFilteredContracts=function(){return this.props.contracts},n.prototype.getDefaultActiveItem=function(){var t,e;if(this.props.contractId&&(t=this.contracts.get(this.props.contractId))){if(t.notificationsSupported())return t.id;if("cardAccount"===t.get("type")&&(e=this.contracts.childrenOf(t.id).find((function(t){return t.notificationsSupported()}))))return e.id}return"CONTRACT_FULL"!==this.props.model.get("overrideMode")?"":this.contracts.find((function(t){return t.notificationsSupported()})).id},n.prototype.onItemSelected=function(t){return this.setState({activeItem:t})},n.prototype.getNotificationsListProperties=function(){var t,e,n,o,i,r,s;return i=(o=this.props.model).get("overrideMode"),r=this.state.activeItem?o.getContractNotifications(this.state.activeItem):o.clientSettings,n=(e=this.state.activeItem?this.contracts.get(this.state.activeItem):null)&&(s=e.get("parentId"))&&!this.contracts.get(s),t=!e||"CONTRACT_FULL"===i&&!n?o.getTypesToAdd.bind(o,this.state.activeItem):function(){return[]},{key:this.state.activeItem||"client-settings",mode:i,model:this.props.model,getAvailableTypes:t,notifications:r,contract:e,isAdditionalContract:!1===(null!=e?e.get("isUserOwned"):void 0)||n}},n.prototype.render=function(){return e.div({className:"notifications-settings"},s.createElement(r,{model:this.props.model,contracts:this.contracts,onItemSelected:this.onItemSelected.bind(this),activeItem:this.state.activeItem}),s.createElement(o,this.getNotificationsListProperties()))},n}(s.Component)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a;return a=n(372),s=n(399),i=s.DOM,e=function(t){var e,n,o;return o="status-"+t.card.status,e=t.card.wbProductColor?"color-"+t.card.wbProductColor:"",n=t.card.isVirtual?"icon-virtual":"icon-"+t.card.paymentSystem,i.a({href:"#",className:"card "+o+" "+e+" "+n,onClick:t.onClick},i.span({className:"card-number"},""+a.filters.cardNumberMask(t.number)))},{NotificationsSettingsMenu:function(t){function n(){var t,e;n.__super__.constructor.apply(this,arguments),this.state={limited:null!=(t=this.props.model.clientSettings)?t.isEmpty():void 0},this.state.limited&&this.props.model.clientSettings.once("change",(e=this,function(){return e.setState({limited:!1})}))}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.onItemClick=function(t,e){return e.preventDefault(),this.props.onItemSelected(t)},n.prototype.render=function(){var t,n,r,s;return t=this.props.contracts.filter((s=this,function(t){return s.props.model.hasContractSettings(t.id)})),r=[],(n="CONTRACT_FULL"===this.props.model.get("overrideMode"))||r.push(i.li({key:"mi-settings",className:"nav-item client-settings "+(this.props.activeItem?"":"active")},i.a({href:"#",className:"card settings",onClick:this.onItemClick.bind(this,"")}))),r.push.apply(r,t.map(function(t){return function(r){var s,a,c,u;return t.state.limited?(c=r.get("isUserOwned")&&(u=r.get("parentId"))&&!!t.props.contracts.get(u),a=!n&&c&&t.props.model.getContractNotifications(r.id).isEmpty()?"hidden":""):a="",s=r.id===t.props.activeItem?"active":"",i.li({key:"mi-"+r.id,className:"nav-item "+s+" "+a},e(o.extend(r.viewContext(),{onClick:t.onItemClick.bind(t,r.id)})))}}(this))),i.ul({className:"nav-section"},r)},n}(s.Component)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){var i,r={}.hasOwnProperty,s=[].slice;void 0===(i=function(e){var n,i,a,c,u;return o(372),o(402),n=o(487).CHANNELS_NAMES,u=o(399),i=u.DOM,c=o(1065).NotificationsListItem,a=o(854).NotificationInlineEdit,{NotificationsList:function(e){function o(){o.__super__.constructor.apply(this,arguments),this.state={models:this.props.notifications.models,addMode:!1}}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.onAdd=function(t,e){return this.props.notifications.addItem(t,e),this.setState({models:this.state.models,addMode:null})},o.prototype.onChange=function(t,e,n){return this.props.notifications.editItem(t,e,n),this.setState({models:this.state.models})},o.prototype.onToggle=function(t,e){return this.props.notifications.toggleItem(t,e),this.setState({models:this.state.models})},o.prototype.onRemove=function(t,e){return this.props.notifications.removeItem(t,e),this.setState({models:this.state.models})},o.prototype.toggleAddMode=function(t,e){return e&&e.preventDefault(),this.setState({addMode:t})},o.prototype.getNotificationDescriptor=function(t,e){var n,o,i,r,s;return s=t.get("type"),n=!!this.props.contract,i=t.get("editable"),r=t.get("enabled"),o=(!n||"CONTRACT_MUTE"!==this.props.mode&&r)&&i,"SMS"===s&&(o=o&&!1!==this.props.model.get("phoneNumbersEditable")),{mode:this.props.mode,type:s,value:e,contract:this.props.contract,enabled:r,existingValues:t.get("values"),changeable:o,onChange:this.onChange.bind(this,s),toggleable:n&&"CONTRACT_FULL"!==this.props.mode&&i,onToggle:this.onToggle.bind(this,s),removable:"CONTRACT_FULL"===this.props.mode&&i,onRemove:this.onRemove.bind(this,s,e[0])}},o.prototype.getAddRow=function(){if(this.state.addMode)return i.li({className:"notification"},u.createElement(a,{type:this.state.addMode,onSave:this.onAdd.bind(this,this.state.addMode),onCancel:this.toggleAddMode.bind(this),existingValues:this.props.notifications.getOfType(this.state.addMode).get("values")}))},o.prototype.getMissingNotificationMethodsWarning=function(){if(this.props.notifications.isEmpty()&&!this.props.contract)return i.li({className:"notification empty-warning"},t("You will be able to edit your contracts settings as soon as you have at least one available notification method"))},o.prototype.getExtraContent=function(){},o.prototype.render=function(){var e,o,r,a,l,d,p,h;for(d=[],o=0,r=(p=this.state.models).length;o<r;o++)a=p[o],"CONTRACT_FULL"!==this.props.mode?a.get("values").length&&d.push(this.getNotificationDescriptor(a,a.get("values"))):d.push.apply(d,a.get("values").map(function(t){return function(e){return t.getNotificationDescriptor(a,[e])}}(this)));return this.props.contract?(l=this.props.contract.get("name"),this.props.isAdditionalContract&&(l=t("Additional card: %(name)s",{name:l}))):l=t("Available notifications methods"),d.length||(e=i.li({className:"notification"},t("No configured notifications"))),i.div({className:"notifications-settings-item"},i.div({className:"notifications-item-header"},i.h2({className:"h-small name"},l),i.div({className:"actions"},this.props.getAvailableTypes().map((h=this,function(t){return i.a({key:"av-t-"+t,href:"#",onClick:h.toggleAddMode.bind(h,t)},"+"+n[t])})))),i.ul.apply(i,[{className:"notifications"},e].concat(s.call(d.map((function(t){return u.createElement(c,t)}))),[this.getAddRow()],[this.getMissingNotificationMethodsWarning()])),this.getExtraContent())},o.prototype.onSync=function(){return this.setState({models:this.state.models})},o.prototype.componentDidMount=function(){return this.props.notifications.on("change:sync",this.onSync,this)},o.prototype.componentWillUnmount=function(){return this.props.notifications.off("change:sync",this.onSync,this)},o}(u.Component)}}.call(n,o,n,e))||(e.exports=i)},function(t,e,n){var o,i={}.hasOwnProperty,r=[].slice;void 0===(o=function(t){var e,o,s,a,c,u,l,d;return l=n(402),d=n(487),o=d.CHANNELS_NAMES,e=d.CHANNELS_MASKS,c=n(399),s=c.DOM,u=n(1066).ReactSwitch,a=n(854).NotificationInlineEdit,{NotificationsListItem:function(t){function n(){n.__super__.constructor.apply(this,arguments),this.state={editingValue:null}}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.toggleEditMode=function(t,e){return e&&e.preventDefault(),this.setState({editingValue:t})},n.prototype.getValueBlock=function(t){return this.props.changeable?s.a({className:"value",href:"#","data-mask":e[this.props.type],onClick:this.toggleEditMode.bind(this,t)},t):s.span({className:"value","data-mask":e[this.props.type]},t)},n.prototype.onToggle=function(t){return this.props.onToggle(t)},n.prototype.onRemove=function(t){return t.preventDefault(),this.props.onRemove()},n.prototype.onEdit=function(t){return this.props.onChange(this.state.editingValue,t),this.toggleEditMode()},n.prototype.getExtraContent=function(){},n.prototype.renderSimpleView=function(){var t,e;return this.props.toggleable&&(e=c.createElement(u,{value:this.props.enabled,onChange:this.onToggle.bind(this)})),this.props.removable&&(t=s.a({className:"remove",href:"#",onClick:this.onRemove.bind(this)})),s.li({className:"notification",ref:"container"},e,s.div({className:"notification-type"},o[this.props.type]),s.div.apply(s,[{className:"values"}].concat(r.call(this.props.value.map(this.getValueBlock.bind(this))))),t,this.getExtraContent())},n.prototype.renderEditView=function(){return s.li({className:"notification"},c.createElement(a,{type:this.props.type,value:this.state.editingValue,onSave:this.onEdit.bind(this),onCancel:this.toggleEditMode.bind(this,null),existingValues:this.props.existingValues}))},n.prototype.render=function(){return this.state.editingValue?this.renderEditView():this.renderSimpleView()},n.prototype.applyMasks=function(){return l.applyMasks(this.refs.container)},n.prototype.componentDidMount=function(){return this.applyMasks()},n.prototype.componentDidUpdate=function(){if(!this.state.editingValue)return this.applyMasks()},n}(c.Component)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i;return n(423),i=n(399),e=i.DOM,{ReactSwitch:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.render=function(){return e.div({className:"switch-wrap"},e.input({type:"checkbox",defaultChecked:this.props.value,ref:"checkbox"}))},n.prototype.onChange=function(t){var e;return e=t.currentTarget.checked,this.props.onChange(e)},n.prototype.componentDidMount=function(){return o(this.refs.checkbox).on("change",this.onChange.bind(this)).switchButton({show_labels:!1})},n.prototype.componentWillUnmount=function(){return o(this.refs.checkbox).off("change").switchButton("destroy")},n}(i.Component)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u,l;return u=o(402),l=o(487),r=l.CHANNELS_NAMES,n=l.CHANNELS_MASKS,c=o(399),a=c.DOM,{NotificationInlineEdit:function(e){function o(){o.__super__.constructor.apply(this,arguments),this.state={error:null}}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.validatePhone=function(e){return e.startsWith(7)&&11===e.length?-1===this.props.existingValues.indexOf(e)?void 0:t("Entered phone number already exists"):t("Enter 11 digit phone number which starts with +7")},o.prototype.validateEmail=function(e){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?-1===this.props.existingValues.indexOf(e)?void 0:t("Entered e-mail address already exists"):t("Invalid e-mail format")},o.prototype.validate=function(){var t,e,n;switch(n=(null!=(e=i(this.refs.input).data("mask"))?e.getCleanVal():void 0)||this.refs.input.value,this.props.type){case"SMS":t=this.validatePhone(n);break;case"EMAIL":t=this.validateEmail(n);break;default:t=null}return this.setState({error:t}),!t},o.prototype.onKeyDown=function(t){switch(t.keyCode){case 27:return this.onCancel(t);case 13:return this.onSave(t)}},o.prototype.onSave=function(t){var e,n;return t.preventDefault(),!this.state.error&&(n=(null!=(e=i(this.refs.input).data("mask"))?e.getCleanVal():void 0)||this.refs.input.value,!!this.validate(n)&&this.props.onSave(n))},o.prototype.onCancel=function(t){return t.preventDefault(),this.props.onCancel()},o.prototype.render=function(){return a.div({ref:"container"},a.div({className:"ui-widget-overlay ui-front",onClick:this.onCancel.bind(this)}),a.div({className:"notification-edit-panel inline-edit-panel ui-front visible"},a.div({className:"notification-type"},r[this.props.type]),a.input({className:this.state.error?"invalid":"",type:"text",defaultValue:this.props.value||"",onKeyDown:this.onKeyDown.bind(this),onChange:this.validate.bind(this),"data-mask":n[this.props.type],ref:"input"}),a.div({className:"error-message"},this.state.error||""),a.div({className:"buttons"},a.button({type:"button",className:"link-button cancel",onClick:this.onCancel.bind(this)},t("Cancel")),a.button({type:"button",className:"wb-button icon-ok save",disabled:!!this.state.error,onClick:this.onSave.bind(this)}))))},o.prototype.componentDidMount=function(){return i(this.refs.input).focus(),u.applyMasks(this.refs.container)},o}(c.Component)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c;return o(423),n=o(378),a=o(405),r=o(387).WbFormMixin,(c={}).TwoFactorAuthManagementPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="settings/two-factor-auth-management-page",n.prototype.mixins=[r],n.prototype.bindings={DISABLE_TWO_FACTOR_AUTH:{selector:'[name="twoFactorAuthEnabled"]',converter:a.makeFlipSwitchConverter({true:"false",false:"true"})}},n.prototype.show=function(){var t,e;return(t=window.app.data.user).fetchIfEmpty().then((e=this,function(){return e.model=t.settings,e.twoFactorAvailable=i.without(t.get("authTypesAvailable"),"wb_pwa").length>0,e.twoFactorAvailable&&(e.model.trackSavedValue(),e.initForm(),e.once("render.complete",(function(){return e.model.on("change:DISABLE_TWO_FACTOR_AUTH",(function(){if(e.model.hasUnsavedChanges())return e.submit()}))}))),n.__super__.show.apply(e,arguments)}))},n.prototype.getTitle=function(){return t("Two factor auth management")},n.prototype.onSubmitSuccess=function(){return this.showSuccessMessage(t("Two factor auth settings has been saved"))},n.prototype.onAddAuthCancel=function(){var t;return this.model.set(this.model.savedValue,{silent:!0}),t="true"!==this.model.get("DISABLE_TWO_FACTOR_AUTH"),this.$('[name="twoFactorAuthEnabled"]').switchButton("option","checked",t)},n.prototype.onRender=function(){if(n.__super__.onRender.apply(this,arguments),this.twoFactorAvailable)return this.$('[name="twoFactorAuthEnabled"]').switchButton({show_labels:!1})},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{twoFactorManagementAllowed:window.OW.features.TWO_FACTOR_AUTH_MANAGEMENT,twoFactorAvailable:this.twoFactorAvailable,twoFactorEnabled:"true"!==this.model.get("DISABLE_TWO_FACTOR_AUTH")})},n}(n),c}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(r=function(t){var e,r,c,u,l,d,p;return p=n(40),r=n(378),u=n(394).WbGenericFormMixin,l=n(411).WbServiceMethodsMixin,e=n(414).CpServiceMeta,c=n(494).ServiceRequest,n(136),(d={}).InformationServicePage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/information-service",n.prototype.mixins=[u,l],n.prototype.initialize=function(t){var o,i,r,s;return this.pageType=t.menuId,n.__super__.initialize.apply(this,arguments),r=window.WB.currentSubMenuId||window.WB.currentMenuId,this.menuItem=window.app.data.menu.get(r),o=this.menuItem.isNative()&&this.menuItem.isService(),i=(this.serviceId=this.menuItem.get("service.id"))&&(s=this.serviceId,a.call(p.INFORMATION_SERVICES,s)>=0),o&&i?this.formMeta=new e({id:this.serviceId}):(this.isError=!0,console.warn("Cannot open "+r+" as an information service"),void window.app.showErrorPage())},n.prototype.show=function(){return this.isError?o.Deferred().resolve():this.formMeta.fetch().then((t=this,function(){return t.model=new c(t.formMeta.getModelDefaults(),{service:t.formMeta,serviceId:t.serviceId}),n.__super__.show.apply(t,arguments)}));var t},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),this.initGenericForm(),this.once("form.ready",(t=this,function(){return t.showMissingMandatoryFieldsWarning()})),!1},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),this.formMeta.viewContext())},n}(r),d}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m;return o(476),s=o(378),m=o(380),p=o(807),h=o(1071).TemplatesListView,d=o(1072).RecurrentPaymentsView,f=o(1074).ThresholdPaymentsListView,l=o(1075).PaymentsMenuView,n=o(809).InvoiceSubscriptionsPanelView,u=o(1077).default,c=o(489).PaymentCartAvailability,function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/tiles/payments-page",o.prototype.pageType=m.mainMenuIds.PAYMENTS_TRANSFERS,o.prototype.events={"click [data-js-payment-cart-button]":"handlePaymentCartClick"},o.prototype.getTitle=function(){return t("Payment and transfers")},o.prototype.initializeChildViews=function(){var t;return this.paymentsMenu=new l({el:this.$(".payments-menu"),menuItemId:this.options.menuItemId}),t=[this.paymentsMenu.show()],window.OW.features._REGION_FILTERING&&t.push((this.regionSelect=new p({el:this.$(".regions-select")})).show()),this.options.menuItemId||(window.OW.features.PAYMENT_TEMPLATES&&t.push((this.paymentTemplates=new h({el:this.$(".payment-templates")})).show()),window.OW.features.RECURRENT_PAYMENTS&&t.push((this.recurrentPayments=new d({el:this.$(".recurrent-payments")})).show()),window.OW.features.THRESHOLD_PAYMENTS&&t.push((this.thresholdPayments=new f({el:this.$(".threshold-payments")})).show()),window.OW.features.INVOICE_SUBSCRIPTIONS&&t.push((this.invoiceSubscriptions=new n({el:this.$(".invoice-subscriptions")})).show())),i.when.apply(i,t)},o.prototype.show=function(){return window.app.data.paymentsMenu.fetchIfEmpty().then((t=this,function(){return t.render()})).then(function(t){return function(){return t.$el.children().hide(),t.$el.prepend(t.$loader=window.app.getLoadingIndicator()),t.initializeChildViews()}}(this)).then(function(t){return function(){return t.$loader.detach(),t.$el.children().show(),t.onWidgetsShown()}}(this));var t},o.prototype.onWidgetsShown=function(){return this.initSearch(),this.initRegionFilter(),this.showPage()},o.prototype.onRender=r.noop,o.prototype.emptyListCheck=function(){var t;return t=0===this.$(".menu-item").length,this.$(".no-payments").toggle(t)},o.prototype.performSearch=function(t){var e,n,o;return n=r.compact([this.paymentTemplates,this.recurrentPayments,this.thresholdPayments,this.paymentsMenu]).map((function(e){return e.renderWithFilters({searchQuery:t})})),null!=(e=this.invoiceSubscriptions)&&e.applySearch(t),i.when.apply(i,n).then((o=this,function(){return o.emptyListCheck()}))},o.prototype.initSearch=function(){var t,e;return(t=this.$("#payments-search")).search(),t.change((e=this,function(){return e.performSearch(t.val().trim())}))},o.prototype.initRegionFilter=function(){var t,e;return null!=(t=this.regionSelect)?t.$el.on("change",(e=this,function(t,n){return e.paymentsMenu.renderWithFilters({region:n}).then((function(){return e.emptyListCheck()}))})):void 0},o.prototype.cleanUp=function(){return r.invoke(r.compact([this.regionSelect,this.paymentTemplates,this.paymentsMenu,this.recurrentPayments,this.thresholdPayments,this.invoiceSubscriptions]),"remove")},o.prototype.handlePaymentCartClick=function(t){var e,n,o;return t.preventDefault(),this.paymentCartAvailability||(this.paymentCartAvailability=new c),(e=i(t.target)).addClass("loading-button"),(n=this.paymentCartAvailability.fetchIfEmpty()).then((o=this,function(){return o.paymentCartAvailability.get("checkRemitter")&&o.paymentCartAvailability.get("checkAvailableItems")?window.app.router.navigate("#paymentCart",{trigger:!0,replace:!1}):new u({model:o.paymentCartAvailability}).show()})),n.always((function(){return e.removeClass("loading-button")}))},o.prototype.context=function(){return r.extend(o.__super__.context.apply(this,arguments),{showPaymentCart:window.OW.features.PAYMENT_CART&&!this.options.menuItemId})},o}(s)}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l;return l=o(391),u=o(377),n=o(392).AppCache,s=o(488).PaymentItemsListView,c=o(393).TEMPLATE_TYPES,{TemplatesListView:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/tiles/templates-list",o.prototype.fetchData=function(){return n.get(n.KEYS.PAYMENT_TEMPLATES).then((t=this,function(e){return t.collection=e}));var t},o.prototype.initIcons=function(){return this.$el.find(".has-icon").each((t=this,function(e,n){var o,r;return r=t.collection.get(i(n).data("id")),o=l.getTemplateItemIcons({templateType:c.COMMON,serviceId:r.get("serviceId"),isInvoice:r.get("invoiceTemplate"),paymentType:r.get("payment.type")}),u.getExistingImage(o).then((function(t){return i("img",n).attr("src",t).addClass("visible")}))}));var t},o.prototype.getFilteredCollectionContext=function(){return this.collection.search(this.searchQuery).viewContext()},o.prototype.getTitle=function(){return t("Payment Templates")},o.prototype.context=function(){var t,e;return t=o.__super__.context.apply(this,arguments),r.each(t.collection,(e=this,function(t){return t.href=l.getTemplateLink(e.collection.get(t.id))})),t},o}(s)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c;return e=n(392).AppCache,c=n(374).TemplateView,r=n(428).RecurrentPayments,a=n(1073).RecurrentPaymentsListView,{RecurrentPaymentsView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="payments/tiles/recurrent-payments",n.prototype.show=function(){return o.when(e.get(e.KEYS.RECURRENT_PAYMENTS),this.render()).then((t=this,function(e){return t.collection=e,t.active=new r(t.collection.filter((function(t){return t.isActive()}))),t.inactive=new r(t.collection.filter((function(t){return!t.isActive()}))),t.$el.toggle(0!==t.active.length||0!==t.inactive.length),(t.activeRecurrentPayments=new a({el:t.$(".active"),collection:t.active,active:!0})).show(),(t.inactiveRecurrentPayments=new a({el:t.$(".inactive"),collection:t.inactive,active:!1})).show()}));var t},n.prototype.renderWithFilters=function(t){var e,n;if(i.has(t,"searchQuery")&&this.searchQuery!==t.searchQuery)return this.searchQuery=t.searchQuery,e=this.active.search(this.searchQuery),n=this.inactive.search(this.searchQuery),this.$el.toggle(0!==e.length||0!==n.length),o.when(this.activeRecurrentPayments.renderWith(e),this.inactiveRecurrentPayments.renderWith(n))},n}(c)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l;return o(40),l=o(391),u=o(377),n=o(392).AppCache,s=o(488).PaymentItemsListView,c=o(393).TEMPLATE_TYPES,{RecurrentPaymentsListView:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/tiles/recurrent-payments-list",o.prototype.limit=null,o.prototype.requiredOptions=["collection"],o.prototype.show=function(){return this.render()},o.prototype.fetchData=function(){return n.get(n.KEYS.RECURRENT_PAYMENTS).then((t=this,function(e){return t.collection=e}));var t},o.prototype.initIcons=function(){return this.$el.find(".has-icon").each((t=this,function(e,n){var o,r;return r=t.collection.get(i(n).data("id")),o=l.getTemplateItemIcons({templateType:c.RECURRENT,serviceId:r.get("serviceId"),isInvoice:r.get("invoiceTemplate"),paymentType:r.get("payment.type")}),u.getExistingImage(o).then((function(t){return i("img",n).attr("src",t).addClass("visible")}))}));var t},o.prototype.renderWith=function(t){return this.collection=t,this.render()},o.prototype.getTitle=function(){return this.options.active?t("Active recurrent payments"):t("Inactive recurrent payments")},o.prototype.context=function(){var t,e;return t=o.__super__.context.apply(this,arguments),r.each(t.collection,(e=this,function(t){return t.href=l.getTemplateLink(e.collection.get(t.id))})),t},o}(s)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u;return o(40),n=o(392).AppCache,u=o(391),c=o(377),r=o(488).PaymentItemsListView,a=o(393).TEMPLATE_TYPES,n=o(392).AppCache,{ThresholdPaymentsListView:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/tiles/threshold-payments-list",o.prototype.fetchData=function(){return n.get(n.KEYS.THRESHOLD_PAYMENTS).then((t=this,function(e){return t.collection=e}));var t},o.prototype.initIcons=function(){return this.$el.find(".has-icon").each((t=this,function(e,n){var o,r;return r=t.collection.get(i(n).data("id")),o=u.getTemplateItemIcons({templateType:a.THRESHOLD,serviceId:r.get("serviceId"),isInvoice:r.get("invoiceTemplate"),paymentType:r.get("payment.type")}),c.getExistingImage(o).then((function(t){return i("img",n).attr("src",t).addClass("visible")}))}));var t},o.prototype.getFilteredCollectionContext=function(){return this.collection.search(this.searchQuery).viewContext()},o.prototype.getTitle=function(){return t("Auto payments")},o}(r)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p;return p=o(97),l=o(453).WbPaymentsMenu,n=o(488).PaymentItemsListView,d=o(377),u=o(374).TemplateView,c=o(1076),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="payments/tiles/payments-menu-section",e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{contextPath:window.WB.contextPath,section:this.options.section})},e}(u),{PaymentsMenuView:function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/tiles/payments-menu",n.prototype.limit=null,n.prototype.mixins=[c],n.prototype.onScrollLock=!0,n.prototype.headerItemsDelimiter=" / ",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.region=p.get("SELECTED_REGION"),this.initCollection(this.options.collection||window.app.data.paymentsMenu),this.activateScrollMixin(),this.on("render",(t=this,function(){return t.sectionIndex=0,t.$sections=t.$(".menu-section"),t.onScrollLock=!1,t.onScroll()}));var t},n.prototype.initCollection=function(t){var e,n;return this.options.menuItemId&&(n=t.get(this.options.menuItemId))&&(e=t.getChildrenOf(n)),e?(this.menuItemId=this.options.menuItemId,this.collection=e):(this.menuItemId=null,this.collection=this.options.menuItemId?new l:t),this.menuDict=i.indexBy(this.collection.calculateMenuPlainList(),"menuId")},n.prototype.fetchData=function(){return r.Deferred().resolve()},n.prototype.remove=function(){return this.deactivateScrollMixin()},n.prototype.onScroll=function(){var t;if(!this.onScrollLock&&this.searchEnabled())return t=this.$el.offset().top+this.$el.height(),r(document).scrollTop()+r(window).height()>=t-this.updateThreshold?this.scrollHandler():void 0},n.prototype.scrollHandler=function(){var t,e,n;if(!(this.sectionIndex>=this.sections.length))return this.onScrollLock=!0,t=this.$sections.eq(this.sectionIndex),(e=new s({el:t,section:this.sections[this.sectionIndex]})).once("render",(n=this,function(){return n.loadIcons(t)})),e.once("show",function(t){return function(){return t.sectionIndex++,t.onScrollLock=!1,t.onScroll()}}(this)),e.show()},n.prototype.initIcons=function(t){return this.loadIcons(this.$el)},n.prototype.loadIcons=function(t){return t.find(".has-icon").each((e=this,function(t,n){var o,i;return i=r(n).data("id"),o=d.getSuitableIcons(e.menuDict[i]),d.getExistingImage(o).then((function(t){return r("img",n).attr("src",t).addClass("visible")}))}));var e},n.prototype.getTitle=function(){var e,n,o;if(!this.menuItemId)return t("Payments and transfers");for(e=function(e){var n,o;return e?(n="#payments/"+e.id,o=e.get("name")):(n="#payments",o=t("Payments and transfers")),"<a href='"+n+"'>"+o+"</a>"},o=[(n=window.app.data.paymentsMenu.get(this.menuItemId)).get("name")];null!=n?n.has("parentId"):void 0;)(n=window.app.data.paymentsMenu.get(n.get("parentId")))&&o.push(e(n));return o.push(e()),o.reverse().join(this.headerItemsDelimiter)},n.prototype.searchEnabled=function(){return!!this.searchQuery},n.prototype.getFilteredCollection=function(){var t;return t=this.collection,this.region&&(t=t.filterByRegion(this.region)),this.searchQuery&&(t=t.search(this.searchQuery)),t},n.prototype.getCollectionContext=function(){var e,n,o;return e=this.getFilteredCollection().viewContext(),this.sections=[],n=[],e.forEach((o=this,function(t){return t.items&&t.items.length?o.sections.push(t):t.items?void 0:n.push(t)})),n.length&&this.sections.unshift({name:this.menuItemId?window.app.data.paymentsMenu.get(this.menuItemId).get("name"):t("Payments and transfers"),items:n}),e},n}(n)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){return{updateThreshold:200,activateScrollMixin:function(){return this.ts=Date.now(),this.on("render.complete",(t=this,function(){return o(document).on("scroll."+t.ts,i.throttle(t.onScroll.bind(t),100))}));var t},deactivateScrollMixin:function(){return o(document).off("scroll."+this.ts)},onScroll:function(){var t;if(t=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,!(document.body.scrollHeight-t-document.body.clientHeight>this.updateThreshold))return this.scrollHandler()},scrollHandler:function(){}}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"payment-cart-not-working-popup"},enumerable:!0,configurable:!0}),e.prototype.context=function(){return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(Array.from(arguments)))),this.model.viewContext())},e=o.__decorate([i.template("payments/cart/not-working-popup"),i.requiredOptions(["model"])],e)}(n(386));e.default=r},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u;return u=n(40),i=(c=n(462)).PaymentPage,e=c.PaymentCompletePage,s=c.PaymentWizard,(a={}).CASH_BY_CODE_SERVICE_ID="GENERATE_CASH_CODE",null==u.MIN_AMOUNT_FOR_CURRENCY&&(u.MIN_AMOUNT_FOR_CURRENCY={810:50,840:100,978:20}),a.getMinValueByCurrency=function(t){var e;return e=u.MIN_AMOUNT_FOR_CURRENCY[t],console.assert(e,"Could not evaluate min amount for currency="+t+" for generating cash by code"),e},a.CashByCodePage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="contracts/actions/cash-by-code-page",e.prototype.onRender=function(){var t,n,o;return e.__super__.onRender.apply(this,arguments),n=this.currencyField.get("attr"),t=this.amountField.get("attr"),this.model.on("change:"+n,(o=this,function(){var e;return e=o.getCurrentCurrencyItem(),o.$('[name="'+t+'"]').rules("remove","modulus"),o.$('[name="'+t+'"]').rules("add",{modulus:a.getMinValueByCurrency(e.CODE)}),o.formIsValid()}))},e.prototype.getCurrentCurrencyItem=function(){var t;return t=this.currencyField.get("attr"),this.formMeta.fields.getByReference(t).resolveValue(null,this.model)},e.prototype.getValidationOptions=function(){var t,e;if(this.currencyField=this.formMeta.getField({role:"amount.currency"}),this.amountField=this.formMeta.getField({role:"amount.value"}),this.model.get(this.currencyField.getAttrPath()))return t=this.getCurrentCurrencyItem(),{rules:(e={},e[""+this.amountField.get("attr")]={modulus:a.getMinValueByCurrency(t.CODE)},e)}},e}(i),a.CashByCodeCompletePage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="contracts/actions/cash-by-code-complete-page",e}(e),a.CashByCodeWizard=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.createPaymentModel=function(){return e.__super__.createPaymentModel.apply(this,arguments).then((t=this,function(){var e,n;if(e=t.options.contractId)return n=t.formMeta.getField({role:"source"}).get("attr"),t.model.set(n,e)}));var t},e.prototype.getPaymentRouterOptions=function(){return[a.CashByCodePage,{urlParams:this.urlParams,formMeta:this.formMeta,model:this.model,templateId:this.templateId,done:(t=this,function(e){var n;return t.model.isExternalCard?((n=new o((new o).fragment())).addSearch("processing",null),window.app.router.navigate(n.toString(),{trigger:!1}),t.continuationModel=e.model,t.egwWindow=e.egwWindow,t.showNextStep()):t.onPaymentExecuted(e.model)})}];var t},e.prototype.getCompleteRouterOptions=function(){return window.app.trigger("change:contracts"),[a.CashByCodeCompletePage,{formMeta:this.formMeta,model:this.model,templateId:this.templateId,paymentExecutionModel:this.continuationModel}]},e}(s),a.cashByCode=function(t,e){return new a.CashByCodeWizard({contractId:t,serviceId:a.CASH_BY_CODE_SERVICE_ID,urlParams:e}).showFirstStep()},a}.call(e,n,e,t))||(t.exports=i)}).call(this,n(379))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a;return n=o(378),r=o(1080),a=o(387).WbFormMixin,function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="contracts/tds-enroll-page",o.prototype.requiredOptions=["contractId"],o.prototype.mixins=[a],o.prototype.events=i.extend({},n.prototype.events,{"click .link-button.cancel":"goBack"}),o.prototype.bindings={isActive:"[name=isActive]"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new r({contractId:this.contractId}),this.initialActive=!1},o.prototype.show=function(){return this.showLoadingIndicator(),this.model.fetch().done((t=this,function(){return t.initialActive=t.model.get("isActive"),t.model.on("change:isActive",(function(){return t.toggleFlip()})),t.initForm(),o.__super__.show.apply(t,arguments)})).fail(function(t){return function(e){var n;if(n=JSON.parse(e.responseText),403===e.status&&"MISSING_AUTH_METHOD"===(null!=n?n._error.code:void 0))return e.errorHandled=!0,t.render({context:{missingAuthMethod:!0}})}}(this));var t},o.prototype.onRender=function(){return this.$el.find("[name=isActive]").switchButton({show_labels:!1})},o.prototype.goBack=function(t){return t.preventDefault(),window.app.router.goBack()},o.prototype.toggleFlip=function(){return this.$(":submit").prop("disabled",this.model.get("isActive")===this.initialActive)},o.prototype.submitAction=function(){return this.model.get("isActive")?(this.model.set("authType","otp_sms"),this.model.save()):this.model.destroy()},o.prototype.onSubmitSuccess=function(){return window.app.showSuccessMessageOnNextPage(t("Changes are saved")),window.app.router.goBack()},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),this.model.viewContext())},o}(n)}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(40),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=function(){return e.API_URL+"/contracts/"+this.get("contractId")+"/subscriptions/3d-secure-enroll"},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),!this.get("contractId"))throw new Error("contractId is required")},n.prototype.isNew=function(){return this.get("isActive")},n.prototype.destroy=function(t){return null==t&&(t={}),t.data=JSON.stringify(this.toJSON()),n.__super__.destroy.call(this,t)},n}(n(375).BaseModel)}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){var i,r={}.hasOwnProperty;void 0===(i=function(e){var n,i,s,a,c;return n=o(397).CurrencyConvertModel,a=o(537).ReactMoney,s=o(399),i=s.DOM,(c={}).CurrencyRate=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.model=new n,this.state={convertedAmount:this.props.sourceCurrency===this.props.targetCurrency?this.props.amount:null,targetCurrency:this.props.targetCurrency,isLoading:this.props.sourceCurrency!==this.props.targetCurrency,isError:!1}}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.render=function(){var e;return this.state.isError?i.div({className:"exchange-rate"},i.span({className:"error"},t("Cannot update rates right now."))):this.state.isLoading?i.div({className:"exchange-rate"},i.span(null,t("Updating rates..."))):(e=t("Rates may change"),i.div({className:"exchange-rate"},s.createElement(a,{value:this.props.amount,currency:this.props.sourceCurrency}),i.span({dangerouslySetInnerHTML:{__html:"&nbsp;=&nbsp;"}}),s.createElement(a,{value:this.state.convertedAmount,currency:this.state.targetCurrency}),e?i.span({className:"rates-change-warning"}," ("+e+")"):void 0))},o.prototype.updateData=function(t){var e;if(this.setState({targetCurrency:t.targetCurrency}),t.sourceCurrency!==t.targetCurrency)return this.setState({isLoading:!0,isError:!1}),this.model.convert(t).then((e=this,function(){return e.setState({convertedAmount:e.model.get("value")})})).always(function(t){return function(){return t.setState({isLoading:!1})}}(this)).fail(function(t){return function(){return t.setState({isError:!0})}}(this));this.setState({isLoading:!1,isError:!1,convertedAmount:t.amount})},o.prototype.componentWillMount=function(){return this.updateData(this.props)},o.prototype.componentWillReceiveProps=function(t){return this.updateData(t)},o}(s.Component),c}.call(n,o,n,e))||(e.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setStrategy=function(t){t!==this.strategy&&(this.strategy=t,this.strategy.page=this,console.debug('Strategy "'+t.constructor.name+'" was set'))},e.prototype.context=function(){var e=window.OW.features.PAYMENT_TEMPLATES,n=window.OW.features.RECURRENT_PAYMENTS;return o.__assign(o.__assign({},t.prototype.context.call(this)),{allowTemplate:e,allowPeriodic:n})},e=o.__decorate([r.template("payments/native/ic-payment-page")],e)}(i);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(460),r=n(561),s=n(135),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.page.events=o.__assign(o.__assign({},this.page.events),{"click .payment-cart__header-back":this.handleBackClick}),this.page.delegateEvents(),this.page.isSkipBalanceEnoughConfirmation=!0,[2]}))}))},e.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},e.prototype.onSubmitSuccess=function(){this.page.options.onSave()},e.prototype.submitAction=function(){return r.default.submitAction.apply(this.page)},e.prototype.onSubmitError=function(t){return r.default.onSubmitError.call(this.page,t)},e.prototype.context=function(){return{pageTitle:this.page.getPaymentName(),submitButtonTitle:s.t("Continue"),strategyType:i.StrategyType.PAYMENT_CART,contentHeaderClass:"payment-cart__header"}},e}(i.default);e.default=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.cache={},n.url=function(){var e={source:n.get("source"),target:n.get("target")};return r.API_URL+"/currency-exchange/rates?"+t.param(e)},n}return o.__extends(n,e),n.prototype.validate=function(){return this.get("error")},n.prototype.isLoading=function(){return!!this.get("loading")},n.prototype.fetch=function(){var e=this;this.set("loading",!0);var n=this.url(),o=this.cache[n];return o||(o=this.cache[n]=t.get(n)),this.off("recieved"),this.on("recieved",(function(t,n){e.clear({silent:!0});var o="error"===n?{error:"Server error"}:t;e.set(o),e.trigger("sync")})),o.always(this.trigger.bind(this,"recieved")),o.fail((function(t){t.errorHandled=!0})),o},n}(i.BaseModel);e.default=s}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(858),r=n(400),s=function(t){function e(e){var n=t.call(this)||this;return n.operationId=e,n}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,(e=new r.IcPaymentDetails({id:this.operationId})).fetch()];case 1:return o.sent(),(n=this.page.formMeta.getAttrPaths()).push("type"),n.forEach((function(t){i.page.model.set(t,e.get(t),{silent:!0})})),[4,t.prototype.setup.call(this)];case 2:return o.sent(),[2]}}))}))},e}(i.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(560),r=n(400),s=function(t){function e(e){var n=t.call(this)||this;return n.operationId=e,n}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,(e=new r.IcPaymentDetails({id:this.operationId})).fetch()];case 1:return o.sent(),(n=this.page.formMeta.getAttrPaths()).push("type"),n.forEach((function(t){i.page.model.set(t,e.get(t),{silent:!0})})),[4,t.prototype.setup.call(this)];case 2:return o.sent(),[2]}}))}))},e}(i.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"intra-bank-transfer-limit-popup"},enumerable:!0,configurable:!0}),e.prototype.dialogOptions=function(){return{dialogClass:"dialog-without-title dialog-centered-buttons"}},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),this.model.viewContext())},e=o.__decorate([i.template("payments/native/intra-bank-transfer-limit-popup"),i.requiredOptions(["model"])],e)}(n(386));e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"intra-bank-transfer-currency-limitation-popup"},enumerable:!0,configurable:!0}),e.prototype.dialogOptions=function(){return{dialogClass:"dialog-without-title dialog-centered-buttons"}},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{sourceContractCurrency:this.sourceContractCurrency,targetContractCurrency:this.targetContractCurrency})},e=o.__decorate([i.template("payments/native/intra-bank-transfer-currency-limitation-popup"),i.requiredOptions(["sourceContractCurrency","targetContractCurrency"])],e)}(n(386));e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11),r=n(377),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return o.sent(),e=this.page.formMeta,n=e.get("fields"),i.each(n,(function(t){t.role&&["source","beneficiary","amount.currency"].includes(t.role)&&r.set(t,"htmlAttrs.readonly",!0)})),e.set("fields",n),e.resetFields(),[2]}}))}))},e}(n(1090).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(135),r=n(96),s=n(40),a=n(859),c=n(428).RecurrentPayment,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TemplateModelClass=c,e}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return n.sent(),this.paymentModel.set({status:this.templateModel.get("status"),paymentPeriod:{period:this.templateModel.get("schedule.period"),day:this.templateModel.get("schedule.periodDay")}}),(e=this.page.formMeta).set("fields",o.__assign(o.__assign(o.__assign({},this.getPrependFields()),e.get("fields")),this.getAppendFields())),e.resetFields(),[2]}}))}))},e.prototype.submitAction=function(){return this.templateModel.set({status:this.paymentModel.get("status"),schedule:{period:this.paymentModel.get("paymentPeriod.period"),periodDay:this.paymentModel.get("paymentPeriod.day")}}),t.prototype.submitAction.call(this)},e.prototype.getPrependFields=function(){if(this.templateModel.isInvalid())return{};var t=r(this.templateModel.get("schedule.nextPaymentOn"),s.RECURRENT_PAYMENT_DATE_FORMAT).format("DD.MM.YYYY");return{status:{id:"status",role:"switch",visible:!0,editable:!0,optional:!1,value:this.templateModel.get("status"),additionalTitle:{active:i.t("Active, next payment: %(nextPayment)s",{nextPayment:t}),inactive:i.t("Inactive")},converterMapping:{true:"active",false:"inactive"}}}},e.prototype.getAppendFields=function(){return{"paymentPeriod.period":{id:"paymentPeriod.period",name:i.t("Payment period"),role:"paymentPeriod.period",visible:!0,editable:!0,optional:!1},"paymentPeriod.day":{id:"paymentPeriod.day",name:i.t("Period day"),role:"paymentPeriod.day",htmlAttrs:{number:!0},visible:!0,editable:!0,optional:!1}}},e}(a.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11),r=n(377),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return o.sent(),e=this.page.formMeta,n=e.get("fields"),i.each(n,(function(t){t.role&&["source","beneficiary","amount.currency"].includes(t.role)&&r.set(t,"htmlAttrs.readonly",!0)})),e.set("fields",n),e.resetFields(),[2]}}))}))},e}(n(859).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(400),r=function(t){function e(e){var n=t.call(this)||this;return n.operationId=e,n}return o.__extends(e,t),e.prototype.setup=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,(e=new i.IcPaymentDetails({id:this.operationId})).fetch()];case 1:return o.sent(),(n=this.page.formMeta.getAttrPaths()).push("type"),n.forEach((function(t){r.page.model.set(t,e.get(t),{silent:!0})})),[4,t.prototype.setup.call(this)];case 2:return o.sent(),[2]}}))}))},e}(n(860).default);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(460),r=function(t){function e(e){var n=t.call(this)||this;return n.page=e,n}return o.__extends(e,t),e.prototype.context=function(){return{strategyType:i.StrategyType.UNSUPPORTED,pageTitle:this.page.getPaymentName()}},e.prototype.onSubmitSuccess=function(){throw new Error("This transfer type is unsupported")},e.prototype.setup=function(){return Promise.resolve()},e.prototype.submitAction=function(){throw new Error("This transfer type is unsupported")},e.prototype.onRender=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e}(i.default);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(379),r=n(378),s=n(381),a=n(135),c=n(411),u=n(404),l=n(400),d=n(391),p=n(393).Template,h=(n(97),n(392).AppCache),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.afterTemplateCreated=!1,e}return o.__extends(e,t),e.prototype.initialize=function(){var e=this;if(t.prototype.initialize.apply(this,o.__spread(arguments)),this.model=window.app.data.cachedTransfer,!this.model)return this.redirected=!0,void window.app.router.navigate((new i).fragment().replace("/complete",""),{replace:!0,trigger:!0});this.templateModel=new p;var n=new l.IntraBankTransferMeta,r=n.getAttrPaths();r.push("type"),r.forEach((function(t){e.templateModel.set("payment."+t,e.model.get(t),{silent:!0})}))},e.prototype.show=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){return this.redirected?[2]:[2,t.prototype.show.apply(this,o.__spread(e))]}))}))},e.prototype.showDetails=function(t){t.preventDefault();var e=n(437);new(window.OW.features.TRANSACTION_PIECHART?e.CategorySrnOperationDetailsDialog:e.SrnOperationDetailsDialog)({itemId:this.model.get("txRef")}).show()},e.prototype.onTemplateSave=function(t){var e=this;this.templateModel.set("name",t);var n=this.templateModel.save();n.fail((function(t){t.errorHandled=!0,window.app.showErrorMessage(a.t("Failed to save template. Try again later or contact customer support"))})),n.then((function(){h.reset(h.KEYS.PAYMENT_TEMPLATES),e.afterTemplateCreated=!0,e.render()})),n.always((function(){window.app.hideLoadingIndicator()}))},e.prototype.showSaveTemplateForm=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s;return o.__generator(this,(function(c){switch(c.label){case 0:return t.preventDefault(),window.app.showLoadingIndicator(),[4,Promise.all([h.get(h.KEYS.PAYMENT_TEMPLATES),h.get(h.KEYS.RECURRENT_PAYMENTS),h.get(h.KEYS.THRESHOLD_PAYMENTS)])];case 1:return e=o.__read.apply(void 0,[c.sent(),3]),n=e[0],i=e[1],r=e[2],[4,window.app.getUniqueTemplateName(a.t("Intra-bank transfer"))];case 2:return s=c.sent(),window.app.hideLoadingIndicator(),this.showInlineEditField(this.$(".template-name-edit-panel"),this.onTemplateSave,null,s,{uniqueTemplateName:[!0,n,i,r]}),[2]}}))}))},e.prototype.redirectToCreateRecurrentForm=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){return t.preventDefault(),e=this.model.get("id"),window.app.router.navigate("#intrabank-transfer?pageMode=createRecurrentFromHistory&operationId="+e,{trigger:!0}),[2]}))}))},e.prototype.allowSaveAsTemplate=function(){return window.OW.features.PAYMENT_TEMPLATES&&this.templateModel&&this.templateModel.isNew()},e.prototype.isAllowPeriodic=function(){return window.OW.features.RECURRENT_PAYMENTS&&this.model.get("id")},e.prototype.context=function(){var e={url:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS"),text:a.t("Back to Payment and Transfers")};return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(arguments))),{backLink:e,templateLink:d.getTemplateLink(this.templateModel),templateName:this.templateModel.get("name"),allowTemplate:this.allowSaveAsTemplate(),allowPeriodic:this.isAllowPeriodic(),afterTemplateCreated:this.afterTemplateCreated})},o.__decorate([s.on("click .show-details-link")],e.prototype,"showDetails",null),o.__decorate([u.autobind],e.prototype,"onTemplateSave",null),o.__decorate([s.on("click .create-payment-template-link")],e.prototype,"showSaveTemplateForm",null),o.__decorate([s.on("click .create-recurrent-payment-link")],e.prototype,"redirectToCreateRecurrentForm",null),e=o.__decorate([s.template("payments/native/transfer-complete-page"),s.mixins([c.WbServiceMethodsMixin])],e)}(r);e.default=f},function(e,n,o){(function(e,i){var r,s,a,c,u,l,d,p,h,f,m,y,_,g,v,w,b,k=function(t,e){for(var n in e)B.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},B={}.hasOwnProperty;m=o(372),a=o(378),b=o(380),w=o(97),y=o(377),f=o(416).WbWizard,p=o(394).WbGenericFormMixin,h=o(411).WbServiceMethodsMixin,r=o(415).Checkbox,o(398).FormMeta,s=o(397).PAYMENT_STAGES,g=o(1096),l=g.RetrieveMoneyTransferSearch,g.MONEY_TRANSFER_STATUSES,c=o(400).RetrieveMoneyTransfer,v=o(791),d=v.RetrieveMoneyTransferSearchMeta,u=v.RetrieveMoneyTransferMeta,_=o(424).receiveMoneyTransferConfirmationDialog,n.RetrieveMoneyTransferSearchPage=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return k(o,n),o.prototype.template="payments/payment-page",o.prototype.requiredOptions=["model","formMeta","done"],o.prototype.mixins=[p],o.prototype.initialize=function(){var t;return o.__super__.initialize.apply(this,arguments),this.model.on("change:providerCode",(t=this,function(){return t.setupValidationRuleForTransferNumberField()})),this.initGenericForm()},o.prototype.setupValidationRuleForTransferNumberField=function(){var t,e,n,o,i;if((t=this.$("#transferNumber")).length&&(i=this.model.get("providerCode"))&&(e=this.formMeta.getCatalog("providerCode"))&&(o=e.get(i)))return(n=o.get("transferNumberPattern"))?t.attr("pattern",n):t.removeAttr("pattern"),t.val()?t.valid():void 0},o.prototype.onSubmitSuccess=function(){return this.done()},o.prototype.onSubmitError=function(e){var n,o,i,r,s;return n=(i=y.parseResponseSafe(e))._error,412===e.status&&"RETRIEVE_MONEY_FAILED"===n.code?(o=i.respText,i._failQuantity&&i._maxFailQuantity&&(r=i._maxFailQuantity-i._failQuantity)>0&&(s=(s=tn("You have %(num)s try left.","You have %(num)s tries left.",r))+" "+t("After that you will be unable receive money transfers until tomorrow.")),window.app.showErrorMessage(o),s&&window.app.showInformationMessage(s),!0):p.onSubmitError.apply(this,arguments)},o.prototype.context=function(){return e.extend(o.__super__.context.apply(this,arguments),this.formMeta.viewContext())},o}(a),n.RetrieveMoneyTransferPage=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return k(o,n),o.prototype.template="payments/native/retrieve-money-transfer-page",o.prototype.requiredOptions=["searchMeta","searchModel"],o.prototype.mixins=[p,h],o.prototype.initialize=function(){var t;return o.__super__.initialize.apply(this,arguments),t=this.searchModel.get("retrieveMoneyId"),this.formMeta=new u({retrieveMoneyId:t},{providerCode:this.searchModel.get("providerCode")}),this.model=new c({retrieveMoneyId:t})},o.prototype.show=function(){return this.showLoadingIndicator(),this.formMeta.fetch().done((t=this,function(){return t.model.set(t.formMeta.getModelDefaults()),o.__super__.show.apply(t,arguments)}));var t},o.prototype.formIsValid=function(){return this.getMissingMandatoryFields().length?(this.showMissingMandatoryFieldsWarning(),!1):p.formIsValid.apply(this,arguments)},o.prototype.ensureLicense=function(){var t;if(t=this.formMeta.getLicense())return new r({el:this.$("[data-js-license]"),name:"license",className:"licenseAgreement",label:t}).show()},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.initGenericForm(),this.ensureLicense(),this.once("form.ready",(e=this,function(){if(!e.formMeta.hasAvailableContracts())return window.app.showErrorMessage(t("No available contracts error [retrieve money]"))}));var e},o.prototype.beforeSubmit=function(){return this.model.setStage(s.PREPARE)},o.prototype.onSubmitError=function(t){var e,n;return 412===t.status?(e=(null!=(n=y.parseResponseSafe(t))?n.respText:void 0)||this.defaultErrorMessage,window.app.showErrorMessage(e),!0):p.onSubmitError.apply(this,arguments)},o.prototype.showUnrecoverableError=function(e){var n,o,i;return i=w.get("previousMenuItemId"),o=(null!=e?e.respText:void 0)||this.defaultErrorMessage,n={url:window.app.data.menu.getItemUrl(i),text:t('Back to "%(pageName)s"',{pageName:window.app.data.menu.get(i).get("name")})},this.showOperationError(o,{backLink:n})},o.prototype.onPaymentCancel=function(){return this.model.clearPrepareData()},o.prototype.onSubmitSuccess=function(){return this.model.setStage(s.EXECUTION),this.showPaymentConfirmation()},o.prototype.done=function(){var e,n;return this.model.setStage(s.COMPLETE),window.app.data.contracts.dashboard.resetCache(),n=w.get("previousMenuItemId"),e={url:window.app.data.menu.getItemUrl(n),text:t('Back to "%(pageName)s"',{pageName:window.app.data.menu.get(n).get("name")})},this.showOperationSuccess(t("Money transfer successfully received"),{backLink:e})},o.prototype.showPaymentConfirmation=function(){var t,e;return(t=_({payment:this.model,formMeta:this.formMeta,searchMeta:this.searchMeta,searchModel:this.searchModel,onSuccess:this.done.bind(this),onError:(e=this,function(t){return t.errorHandled=e.onSubmitError(t)})})).on("cancel",function(t){return function(){return t.onPaymentCancel()}}(this)),t.show()},o.prototype.getSenderFieldsContext=function(){var e,n,o;return o=this.searchModel.getSenderName(),n=this.searchModel.getSenderCountry(),e=this.searchModel.getTransferAmount(),[{name:t("Sender's Name"),value:o},{name:t("Country of residence"),value:n},{name:t("Transfer amount"),value:m.filters.money(e)}]},o.prototype.context=function(){return e.extend(o.__super__.context.apply(this,arguments),this.formMeta.viewContext(),{senderFields:this.getSenderFieldsContext()})},o}(a),n.RetrieveMoneyTransferWizard=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return k(e,t),e.prototype.menuSectionId=b.mainMenuIds.PAYMENTS_TRANSFERS,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.searchModel=new l,this.searchMeta=new d},e.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getSearchRouterOptions();case 1:return this.getTransferRouterOptions();default:return this.throwStepNotSupported(t)}},e.prototype.getSearchRouterOptions=function(){return[n.RetrieveMoneyTransferSearchPage,{model:this.searchModel,formMeta:this.searchMeta,done:(t=this,function(){var e;return(e=new i((new i).fragment())).addSearch("processing"),window.app.router.navigate(e.toString(),{trigger:!1}),t.showNextStep()})}];var t},e.prototype.getTransferRouterOptions=function(){return[n.RetrieveMoneyTransferPage,{searchModel:this.searchModel,searchMeta:this.searchMeta}]},e}(f)}).call(this,o(11),o(379))},function(t,e,n){var o,i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(40),o=n(375).BaseModel,e.MONEY_TRANSFER_STATUSES={READY:"ReadyForPayout",PAYING_OUT:"PayingOut",PAID_OUT:"Paidout",READY_FOR_CANCEL:"ReadyForCancel",CANCELED:"Canceled",READY_FOR_RETURN:"ReadyForReturn",RETURNED:"Returned",EXPIRED:"Expired",BLOCKED:"Blocked",UNKNOWN:"Unknown"},e.MoneyTransferProviders=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=function(){return i.API_URL+"/remittance/providers"},e}(o),e.RetrieveMoneyTransferSearch=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=function(){return i.API_URL+"/remittance/retrieve-money/check"},e.prototype.isNew=function(){return!0},e.prototype.getSenderName=function(){return this.get("senderMiddleName")?this.get("senderLastName")+" "+this.get("senderFirstName")+" "+this.get("senderMiddleName"):this.get("senderFirstName")+" "+this.get("senderLastName")},e.prototype.getSenderCountry=function(){return this.get("senderCountry")},e.prototype.getTransferAmount=function(){return this.get("amount")},e}(o),e.RetrieveMoneyTransferDetails=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.url=function(){return i.API_URL+"/remittance/retrieve-money/payment-details"},e.prototype.isNew=function(){return!0},e}(o)},function(t,e,n){(function(e){var o,i,r,s={}.hasOwnProperty;o=n(378),r=n(380),(i={}).CardsListPage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.availableToManager=!0,n.prototype.template="contracts/cards-list-page",n.prototype.pageType=r.mainMenuIds.CARDS_ACCOUNTS,n.prototype.requiredOptions=["contractId"],n.prototype.events={"click a.toggle-inactive":"toggleInactiveCards"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.contracts=window.app.data.contracts.dashboard},n.prototype.fetchData=function(){var t,e;return t=null!=(e=window.OW.contractsConfig)?e.wbCardsAccountsPage:void 0,this.contracts.fetchIfEmpty(t.sections)},n.prototype.show=function(){return this.fetchData().then((t=this,function(){var e;return e=t.contracts.asGroups().find((function(e){return e.getMainContract().id===t.contractId})),t.mainContract=e.getMainContract(),t.cards=e.getChildren(),t.render()}));var t},n.prototype.toggleInactiveCards=function(t){return t.preventDefault(),this.$(".toggle-inactive").toggleClass("visible"),this.$(".inactive-cards").toggle()},n.prototype.context=function(){var t,o,i,r,s,a;for(t=[],s=[],r=0,a=(i=this.cards.map((function(t){return t.viewContext()}))).length;r<a;r++)((o=i[r]).inArchive?s:t).push(o);return e.extend(n.__super__.context.apply(this,arguments),{mainContract:this.mainContract.viewContext(),cards:{active:t,inactive:s}})},n}(o),t.exports=i}).call(this,n(11))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e;return e=n(96),{ReportDialog:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.initDatepickers=function(){var t;return t={maxDate:new Date,dateFormat:"d MM yy",changeYear:!0,changeMonth:!0},this.$inputFrom.datepicker(o.extend({},t)).datepicker("setDate",e().add(-1,"month").add(1,"day").toDate()),this.$inputTo.datepicker(o.extend({},t)).datepicker("setDate",e().toDate())},n}(n(1099).ReportDialog)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,l=[].slice;void 0===(a=function(e){var n,a,d,p,h,f,m;return o(40),a=o(386),p=o(387).WbFormMixin,d=o(1100).StatementDialog,m=o(96),f=o(391),h=window.OW.contractsConfig,n={html:t("Open [statement]"),htm:t("Open [statement]"),pdf:t("PDF [statement]"),xls:t("Excel [statement]"),email:t("Send results by email [statement]")},{ReportDialog:function(e){function o(){return this.onEmailLink=c(this.onEmailLink,this),o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.id="report-dialog",o.prototype.template="history/report-dialog",o.prototype.requiredOptions=["reportId","contractId"],o.prototype.events={"change #dateFrom-input":"updateToMinDate","change #dateTo-input":"updateFromMaxDate","click .email-link":"onEmailLink"},o.prototype.templateContext={sendByEmail:!0},o.prototype.dialogOptions=function(){var e,o,r;return o=function(){var t,o,r,s;for(s=[],t=0,o=(r=this.formats).length;t<o;t++)e=r[t],s.push(function(t){return function(e){return{text:n[e],class:"wb-button","data-format":e,click:function(n){if(n.preventDefault(),!t.processing)return t.showLoadingIndicator(),t.applyLoadingStateToButton(i(n.currentTarget)),t.getReport(e)}}}}(this)(e));return s}.call(this),{title:this.dialogTitle,width:600,buttons:[{text:t("Cancel"),class:"link-button cancel",click:(r=this,function(){if(!r.processing)return r.close()})}].concat(l.call(o))}},o.prototype.initialize=function(){var t,e,n;if(o.__super__.initialize.apply(this,arguments),this.reportOptions=null!=(t=h.reports)?t[this.reportId]:void 0,!this.reportOptions)throw new Error("No configuration found for report id="+this.reportId);return this.dialogTitle=this.reportOptions.title,this.formats=(null!=(e=this.reportOptions)?e.formats:void 0)||[],n=this.reportOptions,this.editablePeriod=n.editablePeriod,this.email=n.email,n},o.prototype.show=function(){var t;return f.discoverClientEmail().then((t=this,function(e){return t.emailAddress=e,t.render()})),o.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})},o.prototype.onRender=function(){return this.$("form").validate(p.defaultValidationOptions),this.editablePeriod&&(this.$inputFrom=this.$("#dateFrom-input"),this.$inputTo=this.$("#dateTo-input"),this.initDatepickers()),this.email&&(this.$email=this.$("#email-input"),console.assert(this.$email,"Email input not found")),o.__super__.onRender.apply(this,arguments)},o.prototype.getReport=function(t){var e;switch(e=this.getStatementUrl(t),console.debug("Opening statement: "+e),t){case"html":case"htm":return this.openHtmlStatement(e);default:return window.open(e),this.close()}},o.prototype.context=function(){return r.extend(r.pick(this.reportOptions,"description"),{editablePeriod:this.editablePeriod,email:this.email,BUTTON_TITLES:n,emailAddress:this.emailAddress})},o.prototype.initDatepickers=function(){var t;return t={maxDate:new Date,dateFormat:"d MM yy"},this.$inputFrom.datepicker(r.extend({},t)).datepicker("setDate",m().add(-1,"month").add(1,"day").toDate()),this.$inputTo.datepicker(r.extend({},t)).datepicker("setDate",m().toDate())},o.prototype.getStatementUrl=function(t){var e,n,o,i;return null==t&&(t="pdf"),o=function(t){return m(t).format("YYYY-MM-DD")},(i="main-contract"===this.contractId?new s(WB.API_URL+"/division/main-contract/reports/"+this.reportId):new s(WB.API_URL+"/contracts/"+this.contractId+"/reports/"+this.reportId)).addSearch("format",t),this.editablePeriod&&(e=this.$inputFrom.datepicker("getDate"),console.assert(e,"from date is required"),n=this.$inputTo.datepicker("getDate"),console.assert(n,"to date is required"),e&&i.addSearch("from",o(e)),n&&i.addSearch("to",o(n))),"email"===t&&i.addSearch({email:this.$email.val()}),i.toString()},o.prototype.updateToMinDate=function(){return this.$inputTo.datepicker("option","minDate",this.$inputFrom.datepicker("getDate"))},o.prototype.updateFromMaxDate=function(){return this.$inputFrom.datepicker("option","maxDate",this.$inputTo.datepicker("getDate"))},o.prototype.openHtmlStatement=function(t){return new d({statementUrl:t}).show().then((e=this,function(){return e.close()}));var e},o.prototype.onEmailLink=function(t){var e;if((t.preventDefault(),!this.processing)&&this.$("form").valid())return this.applyLoadingStateToButton(i(t.currentTarget)),this.showLoadingIndicator(),this.sendEmailReport(this.getStatementUrl("email")).done((e=this,function(){return e.close()}))},o.prototype.sendEmailReport=function(e){return console.debug("sending email",e),i.post(e).then((n=this,function(){var e;return e=t("Message has been sent to %(email)s",{email:n.$email.val()}),window.app.showFlashMessage(e)}),(function(e){return e.errorHandled=!0,window.app.showErrorDialog(t("Failed to send email"))}));var n},o}(a)}}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(11),o(379))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){return{StatementDialog:function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.id="statement-dialog",n.prototype.template="history/statement-dialog",n.prototype.requiredOptions=["statementUrl"],n.prototype.printStatement=function(){var t;if(!(t=this.$el.find("iframe").get(0)).contentWindow.document.execCommand("print",!1,null))return t.contentWindow.print()},n.prototype.onDialogClose=function(){return this.statementPromise&&this.statementPromise.abort(),n.__super__.onDialogClose.apply(this,arguments)},n.prototype.dialogOptions=function(){return{buttons:[{text:t("Print"),class:"wb-button print",click:(e=this,function(){return e.printStatement()})},{text:t("Close"),class:"link-button cancel",click:function(t){return function(){return t.close()}}(this)}]};var e},n.prototype.show=function(){var t;return(this.statementPromise=i.get(this.statementUrl)).done((t=this,function(e){return t.statementPromise=null,t.statement=e,t.render().then((function(){return t.showStatement()}))})),n.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})},n.prototype.showStatement=function(){var t;if(!this.closed)return(t=this.$el.find("iframe").get(0).contentWindow.document).open(),t.write(this.statement),t.close()},n}(o(386))}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c,u,l;return n(396),n(419),n(423),n(535),n(476),u=n(378),n(391),i=n(429).ContractSelectView,s=n(395).Contracts,a=n(1102),c=n(1103).FormSampleView,e=n(415).Checkbox,l=n(861),{StyleTestPage:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.availableToManager=!0,n.prototype.template="style-test-page",n.prototype.paymentSystems=["visa","mastercard","american_express","jcb","diners_club","cup","virtual","mir"],n.prototype.cardStatuses=["active","first_production","blocked","user_blocked","expired","closed","inactive"],n.prototype.events={"click .button-error-dialog":"createErrorDialog","click .button-uncloseable-error-dialog":"createUncloseableErrorDialog"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),window.app.hideLoadingIndicator()},n.prototype.showPage=function(){return window.app.updatePageTitle()},n.prototype.getTitle=function(){return"Test page"},n.prototype.addClasses=function(){},n.prototype.onRender=function(){var t;return this.$el.find(".wb-tabs").tabs(),this.$el.find("#search-compact").searchCompact(),this.$el.find("#search-full").search(),this.$el.find(".simple-select").chosen({disable_search:!0}),this.$el.find(".select-with-search").chosen(),(t=new s(l)).trigger("sync"),new i({el:this.$(".contract-select"),collection:t}).show(),this.$el.find(".has-datepicker input").datepicker({maxDate:new Date,dateFormat:"d MM yy",buttonText:"↓",showOn:"both"}).datepicker("setDate",new Date),new e({el:this.$(".simple-checkbox")}).show(),new e({el:this.$(".labeled-checkbox"),label:"Checkbox with a label"}).show(),this.$el.find(".switch").switchButton({show_labels:!1}),this.$el.find(".accordion").accordion({collapsible:!0,heightStyle:"content",active:!1}),this.$el.find(".info-block").accordion({collapsible:!0,heightStyle:"content",active:!1}),new c({el:this.$("#form .form-container")}).show(),n.__super__.onRender.apply(this,arguments)},n.prototype.createErrorDialog=function(){return new a({errorText:"Error message"}).show()},n.prototype.createUncloseableErrorDialog=function(){return new a({errorText:"This dialog can be closed only by button",allowImplicitClose:!1}).show()},n.prototype.context=function(){var t,e;return t=this.cardStatuses.map((e=this,function(t){return{status:t,paymentSystems:e.paymentSystems}})),o.extend(n.__super__.context.apply(this,arguments),{cardsSet:t})},n}(u)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(e,n,o){var i,r={}.hasOwnProperty;void 0===(i=function(e){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.id="error-dialog",n.prototype.template="common/error-dialog",n.prototype.requiredOptions=["errorText"],n.prototype.dialogOptions=function(){return{width:300,buttons:[{text:t("Close"),class:"link-button cancel",click:(e=this,function(){return e.close()})}]};var e},n.prototype.context=function(){return{errorText:this.errorText}},n}(o(386))}.call(n,o,n,e))||(e.exports=i)},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u;return a=n(374).TemplateView,r=n(395).Contracts,c=n(387).WbFormMixin,e=n(429).ContractSelectView,u=n(861),{FormSampleView:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="form-sample",n.prototype.mixins=[c],n.prototype.initialize=function(){var t;return n.__super__.initialize.apply(this,arguments),this.contracts=t=new r(u),t.trigger("sync"),this.model=new o.Model,this.initForm()},n.prototype.onRender=function(){return new e({el:this.$el.find(".contract-select"),collection:this.contracts,showAllCardsItem:!1}).show(),n.__super__.onRender.apply(this,arguments)},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),{contracts:this.contracts.viewContext()})},n}(a)}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(384),n(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c;return c=n(40),a=n(98),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.initBanner=function(){var t,e;return(null!=(e=window.OW.marketingConfig.banners)?e.length:void 0)?((t=e[Math.floor(e.length*Math.random())]).image="static/rainbow/images/banners/"+t.name,this.banner=t):null},e.prototype.show=function(){var t,n;return t=o.Deferred(),a.loadConfig(c.API_URL+"/conf/marketing.js").then((n=this,function(){return n.initBanner()})).fail(function(t){return function(){return t.banner=null,console.warn("No news configuration found")}}(this)).always((function(){return t.resolve()})),t.then(function(t){return function(){return e.__super__.show.apply(t,arguments)}}(this))},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{banner:this.banner})},e}((r=n(1105)).LoginPage),i.extend(r,{LoginPage:e})}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p;return o(862),o(419),l=o(377),u=o(387).WbFormMixin,d=o(97),c=o(562).AuthSession,s=o(863),n=o(1111),p=o(380),{LoginPage:function(e){function h(){return h.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(h,e),h.prototype.mode="LOGIN",h.prototype.template="auth/login-page",h.prototype.events=i.extend({},s.prototype.events,{"change .login-method-select":"onLoginMethodChange","click :submit":"preventStorePassword","focus input#password":"restorePasswordField"}),h.prototype.initialize=function(){return this.model=new c,i.extend(this.errorMessages,{ACCOUNT_BLOCKED:t("Exceeded number of attempts to enter password")}),h.__super__.initialize.apply(this,arguments)},h.prototype.errorMessageFor=function(e){if("INVALID_LOGIN_OR_PASSWORD"!==(null!=e?e.code:void 0))return u.errorMessageFor.apply(this,arguments);switch(this.loginMethod){case"LOGIN_PW":return t("Invalid username or password");case"LOGIN":return t("Invalid username");case"CARD":return t("Invalid card number");default:return this.defaultErrorMessage}},h.prototype.getDefaultLoginMethod=function(){var t,e;return e=window.app.session,t=d.get("PREFERRED_AUTH_METHOD"),e.isLoginMethodAvailable(t)||(t=e.getDefaultLoginMethod().name),t},h.prototype.show=function(){return h.__super__.show.apply(this,arguments).then((t=this,function(){return t.updateLoginForm(t.getDefaultLoginMethod()).then((function(){return t.trigger("render.complete")}))}));var t},h.prototype.preventStorePassword=function(){var t;if(t=this.passwordField.val())return this.realPassword.val(t).attr("type","hidden")},h.prototype.beforeSubmit=function(t){if(this.passwordField.val())return this.passwordField.val(null).removeAttr("required").attr("type","text")},h.prototype.restorePasswordField=function(){if(this.realPassword.attr("type","text").val(null),"password"!==this.passwordField.attr("type"))return this.passwordField.attr("required","required").attr("type","password")},h.prototype.onRender=function(){return h.__super__.onRender.apply(this,arguments),this.$(".login-method-select").chosen({width:"100%",disable_search:!0}),!1},h.prototype.onLoginMethodChange=function(t){var e,n;if(e=this.updateLoginForm(t.currentTarget.value))return e.then((n=this,function(){var t;return(t=n.$form.data("validator")).invalid={},t.reset(),t.resetForm(),n.$form.find(":submit").removeAttr("disabled")}))},h.prototype.updateLoginForm=function(t,e){var o;if(null==e&&(e=!1),t!==this.loginMethod||e){switch(this.loginMethod=t,this.authFields&&this.authFields.remove({clear:!0}),t){case"LOGIN_PW":o=n.LoginPwFieldsView;break;case"LOGIN":o=n.LoginFieldsView;break;case"CARD":o=n.CardFieldsView;break;default:if(!(o=this.getCustomFieldsClass()))throw new Error("Unknown auth method")}return(this.authFields=new o({model:this.model,el:this.$(".auth-fields")})).show().then((i=this,function(){return i.passwordField=i.$("input#password"),i.realPassword=i.$("input[name=realpassword]")}));var i}},h.prototype.getCustomFieldsClass=function(){},h.prototype.showRemainingBlockTime=function(e){var n,o,s;if(e._error.blockExpiresIn&&e._error.blockExpiresAt)return o=t("Login block time remaining: %(time)s",{time:"<span class='block-time'></span>"}),s=r("<div class='page-message'>"+o+"</div>").appendTo(".page-messages"),n=r(".block-time",s),r.timeago.settings.allowFuture=!0,n.attr("title",e._error.blockExpiresAt).timeago(),i.delay((function(){return n.closest(".page-messages").children().slideUp()}),1e3*e._error.blockExpiresIn);console.warn("Account blocking time data is missing")},h.prototype.toggleNextStepBindings=function(t){return h.__super__.toggleNextStepBindings.apply(this,arguments),this.authFields&&this.authFields.remove(),this.authFields=null},h.prototype.destroyNextStepView=function(){return h.__super__.destroyNextStepView.apply(this,arguments),this.$(":submit").text(t("Login"))},h.prototype.handleAddAuth=function(){return h.__super__.handleAddAuth.apply(this,arguments),this.$(":submit").text(t("Proceed"))},h.prototype.handlePasswordChange=function(e){var n,i;return n=o(1112),this.$el.addClass("in-progress"),this.nextStepView=new n({el:this.$(".next-step"),model:this.model,policy:e}),this.nextStepView.show().then((i=this,function(){return i.toggleCustomValidationRules(!0),i.toggleNextStepBindings(!0)})),this.$(":submit").text(t("Proceed"))},h.prototype.onSubmitSuccess=function(t){return this.processing=!0,d.set("PREFERRED_AUTH_METHOD",this.loginMethod),window.app.session.set(t),window.app.trigger(p.events.user.LOGIN),window.app.start()},h.prototype.onSubmitError=function(t){var e,n,o,i,r;return this.$(".page-content").removeClass("is-loading"),401!==t.status&&this.restorePasswordField(),o=l.parseResponseSafe(t),401===t.status&&"CHANGE_PASSWORD"===(null!=(e=o._error)?e.code:void 0)?(this.handlePasswordChange(o.policy),!0):403===t.status?(this.showValidationErrors(),this.model.destroy().then((r=this,function(){return r.model=new c,r.destroyNextStepView(),r.$el.removeClass("in-progress"),r.reloadCaptcha(),r.bindModel(),r.updateLoginForm(r.loginMethod,!0)})),!0):(i=h.__super__.onSubmitError.apply(this,arguments),412===t.status&&"ACCOUNT_BLOCKED"===(null!=(n=o._error)?n.code:void 0)?(this.showRemainingBlockTime(o),!0):i)},h.prototype.context=function(){return i.extend(h.__super__.context.apply(this,arguments),{selectedLoginMethod:this.getDefaultLoginMethod(),availableLoginMethods:window.app.session.getLoginMethodsList()})},h}(s)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(t,e){(e={}).getBrowserName=function(t){var e;return null==t&&(t=null!=(e=window.navigator)?e.userAgent:void 0),/opera/i.test(t)||/opr\/|opios/i.test(t)?"Opera":/SamsungBrowser/i.test(t)?"Samsung Internet for Android":/coast/i.test(t)?"Opera Coast":/yabrowser/i.test(t)?"Yandex Browser":/msie|trident/i.test(t)?"Internet Explorer":/chrome.+? edge/i.test(t)?"Microsoft Edge":/vivaldi/i.test(t)?"Vivaldi":/seamonkey\//i.test(t)?"SeaMonkey":/firefox|iceweasel|fxios/i.test(t)?"Firefox":/chromium/i.test(t)?"Chromium":/chrome|crios|crmo/i.test(t)?"Chrome":/safari|applewebkit/i.test(t)?"Safari":t?"Web Browser":""},t.exports=e},function(t,e,n){(function(o){var i;void 0===(i=function(t){var e;return e=n(1108).CaptchaMixin,o.extend({},e,{initCaptchaEvents:function(){return o.extend(this.events,{"click .captcha-reload":"reloadCaptcha"})},getCaptchaPath:function(){return window.WB.API_URL+"/captcha.jpg?"+Date.now()},showCaptcha:function(){return this.$captchaBlock.removeClass("hidden")}})}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i;void 0===(i=function(t){var e,i;return null==(i=n(40)).CAPTCHA_LENGTH&&(i.CAPTCHA_LENGTH=5),(e={}).CaptchaMixin={getCaptchaPath:function(){throw new Error("getCaptchaPath must be overriden")},initCaptchaEvents:function(){throw new Error("initCaptchaEvents must be overriden")},isCaptchaEnabled:function(){return!1},initCaptcha:function(){var t;return this.useCaptcha=this.isCaptchaEnabled(),this.initCaptchaEvents(),this.bindings=o.extend({},this.bindings,{captcha:"input[name=captcha]"}),this.on("render",(t=this,function(){return t.$captchaBlock=t.$(".captcha-block"),console.assert(t.$captchaBlock.length,"Captcha block not found"),t.reloadCaptcha()})),this.on("remove",function(t){return function(){return window.clearTimeout(t.captchaTimeout)}}(this))},reloadCaptcha:function(t){var e;if(t&&t.preventDefault(),this.useCaptcha)return this.$el.off("click","input"),this.$(".captcha-image").attr("src",this.getCaptchaPath()).one("load",(e=this,function(){return e.$captchaBlock.removeClass("expired")})),this.ensureCaptchaFreshness()},ensureCaptchaFreshness:function(){var t;if(this.useCaptcha)return window.clearTimeout(this.captchaTimeout),this.captchaTimeout=o.delay((t=this,function(){return t.$captchaBlock.addClass("expired"),t.$el.one("click","input",(function(){return t.reloadCaptcha()}))}),1e3*i.SESSION_TIMEOUT)},unbindCaptcha:function(){return delete this.bindings.captcha,this.createBindings(),this.bindModel()},getCaptchaLength:function(){return i.CAPTCHA_LENGTH}},e}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(528),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="auth/login-add-auth-method-selector",n.prototype.onRender=function(){return new e({el:this.$(".control-container"),model:this.model}).show()},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){var e;return e=n(529),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.requiredOptions=["onOtpResend"],n.prototype.template="auth/login-add-auth-confirmation",n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),!this.model.get("confirmation.challenge"))throw new Error("Confirmation challenge info not found")},n.prototype.onRender=function(){return new e({el:this.$(".control-container"),model:this.model,onOtpResend:this.onOtpResend}).show()},n.prototype.context=function(){return o.extend(n.__super__.context.apply(this,arguments),this.model.viewContext())},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s;return n(406),s=n(402),i=n(405),{AuthFieldsView:e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments)},e.prototype.show=function(){return e.__super__.show.apply(this,arguments).then((t=this,function(){return t.modelBinder=new o.ModelBinder,t.modelBinder.bind(t.model,t.el,t.bindings)}));var t},e.prototype.onRender=function(){return s.applyMasks(this.$el)},e.prototype.remove=function(t){var e;if(null==t&&(t={}),this.modelBinder){if(this.modelBinder.unbind(),this.modelBinder._rootEl=null,this.modelBinder=null,t.clear)for(e in this.bindings)this.model.unset(e);return this.$el.empty()}},e}(n(374).TemplateView),LoginPwFieldsView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="auth/auth-login-pw-method",e.prototype.bindings={login:"input[name=login]",password:"input[name=realpassword]"},e}(e),LoginFieldsView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="auth/auth-login-method",e.prototype.bindings={login:"input[name=login]"},e}(e),CardFieldsView:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="auth/auth-card-method",e.prototype.bindings={card:{selector:"input[name=card]",converter:i.defaultConverter}},e}(e)}}.call(e,n,e,t))||(t.exports=i)}).call(this,n(384))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="auth/login-change-password",e}(n(864))}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c,u;return o(396),a=o(562).EnrollmentSession,c=o(865),n=o(863),r=o(1115),u=o(380),{EnrollmentPage:function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.mode="ENROLL",n.prototype.template="auth/enrollment-page",n.prototype.initialize=function(){return this.model=new a,i.extend(this.errorMessages,{INVALID_CARD_NUMBER:t("Invalid card number"),LOGIN_ALREADY_IN_USE:t("Username already in use"),AUTHENTICATION_FAILED:t("Service disabled for client")}),n.__super__.initialize.apply(this,arguments)},n.prototype.show=function(){return this.showLoadingIndicator(),this.model.fetch().done((t=this,function(){return t.attrsToResetOnError=t.getAttrsToResetOnError(),window.app.hideLoadingIndicator(),n.__super__.show.apply(t,arguments)}));var t},n.prototype.getBindings=function(){return i.extend({},this.bindings,this.model.getBindings())},n.prototype.getAttrsToResetOnError=function(){return i.without(i.keys(this.getBindings()),"cardNumber")},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.$el.find(".has-datepicker input").datepicker({maxDate:new Date,dateFormat:"dd-mm-yy",buttonText:"↓",showOn:"both",changeMonth:!0,changeYear:!0,yearRange:"c-100:c"}).datepicker("setDate",new Date)},n.prototype.destroyNextStepView=function(){return n.__super__.destroyNextStepView.apply(this,arguments),this.attrsToResetOnError=this.getAttrsToResetOnError()},n.prototype.onSubmitSuccess=function(t){var e;if(!(this.model instanceof c)){if(!t.confirmationKey)throw new Error("Confirmation key is missing");return t.passwordPolicy||console.warn("Password policy is missing"),this.$(".page-content").removeClass("is-loading"),e={confirmationKey:t.confirmationKey,cardNumber:this.model.get("cardNumber")},t.login&&(e.login=t.login),this.model=new c(e),this.attrsToResetOnError=["login"],this.nextStepView=new r({el:this.$(".next-step"),model:this.model,policy:t.passwordPolicy}),this.nextStepView.show().then((n=this,function(){return n.toggleCustomValidationRules(!0),n.toggleNextStepBindings(!0)}));var n}window.app.session.fetch().then((function(){return window.app.trigger(u.events.user.LOGIN),window.app.start()}))},n.prototype.onSubmitError=function(t){return 403===t.status?(this.showValidationErrors(),this.model=new a({fields:this.model.get("fields")}),this.destroyNextStepView(),this.$el.removeClass("in-progress"),this.reloadCaptcha(),this.bindModel(),!0):n.__super__.onSubmitError.apply(this,arguments)},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),this.model.viewContext())},n}(n)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(40),{UserSettings:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=e.API_URL+"/user/settings",n.prototype.isNew=function(){return!1},n}(n(375).BaseModel)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e;return e=n(864),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="auth/enrollment-form",n.prototype.bindings={login:"[name=login]"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.policy=this.options.policy||{}},n.prototype.getBindings=function(){var t;return t=this.passwordInputView.getBindings(),this.model.get("login")?t:o.extend(!0,{},this.bindings,t)},n.prototype.getValidationOptions=function(){return this.passwordInputView.getValidationOptions()},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return(t.passwordInputView=new e({el:t.$(".password-block"),model:t.model,policy:t.policy})).show()}));var t},n.prototype.context=function(){return i.extend(n.__super__.context.apply(this,arguments),this.model.viewContext())},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c;return n=o(378),r=o(1117).Send2Friend,a=o(387).WbFormMixin,(c={}).Send2FriendPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="payments/send2friend-page",o.prototype.mixins=[a],o.prototype.bindings={cardNumber:"[name=cardNumber]",phoneNumber:"[name=phoneNumber]",mobileOperator:"[name=mobileOperator]"},o.prototype.events=i.extend({},n.prototype.events,{"click .tab-select":"switchTab"}),o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new r({code:this.options.code,userId:this.options.userId,uuid:this.options.uuid})},o.prototype.show=function(){return this.model.fetch().done((e=this,function(){return window.app.hideLoadingIndicator(),e.initForm(),o.__super__.show.apply(e,arguments),e.switchTab()})).fail((function(e){return window.app.hideLoadingIndicator(),e.errorHandled=!0,window.app.showErrorPage({errorText:t("Invalid transfer code. (Perhaps, it's been already received, or revoked.)")})}));var e},o.prototype.switchTab=function(t){var e,n,o,i;return n=this.$(".tab-select"),o=this.$(".tabs-content"),e=n.first(),t&&(t.preventDefault(),e=this.$(t.currentTarget)),n.removeClass("active"),e.addClass("active"),i=e.attr("target"),o.children(".tab").hide().find(":input").prop("disabled",!0),o.children("#"+i).show().find(":input").prop("disabled",!1),this.$el.find("[name=mobileOperator]").chosen("destroy").chosen({disable_search:!0}),this.$(".error-message").hide(),this.$(".field-wrapper").removeClass("error"),this.$(":submit").prop("disabled",!1)},o.prototype.beforeSubmit=function(){return this.model.set("type",this.$(".tab-select.active").attr("target"))},o.prototype.onSubmitSuccess=function(){return this.showOperationSuccess(t("Transfer completed successfully"))},o.prototype.onSubmitError=function(t){return window.app.showErrorPage()},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),this.model.viewContext())},o}(n),c}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e;return e=n(40),{Send2Friend:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.url=function(){return e.API_URL+"/send2friend/"+this.get("code")+"/"+this.get("userId")+"/"+this.get("uuid")},n.prototype.initialize=function(){if(n.__super__.initialize.apply(this,arguments),!(this.get("code")&&this.get("userId")&&this.get("uuid")))throw new Error("one or more required parameters are missing")},n}(n(375).BaseModel)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e,o;return e=n(378),(o={}).EmptyPage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="common/empty-page",e.prototype.onRender=function(){return this.showLoadingIndicator()},e}(e),o}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(a=function(e){var n,i,a,u,l,d,p,h,f,m;return o(40),a=o(378),l=o(379),d=o(387).WbFormMixin,p=o(416).WbWizard,n=o(852).Dispute,f=o(853),i=f.FlatHistoryListView,u=f.SelectableHistoryPanel,m=o(380),(h={}).DisputeOperationsChoice=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.pageType=m.mainMenuIds.CP_HISTORY,n.prototype.template="disputes/dispute-operations-choice",n.prototype.requiredOptions=["onCancel","onProceed"],n.prototype.events={"click .proceed":"proceed","click .toggle-operation":"onOperationToggle","click .cancel":"onCancel"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.on("change:transactionIds",(t=this,function(){return t.validate()}));var t},n.prototype.getTitle=function(){return t("Create dispute")},n.prototype.validate=function(){return this.toggleProceed(0!==this.model.get("transactionIds").length)},n.prototype.toggleProceed=function(t){return this.$(".proceed").prop("disabled",!t),this.$(".error").toggle(!t)},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return t.historyPanel=new u({el:t.$(".block__history"),selectedOperations:t.model.get("transactionIds")}),t.historyPanel.show()}));var t},n.prototype.onOperationToggle=function(){return this.model.set("transactionIds",this.historyPanel.getSelectedOperations())},n.prototype.proceed=function(){var t;if(0!==(t=this.model.get("transactionIds")).length)return this.model.setTransactions(this.historyPanel.history.filter((function(e){return-1!==t.indexOf(e.id)}))),this.onProceed();this.toggleProceed(!1)},n.prototype.context=function(){return r.extend(n.__super__.context.apply(this,arguments),{hasTransactions:this.model.has("transactionIds")})},n}(a),h.DisputeForm=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.pageType=m.mainMenuIds.CP_HISTORY,n.prototype.template="disputes/dispute-form",n.prototype.mixins=[d],n.prototype.requiredOptions=["onCancel","onSubmitSuccess"],n.prototype.events={"click .cancel":"onCancel"},n.prototype.bindings={reasonId:"[name=reasonId]",comment:"[name=comment]"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.initForm(),this.on("render.complete",(t=this,function(){return t.updateReasonField(),t.model.on("change:reasonId",(function(){return t.updateReasonField()}))}));var t},n.prototype.getTitle=function(){return t("Create dispute")},n.prototype.getValidationOptions=function(){return{errorPlacement:function(t,e){return t.appendTo(e.closest(".field-wrapper")),t.addClass("error-message")}}},n.prototype.updateReasonField=function(){var t;if(!(t=r.findWhere(window.OW.disputesConfig.reasons,{id:this.model.get("reasonId")})))throw new Error("Unexpected reason: ",this.model.get("reasonId"));return this.$description.toggleClass("hidden",!t.description).text(t.description||""),this.$warning.toggleClass("hidden",!t.warning).text(t.warning||"")},n.prototype.show=function(){return window.app.getDisputesConfig().then((t=this,function(){return t.model.set("reasonId",window.OW.disputesConfig.reasons[0].id),n.__super__.show.apply(t,arguments)}));var t},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),new i({el:this.$(".operations"),history:this.model.transactions}).show(),s("[name=reasonId]").chosen({width:"100%",disable_search:!0}),this.$description=this.$(".hint"),this.$warning=this.$(".warning")},n.prototype.context=function(){return r.extend(n.__super__.context.apply(this,arguments),{reasons:window.OW.disputesConfig.reasons})},n}(a),h.DisputeCreationWizard=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,e),o.prototype.menuSectionId=m.mainMenuIds.CP_HISTORY,o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new n,this.disputesPath="#menu/"+window.app.data.menu.getPath("DISPUTES","NATIVE")},o.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getOperationsChoiceRouterOptions();case 1:return this.getDisputeFormRouterOptions();default:return this.throwStepNotSupported(t)}},o.prototype.showFirstStep=function(){return this.showStep(0)},o.prototype.getOperationsChoiceRouterOptions=function(){var t,e;return(t=new l((new l).fragment())).removeSearch("confirm"),window.app.router.navigate(t.toString(),{trigger:!1,replace:!0}),[h.DisputeOperationsChoice,{model:this.model,onCancel:(e=this,function(){return window.app.router.navigate(e.disputesPath,{trigger:!0})}),onProceed:function(e){return function(){return(t=new l((new l).fragment())).addSearch("confirm",null),window.app.router.addToHistory(),window.app.router.navigate(t.toString(),{trigger:!1}),e.showStep(1)}}(this)}]},o.prototype.onDisputeCreated=function(){return window.app.showSuccessMessageOnNextPage(t("Dispute successfully created")),window.app.router.navigate(this.disputesPath,{trigger:!0})},o.prototype.getDisputeFormRouterOptions=function(){return[h.DisputeForm,{model:this.model,onCancel:function(){return window.app.router.goBack()},onSubmitSuccess:(t=this,function(){return t.onDisputeCreated()})}];var t},o}(p),h.DisputeCreationWizard.instance=function(){return window.app.wizards.dispute?window.app.wizards.dispute:(window.app.wizards.dispute=new h.DisputeCreationWizard,window.app.wizards.dispute.listenTo(window.app.router,"route",(function(t,e){if("createDispute"!==t)return delete window.app.wizards.dispute})))},h}.call(n,o,n,e))||(e.exports=a)}).call(this,o(379),o(11),o(14))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l;return l=o(380),u=o(405),s=o(378),c=o(387).WbFormMixin,n=o(397).ExternalCard,{ExternalCardRegistrationPage:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="contracts/external-card-registration-page",o.prototype.mixins=[c],o.prototype.attrsToResetOnError=["number","embossedName","securityCode","expiryDate","confirmation"],o.prototype.errorMessages=i.extend({},c._errorMessages,{ALREADY_ENROLLED:t("This card has already been registered"),WRONG_AMOUNT:t("Entered amount is incorrect"),INVALID_INPUT:t("One or more fields are filled in incorrectly"),AMOUNT_ATTEMPTS_EXCEEDED:t("Exceeded number of attempts to enter charged amount")}),o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model=new n,this.initForm()},o.prototype.getValidationOptions=function(){return{errorPlacement:function(t,e){var n,o;return n=e.closest(".field-wrapper"),(o=r(".error-message",n)).length||(o=r("<div></div>",{class:"error-message"}),n.append(o)),o.append(t)},showErrors:function(){var t,e,n;return n=Boolean(this.numberOfInvalids()),e=(t=r(this.currentForm)).find(":submit"),n?(this.currentElements.trigger("validation:failed"),e.attr("disabled","disabled")):i.all(t.find("[required]").filter(":visible"),(function(t){return!i.isEmpty(r(t).val())}))&&(this.currentElements.trigger("validation:success"),e.removeAttr("disabled")),this.defaultShowErrors(),r(".error-message",t).each((function(){return r(this).children().filter(":not(:visible)").remove()}))},highlight:function(t,e,n){var o;return(o=r(t).closest(".control-container")).length?o.addClass(e).removeClass(n):r.validator.defaults.highlight(t,e,n)},unhighlight:function(t,e,n){var o;return(o=r(t).closest(".control-container")).length?o.removeClass(e).addClass(n):r.validator.defaults.unhighlight(t,e,n)}}},o.prototype.getBindings=function(){var t,e,n,o,i;for(e={},n=0,o=(i=["name","number","embossedName","securityCode"]).length;n<o;n++)e[t=i[n]]={selector:"[name="+t+"]",converter:u.defaultConverter};return e.expiryDate={selector:"[name=expiryDate]",converter:u.expirationDateConverter},e},o.prototype.shouldKeepAttrs=function(t){return 401===t.status&&"confirmationRequired"===this.model.get("_status")||400===t.status&&"BAD_REQUEST"===this.model.get("_error.code")},o.prototype.onSubmitError=function(t,e){var n;return n=JSON.parse(t.responseText)._error,412===t.status&&"WRONG_AMOUNT"===(null!=n?n.code:void 0)?(this.resetAttrsOnError(),c.onSubmitError.apply(this,arguments)):400===t.status?(this.showError(this.errorMessageFor({code:"INVALID_INPUT"})),this.addAuthDialog&&this.addAuthDialog.hideLoadingIndicator(),!0):c.onSubmitError.apply(this,arguments)},o.prototype.onSubmitSuccess=function(){var e;return e=window.app.data.menu.getPath(l.mainMenuIds.CARDS_ACCOUNTS),window.app.showSuccessMessageOnNextPage(t("Card has successfully been added")),window.app.router.navigate("#menu/"+e,{trigger:!0})},o}(s)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(11),o(14))},function(e,n,o){(function(i,r){var s,a={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d;return o(396),d=o(97),o(377),n=o(475).Application,c=o(414).CpServiceMeta,u=o(378),l=o(394).WbGenericFormMixin,s=o(1122).ApplicationConditionsDialog,{ApplicationPage:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="applications/application-page",o.prototype.requiredOptions=["serviceId"],o.prototype.mixins=[l],o.prototype.isCompleted=!1,o.prototype.availableToManager=!0,o.prototype.events={"click .next-step":"showNextStep","click .prev-step":"showPrevStep"},o.prototype.initialize=function(t){return this.pageType=t.menuId,o.__super__.initialize.apply(this,arguments),this.formMeta=new c({id:this.serviceId}),this.model=new n(null,{service:this.formMeta})},o.prototype.getTitle=function(){return this.formMeta.get("name")},o.prototype.show=function(){return this.formMeta.fetchIfEmpty().then((t=this,function(){return t.updateModelFromUrl(),t.ensureMandatoryFields(),t.isTabs="TABS"===t.formMeta.get("addData.DISPLAY_MODE"),t.model.set(t.formMeta.getModelDefaults()),t.ensureConditionsDialog(),o.__super__.show.apply(t,arguments)})).then(function(t){return function(){return t.model.trackSavedValue()}}(this));var t},o.prototype.hasUnsavedChanges=function(){return!this.isCompleted&&this.model.hasUnsavedChanges()},o.prototype.onRender=function(){return this.hasMissingMandatoryFields||this.initGenericForm(),o.__super__.onRender.apply(this,arguments)},o.prototype.submitAction=function(){return this.$(".error-message-container").hide(),this.model.save()},o.prototype.onSubmitSuccess=function(){var e,n,o;return"function"==typeof(n=window.app.data.contracts.dashboard).resetCache&&n.resetCache(),this.isCompleted=!0,o=d.get("previousMenuItemId"),e={url:window.app.data.menu.getItemUrl(o),text:t('Back to "%(pageName)s"',{pageName:window.app.data.menu.get(o).get("name")})},this.showOperationSuccess(this.model.get("message")||t("Application successfully submitted"),{backLink:e})},o.prototype.ensureMandatoryFields=function(){var t;return this.missingMandatoryFields=this.formMeta.getFields({_filter:(t=this,function(e){return e.isMissingMandatoryField(t.model)})}).leafs(),this.hasMissingMandatoryFields=this.missingMandatoryFields.length>0},o.prototype.ensureConditionsDialog=function(){var t,e,n;if(!this.hasMissingMandatoryFields&&(t=this.formMeta.get("comment"),e=this.formMeta.get("license"),t||e))return(this.conditionsDialog=new s({comment:t,license:e})).show(),window.app.router.once("route",(n=this,function(){return n.conditionsDialog.close()}))},o.prototype.validateElement=function(t){var e;return(e=this.validator.check(t))?delete this.validator.invalid[t.name]:this.validator.invalid[t.name]=!0,t.setAttribute("aria-invalid",!e),e},o.prototype.validateGroup=function(t,e){var n,o,r,s,a;return null==e&&(e=!1),n=this.getFields(),s=(o=function(t){var e,i,r,s,a;for(a=[],i=0,r=t.length;i<r;i++)s=t[i],(e=n.getChildrenOf(s))?a=a.concat(o(e.models)):a.push("[name='"+s.get("attr")+"']");return a})([n.get(t)]),r=!0,i(s.join(","),this.$("#"+t)).each((a=this,function(t,e){return r=!1!==a.validateElement(e)&&r,!0})),e||this.validator.showErrors(),this.markTab(t,r),r},o.prototype.markTab=function(t,e){return i("li",this.$tabs).filter("[data-id='"+t+"']").toggleClass(this.validator.settings.errorClass,!e).toggleClass(this.validator.settings.validClass,e)},o.prototype.showNextStep=function(){return this.shiftTab(1)},o.prototype.showPrevStep=function(){return this.shiftTab(-1)},o.prototype.shiftTab=function(t){var e;return e=this.$tabs.tabs("option","active"),this.$tabs.tabs("option","active",e+t)},o.prototype.adjustNavButtons=function(){var t,e;return e=this.tabsCount-1,t=this.$tabs.tabs("option","active"),this.$(".prev-step").toggle(t>0),this.$(".next-step").toggle(t<e),this.$(":submit").toggle(t===e)},o.prototype.arrangeViews=function(t){var e;if(l.arrangeViews.apply(this,arguments),this.isTabs){var n;if((e=this.getFields()).all((function(t){return t.isGroup()})))return this.tabsCount=e.length,(this.$tabs=this.$(".form-fields")).tabs({create:(n=this,function(t,e){return n.adjustNavButtons()}),activate:function(t){return function(e,n){return t.adjustNavButtons()}}(this),beforeActivate:function(t){return function(e,n){return t.validateGroup(n.oldTab.attr("aria-controls")),!0}}(this)});console.warn("Unable to use tabbed layout because some of top-level CP fields are not groups")}},o.prototype.formIsValid=function(){var t,e;return this.isTabs?(t=!0,i("li",this.$tabs).each((e=this,function(n,o){var i;return!(i=o.getAttribute("data-id"))||(t=e.validateGroup(i,!0)&&t,!0)})),this.validator.showErrors(),t):l.formIsValid.apply(this,arguments)},o.prototype.getValidationOptions=function(){return{ignore:""}},o.prototype.context=function(){var t;return t=r.extend(o.__super__.context.apply(this,arguments),this.formMeta.viewContext(),{isTabs:this.isTabs,hasMissingMandatoryFields:this.hasMissingMandatoryFields}),this.hasMissingMandatoryFields&&(t.missingMandatoryFields=this.missingMandatoryFields.map((function(t){return t.viewContext()}))),!this.isTabs||this.hasMissingMandatoryFields||(t.tabs=this.getFields().map((function(t,e){return{id:t.id,name:t.get("name"),index:e+1}}))),t},o}(u)}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a,c;return n=o(375).BaseModel,r=o(415).Checkbox,a=o(386),c=o(387).WbFormMixin,{ApplicationConditionsDialog:function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.id="application-conditions-dialog",o.prototype.template="applications/application-conditions-dialog",o.prototype.allowImplicitClose=!1,o.prototype.mixins=[c],o.prototype.initialize=function(){if(o.__super__.initialize.apply(this,arguments),this.license=this.options.license,this.comment=this.options.comment,this.license)return this.model=new n({license:!1}),this.initForm()},o.prototype.initLicense=function(){return new r({el:this.$(".license-form"),model:this.model,label:this.license,name:"license",className:"licenseAgreement"}).show()},o.prototype.onRender=function(){var t;return o.__super__.onRender.apply(this,arguments),this.license&&this.initLicense().then((t=this,function(){return t.trigger("render.complete"),t.ensureAlignment(),t.setExplicitDialogHeight()})),!this.license},o.prototype.getValidationOptions=function(){var t,e;return e=this,t=function(t){return t?e.deactivateButtons():e.activateButtons()},{errorPlacement:function(t){return function(e,n){return e.addClass("error-message").appendTo(t.$form)}}(this),showErrors:function(){return t(!!this.numberOfInvalids()),this.defaultShowErrors()}}},o.prototype.dialogOptions=function(){return{title:t("Application conditions"),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(e=this,function(t){return e.close(),window.app.router.goBack()})},{text:t("Proceed"),class:"wb-button proceed",click:function(t){return function(e){if(!t.license||t.$form.valid())return t.close()}}(this)}]};var e},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),{comment:this.comment,license:this.license})},o}(a)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(11))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(e){var n,s,c,u,l,d,p,h,f,m,y;return o(372),m=o(402),p=o(378),n=o(375).BaseModel,h=o(374).TemplateView,y=o(397),u=y.Beneficiary,s=y.Beneficiaries,f=o(387).WbFormMixin,d=o(473).ConfirmActionDialog,o(406),o(406).Constants.ViewToModel,c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="payments/beneficiaries-management-page",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.modelBinder=new i.ModelBinder,this.beneficiaries=new s,this.listState=new n},e.prototype.show=function(){return this.showLoadingIndicator(),this.beneficiaries.fetch().then((t=this,function(){var n;return t.listState.set({beneficiary:(null!=(n=t.beneficiaries.at(0))?n.id:void 0)||null}),e.__super__.show.apply(t,arguments)}));var t},e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.modelBinder.bind(this.listState,this.$el,{beneficiary:"[name=beneficiary]"}),this.$(".beneficiaries").chosen({disable_search:!0}),this.ensureBeneficiaryEditForm(this.beneficiaries.get(this.listState.get("beneficiary"))),this.listState.on("change",(t=this,function(){return t.ensureBeneficiaryEditForm(t.beneficiaries.get(t.listState.get("beneficiary"))),r.defer((function(){return t.$(".beneficiaries").trigger("chosen:updated")}))}));var t},e.prototype.ensureBeneficiaryEditForm=function(t){var e;return null!=(e=this.editForm)&&e.remove(),(this.editForm=new l({el:this.$(".beneficiary-info-form-container"),model:t,onUpdate:this.onBeneficiaryUpdated.bind(this),onDelete:this.onBeneficiaryDeleted.bind(this)})).show()},e.prototype.onBeneficiaryUpdated=function(t){return this.listState.off("change"),this.beneficiaries.add(t),this.listState.set({beneficiary:t.id}),this.render()},e.prototype.onBeneficiaryDeleted=function(t){var e;return this.listState.off("change"),this.beneficiaries.remove(t),this.listState.set({beneficiary:(null!=(e=this.beneficiaries.at(0))?e.id:void 0)||null}),this.render()},e.prototype.context=function(){return r.extend(e.__super__.context.apply(this,arguments),{beneficiaries:this.beneficiaries.viewContext()})},e}(p),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="payments/beneficiary-edit-form",n.prototype.mixins=[f],n.prototype.events={"click .delete":"deleteBeneficiary"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),null==this.model&&(this.model=new u),this.model.trackSavedValue(),this.initForm()},n.prototype.show=function(){return n.__super__.show.apply(this,arguments).then((t=this,function(){return m.applyMasks(t.$el)}));var t},n.prototype.remove=function(){return this.model.hasUnsavedChanges()&&this.model.revert(),this.undelegateEvents(),this.$el.empty()},n.prototype.getBindings=function(){var t;return t={firstName:'[name="beneficiary.firstName"]',lastName:'[name="beneficiary.lastName"]'},this.model.isNew()&&r.extend(t,{cardNumber:'[name="beneficiary.cardNumber"]'}),t},n.prototype.deleteBeneficiary=function(e){return e.preventDefault(),new d({actionText:t("Do you really want to remove this beneficiary?"),onConfirm:(n=this,function(){return n.model.destroy().then((function(){return n.options.onDelete(n.model)}))})}).show();var n},n.prototype.onSubmitSuccess=function(){return this.options.onUpdate(this.model)},n.prototype.context=function(){return r.extend(n.__super__.context.apply(this,arguments),{existingBeneficiary:!this.model.isNew(),deletable:!this.model.isNew()})},n}(h),{BeneficiariesManagementPage:c}}.call(n,o,n,e))||(e.exports=s)}).call(this,o(384),o(11))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m,y,_,g;return o(396),y=o(377),d=o(378),p=o(374).TemplateView,n=o(375).BaseModel,f=o(416).WbWizard,h=o(394).WbGenericFormMixin,(_=o(459)).SearchInvoicesListMeta,u=_.InvoicesListMeta,a=_.InvoicesList,l=_.InvoicesSearchIdentifiers,g=o(380),(m={}).InvoicesRequestPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="payments/invoices/invoices-request-page",n.prototype.pageType=g.mainMenuIds.PAYMENTS_TRANSFERS,n.prototype.requiredOptions=["formMetas","done","invoiceName","activeServiceId"],n.prototype.getTitle=function(){return this.pageName},n.prototype.show=function(){var e,o,i,r;for(this.servicesIds=[],o=0,i=(r=this.formMetas).length;o<i;o++)e=r[o],this.servicesIds.push({id:e.id,name:t(e.id+" [invoice menu item]"),isActive:e.id===this.activeServiceId});return this.servicesIds.length>1?this.pageName=t(this.invoiceName+" [page name]"):this.pageName=t(this.formMetas[0].get("name")+" [page name]"),n.__super__.show.apply(this,arguments)},n.prototype.onRender=function(){var t,e,o,r,s,a,c;for(r=[],e=0,o=(s=this.formMetas).length;e<o;e++)t=s[e],a=new m.InvoicesRequestForm({el:this.$("#invoice-tab-"+t.id),formMeta:t,done:this.done}),r.push(a.show());return i.when.apply(i,r).done((c=this,function(){return c.$(".wb-tabs").tabs(),n.__super__.onRender.apply(c,arguments)})).fail((function(){throw new Error("One of subviews' show() failed")}))},n.prototype.context=function(){return{pageName:this.pageName,showTabs:this.servicesIds.length>1,servicesIds:this.servicesIds}},n}(d),m.InvoicesRequestForm=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="payments/invoices/invoices-request-form",e.prototype.requiredOptions=["formMeta","done"],e.prototype.mixins=[h],e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.model=new n(this.formMeta.getModelDefaults())},e.prototype.onRender=function(){return this.initGenericForm(),e.__super__.onRender.apply(this,arguments)},e.prototype.submitAction=function(){return i.Deferred().resolve()},e.prototype.onSubmitSuccess=function(){return this.done(this.formMeta,this.model.toJSON())},e.prototype.context=function(){return r.extend(e.__super__.context.apply(this,arguments),this.formMeta.viewContext())},e}(p),m.InvoicesListPage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="payments/invoices/invoices-list",e.prototype.pageType=g.mainMenuIds.PAYMENTS_TRANSFERS,e.prototype.requiredOptions=["formMeta","isSearchService"],e.prototype.events=function(){return{"click .new-search":"goToSearch"}},e.prototype.initialize=function(){var t,n,o;return e.__super__.initialize.apply(this,arguments),this.ready=new i.Deferred,this.billerId=this.options.billerId,this.consumerId=this.options.consumerId,this.addParams=this.options.addParams,t=new i.Deferred,this.options.isSearchService?(this.searchResult=new l(null,{searchService:this.formMeta.id,searchParams:this.options.searchParams}),(n={}).error=function(e,n,o){return n.errorHandled=!0,t.reject()},this.searchResult.fetch(n).then((o=this,function(){var e;return o.consumerId=o.searchResult.get("customIdt"),(e=o.searchResult.get("addInfo"))&&(o.addParams={},r.each(e,(function(t){return o.addParams[t.id]=t.value}))),t.resolve()}))):t.resolve(),i.when(t).then(function(t){return function(){return t.collection=new a(null,{billerId:t.billerId,consumerId:t.consumerId,addParams:t.addParams})}}(this)).always(function(t){return function(){return t.ready.resolve()}}(this))},e.prototype.goToSearch=function(t){var e;return t.preventDefault(),(e=new s((new s).fragment())).search(""),window.app.router.navigate(e.toString(),{trigger:!0,replace:!1})},e.prototype.show=function(){return this.showLoadingIndicator(),i.when(this.ready).then((t=this,function(){var n;return t.collection?((n=t.collection.fetch()).fail((function(e){var n,o,i;return n=(i=y.parseResponseSafe(e))._error,(o=i.respText)||(o=n&&h.errorMessageFor.call(t,n)),e.errorHandled=!0,window.app.showErrorMessageOnNextPage(o||h.defaultErrorMessage),window.app.router.reloadPage()})),n.then((function(){var n;return 1===t.collection.length?(n=Boolean(t.addParams.templateId||t.addParams.autoSearch),window.app.router.navigate(t.getInvoiceLink(t.collection.at(0)),{trigger:!0,replace:n}),i.Deferred().reject()):e.__super__.show.apply(t,arguments)}))):e.__super__.show.apply(t,arguments)}));var t},e.prototype.getInvoiceLink=function(t){var e,n;return n=new s(""),e=r.extend({},this.addParams,{customIdt:this.consumerId,invoiceId:t.id}),n.addSearch(e),"#invoices/"+this.options.billerId+"/pay"+n.toString()},e.prototype.context=function(){var t,n,o,i;if(this.collection)for(o=0,i=(n=this.collection.viewContext()).length;o<i;o++)(t=n[o]).link=this.getInvoiceLink(t);return r.extend(e.__super__.context.apply(this,arguments),this.formMeta.viewContext(),{invoices:n})},e}(d),m.InvoicesRequestWizard=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.menuSectionId=g.mainMenuIds.PAYMENTS_TRANSFERS,e.prototype.initialize=function(t){var e,n;return this.options=t,this.onlySearch=!1,this.searchServicesIds=[],this.formMeta=null,this.formMetas=[],this.invoiceName="",this.ready=i.Deferred(),this.activeServiceId="",(e=window.app.data.paymentsMenu).fetchIfEmpty().then((n=this,function(){var t,o,i,s,a,c;if(!(s=e.getInvoiceMenuItemId(n.options.billerId)))return console.assert(s,"menuItemId not found"),n.formMetas.push(new u(null,{billerId:n.options.billerId})),void n.ready.resolve();if(t=e.get(s),n.onlySearch=!!t.get("options.onlySearch"),n.searchServicesIds=r.compact((t.get("options.search")||"").split(",")),n.invoiceName=t.get("name"),n.onlySearch||n.formMetas.push(new u(null,{billerId:n.options.billerId})),n.searchServicesIds.length)for(o=0,i=(a=n.searchServicesIds).length;o<i;o++)c=a[o],n.formMetas.push(new u(null,{billerId:c}));return n.ready.resolve()}))},e.prototype.isSearchService=function(t){return r.contains(this.searchServicesIds,t)},e.prototype.shouldProceedToSearch=function(){var t,e;return!this.onlySearch&&!this.searchServicesIds.length&&(t=this.formMetas[0],this.options.urlParams?e=this.options.urlParams:t.autoSearchEnabled()&&(e=r.extend(t.getPredefinedSearchParams(),{autoSearch:!0})),e&&this.setInvoiceSearchParams(t,e))},e.prototype.showFirstStep=function(){return i.when(this.ready).then((t=this,function(){var e,n,o,r,s;for(r=[],n=0,o=(s=t.formMetas).length;n<o;n++)e=s[n],r.push(e.fetchIfEmpty());return i.when.apply(i,r).then((function(){var e;if(t.activeServiceId||(t.activeServiceId=null!=(e=t.formMetas[0])?e.id:void 0),!t.shouldProceedToSearch())return t.showStep(0);t.showStep(1)}))}));var t},e.prototype.setInvoiceSearchParams=function(t,e){var n,o,i;if(this.consumerId="",this.addParams=this.searchParams={},this.formMeta=t,i=t.getRequiredAttributes(),r.each(r.keys(e),(function(t){if(r.isObject(e[t])&&r.has(e[t],"id"))return e[t+".id"]=e[t].id,delete e[t]})),r.difference(i,r.keys(e)).length)return!1;if(this.isSearchService(t.id))return this.searchParams=e,!0;if(!(n=t.getField({role:"destination.account"})))throw new Error("Field with role=destination.account is missing");return o=e[n.get("attr")],this.consumerId=o,this.addParams=r.omit(e,n.get("attr")),!0},e.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getInvoicesRequestRouterOptions();case 1:return this.getInvoicesListRouterOptions();default:return this.throwStepNotSupported(t)}},e.prototype.getInvoicesRequestRouterOptions=function(){return[m.InvoicesRequestPage,{formMetas:this.formMetas,invoiceName:this.invoiceName,activeServiceId:this.activeServiceId,done:(t=this,function(e,n){return t.setInvoiceSearchParams(e,n)?t.showNextStep().then((function(){var t;return(t=new s((new s).fragment())).addSearch(n),window.app.router.navigate(t.toString(),{trigger:!1})})):(t.activeServiceId=e.id,void t.showFirstStep())})}];var t},e.prototype.getInvoicesListRouterOptions=function(){return[m.InvoicesListPage,{formMeta:this.formMeta,billerId:this.options.billerId,consumerId:this.consumerId,addParams:this.addParams,searchParams:this.searchParams,isSearchService:this.isSearchService(this.formMeta.id)}]},e}(f),m.invoicesRequestWizard=function(t,e){return new m.InvoicesRequestWizard({billerId:t,urlParams:e}).showFirstStep()},m}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(11),o(379))},function(t,e,n){(function(t,o){var i,r,s,a,c,u,l={}.hasOwnProperty;n(423),c=n(405),u=n(406).Constants,a=u.ViewToModel,u.ModelToView,r=n(395).InvoiceAutopaymentContracts,s=n(374).TemplateView,i=n(429).ContractSelectView,e.InvoiceAutopaymentOptionsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.template="payments/invoices/invoice-autopayment-options",n.prototype.requiredOptions=["model"],n.prototype.bindings={autoPaymentEnabled:{selector:"[name=autoPaymentEnabled]",converter:c.makeFlipSwitchConverter({true:!0,false:!1})},"autoPaymentSource.id":'[name="autoPaymentSource.id"]'},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.modelBinder=new t.ModelBinder},n.prototype.initEvents=function(){return this.model.on("change:autoPaymentEnabled",(t=this,function(){return t.$contractListContainer.slideToggle(),t.$autoPaymentCb.switchButton("option","checked",t.model.get("autoPaymentEnabled"))}));var t},n.prototype.onRender=function(){var t;return n.__super__.onRender.apply(this,arguments),this.initEvents(),this.$autoPaymentCb=this.$('input[type="checkbox"]'),this.$autoPaymentCb.switchButton({show_labels:!1}),this.$contractListContainer=this.$("[data-js-autopayment-contract-container]"),this.contractsList=new i({el:this.$("[data-js-autopayment-contract]"),dataModel:this.model,showAllCardsItem:!1,inputName:"autoPaymentSource.id",collection:new r}),this.contractsList.on("ready",(t=this,function(){return t.modelBinder.bind(t.model,t.$el,t.bindings,{initialCopyDirection:a}),t.trigger("render.complete")})),this.contractsList.show(),!1},n.prototype.context=function(){return o.extend(n.__super__.context.apply(this,arguments),this.model.viewContext())},n}(s)}).call(this,n(384),n(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d;return u=n(416).WbWizard,e=n(450).Deposit,r=n(1127).DepositCalculatorPage,a=n(1129).DepositCreationPage,c=n(1130).DepositResultPage,d=n(380),(l={}).DepositWizard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.initialize=function(){return window.app.data.menu.getPath("DEPOSITS","NATIVE")?this.menuSectionId=d.mainMenuIds.DEPOSITS:this.menuSectionId=d.mainMenuIds.CARDS_ACCOUNTS,n.__super__.initialize.apply(this,arguments),this.depositResultPageParams={}},n.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getDepositCalculatorRouterOptions();case 1:return this.getDepositCreationRouterOptions();case 2:return this.getCompleteRouterOptions();default:return this.throwStepNotSupported(t)}},n.prototype.showFirstStep=function(){var t;return(t=new o((new o).fragment())).search(""),window.app.router.navigate(t.toString(),{trigger:!1,replace:!0}),this.depositDraft=this.depositDraft||new e,this.showStep(0)},n.prototype.getDepositCalculatorRouterOptions=function(){return[r,{model:this.depositDraft,done:(t=this,function(e){var n;return t.depositDraft.setFromDepositProduct(t.selectedDeposit=e),(n=new o((new o).fragment())).addSearch("confirm"),window.app.router.navigate(n.toString(),{trigger:!1}),t.showNextStep()})}];var t},n.prototype.getDepositCreationRouterOptions=function(){return[a,{model:this.depositDraft,deposit:this.selectedDeposit,done:(t=this,function(e,n,o){return e&&(t.depositDraft=e),t.depositResultPageParams={errorCode:n,serviceId:o},window.app.data.contracts.dashboard.resetLastSync(),t.showNextStep()})}];var t},n.prototype.getCompleteRouterOptions=function(){return[c,i.extend({},this.depositResultPageParams,{model:this.depositDraft})]},n}(u),l.DepositWizard.instance=function(){return window.app.wizards.deposit?window.app.wizards.deposit:(window.app.wizards.deposit=new l.DepositWizard,window.app.wizards.deposit.listenTo(window.app.router,"route",(function(t,e){if("createDeposit"!==t&&i.last(window.WB.currentMenuId.split("."))!==d.mainMenuIds.DEPOSITS)return delete window.app.wizards.deposit})))},l}.call(e,n,e,t))||(t.exports=r)}).call(this,n(379),n(11))},function(e,n,o){(function(i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(s=function(e){var n,s,c,l,d,p,h,f,m,y,_,g,v,w,b,k,B,C;return B=o(40),w=o(377),C=o(380),o(96),d=o(378),b=o(450),c=b.DepositsSettings,s=b.DepositProducts,l=o(401).INTEREST_OPTIONS_LABELS,g=o(1128).ReactSlider,h=o(557).ReactCheckbox,_=o(856).ReactSelect,k=o(537),y=k.ReactMoney,m=k.ReactEditableAmount,p=o(399),f=o(440),n=p.DOM,(v={}).DepositProduct=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.onClick=function(t){if(!i(t.target).hasClass("with-tooltip"))return this.props.onSelect()},o.prototype.getDetailBlock=function(t,e){var o;return o=e?{className:"deposit-product-detail with-tooltip","data-title":e}:{className:"deposit-product-detail"},n.div(o,t)},o.prototype.render=function(){var e,o;return e=this.props.model.getInterestRate(this.props.params.initialAmount,this.props.params.currency,this.props.params.period),o=this.props.settings.getDepositOutcome(this.props.model,this.props.params),n.div({className:"deposit-product "+(this.props.model.isHighPriority()?"high-priority":""),onClick:this.onClick.bind(this),ref:"details"},n.h3({className:"deposit-product-header"},this.props.model.get("name")),n.ul({className:"deposit-product-details"},this.props.model.isPersonalOffer()?n.li({className:"personal-offer"},this.getDetailBlock(t("Personal offer"))):void 0,n.li(null,this.getDetailBlock(t("Interest rate - %(interestRate)s%%",{interestRate:e}))),this.props.model.interestReinvestmentAvailable(this.props.params.currency,this.props.params.period)?n.li(null,this.getDetailBlock(t("Interest reinvestment"))):void 0,this.props.model.autoProlongationAllowed()?n.li(null,this.getDetailBlock(t("Auto-prolongation"))):void 0,this.props.model.withdrawalAllowed()?n.li(null,this.getDetailBlock(t("Withdrawal allowed"),this.props.model.get("withdrawal"))):void 0,this.props.model.earlyCloseAllowed()?n.li(null,this.getDetailBlock(t("Early close allowed"),this.props.model.get("earlyClose"))):void 0,this.props.model.topupAllowed(this.props.params.currency)?n.li(null,this.getDetailBlock(t("Top up allowed"),this.props.model.get("topupAmount.description"))):void 0),n.div({className:"deposit-product-outcome"},y({value:o,currency:this.props.params.currency})))},o.prototype.componentDidMount=function(){return i(this.refs.details).tooltip({items:".with-tooltip",content:function(){return i(this).data("title")},open:function(){return i(document.body).one("touchstart",(function(){return i(".ui-tooltip").remove()}))}})},o}(p.Component),v.currencySelectLabel=null,v.interestOptionsLabel=null,v.DepositParameters=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return a(o,e),o.prototype.onParameterChange=function(t,e){return this.props.onChange(t,e)},o.prototype.getAmountSlider=function(){var e,n,o,i;return e=this.props.collection.getDepositBoundaries(this.props.params.currency),o=(null!=(n=B.DEPOSIT_CALCULATOR)?n.INITIAL_AMOUNT_STEP:void 0)||w.greatestCommonDivisor(e.min,e.max),p.createElement(g,{className:"initial-amount",range:"min",value:this.props.params.initialAmount,getDisplayValue:(i=this,function(t){return p.createElement(m,{value:t,minValue:e.min,maxValue:e.max,currency:i.props.params.currency,onChange:i.onParameterChange.bind(i,"initialAmount")})}),minValue:e.min,maxValue:e.max,step:o,label:t("Amount"),onChange:this.onParameterChange.bind(this,"initialAmount")})},o.prototype.getPeriodSlider=function(){var e;return e=this.props.collection.getAvailablePeriods(this.props.params.currency),p.createElement(g,{className:"period",range:"min",value:this.props.params.period,getDisplayValue:function(t){return w.getReadableDuration(t)},items:e,label:t("Duration"),onChange:this.onParameterChange.bind(this,"period")})},o.prototype.getCurrencySelector=function(e){var o;return null==e&&(e={showLabel:!1}),o={className:"currency control-xs",value:this.props.params.currency,options:this.props.collection.getAvailableCurrencies().map((function(e){return{value:e,name:t(e)}})),onChange:this.onParameterChange.bind(this,"currency")},e.showLabel&&(o.label=t("Currency [label]")),n.div({className:"currency-selector"},p.createElement(_,o))},o.prototype.getInterestOptions=function(e){var o,i,r,s;return null==e&&(e={showLabel:!1}),r=!!this.props.params.interestReinvestment,"at_maturity"!==this.props.params.interestPayment&&(i=p.createElement(h,{checked:r,label:t("Interest reinvestment"),onChange:this.onParameterChange.bind(this,"interestReinvestment")})),o=this.props.collection.getInterestPaymentOptions(this.props.params.currency),r&&(o=o.filter((function(t){return"at_maturity"!==t}))),s={className:"interest-type control-s",value:this.props.params.interestPayment,options:o.map((function(t){return{value:t,name:l[t]}})),onChange:this.onParameterChange.bind(this,"interestPayment")},e.showLabel&&(s.label=t("Interest payment [label]")),n.div({className:"interest-options"},n.div({className:"interest-type-wrapper"},p.createElement(_,s)),i)},o.prototype.getTopupCheckbox=function(){return p.createElement(h,{checked:!!this.props.params.topupAllowed,label:t("Deposit top up"),onChange:this.onParameterChange.bind(this,"topupAllowed")})},o.prototype.render=function(){return n.div({className:"deposit-parameters"},n.div({className:"parameters-row primary"},this.getAmountSlider(),this.getPeriodSlider()),n.div({className:"parameters-row secondary"},this.getCurrencySelector(),this.getInterestOptions(),this.getTopupCheckbox()))},o}(p.Component),v.DepositCalculator=function(e){function o(){var t;o.__super__.constructor.apply(this,arguments),this.state=this.getCurrentState(),this.previousParams=this.state.params,this.scheduleUpdate=r.debounce((t=this,function(){var e;return(e=t.getCurrentState()).deposits.length&&(t.previousParams=e.params),t.setState(e)}),200)}return a(o,e),o.prototype.getCurrentState=function(){var t;return{params:t=this.props.model.get("deposit"),deposits:this.props.collection.getDeposits(t)}},o.prototype.onProductSelected=function(t){return this.props.proceed(t)},o.prototype.sanityCheck=function(){var t,e;return t=this.props.model.get("deposit.currency"),e=this.props.collection.getDepositsByCurrency(t)[0],this.props.model.set("deposit",{currency:t}),this.props.model.setDefaults(e)},o.prototype.onParameterChange=function(t,e){return this.props.model.set("deposit."+t,e),"currency"===t&&this.sanityCheck(),this.scheduleUpdate()},o.prototype.restorePreviousParams=function(t){return t.preventDefault(),this.props.model.set("deposit",this.previousParams),this.setState(this.getCurrentState())},o.prototype.getDepositsBlock=function(){var e,o;return e=this.state.deposits.length?this.state.deposits.map((o=this,function(t){return p.createElement(v.DepositProduct,{key:t.id,model:t,params:o.state.params,settings:o.props.settings,onSelect:o.onProductSelected.bind(o,t.id)})})):n.div({className:"empty-message"},n.h1(null,t("No suitable deposits found")),n.h4(null,n.span(null,t("Try to change deposit conditions."))," ",this.previousParams?n.a({href:"#",onClick:this.restorePreviousParams.bind(this)},t("Return to previous successful search.")):void 0)),n.div({className:"deposits-block"},e)},o.prototype.render=function(){return n.div(null,p.createElement(v.DepositParameters,{params:this.state.params,collection:this.props.collection,onChange:this.onParameterChange.bind(this)}),this.getDepositsBlock())},o}(p.Component),v.DepositCalculatorPage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="contracts/deposit-calculator-page",n.prototype.pageType=C.mainMenuIds.CARDS_ACCOUNTS,n.prototype.availableToManager=!0,n.prototype.requiredOptions=["model","done"],n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.collection=new s,this.depositsSettings=new c},n.prototype.getTitle=function(){return t("Deposit calculator")},n.prototype.fetchData=function(){return i.when(this.collection.fetch(),this.depositsSettings.fetch())},n.prototype.show=function(){return this.fetchData().done((e=this,function(){return e.render().done((function(){return e.collection.length?(e.model.has("deposit")||e.setDepositDefaults(),f.render(p.createElement(v.DepositCalculator,{model:e.model,collection:e.collection,settings:e.depositsSettings,proceed:e.proceed.bind(e)}),e.$(".block__deposit-calculator")[0])):window.app.showErrorPage({errorText:t("There is no deposit offers available now")})}))})).fail((function(){return window.app.showErrorPage()}));var e},n.prototype.proceed=function(t){return this.done(this.collection.get(t))},n.prototype.setDepositDefaults=function(){var t,e,n,o;return n=B.DEFAULT_CURRENCY,t=this.collection.getAvailableCurrencies(),e=u.call(t,n)>=0?n:t[0],this.model.set("deposit.currency",e),o=this.collection.getDepositsByCurrency(e)[0],this.model.setDefaults(o)},n}(d),v}.call(n,o,n,e))||(e.exports=s)}).call(this,o(14),o(11))},function(e,n,o){(function(i){var r,s={}.hasOwnProperty;void 0===(r=function(e){var n,r,a;return o(396),a=o(377),r=o(399),n=r.DOM,{ReactSlider:function(e){function o(){o.__super__.constructor.apply(this,arguments),this.state={value:this.props.value,inactive:this.props.inactive}}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.resolveValue=function(t){return this.props.items?this.props.items[t]:t},o.prototype.render=function(){var e;return e=this.state.inactive?t("n/a"):this.props.getDisplayValue?this.props.getDisplayValue(this.state.value):this.state.value,n.div({className:"react-slider "+(this.props.className||"")},this.props.label?n.div({className:"react-slider-label"},this.props.label):void 0,n.div({className:"react-slider-value"},e),n.div({className:"react-slider-control ui-slider",ref:"slider"}))},o.prototype.onChange=function(t){return t=this.resolveValue(t),this.props.onChange(t),this.setState({value:t})},o.prototype.enhance=function(){var t,e;return t={value:this.props.items?this.props.items.indexOf(this.state.value):this.state.value,slide:(e=this,function(t,n){return e.onChange(n.value)})},this.props.items?(t.min=0,t.max=this.props.items.length-1,t.step=1):(t.min=this.props.minValue,t.max=this.props.maxValue,t.step=this.props.step||a.greatestCommonDivisor(t.min,t.max)),this.props.range&&(t.range=this.props.range),i(this.refs.slider).slider(t)},o.prototype.componentDidMount=function(){if(!this.state.inactive)return this.enhance()},o.prototype.componentDidUpdate=function(){return this.state.inactive?i(this.refs.slider).slider("instance")?i(this.refs.slider).slider("destroy"):void 0:this.enhance()},o.prototype.componentWillReceiveProps=function(t){return this.setState({value:t.value,inactive:t.inactive})},o.prototype.componentWillUnmount=function(){if(!this.state.inactive)return i(this.refs.slider).slider("destroy")},o}(r.Component)}}.call(n,o,n,e))||(e.exports=r)}).call(this,o(14))},function(e,n,o){(function(i,r,s){var a,c={}.hasOwnProperty;void 0===(a=function(e){var n,a,u,l,d,p,h,f,m;return o(423),m=o(377),d=o(378),u=o(395).DepositFlowContracts,n=o(429).ContractSelectView,h=o(387).WbFormMixin,p=o(406).Constants.ViewToModel,a=o(450).Deposit,l=o(401).INTEREST_OPTIONS_LABELS,(f={}).DepositCreationPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.template="contracts/deposit-creation-page",o.prototype.requiredOptions=["model","deposit","done"],o.prototype.mixins=[h],o.prototype.modelBinderOptions=i.extend({},h.modelBinderOptions,{initialCopyDirection:p}),o.prototype.events={"change .custom-target":"onCustomTargetToggle","click .change-parameters":"returnToCalculator"},o.prototype.customTarget=!1,o.prototype.fields={requestor:"deposit.requestor.id",target:"deposit.target.id"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.initContractsCollections(),this.initForm()},o.prototype.initContractsCollections=function(){var t;return t=this.model.get("deposit.currency"),this.sourceContracts=new u(null,{currency:t}),this.targetContracts=new u(null,{currency:t})},o.prototype.createContractSelect=function(t,e,o,i){var s,a;return(s=new n({el:r(t),collection:o,inputName:e,required:!0,showAllCardsItem:!1,label:i})).on("ready",(a=this,function(){var t;return null!=(t=a.$form.data("validator"))&&t.resetForm(),a.bindModel()})),s.show()},o.prototype.onRender=function(){var e,n;return e=this.model.get("deposit.reinvestInterest")?t("Use another account for transfer of funds after the closing of the deposit"):t("Use another account for accrual of interest and transfer of funds after the closing of the deposit"),this.$(".custom-target").switchButton({on_label:e,off_label:""}),this.createContractSelect(this.$(".deposit-source"),"requestor",this.sourceContracts,t("Use the following account as a deposit source")).then((n=this,function(){return n.trigger("render.complete")})),!1},o.prototype.getBindings=function(){var t;return(t={})[this.fields.requestor]='[name="requestor"]',t[this.fields.target]=this.customTarget&&this.targetRendered?'[name="target"]':'[name="requestor"]',t},o.prototype.onCustomTargetToggle=function(t){var e,n;return n=this,e=function(){return n.customTarget&&!n.targetRendered?n.createContractSelect(n.$(".target-source"),"target",n.targetContracts).then((function(){return n.targetRendered=!0,n.bindModel()})):n.customTarget?void 0:(n.targetRendered=!1,n.$(".target-source").empty(),n.bindModel(),n.model.set(n.fields.target,n.model.get(n.fields.requestor)))},(this.customTarget=t.currentTarget.checked)?this.$(".target-source").slideDown({done:e}):this.$(".target-source").slideUp({done:e})},o.prototype.returnToCalculator=function(t){var e;return t.preventDefault(),(e=new s((new s).fragment())).search(""),window.app.router.navigate(e.toString(),{trigger:!0,replace:!1})},o.prototype.onSubmitSuccess=function(){return this.done()},o.prototype.onSubmitError=function(t){var e,n,o,i;return n=(i=m.parseResponseSafe(t)).deposit,402===t.status&&(null!=n?n.id:void 0)?(this.closeAddAuthDialog(),e=new a(n),this.done(e,null!=(o=i._error)?o.code:void 0,i.serviceCode),!0):h.onSubmitError.apply(this,arguments)},o.prototype.getFieldsContext=function(){var e,n;return n=this.model.viewContext().deposit,e=function(e){return e?t("Yes"):t("No")},[{name:t("Interest rate"),value:n.interestRate+"%"},{name:t("Period"),value:m.getReadableDuration(n.period)},{name:t("Auto-prolongation"),value:e(n.autoProlongation)},{name:t("Early close"),value:e(n.earlyClose)},{name:t("Top-up allowed"),value:e(n.topupAllowed)},{name:t("Interest payments"),value:l[n.interestPayment]},{name:t("Interest reinvestment"),value:e(this.model.get("deposit.reinvestInterest"))},{name:t("Deposit amount"),amount:{value:n.initialAmount,currency:n.currency},isAmountField:!0}]},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),{fields:this.getFieldsContext(),deposit:this.deposit.viewContext()})},o}(d),f}.call(n,o,n,e))||(e.exports=a)}).call(this,o(11),o(14),o(379))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r;return e=n(378),(r={}).DepositResultPage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="contracts/deposit-result-page",e.prototype.requiredOptions=["model"],e.prototype.getTopupLink=function(){var t;return this.options.serviceId?((t=new o("payment/"+this.options.serviceId)).addQuery("DESTINATION.id",this.model.id),"#"+t.valueOf()):""},e.prototype.getDetailsLink=function(){return"#"+new o("contracts/"+this.model.id).valueOf()},e.prototype.isNotCredited=function(){return!!this.options.errorCode},e.prototype.context=function(){return i.extend(e.__super__.context.apply(this,arguments),{deposit:this.model.viewContext(),isNotCredited:this.isNotCredited(),detailsLink:this.getDetailsLink(),topupLink:this.getTopupLink()})},e}(e),r}.call(e,n,e,t))||(t.exports=r)}).call(this,n(379),n(11))},function(t,e,n){var o,i,r,s,a={}.hasOwnProperty;r=n(416).WbWizard,o=n(1132).CertificateFormPage,i=n(1133).CertificateSuccessPage,s=n(380),e.CertificateWizard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.initialize=function(){return this.menuSectionId=s.mainMenuIds.CARDS_ACCOUNTS,n.__super__.initialize.apply(this,arguments)},n.prototype.getRouterOptionsForStep=function(t){switch(t){case 0:return this.getCertificateFormRouterOptions();case 1:return this.getCertificateSuccessRouterOptions();default:return this.throwStepNotSupported(t)}},n.prototype.getCertificateFormRouterOptions=function(){return[o,{onSubmitSuccess:(t=this,function(e){return t.certificateId=e.id,t.showNextStep()})}];var t},n.prototype.getCertificateSuccessRouterOptions=function(){return[i,{certificateId:this.certificateId}]},n.instance=function(){return new e.CertificateWizard},n}(r)},function(e,n,o){(function(e){var i,r,s,a,c,u,l,d,p,h,f,m=function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},y={}.hasOwnProperty;p=o(377),u=o(378),l=o(374).TemplateView,h=o(474),s=h.CertificateTypes,i=h.Certificate,r=h.CertificateFormMetaDescription,a=o(785).CollectionSelectView,f=o(398),c=f.Field,f.FormMeta,o(40),d=o(394).WbGenericFormMixin,n.CertificateFormView=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return m(o,n),o.prototype.template="certificates/certificate-form",o.prototype.mixins=[d],o.prototype.requiredOptions=["model","onSubmitSuccess"],o.prototype.show=function(){var t,e;return(t=new r({type:this.model.get("type")})).fetch().then((e=this,function(){return e.formMeta=t.toFormMeta(),o.__super__.show.apply(e,arguments)}))},o.prototype.hideFormLoadingIndicator=function(){return window.app.hideLoadingIndicator()},o.prototype.showFormLoadingIndicator=function(){return window.app.showLoadingIndicator()},o.prototype.onSubmitError=function(e){var n,o;return"INSUFFICIENT_FUNDS"===(null!=(o=p.parseResponseSafe(e))&&null!=(n=o._error)?n.code:void 0)?(e.errorHandled=!0,window.app.showErrorMessage(t("Insufficient funds")),!0):d.onSubmitError.apply(this,arguments)},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.initGenericForm()},o.prototype.context=function(){return e.extend(o.__super__.context.apply(this,arguments),this.formMeta.viewContext())},o}(l),n.CertificateFormPage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.template="certificates/certificate-form-page",e.prototype.requiredOptions=["onSubmitSuccess"],e.prototype.events={"change #type-select":"handleTypeChange"},e.prototype.handleTypeChange=function(t){var e;return null!=(e=this.certificateForm)&&e.clear(),this.certificateForm=new n.CertificateFormView({onSubmitSuccess:this.onSubmitSuccess,el:this.$(".certificates-form-wrapper"),model:new i({type:t.target.value})}),this.certificateForm.show()},e.prototype.onRender=function(){return this.certificateTypeSelect=new a({name:"type",label:"type",noDefaultOption:!0,collection:new s,model:new c,el:this.$(".certificates-types-wrapper")}),this.certificateTypeSelect.show(),e.__super__.onRender.apply(this,arguments)},e}(u)}).call(this,o(11))},function(t,e,n){var o,i,r,s={}.hasOwnProperty;r=n(378),i=n(474).Certificate,o=n(797).ApplicationCertificateDetailsDialog,e.CertificateSuccessPage=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="certificates/certificate-success-page",e.prototype.requiredOptions=["certificateId"],e.prototype.events={"click [data-js-details]":"handleDetailsBtnClick"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.model=new i({id:this.certificateId})},e.prototype.show=function(){return this.model.fetch().then((t=this,function(){return e.__super__.show.apply(t,arguments)}));var t},e.prototype.handleDetailsBtnClick=function(t){return t.preventDefault(),new o({applicationId:this.model.get("id")}).show()},e}(r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(489),r=n(379),s=n(11),a=n(135),c=n(400),u=n(857),l=n(1135),d=n(1137),p=n(1139),h=n(1141),f=n(1142),m=n(1143),y=n(416).WbWizard,_=n(380),g=n(377),v=n(401).FLOW_TYPES,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.paymentCartAvailableItems=new i.PaymentCartAvailableItems,e.selectedItems=[],e.PAYMENT_CART_INDEX_PAGE=0,e.PAYMENT_CART_PREVIEW_PAGE=1,e.PAYMENT_CART_PAYMENT_COMPLETE_PAGE=2,e.PAYMENT_CART_EDIT_PAGE=10,e.modeToStepMap={"":e.PAYMENT_CART_INDEX_PAGE,preview:e.PAYMENT_CART_PREVIEW_PAGE},e}return o.__extends(e,t),e.prototype.initialize=function(){this.menuSectionId=_.mainMenuIds.PAYMENTS_TRANSFERS,t.prototype.initialize.apply(this,o.__spread(Array.from(arguments)))},e.prototype.setModeToUrl=function(t){var e=new r((new r).fragment()),n=t?{mode:t}:{};e.query(n),window.app.router.navigate(e.toString(),{trigger:!1})},e.prototype.getRouterOptionsForStep=function(t){switch(t){case this.PAYMENT_CART_INDEX_PAGE:return this.getPaymentCartIndexRouterOptions();case this.PAYMENT_CART_PREVIEW_PAGE:return this.getPaymentCartPreviewRouterOptions();case this.PAYMENT_CART_EDIT_PAGE:return this.getPaymentCartEditRouterOptions();case this.PAYMENT_CART_PAYMENT_COMPLETE_PAGE:return this.getPaymentCartCompleteRouterOptions();default:return void this.throwStepNotSupported(t)}},e.prototype.getPaymentCartIndexRouterOptions=function(){var t=this;return[l.default,{paymentCartAvailableItems:this.paymentCartAvailableItems,selectedItems:this.selectedItems,onSave:function(){var e=this.paymentCartDraft.get("id");t.selectedItems=this.paymentCartDraft.getItemsIds(),t.paymentCart=new i.PaymentCart({id:e}),t.paymentCartMeta=new i.PaymentCartMeta({paymentCartId:e}),t.setModeToUrl("preview"),t.showNextStep()}}]},e.prototype.getPaymentCartPreviewRouterOptions=function(){var t=this;return[d.default,{paymentCartAvailableItems:t.paymentCartAvailableItems,model:t.paymentCart,meta:t.paymentCartMeta,onSelect:function(e){t.editedItemId=e,t.paymentCart=this.model,t.paymentCartMeta=this.meta,t.showStep(t.PAYMENT_CART_EDIT_PAGE)},onRemove:function(e){t.selectedItems=s.without(t.selectedItems,e)},onSave:function(){t.paymentCart=this.model,t.paymentCartMeta=this.meta,t.paymentCartAvailableItems=this.paymentCartAvailableItems,t.paymentCartExecution=new i.PaymentCartExecution({confirmation:t.paymentCart.prepared.get("confirmation"),executionId:t.paymentCart.prepared.get("executionId")}),t.showPaymentCartConfirmationDialog()}}]},e.prototype.showPaymentCartConfirmationDialog=function(){var t=this;new(t.paymentCartExecution.get("confirmation")?p.ProtectedPaymentCartConfirmationDialog:p.SimplePaymentCartConfirmationDialog)({model:t.paymentCartExecution,payment:t.paymentCart.prepared,formMeta:t.paymentCartMeta,paymentCartAvailableItems:t.paymentCartAvailableItems,disabledSubmit:t.paymentCart.getErrorsInformation().isAllItemsWithErrors,onSuccess:function(){t.setModeToUrl("complete"),t.showNextStep()},onError:function(t){t.errorHandled=!0;var e=g.parseResponseSafe(t),n=g.get(e,"respText")||a.t("Unrecognized error. Please try again later.");window.app.showErrorDialog(n)}}).show()},e.prototype.getPaymentCartCompleteRouterOptions=function(){return[h.default,{paymentCartAvailableItems:this.paymentCartAvailableItems,paymentCartExecution:this.paymentCartExecution}]},e.prototype.getPaymentCartEditRouterOptions=function(){var t,e,n=this,i=n.paymentCartAvailableItems.getTypeByItemId(n.editedItemId),s=n.paymentCartMeta.getItemMetaModel(n.editedItemId,i),a=n.paymentCart.getItemModel(n.editedItemId,i,s);a instanceof c.IntraBankTransfer?(t=u.default,e={pageMode:"paymentCart"}):t="invoice"===i?f.default:m.default;var l=n.paymentCartAvailableItems.get(n.editedItemId).get("name"),d=new r((new r).fragment()),p=s.queryForRestoreForm||{};return d.query(o.__assign(o.__assign({},p),{mode:"edit"})),window.app.router.navigate(d.toString(),{trigger:!1}),a.saveValue(),n.modelToEdit=a,[t,{pageTitle:l,editedItemId:n.editedItemId,paymentCart:n.paymentCart,formMeta:s,model:a,params:e,onSave:function(){a.destroySavedValue(),delete n.modelToEdit,window.app.router.goBack()}}]},e.instance=function(t){void 0===t&&(t={mode:""});var n=window.app,o=n.wizards,i=n.router,r=t.mode,s=v.PAYMENT_CART;o[s]||(r="",o[s]=new e,i.on("route",(function t(){i.currentPage.flowType!==s&&(i.off("route",t),delete o[s])})));var a=o[s],c=a.modeToStepMap[r]||0;return a.modelToEdit&&(a.modelToEdit.revert(!0),a.modelToEdit.destroySavedValue(),delete a.modelToEdit),a.setModeToUrl(r),a.currentStep=c,a},e}(y);e.default=w},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(489),s=n(135),a=n(11),c=n(1136),u=n(378),l=n(401).FLOW_TYPES,d=n(393).TEMPLATE_TYPES,p=n(377),h=n(40),f=n(391),m=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.paymentCartDraft=new r.PaymentCartDraft,t.flowType=l.PAYMENT_CART,t.groupNames={template:s.t("Templates"),invoice:s.t("Invoices")},t}return o.__extends(n,e),n.prototype.show=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.showLoadingIndicator(),[4,Promise.all([window.app.data.paymentsMenu.fetchIfEmpty(),this.paymentCartAvailableItems.fetchIfEmpty()])];case 1:return t.sent(),[2,e.prototype.show.call(this)]}}))}))},n.prototype.onRender=function(){return this.setupIcons(),this.setupGroupHeaders(),this.updateButtonMessage(),e.prototype.onRender.apply(this,o.__spread(Array.from(arguments)))},n.prototype.setupIcons=function(){var e=this;this.$("[data-js-payment-item-icon]").each((function(n,o){var i=t(o),r=i.data("id"),s=e.paymentCartAvailableItems.get(r),a=f.getTemplateItemIcons({templateType:d.COMMON,serviceId:s.get("serviceCode"),isInvoice:"invoice"===s.get("type"),paymentType:s.get("paymentType")});p.getExistingImage(a).then((function(t){i.css("background-image",'url("'+t+'")')}))}))},n.prototype.setupGroupHeaders=function(){var e=this;this.$(".payment-cart-group").each((function(n,o){return e.setupGroupHeader(t(o))}))},n.prototype.setupGroupHeader=function(t){var e=t.find(".payment-cart-item"),n=e.filter(":not(.payment-cart-item--disabled)").length,o=e.filter(".payment-cart-item--disabled").length,i=e.filter(".payment-cart-item--checked").length,r=t.find(".payment-cart-group__header"),s=i>0&&(n>i||o>0);r.toggleClass("payment-cart-group__header--disabled",0===n),r.toggleClass("payment-cart-group__header--checked",i>0),r.toggleClass("payment-cart-group__header--indeterminate",s)},n.prototype.showOverflowMessage=function(){var t=s.tn("Only %(num)s payment can be paid at a time","Only %(num)s payments can be paid at a time",h.PAYMENT_CART_MAX_SIZE);window.app.clearMessages(),window.app.showInformationMessage(t)},n.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},n.prototype.handleItemClick=function(t){var e=this.$(t.currentTarget);e.hasClass("payment-cart-item--checked")||this.getSelectedCheckboxes().length!==h.PAYMENT_CART_MAX_SIZE?(e.toggleClass("payment-cart-item--checked"),this.setupGroupHeader(e.closest(".payment-cart-group")),this.updateButtonMessage()):this.showOverflowMessage()},n.prototype.handleDisabledItemClick=function(t){t.preventDefault(),window.app.clearMessages(),window.app.showInformationMessage(s.t("Payments in foreign currency cannot be paid through the cart"))},n.prototype.handleGroupCheckboxChange=function(e){var n=t(e.currentTarget),o=n.closest(".payment-cart-group"),i=o.find(".payment-cart-item"),r=!n.hasClass("payment-cart-group__header--checked");if(r){var s=i.filter(":not(.payment-cart-item--disabled):not(.payment-cart-item--checked)").length;if(this.getSelectedCheckboxes().length+s>h.PAYMENT_CART_MAX_SIZE)return void this.showOverflowMessage()}n.toggleClass("payment-cart-group__header--checked",r),i.removeClass("payment-cart-item--checked"),i.filter(":not(.payment-cart-item--disabled)").toggleClass("payment-cart-item--checked",r),this.setupGroupHeader(o),this.updateButtonMessage()},n.prototype.getSelectedCheckboxes=function(){return this.$(".payment-cart-item.payment-cart-item--checked")},n.prototype.updateButtonMessage=function(){var t=this.$(".payment-cart-item.payment-cart-item--checked").length,e=s.t("Go to payment (%(count)s)",{count:t});this.$("[data-js-payment-cart-create-button]").text(e)},n.prototype.handleCreateClick=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(!(e=this.getSelectedCheckboxes().toArray().map((function(e){return t(e).data("id")}))).length)return this.showPaymentCartEmptyPopupView(),[2];this.paymentCartDraft.set("items",e),this.showLoadingIndicator(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.paymentCartDraft.save()];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),this.render(),n;case 4:return 0===(i=this.paymentCartDraft.getBrokenItems()).length?(this.onSave(),[2]):(this.$(".payment-cart-item:not(.payment-cart-item--disabled)").each((function(){var e=t(this),n=e.data("id");i.includes(n)&&e.addClass("payment-cart-item--disabled").removeClass("payment-cart-item--checked")})),this.setupGroupHeaders(),this.updateButtonMessage(),window.app.clearMessages(),window.app.showInformationMessage(s.t("Some of the payments added to the cart cannot be made")),this.paymentCartDraft.clear(),[2])}}))}))},n.prototype.showPaymentCartEmptyPopupView=function(){(new c.default).show()},n.prototype.context=function(){var t=this,n=this.paymentCartAvailableItems.getViewContextAsGroups();return a.each(n,(function(e){e.groupName=t.groupNames[e.type]||"",e.items=a.map(e.items,(function(e){return t.selectedItems.includes(e.id)&&!e.disabled&&(e.selected=!0),e})),e.disabled=a.every(e.items,(function(t){return t.disabled}))})),o.__assign(o.__assign({},e.prototype.context.call(this)),{groups:n,countSelectedItems:this.selectedItems.length})},o.__decorate([i.on("click .payment-cart__header-back")],n.prototype,"handleBackClick",null),o.__decorate([i.on("click .payment-cart-item:not(.payment-cart-item--disabled)")],n.prototype,"handleItemClick",null),o.__decorate([i.on("click .payment-cart-item.payment-cart-item--disabled")],n.prototype,"handleDisabledItemClick",null),o.__decorate([i.on("click .payment-cart-group__header:not(.payment-cart-group__header--disabled)")],n.prototype,"handleGroupCheckboxChange",null),o.__decorate([i.on("click [data-js-payment-cart-create-button]")],n.prototype,"handleCreateClick",null),n=o.__decorate([i.template("payments/cart/index-page"),i.requiredOptions(["onSave","paymentCartAvailableItems","selectedItems"])],n)}(u);e.default=m}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"payment-cart-empty-popup"},enumerable:!0,configurable:!0}),e=o.__decorate([i.template("payments/cart/empty-popup")],e)}(n(386));e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(489),s=n(379),a=n(135),c=n(1138),u=n(398),l=n(394).WbGenericFormMixin,d=n(411).WbServiceMethodsMixin,p=n(378),h=n(401).FLOW_TYPES,f=n(377),m=n(395).Contracts,y=n(40),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flowType=h.PAYMENT_CART,e.errorMessages=o.__assign(o.__assign({},l._errorMessages),r.BasePaymentCart.errorMessages),e.onChangeRemitter=function(t,n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.model.updateRemitterOnItems(n),this.model.trackSavedValue(),[4,this.saveModel()];case 1:return t.sent(),[4,this.meta.fetch()];case 2:return t.sent(),[4,this.renderList()];case 3:return t.sent(),this.updateButtonMessage(),[2]}}))}))},e}return o.__extends(e,t),e.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},e.prototype.submit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:if(this.model.getErrorsInformation().hasErrors)return this.processing=!1,[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.balanceEnoughConfirmation()];case 2:return n.sent(),[2,l.submit.apply(this,t)];case 3:return(e=n.sent())&&console.warn(e),this.processing=!1,[3,4];case 4:return[2]}}))}))},e.prototype.getAmount=function(){return this.model.getAmount()},e.prototype.submitAction=function(){return this.model.preparePayment()},e.prototype.onSubmitSuccess=function(){this.onSave()},e.prototype.getFormMeta=function(){var t=this.meta.get("remitter.query"),e=new m(null,{urlQuery:"?"+t}),n="/"+new s(e.url()).relativeTo(y.API_URL+"/").toString();return new u.FormMeta({fields:[{id:"remitter",name:a.t("Source"),role:"source",dataSource:{type:"contracts",url:n,allowEntry:!1},visible:!0,editable:!0,optional:!1}]})},e.prototype.show=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this.model.fetchIfEmpty(),this.meta.fetchIfEmpty(),this.paymentCartAvailableItems.fetchIfEmpty()])];case 1:return n.sent(),this.meta.complementItemsWithoutFields(this.model),this.formMeta=this.getFormMeta(),[2,t.prototype.show.apply(this,o.__spread(e))]}}))}))},e.prototype.saveModel=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return(t=this.model.save()).fail((function(t){e.model.revert(!0);var n=f.parseResponseSafe(t);"PAYMENT_CART_WITHOUT_ITEMS"===f.get(n,"_error.code")&&(t.errorHandled=!0,window.app.clearMessages(),window.app.showInformationMessage(a.t("Payment Card should contain at least one element")))})),[4,t];case 1:return n.sent(),[2]}}))}))},e.prototype.updateButtonMessage=function(){var t=a.t("Make Payment (%(count)s)",{count:this.model.get("items").length});this.$("[data-js-make-payment-button]").text(t)},e.prototype.renderList=function(){var t=this,e=new c.default({model:this.model,meta:this.meta,paymentCartAvailableItems:this.paymentCartAvailableItems,onRemove:function(e){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.model.trackSavedValue(),this.model.removeItem(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.saveModel()];case 2:return n.sent(),this.onRemove(e),[3,4];case 3:return t=n.sent(),console.debug(t),[3,4];case 4:return[4,this.meta.fetch()];case 5:return n.sent(),[4,this.renderList()];case 6:return n.sent(),this.updateButtonMessage(),[2]}}))}))},onSelect:function(e){t.model.off("change:remitter.id",t.onChangeRemitter),t.onSelect(e)}});e.once("show",(function(){t.listView&&t.listView.clear(),t.listView=e,t.$("[data-js-payment-cart-list]").append(e.$el)})),e.show()},e.prototype.onRender=function(){return t.prototype.onRender.apply(this,o.__spread(Array.from(arguments))),this.initGenericForm(),this.renderList(),this.updateButtonMessage(),this.model.off("change:remitter.id",this.onChangeRemitter),this.model.on("change:remitter.id",this.onChangeRemitter),!1},e.prototype.context=function(){return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(Array.from(arguments)))),this.formMeta.viewContext())},o.__decorate([i.on("click .payment-cart__header-back")],e.prototype,"handleBackClick",null),e=o.__decorate([i.template("payments/cart/preview-page"),i.mixins([l,d]),i.requiredOptions(["paymentCartAvailableItems","model","meta","onSelect","onRemove","onSave"])],e)}(p);e.default=_},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(374),s=n(135),a=n(11),c=n(377),u=n(415).Checkbox,l=n(391),d=n(393).TEMPLATE_TYPES,p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.show=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.meta.fetchCatalogs(this.model,this.paymentCartAvailableItems)];case 1:return t.sent(),[2,e.prototype.show.call(this)]}}))}))},n.prototype.handlerRemoveItemClick=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){return t.preventDefault(),t.stopPropagation(),e=this.$(t.currentTarget).data("id"),this.onRemove(e),[2]}))}))},n.prototype.handleEditItemClick=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(o){return e.preventDefault(),n=t(e.currentTarget).data("id"),this.onSelect(n),[2]}))}))},n.prototype.setupIcons=function(){var e=this;this.$("[data-js-payment-item-icon]").each((function(n,o){var i=t(o),r=i.data("id"),s=e.paymentCartAvailableItems.get(r),a=l.getTemplateItemIcons({templateType:d.COMMON,serviceId:s.get("serviceCode"),isInvoice:"invoice"===s.get("type"),paymentType:s.get("paymentType")});c.getExistingImage(a).then((function(t){i.css("background-image",'url("'+t+'")')}))}))},n.prototype.onRender=function(){return this.ensureLicense(),this.setupIcons(),e.prototype.onRender.call(this)},n.prototype.ensureLicense=function(){var t=this;this.meta.hasLicenses()&&(this.licenseCheckbox=new u({el:this.$("[data-js-license]"),name:"license",className:"licenseAgreement",label:s.t("Accept all payment terms"),checked:this.meta.allLicensesAccepted(),onChange:function(e){t.meta.markAllLicenses(e)}}),this.licenseCheckbox.show())},n.prototype.context=function(){var t=this,n=a.map(this.model.viewContext().items,(function(e){var n=t.paymentCartAvailableItems.get(e.id),i=t.meta.getItemMetaModel(e.id,n.get("type")),r=t.model.getItemModel(e.id,n.get("type"),i).getAmount();r.value=r.value||0;var s=c.get(e,"response._error.code"),a=!(t.model.getReasonOfBlocking(e.id)||["CANNOT_PAY_ITEM_FROM_PAYMENT_CART_REMITTER","RESOURCE_LOCKED","HANDBOOK_LOCKED"].includes(s));return o.__assign(o.__assign(o.__assign({},e),n.pick("type","name","subscriptionName","serviceCode","disabled")),{amount:r,isEdited:a})}));return o.__assign(o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(Array.from(arguments)))),this.model.getErrorsInformation()),{paymentCartItems:n,totalAmount:this.model.get("amount"),hasLicenses:this.meta.hasLicenses(),allLicensesAccepted:this.meta.allLicensesAccepted()})},o.__decorate([i.on("click [data-js-remove-item]")],n.prototype,"handlerRemoveItemClick",null),o.__decorate([i.on("click [data-js-edit-item]")],n.prototype,"handleEditItemClick",null),n=o.__decorate([i.requiredOptions(["model","meta","paymentCartAvailableItems","onSelect","onRemove"]),i.template("payments/cart/payment-list")],n)}(r.TemplateView);e.default=p}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11),r=n(1140),s=n(135),a=n(424),c=a.ProtectedPaymentConfirmationDialog,u=a.SimplePaymentConfirmationDialog;function l(t){return{paymentDetailsClass:r.default,onPaymentAbort:function(){},preinitialize:function(){this.id="payment-cart-confirmation-dialog",this.requiredOptions=o.__spread(this.requiredOptions,["paymentCartAvailableItems"])},show:function(){var e=this;t.prototype.show.apply(this,arguments).then((function(){e.options.disabledSubmit&&e.deactivateButtons()}))},dialogOptions:function(){var e=t.prototype.dialogOptions.apply(this,arguments);return e.classes=e.classes||{},e.classes["ui-dialog"]=e.classes["ui-dialog"]||"",e.classes["ui-dialog"]+=" payment-confirmation-dialog payment-cart-confirmation-dialog",e},getPaymentDetailsOptions:function(){return o.__assign(o.__assign({},t.prototype.getPaymentDetailsOptions.apply(this,arguments)),{paymentCart:this.payment,paymentCartMeta:this.formMeta,paymentCartAvailableItems:this.paymentCartAvailableItems})}}}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.proceedButtonOptions=function(){var t=this,e=this.payment.getErrorsInformation().isAllItemsWithErrors;return{text:s.t("Make payment"),class:"wb-button proceed",disabled:e,click:function(n){if(!e&&!t.processing)return t.$form.submit()}}},e}(u);e.SimplePaymentCartConfirmationDialog=d,i.extend(d.prototype,l(u));var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(c);e.ProtectedPaymentCartConfirmationDialog=p,i.extend(p.prototype,l(c))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(374),s=n(400),a=n(11),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.setupAccordions=function(){this.$(".accordion").accordion({collapsible:!0,heightStyle:"content",active:!1})},e.prototype.onRender=function(){return t.prototype.onRender.call(this),this.setupAccordions(),!1},e.prototype.context=function(){var e=this,n=this.paymentCart.viewContext();n.items=a.map(n.items,(function(t){var n=e.paymentCartAvailableItems.get(t.id),i=e.paymentCartMeta.getItemMetaModel(t.id,n.get("type")),r=e.paymentCart.getItemModel(t.id,n.get("type"),i),c="invoice"===n.get("type")||r instanceof s.IntraBankTransfer?r.viewContextForConfirmation(i):r.viewContext({service:i});return o.__assign(o.__assign({},c),{name:n.get("name"),amount:a.isFunction(r.getAmount)&&r.getAmount(),errorMessage:t.errorMessage})}));var i=this.paymentCart.getErrorsInformation();return i.isAllItemsWithErrors&&(delete n.amount,delete n.fee,delete n.total),o.__assign(o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(Array.from(arguments)))),i),n)},e=o.__decorate([i.template("payments/cart/confirmation-details"),i.requiredOptions(["paymentCart","paymentCartMeta","paymentCartAvailableItems"])],e)}(r.TemplateView);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(11),s=n(378),a=n(377),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.context=function(){var e=this,n=[];return r.each(this.paymentCartExecution.viewContext().items,(function(t){var o=e.paymentCartAvailableItems.get(t.id);n.push({name:o.get("name"),errorMessage:t.errorMessage,total:a.get(t,"payment.total")})})),o.__assign(o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(Array.from(arguments)))),this.paymentCartExecution.getErrorsInformation()),{paymentCartItems:n,historyMenuLink:"#menu/"+window.app.data.menu.getPath("CP_HISTORY"),paymentsMenuLink:"#menu/"+window.app.data.menu.getPath("PAYMENTS_TRANSFERS")})},e=o.__decorate([i.template("payments/cart/complete-page"),i.requiredOptions(["paymentCartExecution","paymentCartAvailableItems"])],e)}(s);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(379),s=n(394),a=n(561),c=n(866).InvoicePaymentPage,u=n(401).FLOW_TYPES,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flowType=u.PAYMENT_CART,e.submitAction=a.default.submitAction,e.onSubmitError=a.default.onSubmitError,e.balanceEnoughConfirmation=a.default.balanceEnoughConfirmation,e}return o.__extends(e,t),e.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},e.prototype.updateUrl=function(t){s.WbGenericFormMixin.updateUrl.apply(this,t)},e.prototype.onSubmitSuccess=function(){this.updateUrl(this.formMeta.getUrlParams()),this.formMeta.queryForRestoreForm=r.parseQuery(new r((new r).fragment()).search()),this.onSave()},e.prototype.context=function(){return o.__assign(o.__assign({},t.prototype.context.call(this)),{pageTitle:this.pageTitle})},o.__decorate([i.on("click .payment-cart__header-back")],e.prototype,"handleBackClick",null),e=o.__decorate([i.template("payments/cart/template-edit-page"),i.requiredOptions(["editedItemId","paymentCart","formMeta","model","onSave","pageTitle"])],e)}(c);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(561),s=n(401).FLOW_TYPES,a=n(394).WbGenericFormMixin,c=n(411).WbServiceMethodsMixin,u=n(378),l=n(415).Checkbox,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flowType=s.PAYMENT_CART,e.submitAction=r.default.submitAction,e.onSubmitError=r.default.onSubmitError,e}return o.__extends(e,t),e.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},e.prototype.onSubmitSuccess=function(){this.onSave()},e.prototype.onRender=function(){return this.initGenericForm(),this.ensureLicense(),t.prototype.onRender.apply(this,o.__spread(Array.from(arguments)))},e.prototype.ensureLicense=function(){var t=this,e=this.formMeta.get("license");e&&(this.licenseCheckbox=new l({el:this.$("[data-js-license]"),name:"license",className:"licenseAgreement",label:e,checked:this.formMeta.isLicenseAccepted,onChange:function(e){t.formMeta.isLicenseAccepted=e}}),this.licenseCheckbox.show())},e.prototype.handbookLockedHandler=function(){return this.paymentCart.setReasonOfBlocking(this.editedItemId,"HANDBOOK_LOCKED"),a.handbookLockedHandler.apply(this,arguments)},e.prototype.context=function(){return o.__assign(o.__assign({},t.prototype.context.call(this)),{license:this.formMeta.get("license"),pageTitle:this.pageTitle})},o.__decorate([i.on("click .payment-cart__header-back")],e.prototype,"handleBackClick",null),e=o.__decorate([i.template("payments/cart/template-edit-page"),i.mixins([a,c]),i.requiredOptions(["editedItemId","paymentCart","formMeta","model","onSave","pageTitle"])],e)}(u);e.default=d},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(40),s=n(381),a=n(490),c=n(1145),u=n(135),l=n(1146),d=n(417).HistoryItem,p=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.operationInstalment=new a.default({id:t.options.id}),t}return o.__extends(n,e),n.prototype.handleTabClick=function(e){var n=t(e.currentTarget),o=n.index();this.$(".tabs__title").removeClass("title-active"),n.addClass("title-active"),this.showTab(o)},n.prototype.handleClickHistory=function(t){t.preventDefault(),this.showOperationHistory()},n.prototype.handleEarlyRepayment=function(t){var e=function(e){t.preventDefault(),new l.default({title:u.t("Early repayment"),message:e}).show()};this.contract.get("card.isCardholderAdditional")?e(u.t("early repayment can only be done by the owner")):this.operationInstalment.get("earlyRepayment")&&e(u.t("The application for early repayment dated %(date)s has already been accepted, wait for the funds to be debited.",{date:this.operationInstalment.get("earlyRepayment.date")}))},n.prototype.showOperationHistory=function(){new c.default({history:this.historyItem.viewContext(),contract:this.contract.viewContext()}).show()},n.prototype.showTab=function(t){this.$(".tabs-content__body").hide(),this.$(".tabs-content__body").eq(t).show()},n.prototype.show=function(t){var n,i,r,s;return o.__awaiter(this,void 0,void 0,(function(){var a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.all([window.app.data.contracts.dashboard.fetchIfEmpty(null===(r=null===(i=null===(n=null===window||void 0===window?void 0:window.OW)||void 0===n?void 0:n.contractsConfig)||void 0===i?void 0:i.wbCardsAccountsPage)||void 0===r?void 0:r.sections),this.operationInstalment.fetchIfEmpty()])];case 1:return o.sent(),this.contract=window.app.data.contracts.dashboard.get(this.operationInstalment.get("contractId")),a=this.operationInstalment.get("transaction"),this.historyItem=new d({id:a.id}),[4,null===(s=this.historyItem)||void 0===s?void 0:s.fetchIfEmpty()];case 2:return o.sent(),[4,e.prototype.show.call(this,t)];case 3:return o.sent(),this.showTab(0),[2]}}))}))},n.prototype.context=function(){for(var t,n,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(i))),{title:this.options.title,contract:this.contract.viewContext(),instalment:null===(t=this.operationInstalment)||void 0===t?void 0:t.viewContext(),history:null===(n=this.operationInstalment)||void 0===n?void 0:n.get("transaction"),historyItem:this.historyItem,imagePath:r.IMAGE_PATH,instalmentIsActive:this.operationInstalment.isActive()})},o.__decorate([s.on("click .tabs__title")],n.prototype,"handleTabClick",null),o.__decorate([s.on("click .instalment-operation__link")],n.prototype,"handleClickHistory",null),o.__decorate([s.on("click [data-js-early-repayment-btn]")],n.prototype,"handleEarlyRepayment",null),n=o.__decorate([s.template("instalment/details-page")],n)}(i);e.default=p}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogCssClass="dialog-without-title dialog-centered-buttons instalment-popup",e}return o.__extends(e,t),e.prototype.preinitialize=function(){this.id="operation-instalment-history-popup",t.prototype.preinitialize.call(this)},e.prototype.dialogOptions=function(){return{title:this.options.history.description}},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{history:this.options.history,contract:this.options.contract,imagePath:r.IMAGE_PATH})},e=o.__decorate([i.template("instalment/operation-history-popup"),i.requiredOptions(["history","contract"])],e)}(n(386));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(386),r=n(381),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"dialog-message"},enumerable:!0,configurable:!0}),e.prototype.dialogOptions=function(){return{title:this.options.title}},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{message:this.options.message})},e=o.__decorate([r.template("instalment/dialog-message"),r.requiredOptions(["title","message"])],e)}(i);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(416),r=n(1148),s=n(1154),a=n(380),c=n(401),u=function(t){function e(e){var n=t.call(this,e)||this;return n.FORM_PAGE=0,n.FORM_COMPLETE=1,n.menuSectionId=a.mainMenuIds.CARDS_ACCOUNTS,n.options={},n.options=e,n}return o.__extends(e,t),e.prototype.getRouterOptionsForStep=function(t){switch(t){case this.FORM_PAGE:return this.getFormPage();case this.FORM_COMPLETE:return this.getFormCompletePage();default:this.throwStepNotSupported(t)}},e.prototype.getFormPage=function(){var t=this;return[r.default,{operationId:this.options.operationId,onNext:function(e){t.operationInstalment=e,t.showNextStep()}}]},e.prototype.getFormCompletePage=function(){return[s.default,{operationId:this.options.operationId,instalment:this.operationInstalment}]},e.instance=function(t){void 0===t&&(t={operationId:""});var n=c.FLOW_TYPES.CONVERSION_TO_INSTALMENT,o=window.app,i=o.wizards,r=o.router;return i[n]||(i[n]=new e({menuSectionId:a.mainMenuIds.CARDS_ACCOUNTS,operationId:t.operationId}),r.on("route",(function t(){r.currentPage.flowType!==n&&(r.off("route",t),delete i[n])}))),i[n]},e}(i.WbWizard);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(1149),r=n(378),s=n(381),a=n(1151),c=n(1152),u=n(404),l=n(1153),d=n(490),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.plans=new i.default(null,{operationId:e.options.operationId}),e.model=new d.default,e}return o.__extends(e,t),e.prototype.handleClickCreate=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return t.preventDefault(),this.model.set("operationId",this.options.operationId),[4,(e=new l.default({model:this.model,onSubmitSuccess:this.onSubmitSuccess})).show()];case 1:return n.sent(),e.submit(),[2]}}))}))},e.prototype.onSubmitSuccess=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return window.app.data.operationInstalments.resetLastSync(),window.app.data.idOperationCreateSuccess=this.options.operationId,this.options.onNext(this.model),[2]}))}))},e.prototype.show=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return window.app.data.idOperationCreateSuccess&&window.app.data.idOperationCreateSuccess==this.options.operationId?(window.app.router.goBack(),[2]):[4,this.plans.fetchIfEmpty()];case 1:return n.sent(),[4,t.prototype.show.call(this,e)];case 2:return n.sent(),[2]}}))}))},e.prototype.onRender=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.slider?this.slider.getIndex():0;return this.planInfo=new c.default({model:this.plans.at(i)}),this.initSlider(),t.prototype.onRender.apply(this,o.__spread(e))},e.prototype.initSlider=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.slider=new a.default({el:this.$(".slider-container"),slides:this.plans,onSlide:this.onSlide,index:0,isDisable:!1}),this.onSlide(0),[2,this.slider.show()]}))}))},e.prototype.showPlanInfo=function(t){this.planInfo&&this.planInfo.clear(),this.planInfo=new c.default({el:this.$(".planInfo"),model:t}),this.planInfo.show()},e.prototype.onSlide=function(t){var e=this.plans.at(t);this.$(".plan-month").text(e.get("number")),this.showPlanInfo(e),this.model.set("plan",e.toJSON())},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{plans:this.plans.viewContext(),isShowPlans:this.plans.length>0})},o.__decorate([s.on("click .create-payment-instalment-btn")],e.prototype,"handleClickCreate",null),o.__decorate([u.autobind],e.prototype,"onSubmitSuccess",null),o.__decorate([u.autobind],e.prototype,"onSlide",null),e=o.__decorate([s.template("instalment/plans-page"),s.requiredOptions(["operationId"])],e)}(r);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=n(1150),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.model=s.default,o.url=function(){return r.API_URL+"/payment-instalments/plans?operationId="+o.operationId},o.operationId=n.operationId,o}return o.__extends(e,t),e}(i.BaseCollection);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(n(375).BaseModel);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373);n(396);var i=n(381),r=n(374),s=n(404),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentIndex=0,e}return o.__extends(e,t),e.prototype.show=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.options.slides.fetchIfEmpty()];case 1:return n.sent(),[4,t.prototype.show.call(this,e)];case 2:return n.sent(),this.initSlider(),[2]}}))}))},e.prototype.initSlider=function(){this.sliderElement=this.$("[data-js-slider-view]"),this.sliderElement.slider({max:this.options.slides.length-1,highlight:!0,range:"min",slide:this.onSlide,value:this.options.index,disabled:this.options.isDisable})},e.prototype.onSlide=function(t,e){this.currentIndex=e.value,this.options.onSlide(e.value)},e.prototype.getIndex=function(){return this.currentIndex},e.prototype.update=function(){this.sliderElement.slider("value",this.currentIndex)},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{slides:this.options.slides,max:this.options.slides.length})},o.__decorate([s.autobind],e.prototype,"onSlide",null),e=o.__decorate([i.template("instalment/slider")],e)}(r.TemplateView);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{plan:this.model.viewContext()})},e=o.__decorate([r.template("instalment/plan-info")],e)}(i.TemplateView);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogCssClass="dialog-without-title dialog-centered-buttons plans-popup",e}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"operation-instalment-plans-popup"},enumerable:!0,configurable:!0}),e.prototype.onSubmitSuccess=function(){this.options.onSubmitSuccess()},e=o.__decorate([i.template("instalment/plans-popup"),i.requiredOptions(["model"])],e)}(n(477).AddAuthWithoutFormDialogView);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{instalment:this.options.instalment.viewContext()})},e=o.__decorate([r.template("instalment/create-plan-result")],e)}(i);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(401),r=n(380),s=n(416),a=n(1156),c=n(1162),u=function(t){function e(e){var n=t.call(this,e)||this;return n.FORM_PAGE=0,n.FORM_COMPLETE=1,n.menuSectionId=r.mainMenuIds.CARDS_ACCOUNTS,n.options={},n.options=e,n}return o.__extends(e,t),e.prototype.getRouterOptionsForStep=function(t){switch(t){case this.FORM_PAGE:return this.getFormPage();case this.FORM_COMPLETE:return this.getFormCompletePage();default:this.throwStepNotSupported(t)}},e.prototype.getFormPage=function(){var t=this;return[a.default,{instalmentId:this.options.instalmentId,onNext:function(e,n){t.operationInstalment=e,t.isFullRepayment=n,t.showNextStep()}}]},e.prototype.getFormCompletePage=function(){return[c.default,{instalment:this.operationInstalment,isFullRepayment:this.isFullRepayment}]},e.instance=function(t){void 0===t&&(t={instalmentId:""});var n=i.FLOW_TYPES.CONVERSION_TO_INSTALMENT,o=window.app,s=o.wizards,a=o.router;return s[n]||(s[n]=new e({menuSectionId:r.mainMenuIds.CARDS_ACCOUNTS,instalmentId:t.instalmentId}),a.on("route",(function t(){a.currentPage.flowType!==n&&(a.off("route",t),delete s[n])}))),s[n]},e}(s.WbWizard);e.default=u},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(490),s=n(1157),a=n(1158),c=n(1159),u=n(378),l=n(1160),d=n(1161),p=n(404),h=n(401),f=n(380),m=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.cssClass="early-repayment-page",t.flowType=h.FLOW_TYPES.CONVERSION_TO_INSTALMENT,t.models={partial:new a.default,full:new s.default},t}return o.__extends(n,e),n.prototype.initialize=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.prototype.initialize.apply(this,o.__spread(t)),this.instalment=new r.default({id:this.options.instalmentId})},n.prototype.showTab=function(t){this.$(".tabs-content__body").hide(),this.$(".tabs-content__body").eq(t).show()},n.prototype.handleTabClick=function(e){var n=t(e.currentTarget),o=n.index();this.$(".tabs__title").removeClass("title-active"),n.addClass("title-active"),this.showTab(o)},n.prototype.onSubmitSuccess=function(t){this.options.onNext(this.instalment,t)},n.prototype.showConfirmation=function(t,e,n){var o=this,i=new d.default({model:e,formMeta:t,instalment:this.instalment,contract:this.contract,onSubmitSuccess:function(){i.close(),o.onSubmitSuccess(n)}});i.show(),i.submit()},n.prototype.onSubmitPartial=function(){this.showConfirmation(this.metas.partial,this.models.partial,!1)},n.prototype.onSubmitFull=function(){this.showConfirmation(this.metas.full,this.models.full,!0)},n.prototype.show=function(t){var n,i,r;return o.__awaiter(this,void 0,void 0,(function(){var s,a,u;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.all([window.app.data.contracts.dashboard.fetchIfEmpty(null===(r=null===(i=null===(n=null===window||void 0===window?void 0:window.OW)||void 0===n?void 0:n.contractsConfig)||void 0===i?void 0:i.wbCardsAccountsPage)||void 0===r?void 0:r.sections),this.instalment.fetchIfEmpty()])];case 1:return o.sent(),this.instalment.isActive()?(this.contract=window.app.data.contracts.dashboard.get(this.instalment.get("contractId")).clone(),this.models.partial.set("instalmentId",this.instalment.get("id")),this.models.partial.set("type",{id:"tenor"}),this.models.partial.set("amount.currency",this.instalment.get("fullRepaymentAmount.currency")),this.models.full.set("amount",this.instalment.get("fullRepaymentAmount")),this.models.full.set("instalmentId",this.instalment.get("id")),this.metas={partial:c.default.getRepaymentFormMeta(c.RepaymentType.PARTIAL,this.contract),full:c.default.getRepaymentFormMeta(c.RepaymentType.FULL,this.contract)},[4,e.prototype.show.call(this,t)]):(s=window.app.data.menu.getPath(f.mainMenuIds.CARDS_ACCOUNTS),window.app.router.navigate("#menu/"+s,{trigger:!0,replace:!0}),[2]);case 2:return o.sent(),a=window.OW.contractsConfig.queries.balanceForEarlyRepayment?window.OW.contractsConfig.queries.balanceForEarlyRepayment:"inst_er",u=this.contract.get("balances."+a),this.contract.set("balances.available",u),this.forms={partial:new l.default({el:this.$("[data-js-partial-form]"),model:this.models.partial,formMeta:this.metas.partial,instalment:this.instalment,isPartialRepayment:!0,availableBalance:u,onSubmit:this.onSubmitPartial}),full:new l.default({el:this.$("[data-js-full-form]"),formMeta:this.metas.full,model:this.models.full,instalment:this.instalment,isPartialRepayment:!1,availableBalance:u,onSubmit:this.onSubmitFull})},[4,this.forms.partial.show()];case 3:return o.sent(),[4,this.forms.full.show()];case 4:return o.sent(),this.showTab(0),[2]}}))}))},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{instalment:this.instalment.viewContext()})},o.__decorate([i.on("click [data-js-tabs-title]")],n.prototype,"handleTabClick",null),o.__decorate([p.autobind],n.prototype,"onSubmitPartial",null),o.__decorate([p.autobind],n.prototype,"onSubmitFull",null),n=o.__decorate([i.template("instalment/early-repayment-page")],n)}(u);e.default=m}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlRoot=r.API_URL+"/payment-instalments/fullRepayment",e}return o.__extends(e,t),e}(i.BaseModel);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlRoot=r.API_URL+"/payment-instalments/partialRepayment",e}return o.__extends(e,t),e}(i.BaseModel);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(398),r=n(135);!function(t){t.FULL="full",t.PARTIAL="partial"}(o=e.RepaymentType||(e.RepaymentType={}));var s=function(){function t(){}return t.getRepaymentFormMeta=function(t,e){return t==o.FULL?this.getFullRepaymentFormMeta(e):this.getPartialRepaymentFormMeta(e)},t.getFullRepaymentFormMeta=function(t){return new i.FormMeta({fields:{source:{id:"remitter",name:r.t("By account"),role:"source",dataSource:{type:"contracts",values:[t]},visible:!0,htmlAttrs:{readonly:!0},optional:!1},amount:{id:"amount.value",role:"amount.value",name:r.t("Amount"),inputType:"amount",editable:!1},currency:{id:"amount.currency",role:"amount.currency",name:r.t("Currency"),visible:!0,editable:!1,optional:!1}}})},t.getPartialRepaymentFormMeta=function(t){return new i.FormMeta({fields:{source:{id:"remitter",name:r.t("By account"),role:"source",dataSource:{type:"contracts",values:[t]},visible:!0,htmlAttrs:{readonly:!0},optional:!1},amount:{id:"amount.value",role:"amount.value",name:r.t("Amount"),inputType:"amount",editable:!0},currency:{id:"amount.currency",role:"amount.currency",name:r.t("Currency"),visible:!0,editable:!1,optional:!1},type:{id:"type",name:r.t("Recalculation"),dataSource:{values:[{name:r.t("Tenor"),id:"tenor"},{name:r.t("Portion Size"),id:"portionSize"}]},visible:!0,editable:!0,optional:!1}}})},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=n(394),a=n(411),c=n(135),u=n(401),l=n(372),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flowType=u.FLOW_TYPES.CONVERSION_TO_INSTALMENT,e}return o.__extends(e,t),e.prototype.onRender=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.initGenericForm(),t.prototype.onRender.apply(this,o.__spread(e))},e.prototype.submit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(o){switch(o.label){case 0:window.app.clearMessages(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.balanceEnoughConfirmation()];case 2:return o.sent(),[3,4];case 3:return e=o.sent(),console.warn("[EarlyRepaymentForm] balance is not enough",e),this.processing=!1,[2,!1];case 4:if(this.options.isPartialRepayment){if(parseFloat(this.model.get("amount.value"))>=parseFloat(this.options.instalment.get("fullRepaymentAmount.value")))return window.app.showErrorMessage(c.t("The amount must be less than to %(amount)s",{amount:l.filters.money(this.options.instalment.get("fullRepaymentAmount"))})),this.processing=!1,[2,!1];if(n=void 0,n=parseFloat(this.options.instalment.get("nextPaymentAmount.value"))<parseFloat(this.options.instalment.get("dueAmount.value"))?this.options.instalment.get("dueAmount"):this.options.instalment.get("nextPaymentAmount"),parseFloat(this.model.get("amount.value"))<parseFloat(n.value))return window.app.showErrorMessage(c.t("The amount must be greater or equal than to %(amount)s",{amount:l.filters.money(n)})),this.processing=!1,[2,!1]}return[2,s.WbGenericFormMixin.submit.apply(this,t)]}}))}))},e.prototype.submitAction=function(){this.options.onSubmit()},e=o.__decorate([r.mixins([s.WbGenericFormMixin,a.WbServiceMethodsMixin]),r.requiredOptions(["model","formMeta","instalment","isPartialRepayment","availableBalance"]),r.template("instalment/early-repayment-form")],e)}(i.TemplateView);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogCssClass="dialog-without-title dialog-centered-buttons early-repayment-popup",e}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"early-repayment-confirmation-dialog"},enumerable:!0,configurable:!0}),e.prototype.onSubmitSuccess=function(){this.options.onSubmitSuccess()},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{contract:this.options.contract.viewContext(),payment:this.model.viewContext(),instalment:this.options.instalment.viewContext(),date:Date.now()})},e=o.__decorate([i.template("instalment/early-repayment-confirmation-dialog"),i.requiredOptions(["model","formMeta","instalment","contract"])],e)}(n(477).AddAuthWithoutFormDialogView);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=n(401),a=n(380),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cssClass="repayment-page complete-page",e.flowEnd=!0,e.flowType=s.FLOW_TYPES.CONVERSION_TO_INSTALMENT,e}return o.__extends(e,t),e.prototype.handleEarlyRepayment=function(t){t.preventDefault();var e=window.app.data.menu.getPath(a.mainMenuIds.CARDS_ACCOUNTS);window.app.router.navigate("#menu/"+e,{trigger:!0,replace:!0})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),window.app.data.operationInstalments.resetLastSync()},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{instalment:this.options.instalment.viewContext(),isFullRepayment:this.options.isFullRepayment})},o.__decorate([r.on("click [data-js-back-to-card-and-account-btn]")],e.prototype,"handleEarlyRepayment",null),e=o.__decorate([r.template("instalment/early-repayment-result-page")],e)}(i);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(373),r=n(416),s=n(379),a=n(1164),c=n(1166),u=n(401),l=n(380),d=n(1167),p=n(1171),h=n(380);!function(t){t.INITIAL="",t.FORM="form",t.COMPLETE="complete"}(o||(o={}));var f=function(t){function e(e){var n,i=t.call(this,e)||this;return i.INDEX_PAGE=0,i.FORM_PAGE=1,i.FORM_COMPLETE=2,i.options={},i.cardProductGroupTypeId="",i.cardProductGroupTypeName="",i.currentStep=0,i.menuSectionId=l.mainMenuIds.CARDS_ACCOUNTS,i.modeToStepMap=((n={})[o.INITIAL]=i.INDEX_PAGE,n[o.FORM]=i.FORM_PAGE,n[o.COMPLETE]=i.FORM_COMPLETE,n),i.options=e,i}return i.__extends(e,t),e.prototype.getRouterOptionsForStep=function(t){switch(t){case this.INDEX_PAGE:return this.getIndexPage();case this.FORM_PAGE:return this.getFormPage();case this.FORM_COMPLETE:return this.getFormCompletePage();default:this.throwStepNotSupported(t)}},e.prototype.getIndexPage=function(){var t=this;return[a.default,{accountId:this.options.accountId,onSelect:function(e,n,i){void 0===i&&(i=!1),t.cardProductGroupTypeId=e,t.cardProductGroupTypeName=n,t.setModeToUrl(o.FORM,i),t.showNextStep()}}]},e.prototype.getFormPage=function(){var t=this;return this.options.cardId?[d.default,{cardId:this.options.cardId,pageTitle:t.cardProductGroupTypeName,onSubmitSuccess:function(){t.model=this.model,t.setModeToUrl(o.COMPLETE),t.showNextStep()}}]:[p.default,{cardProductGroupTypeId:this.cardProductGroupTypeId,accountId:this.options.accountId,pageTitle:t.cardProductGroupTypeName,onSubmitSuccess:function(){t.model=this.model,t.cardTypes=this.cardTypes,t.setModeToUrl(o.COMPLETE),t.showNextStep()}}]},e.prototype.getFormCompletePage=function(){return[c.default,{model:this.model,cardTypes:this.cardTypes,cardId:this.options.cardId}]},e.prototype.setModeToUrl=function(t,e){void 0===e&&(e=!1);var n=new s((new s).fragment()),o=n.query(!0);t?o.mode=t:delete o.mode,n.query(o),window.app.router.navigate(n.toString(),{trigger:!1,replace:e})},e.instance=function(t){void 0===t&&(t={mode:"",accountId:"",cardId:""});var n=window.app,i=n.wizards,r=n.router,s=t.mode||"",a=u.FLOW_TYPES.CARD_ORDERS;i[a]||(s="",i[a]=new e({menuSectionId:h.mainMenuIds.PAYMENTS_TRANSFERS,accountId:t.accountId,cardId:t.cardId}),r.on("route",(function t(){r.currentPage.flowType!==a&&(r.off("route",t),delete i[a])}))),t.cardId&&(s=o.FORM);var c=i[a],l=c.modeToStepMap[s]||0;return c.setModeToUrl(s,!!s),c.currentStep=l,c},e}(r.WbWizard);e.default=f},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=n(404),a=n(1165),c=n(564),u=n(377),l=n(135),d=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.processing=!1,t}return o.__extends(n,e),n.prototype.initialize=function(t){e.prototype.initialize.call(this,t);var n={},o=this.options.accountId;o&&(n.accountId=o),this.collection=new a.default(void 0,{query:n}),this.on("render.complete",this.initSlider)},n.prototype.handleBackClick=function(t){t.preventDefault(),window.app.router.goBack()},n.prototype.initSlider=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.$slider=this.$(".card-orders-index-page__slider"),this.$slider.slick({dots:!0,arrows:!0,infinite:!1,slidesToShow:1,slidesToScroll:1,autoplay:!1,pauseOnHover:!0,onBeforeChange:this.onBeforeChangeSlide}),[4,this.loadSlide(0)];case 1:return t.sent(),[4,this.preloadNextSlides(0)];case 2:return t.sent(),[2]}}))}))},n.prototype.onBeforeChangeSlide=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.loadSlide(n)];case 1:return t.sent(),[4,this.preloadNextSlides(n)];case 2:return t.sent(),[2]}}))}))},n.prototype.preloadNextSlides=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.loadSlide(t+1),this.loadSlide(t+2)])];case 1:return e.sent(),[2]}}))}))},n.prototype.loadSlide=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s,a,u=this;return o.__generator(this,(function(l){switch(l.label){case 0:return e=this.$(".card-orders-index-page__slide").eq(t),"card-orders-index-page__slide--loading",!e.length||e.data("is-initialized")?[2]:(e.data("is-initialized",!0),n=e.data("id"),i=c.default.getFragmentPath(n),r=c.default.getImagePath(n),s=function(){return o.__awaiter(u,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.loadText(i)];case 1:return t=n.sent(),e.find(".card-orders-index-page__description").html(t),e.removeClass("card-orders-index-page__slide--loading"),[2]}}))}))},a=function(){return o.__awaiter(u,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.loadImage(r)];case 1:return t=o.sent(),n=e.find(".card-orders-index-page__card"),t?n.css("background-image","url("+r+")"):n.addClass("card-orders-page__card--default"),[2]}}))}))},[4,Promise.all([s(),a()])]);case 1:return l.sent(),[2]}}))}))},n.prototype.loadText=function(e){return new Promise((function(n){t.get(e).done((function(t){n(t)})).fail((function(t){t.errorHandled=!0,n(l.t("Description is unavailable"))}))}))},n.prototype.loadImage=function(t){return new Promise((function(e){u.loadImage(t).done((function(){e(!0)})).fail((function(){e(!1)}))}))},n.prototype.handleOrderButtonClick=function(e){var n,o;if(e.preventDefault(),!this.processing){this.processing=!0;var i=t(e.currentTarget).data("js-group-type-id"),r=null===(n=this.collection.get(i))||void 0===n?void 0:n.get("name");null===(o=this.options.onSelect)||void 0===o||o.call(this,i,r)}},n.prototype.show=function(t){var n;return o.__awaiter(this,void 0,void 0,(function(){var i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.collection.fetchIfEmpty()];case 1:return o.sent(),this.options.accountId&&1===this.collection.length?(console.debug("Card Orders: show next step because was set accountId and card product group type only one"),i=this.collection.at(0),null===(n=this.options.onSelect)||void 0===n||n.call(this,i.get("id"),i.get("name"),!0),[2]):[2,e.prototype.show.call(this,t)]}}))}))},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{pageTitle:l.t("Card order"),collection:this.collection.viewContext()})},o.__decorate([r.on("click .content-header__back-button")],n.prototype,"handleBackClick",null),o.__decorate([s.autobind],n.prototype,"initSlider",null),o.__decorate([s.autobind],n.prototype,"onBeforeChangeSlide",null),o.__decorate([r.on("click [data-js-order-button]")],n.prototype,"handleOrderButtonClick",null),n=o.__decorate([r.template("card-orders/index-page"),r.requiredOptions(["onSelect"])],n)}(i);e.default=d}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=n(564),a=n(379),c=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.model=s.default,o.url=function(){return a(r.API_URL+"/card-orders/card-product-group-types").setQuery(o.query).toString()},o.query=(null==n?void 0:n.query)||{},o}return o.__extends(e,t),e}(i.BaseCollection);e.default=c},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(378),r=n(381),s=n(798),a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.handleDetailsBtnClick=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n,i;return o.__generator(this,(function(o){switch(o.label){case 0:return e.preventDefault(),n=t(e.currentTarget),i="loading-button",n.hasClass(i)?[2]:(n.addClass(i),[4,new s.default({applicationId:this.model.get("id")}).show()]);case 1:return o.sent(),n.removeClass(i),[2]}}))}))},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.options.cardId)return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{isPlasticCardOrder:!0,cardId:this.options.cardId});var i=this.model.get("cardType.id"),r=this.options.cardTypes.get(i);return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{pureCardNumber:this.model.get("pureCardNumber"),isDigital:r.get("isDigital")})},o.__decorate([r.on("click [data-js-details]")],n.prototype,"handleDetailsBtnClick",null),n=o.__decorate([r.template("card-orders/complete-page"),r.requiredOptions(["model"])],n)}(i);e.default=a}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(869),r=n(1169),s=n(381),a=n(430),c=n(96),u=n(420),l=n(870),d=n(135),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultPageTitle=d.t("Plastic card order"),e}return o.__extends(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.card=new u({id:e.cardId})},e.prototype.getCardOrderModel=function(){return new r.default({card:{id:this.cardId}})},e.prototype.getCardOrderFormMetaGenerated=function(){var t={model:this.model,cardOrderSettings:window.app.data.cardOrderSettings};return a.default.generateForPlastic(this.cardId,t)},e.prototype.getCardOrderViewContext=function(){return this.model.getViewContext({cardType:this.cardType,card:this.card})},e.prototype.onSubmit=function(){return this.model.save()},e.prototype.onRender=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.setupCardImage(this.card.get("card.type.groupTypeId"),this.cardType.get("paymentSystem")),this.setCardExpiredDate(c().add(c.duration(this.cardType.get("maxPeriod"))).format("MM/YY")),t.prototype.onRender.apply(this,o.__spread(e))},e.prototype.fetchData=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.card.fetchIfEmpty()];case 1:return e.sent(),this.cardType=new l.default({id:this.card.get("card.type.id")}),[2,Promise.all([this.cardType.fetchIfEmpty(),t.prototype.fetchData.call(this)])]}}))}))},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{orderDetails:this.getCardOrderViewContext().value().fields,cardholderName:this.card.getCardholderName()})},e=o.__decorate([s.requiredOptions(["cardId"])],e)}(i.default);e.default=p},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(374),r=n(381),s=n(394),a=n(411),c=n(404),u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.initialize=function(t){this.on("render.complete",this.handleRenderComplete),this.on("form.ready",this.handleFormReady),e.prototype.initialize.call(this,t)},n.prototype.handleRenderComplete=function(){this.enhance()},n.prototype.handleFormReady=function(){this.options.invalidElementsNames&&this.validateElementsWithNames(this.options.invalidElementsNames)},n.prototype.handleChangeLicense=function(e){this.formMeta.isLicenseAccepted=t(e.target).is(":checked")},n.prototype.submitAction=function(){return this.options.onSubmit()},n.prototype.onSubmitSuccess=function(){var t,e;null===(e=(t=this.options).onSubmitSuccess)||void 0===e||e.call(t)},n.prototype.onRender=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.initGenericForm(),this.ensureLicense(),e.prototype.onRender.apply(this,o.__spread(t)),!1},n.prototype.context=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__assign(o.__assign({},e.prototype.context.apply(this,o.__spread(t))),{licenseAccepted:this.formMeta.isLicenseAccepted,license:this.formMeta.get("license")})},o.__decorate([c.autobind],n.prototype,"handleRenderComplete",null),o.__decorate([c.autobind],n.prototype,"handleFormReady",null),o.__decorate([r.on("change #license")],n.prototype,"handleChangeLicense",null),n=o.__decorate([r.mixins([s.WbGenericFormMixin,a.WbServiceMethodsMixin]),r.requiredOptions(["model","formMeta"]),r.template("card-orders/form")],n)}(i.TemplateView);e.default=u}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(800),r=n(452),s=n(1170),a=n(40),c=n(801),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return a.API_URL+"/card-orders/order-plastic"},e}return o.__extends(e,t),e.prototype.getViewContext=function(t){return this.isNew()?t?new s.default(this,t.cardType,t.card):new r.default(this):new c.default(this)},e.prototype.viewContext=function(t){return this.getViewContext(t).value()},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(452),r=n(430),s=n(96),a=n(40),c=n(372),u=n(135),l=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.cardType=n,i.card=o,i}return o.__extends(e,t),e.prototype.getFeeValue=function(t){var e=a.DEFAULT_CURRENCY,n=this.cardType.get(t);return e&&n?c.filters.money({currency:e,value:n}):""},e.prototype.getTariffField=function(){return o.__assign(o.__assign({},t.prototype.getTariffField.call(this)),{value:this.cardType.get(r.Fields.TARIFF)})},e.prototype.getCardholderNameField=function(){return o.__assign(o.__assign({},t.prototype.getCardholderNameField.call(this)),{value:this.card.getCardholderName()})},e.prototype.getCardExpiryField=function(){var e=this.cardType.get(r.Fields.MAX_PERIOD);return o.__assign(o.__assign({},t.prototype.getCardExpiryField.call(this)),{value:e&&s().add(s.duration(e)).format("MM/YY")})},e.prototype.getCardTypeField=function(){return o.__assign(o.__assign({},t.prototype.getCardTypeField.call(this)),{value:this.cardType.get("name")})},e.prototype.getCurrencyField=function(){return o.__assign(o.__assign({},t.prototype.getCurrencyField.call(this)),{value:this.cardType.get("currency")})},e.prototype.getFeeField=function(){return{name:u.t("Fee"),value:""}},e.prototype.getNotificationFeeField=function(){return{name:u.t("Notification fee"),value:""}},e}(i.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=n(430),s=n(1172),a=n(404),c=n(799),u=n(869),l=n(1173),d=n(395).Contracts,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.listenTo(this.model,"change:cardType",this.updateCard),this.cardTypes=new s.default(null,{cardProductGroupTypeId:e.cardProductGroupTypeId}),this.contracts=new d,this.cardProductGroupTypeId=e.cardProductGroupTypeId},e.prototype.getCardOrderModel=function(){return new c.default},e.prototype.getCardOrderFormMetaGenerated=function(){var t={cardTypes:this.cardTypes,model:this.model,contracts:this.contracts,cardOrderSettings:window.app.data.cardOrderSettings},e=this.options.accountId;return e?r.default.generateForAccount(e,t):r.default.generate(t)},e.prototype.getCardOrderViewContext=function(){return this.model.getViewContext({cardTypes:this.cardTypes,formMeta:this.formMeta,client:window.app.data.client})},e.prototype.updateCard=function(){var t=this.getCardOrderViewContext(),e=t.getCardExpiryField().value,n=t.getPaymentSystemField().value;this.setCardExpiredDate(e),this.setupCardImage(this.cardProductGroupTypeId,n)},e.prototype.renderForm=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.stopListening(this.model,"change:currency",this.renderForm),this.stopListening(this.model,"change:cardType",this.renderForm),[4,t.prototype.renderForm.call(this)];case 1:return e.sent(),this.listenTo(this.model,"change:currency",this.renderForm),this.listenTo(this.model,"change:cardType",this.renderForm),[2]}}))}))},e.prototype.onSubmit=function(){this.showConfirmation()},e.prototype.showConfirmation=function(){var t=this,e=new l.default({model:this.model,formMeta:this.formMeta,modelViewContext:this.getCardOrderViewContext(),onSubmitSuccess:function(){e.close(),t.onSubmitSuccess()}});e.show()},e.prototype.fetchData=function(){return Promise.all([this.cardTypes.fetchIfEmpty(),this.contracts.fetchIfEmpty(),t.prototype.fetchData.call(this)])},e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),{cardholderName:window.app.data.client.getEmbossingFullName()})},o.__decorate([a.autobind],e.prototype,"updateCard",null),o.__decorate([a.autobind],e.prototype,"renderForm",null),o.__decorate([a.autobind],e.prototype,"onSubmit",null),e=o.__decorate([i.requiredOptions(["cardProductGroupTypeId"])],e)}(u.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(870),s=n(40),a=n(11),c=function(t){function e(e,n){var o=t.call(this,e,n)||this;if(o.model=r.default,o.url=function(){return s.API_URL+"/card-orders/card-types?cardProductGroupTypeId="+o.cardProductGroupTypeId},o.cardProductGroupTypeId=n.cardProductGroupTypeId,!o.cardProductGroupTypeId)throw new Error("Missing card product group type id");return o}return o.__extends(e,t),e.prototype.getCurrencyCodes=function(){return a.chain(this.pluck("currency")).unique().compact().sort().value()},e.prototype.getCardTypesByCurrencyCode=function(t){return a.chain(this.where({currency:t})).map((function(t){return{id:t.get("id"),name:t.get("brand")}})).value()},e.prototype.getAccountsConfig=function(t,e){var n=[],i=!1;return this.where({currency:t,id:e}).forEach((function(t){var e=t.get("accounts");e.allowNew&&(i=!0),n.push.apply(n,o.__spread(a.pluck(e.values,"id")))})),{allowNew:i,accountIds:a.chain(n).unique().sort().value()}},e}(i.BaseCollection);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(381),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return"card-orders-confirmation-dialog"},enumerable:!0,configurable:!0}),e.prototype.context=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__assign(o.__assign({},t.prototype.context.apply(this,o.__spread(e))),this.modelViewContext.value())},e=o.__decorate([i.requiredOptions(["model","formMeta","modelViewContext","onSubmitSuccess"]),i.template("card-orders/confirmation-dialog")],e)}(n(477).AddAuthWithoutFormDialogView);e.default=r},function(t,e,n){(function(e,o){var i,r;r=n(380),(i={}).initUserEvents=function(){return this.once(r.events.user.LOGIN,(t=this,function(){return t.once(r.events.page.CHANGE,(function(){return t.messages.once("sync",(function(){return t.showPromoMessagesPopup()}))}))}));var t},t.exports=e.extend({},o.Events,i)}).call(this,n(11),n(384))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(11),r=n(40),s=function(){function e(){this.LOCATION_MAX_AGE=1800,this.mapScriptPromise=null,this.checkedUserLocation=!1}return e.getInstance=function(){return this.instance||(this.instance=new this),this.instance},e.prototype.ensureMapsLoaded=function(){var e=this;return this.mapScriptPromise||(this.mapScriptPromise=t.Deferred(),t((function(){console.assert(r.GOOGLE_MAP_API_KEY,"Google Map API Key must be defined in main.js");var n=document.createElement("script");n.type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?v=weekly&key="+r.GOOGLE_MAP_API_KEY+"&language="+r.LOCALE+"&callback=window.app.setMapLoaded",t(n).on("error",(function(){var t;null===(t=e.mapScriptPromise)||void 0===t||t.reject()})),document.body.appendChild(n)}))),this.mapScriptPromise},e.prototype.setMapLoaded=function(){var t;console.debug("Google Maps API loaded"),null===(t=this.mapScriptPromise)||void 0===t||t.resolve()},e.prototype.getUserCountryLocation=function(e){var n=this;void 0===e&&(e={});var o=t.Deferred();return this.checkedUserLocation&&!e.force?o.reject(!1).promise():(o.always((function(){n.checkedUserLocation=!0})),window.OW.features.EMULATE_GEOLOCATION?(this.getCountry().done((function(t){o.resolve(t)})),o.promise()):(this.getCurrentGeoLocation(i.extend({maximumAge:this.LOCATION_MAX_AGE},e)).then((function(t){t?n.getCountry(t).done((function(t){o.resolve(t)})).fail((function(t){o.reject(t)})):o.reject()})),o.promise()))},e.prototype.getCountry=function(e){var n=t.Deferred();return window.OW.features.EMULATE_GEOLOCATION?(i.delay((function(){return n.resolve({id:r.GEOLIMITER_DEFAULT_COUNTRY})}),1250),n.promise()):(console.assert(e,"In this case position is required"),this.ensureMapsLoaded().done((function(){var t=new google.maps.Geocoder,i=new google.maps.LatLng(e.latitude,e.longitude);return t.geocode({location:i},(function(t,e){var i,r,s,a;if(e!==google.maps.GeocoderStatus.OK)return console.info("geocoding complete",e),n.reject(e);try{for(var c=o.__values(t),u=c.next();!u.done;u=c.next()){var l=u.value;if(l.types.includes("country"))try{for(var d=(s=void 0,o.__values(l.address_components)),p=d.next();!p.done;p=d.next()){var h=p.value;if(h.types.includes("country"))return console.debug("Current country: "+h.short_name),n.resolve({id:h.short_name,name:h.long_name})}}catch(t){s={error:t}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}}}catch(t){i={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}return n.reject("Country not found in geocoder results")}))})),n.promise())},e.prototype.isGeoLocationAvailable=function(){return t.Deferred().resolve(Boolean(window.navigator.geolocation)).promise()},e.prototype.getCurrentGeoLocation=function(e){var n=t.Deferred();return this.isGeoLocationAvailable().then((function(t){return t?navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.accuracy;return r.MAP_COARSE_ACCURACY_MAX&&e>=r.MAP_COARSE_ACCURACY_MAX?n.resolve(null):n.resolve({zoom:r.MAP_LOCATE_ME_ZOOM,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:e})}),(function(t){return console.warn("coarse geoposition error",t),n.resolve(null)}),e):n.resolve(null).promise()})),n.promise()},e}();e.default=s}).call(this,n(14))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=function(){return r.API_URL+"/card-orders/settings"},t}return o.__extends(n,e),n.prototype.defaults=function(){return{enabled:!1}},n.prototype.fetchIfNeedAndPossible=function(){return window.OW.features.CARD_ORDERS?this.fetchIfEmpty():t.Deferred().resolve()},n}(i.BaseModel);e.default=s}).call(this,n(14))},function(t,e,n){var o={"./jquery.timeago.en.js":1178,"./jquery.timeago.ro.js":1179,"./jquery.timeago.ru.js":1180};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=1177},function(t,e,n){(function(t){t.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}}).call(this,n(14))},function(t,e,n){(function(t){t.timeago.settings.strings={prefixAgo:"acum",prefixFromNow:"in timp de",suffixAgo:"",suffixFromNow:"",seconds:"mai putin de un minut",minute:"un minut",minutes:"%d minute",hour:"o ora",hours:"%d ore",day:"o zi",days:"%d zile",month:"o luna",months:"%d luni",year:"un an",years:"%d ani"}}).call(this,n(14))},function(t,e,n){(function(t){!function(){function e(t,e,n,o){var i=t%10;return 1==i&&(1==t||t>20)?e:i>1&&i<5&&(t>20||t<10)?n:o}t.timeago.settings.strings={prefixAgo:null,prefixFromNow:"через",suffixAgo:"назад",suffixFromNow:null,seconds:"меньше минуты",minute:"минуту",minutes:function(t){return e(t,"%d минута","%d минуты","%d минут")},hour:"час",hours:function(t){return e(t,"%d час","%d часа","%d часов")},day:"день",days:function(t){return e(t,"%d день","%d дня","%d дней")},month:"месяц",months:function(t){return e(t,"%d месяц","%d месяца","%d месяцев")},year:"год",years:function(t){return e(t,"%d год","%d года","%d лет")}}}()}).call(this,n(14))},function(t,e,n){var o,i,r,s;s=function(t,e){var n=/^\?(.*)/,o=/\((.*?)\)/g,i=/(\(\?)?:\w+/g,r=/\*\w+/g,s=/[\-{}\[\]+?.,\\\^$|#\s]/g,a=/(\?.*)$/,c=/^([^\?]*)/,u=/(\?)[\w-]+/i,l=/[\:\*]([^\:\?\/]+)/g,d=/^[#\/]|\s+$/g,p=/\/$/;function h(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(p,""),o=this.location.search;t.indexOf(n)||(t=t.substr(n.length)),o&&(t+=o)}else t=this.getHash();return t.replace(d,"")}function f(t){return decodeURIComponent(t.replace(/\+/g," "))}function m(e,n){var o=e.split("&");t.each(o,(function(t){var e=t.split("=");n(e.shift(),e.join("="))}))}e.Router.arrayValueSplit="|",t.extend(e.History.prototype,{getFragment:function(t,e){var n=this._wantsHashChange&&this._wantsPushState&&!this._hasPushState,o=h.apply(this,arguments);return null!=t||null!=o||u.test(o)?n&&(o=o.replace(a,"")):o+=this.location.search,o},getQueryParameters:function(e,o){var i=(e=h.apply(this,arguments)).replace(c,""),r=i.match(n);if(r){i=r[1];var s={};return m(i,(function(e,n){n=f(n),s[e]?t.isString(s[e])?s[e]=[s[e],n]:s[e].push(n):s[e]=n})),s}return{}}}),t.extend(e.Router.prototype,{initialize:function(t){this.encodedSplatParts=t&&t.encodedSplatParts},getFragment:function(t,e,n){return t=h.apply(this,arguments),n&&(t=t.replace(a,"")),t},_routeToRegExp:function(e){var n=r.exec(e)||{index:-1},a=i.exec(e)||{index:-1},c=e.match(l)||[];e=e.replace(s,"\\$&").replace(o,"(?:$1)?").replace(i,(function(t,e){return e?t:"([^\\/\\?]+)"})).replace(r,"([^??]*?)"),e+="(\\?.*)?";var u=new RegExp("^"+e+"$");return n.index>=0&&(u.splatMatch=a>=0?n.index-a.index:-1),u.paramNames=t.map(c,(function(t){return t.substring(1)})),u.namedParameters=this.namedParameters,u},_extractParameters:function(o,i){var r=o.exec(i).slice(1),s={};r.length>0&&t.isUndefined(r[r.length-1])&&r.splice(r.length-1,1);var a=r.length&&r[r.length-1]&&r[r.length-1].match(n);if(a){var c=a[1],u={};if(c){var l=this;m(c,(function(t,e){l._setParamValue(t,e,u)}))}r[r.length-1]=u,t.extend(s,u)}var d=r.length;if(o.splatMatch&&this.encodedSplatParts){if(o.splatMatch<0)return r;d-=1}for(var p=0;p<d;p++)t.isString(r[p])&&(r[p]=f(r[p]),o.paramNames&&o.paramNames.length>=p-1&&(s[o.paramNames[p]]=r[p]));return e.Router.namedParameters||o.namedParameters?[s]:r},_setParamValue:function(t,e,n){for(var o=(t=(t=t.replace("[]","")).replace("%5B%5D","")).split("."),i=n,r=0;r<o.length;r++){var s=o[r];r===o.length-1?i[s]=this._decodeParamValue(e,i[s]):i=i[s]=i[s]||{}}},_decodeParamValue:function(n,o){var i=e.Router.arrayValueSplit;if(i&&n.indexOf(i)>=0){for(var r=n.split(i),s=r.length-1;s>=0;s--)r[s]?r[s]=f(r[s]):r.splice(s,1);return r}return n=f(n),o?t.isArray(o)?(o.push(n),o):[o,n]:n},toFragment:function(e,n){return n&&(t.isString(n)||(n=this._toQueryString(n)),n&&(e+="?"+n)),e},_toQueryString:function(n,o){var i=e.Router.arrayValueSplit;function r(t){return String(t).replace(i,encodeURIComponent(i))}if(!n)return"";o=o||"";var s="";for(var a in n){var c=n[a];if(t.isString(c)||t.isNumber(c)||t.isBoolean(c)||t.isDate(c))c=this._toQueryParam(c),(t.isBoolean(c)||t.isNumber(c)||t.isString(c)||c)&&(s+=(s?"&":"")+this._toQueryParamName(a,o)+"="+r(encodeURIComponent(c)));else if(t.isArray(c)){for(var u="",l=0;l<c.length;l++){var d=this._toQueryParam(c[l]);(t.isBoolean(d)||null!==d)&&(u+=i+r(d))}u&&(s+=(s?"&":"")+this._toQueryParamName(a,o)+"="+u)}else{var p=this._toQueryString(c,this._toQueryParamName(a,o,!0));p&&(s+=(s?"&":"")+p)}}return s},_toQueryParamName:function(t,e,n){return e+t+(n?".":"")},_toQueryParam:function(e){return t.isNull(e)||t.isUndefined(e)?null:e}}),e.History.prototype.navigate=function(t,e){e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}}},(r=this).require?t.exports=s(n(11),n(384)):(o=[n(11),n(384)],void 0===(i=function(t,e){return s(t||r._,e||r.Backbone)}.apply(e,o))||(t.exports=i))},function(t,e,n){(function(o,i){var r;void 0===(r=function(t){var e,r,s,a,c;return c=n(96),e=n(137),r=n(372),n(574),a=n(391),s={menuUrl:function(t){return window.app.data.menu.getItemUrl(t)},letterTime:function(t){return e.formatDate(c(t).toDate(),{raw:"dd.MM.yyyy"})},bulletMask:function(t){var e;return/^[\d *•]+$/.test(t)?(t=t.replace(/^(\d+)(\*+)(\d+)$/,(function(){return""+arguments[1]+arguments[2].replace(/[*•]/g,"•")+arguments[3]})),(e=o("<span/>").html(t)).mask("#### #### #### #### ###",{translation:{"#":{pattern:/•|\d/,recursive:!0}}}),e.html()):t},opCategoryText:function(t){return a.getOperationCategoryName(t)}},r.filters=i.extend(r.filters,s)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){var i;void 0===(i=function(e){t("ru [language]"),t("en [language]"),t("RUB"),t("RUB [long]"),t("RUB [text]"),t("RUR"),t("RUR [long]"),t("RUR [text]"),t("EUR"),t("EUR [long]"),t("EUR [text]"),t("USD"),t("USD [long]"),t("USD [text]"),t("KZT"),t("KZT [long]"),t("KZT [text]"),t("UAH"),t("UAH [long]"),t("UAH [text]")}.call(n,o,n,e))||(e.exports=i)},function(e,n,o){(function(n,i){var r,s,a,c,u,l;u=o(40),c=o(377),s=o(1185),l=o(97),a={},r=u.APP_PATH+"/"+u.RESOURCES_PATH+"/tutorials",a.TutorialEngine=function(){function e(t){t?this._validateConfig(t)?(this.initialized=!0,this.config=t,this.$tutorialContainer=n("<div class='tutorial-container'></div>"),n(document.body).append(this.$tutorialContainer)):console.warn("The configuration object for tutorial engine is in the unsupported format"):console.warn("The configuration object for tutorial engine is not specified")}return e.prototype.cssClass="with-tutorial",e.prototype.defaults={inPage:{fadeDuration:400,textColor:"#c2ce08",arrowColor:"#c2ce08",overlayColor:"rgba(0,0,0,0.7)",textOffset:200,arrowOffset:20},fullScreen:{fadeDuration:400,showArrows:!1,titleColor:"black",textColor:"#6c6c6c",bgColor:"white",closeButtonTitle:t("Skip")}},e.prototype._validateConfig=function(t){return!0},e.prototype._initInPageLayout=function(){var t;return this.$tutorialContainer.on("click",(t=this,function(e){if(e.preventDefault(),t.currentTutorial&&"inPage"===t.currentTutorial.type)return t._showNextStep()})),this.canvas=document.createElement("canvas"),this.canvas.width=this.$tutorialContainer.width(),this.canvas.height=this.$tutorialContainer.height(),this.$tutorialContainer.append(this.canvas),this.$descriptionBlock=n("<div class='tutorial-step-description'></div>"),this.$tutorialContainer.append(this.$descriptionBlock),this.$currentElementMask=n("<div class='tutorial-element-mask'></div>"),this.$tutorialContainer.append(this.$currentElementMask),this._showNextStep()},e.prototype._initFullScreenLayout=function(){var t,e,o,s,a,c;if(a=[r,this.currentTutorial.id].join("/"),o=this.currentTutorial.steps.map((c=this,function(t){var e,o,r,s,u,l,d,p,h;return h=i.extend({},c.currentTutorialOptions,t.options),u=n("<div class='fullscreen-tutorial-step swiper-slide'></div>"),h.bgImage&&(p=[a,h.bgImage].join("/"),u.css("background-image","url("+p+")")),h.bgColor&&u.css("background-color",h.bgColor),r=n("<div class='tutorial-step-description-wrapper'></div>"),o=n("<div class='tutorial-step-description'></div>"),s=n('<div class="step-icon-wrapper">\n  <div class="step-icon" style="background-image: url(\''+[a,t.icon].join("/")+"')\" />\n</div>"),(d=n("<div class='step-title'>"+t.title+"</div>")).css("color",h.titleColor),(l=n("<div class='step-text'>"+t.text+"</div>")).css("color",h.textColor),c.currentTutorial.steps.length>1&&(e=n("<div class='swiper-pagination'></div>")),o.append(s,d,l,e),r.append(o),u.append(r),u})),(e=n("<div class='swiper-wrapper'></div>")).append.apply(e,o),t=n("<button class='close-button'>"+this.currentTutorialOptions.closeButtonTitle+"</button>"),this.$tutorialContainer.append(e,t),this.$tutorialContainer.on("click",".close-button",function(t){return function(e){return t._endTutorial()}}(this)),!(this.currentTutorial.steps.length<=1))return s={threshold:20,initialSlide:0,direction:"horizontal",pagination:".swiper-pagination"},new Swiper(this.$tutorialContainer[0],s)},e.prototype._disposeInPageLayout=function(){return this.$tutorialContainer.off("click")},e.prototype._disposeFullScreenLayout=function(){return this.$tutorialContainer.off("click")},e.prototype._initTutorialLayout=function(){switch(this.currentTutorial.type){case"inPage":return this.$tutorialContainer.fadeIn({duration:this.currentTutorialOptions.fadeDuration,complete:(t=this,function(){return t._initInPageLayout()})});case"fullScreen":return this.$tutorialContainer.fadeIn({duration:this.currentTutorialOptions.fadeDuration,complete:function(t){return function(){return t._initFullScreenLayout()}}(this)});default:return console.warn("Unsupported tutorial type: ",this.currentTutorial.type),this._endTutorial()}var t},e.prototype._disposeTutorialLayout=function(){switch(this.currentTutorial.type){case"inPage":this._disposeInPageLayout();break;case"fullScreen":this._disposeFullScreenLayout();break;default:console.warn("Unsupported tutorial type: ",this.currentTutorial.type)}return this.$tutorialContainer.fadeOut({duration:this.currentTutorialOptions.fadeDuration,complete:(t=this,function(){return t.$tutorialContainer.removeClass().addClass("tutorial-container").empty()})});var t},e.prototype._pickTutorial=function(t){var e,n,o,i;for(e=0,n=(o=this.config.tutorials).length;e<n;e++)if((i=o[e]).enabled&&i.key===t)return i;return null},e.prototype._getStorageKey=function(t){return"completed-tutorial-"+t.id},e.prototype._getCurrentElementMeasurements=function(){var t;return{top:(t=this.$currentElement.offset()).top,left:t.left,width:this.$currentElement.outerWidth(),height:this.$currentElement.outerHeight()}},e.prototype._getDescriptionBlockSize=function(){var t,e;return(t=this.$descriptionBlock.clone()).text(this.currentTutorial.steps[this.currentStep].text),t.css({top:"-9999px",left:"-9999px",visibility:"hidden"}),t.appendTo(document.body),e={width:t.outerWidth(),height:t.outerHeight()},t.remove(),e},e.prototype._highlightCurrentElement=function(){var t,e,n,o;return t=this.canvas.getContext("2d"),c.isElementVisibleInView(this.$currentElement[0])||this.$currentElement[0].scrollIntoView({behavior:"instant",block:"end"}),n=this.$currentElement.offset(),o=this.$currentElement.outerWidth(),e=this.$currentElement.outerHeight(),t.clearRect(n.left,n.top,o,e),this.$currentElementMask.css(i.extend(n,{width:o+"px",height:e+"px"}))},e.prototype._showCurrentDescription=function(){var t,e,n,o,r,a,c;return r=this._getCurrentElementMeasurements(),a=this._getDescriptionBlockSize(),n=this.canvas.height-(r.top+r.height+this.currentTutorialOptions.textOffset+a.height),o=r.left+r.width/2,n<.1*this.canvas.height?(e={y:(c={top:r.top-this.currentTutorialOptions.textOffset-a.height,left:(this.canvas.width-a.width)/2}).top+a.height+this.currentTutorialOptions.arrowOffset},t={x:o,y:r.top-this.currentTutorialOptions.arrowOffset}):(e={y:(c={top:r.top+r.height+this.currentTutorialOptions.textOffset,left:(this.canvas.width-a.width)/2}).top-this.currentTutorialOptions.arrowOffset},t={x:o,y:r.top+r.height+this.currentTutorialOptions.arrowOffset}),o<=this.canvas.width/2?e.x=c.left+this.currentTutorialOptions.arrowOffset:e.x=c.left+a.width-this.currentTutorialOptions.arrowOffset,this.$descriptionBlock.css(i.extend(c,{color:this.currentTutorialOptions.textColor})),this.$descriptionBlock.text(this.currentTutorial.steps[this.currentStep].text),s.drawArrow(this.canvas.getContext("2d"),e,t,2,this.currentTutorialOptions.arrowColor)},e.prototype._verifyStep=function(){var t,e,n;if(this.$currentElement.length>0)return t=0!==(n=this._getCurrentElementMeasurements()).width&&0!==n.height,e=n.top>=0&&n.left>=0,t&&e},e.prototype._showNextStep=function(){var t;if(this.currentStep+=1,this.currentStep!==this.currentTutorial.steps.length){if(this.$currentElement=n(this.currentTutorial.steps[this.currentStep].element).filter(":visible").first(),this._verifyStep())return n(document.body).addClass(this.cssClass),(t=this.canvas.getContext("2d")).fillStyle=this.currentTutorialOptions.overlayColor,t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillRect(0,0,this.canvas.width,this.canvas.height),this._highlightCurrentElement(),this._showCurrentDescription();this._showNextStep()}else this._endTutorial()},e.prototype._endTutorial=function(){return l.set(this._getStorageKey(this.currentTutorial),!0),this._disposeTutorialLayout(),this.$currentElement=null,this.currentStep=-1,this.currentTutorial=null,this.currentTutorialOptions=null,n(document.body).removeClass(this.cssClass)},e.prototype.showTutorialFor=function(t){var e;if(this.initialized&&(null!=(e=this._pickTutorial(t))?e.enabled:void 0)&&!l.get(this._getStorageKey(e)))return this.currentTutorial=e,this.currentTutorialOptions=i.extend({},this.defaults[this.currentTutorial.type],this.currentTutorial.options),this.currentStep=-1,this._initTutorialLayout()},e}(),e.exports=a}).call(this,o(14),o(11))},function(t,e){var n;n={drawArrow:function(t,e,n,o,i){var r;return null==o&&(o=1),null==i&&(i="#000"),10,r=Math.atan2(n.y-e.y,n.x-e.x),t.strokeStyle=i,t.lineWidth=o,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.moveTo(n.x,n.y),t.lineTo(n.x-10*Math.cos(r-Math.PI/6),n.y-10*Math.sin(r-Math.PI/6)),t.moveTo(n.x,n.y),t.lineTo(n.x-10*Math.cos(r+Math.PI/6),n.y-10*Math.sin(r+Math.PI/6)),t.stroke()}},t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url=function(){return r.API_URL+"/client"},e}return o.__extends(e,t),e.prototype.getEmbossingFullName=function(){return this.get("embossing.firstName")+" "+this.get("embossing.lastName")},e}(i.BaseModel);e.default=s},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e,o,r;return r=n(40),o=n(375),e=o.BaseModel,{Regions:function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.model=e,n.prototype.url=r.API_URL+"/catalogs/REGIONS",n}(o.BaseCollection)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=n(373),i=n(375),r=n(40),s=n(490),a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.url=function(){return r.API_URL+"/payment-instalments"},t.model=s.default,t.inactiveInstalmentCount=0,t}return o.__extends(n,e),n.prototype.getInactiveInstalments=function(){var t=new n(this.filter((function(t){return!t.isActive()})));return this.inactiveInstalmentCount=t.length,t},n.prototype.getActiveInstalments=function(){return new n(this.filter((function(t){return t.isActive()})))},n.prototype.getInstalments=function(t){return t?this.getActiveInstalments():this.getInactiveInstalments()},n.prototype.getInActiveInstalmentCount=function(){return this.inactiveInstalmentCount},n.prototype.fetchIfNeedAndPossible=function(){return window.OW.features.CONVERSION_TO_INSTALMENT?this.fetchIfEmpty():t.Deferred().resolve()},n}(i.BaseCollection);e.default=a}).call(this,n(14))},function(t,e,n){var o,i={}.hasOwnProperty;void 0===(o=function(t){var e,o;return e=n(374).TemplateView,o=n(380),function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="main-menu",e.prototype.onRender=function(){return this._setItemCount(this.collection.length)},e.prototype.context=function(){var t,e,n,i,r;if(t={collection:this.collection.viewContext(),contextPath:window.WB.contextPath},!window.WB.currentMenuId)return t;if(0===window.location.hash.length)for(e=0,i=(r=t.collection).length;e<i;e++)((n=r[e]).id.endsWith(window.WB.currentMenuId)||(window.WB.currentMenuId.endsWith(o.mainMenuIds.CARDS_ACCOUNTS)||window.WB.currentMenuId.endsWith(o.mainMenuIds.NEW_CARDS_ACCOUNTS))&&(n.id.endsWith("."+o.mainMenuIds.CARDS_ACCOUNTS)||n.id.endsWith("."+o.mainMenuIds.NEW_CARDS_ACCOUNTS)))&&(n.isActive=!0);return t},e.prototype._setItemCount=function(t){var e;return null!=(e=this.$el.data("prevCount"))&&this.$el.removeClass("has-"+e+"-items"),this.$el.addClass("has-"+t+"-items"),this.$el.data("prevCount",t)},e}(e)}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o){var i,r={}.hasOwnProperty;void 0===(i=function(t){return function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.initialize=function(t){return this.options=t,o(".block__banner-carousel").before(o(".main-content")),e.__super__.initialize.apply(this,arguments)},e}(n(1191))}.call(e,n,e,t))||(t.exports=i)}).call(this,n(14))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d;return l=n(97),e=n(1192).Banners,r=n(374).TemplateView,u=n(40),c=n(96),d=n(442),n(871),a={BANNER_ROTATION_INTERVAL_SECONDS:10,BANNER_CAN_BE_CLOSED:!0,BANNER_CLOSE_DURATION:"P1D"},u=o.extend(a,u),console.debug("settings",u),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="marketing/banners-carousel",n.prototype.events={"click .jcarousel-pagination":"onPaginationClick","click .close-banner":"closeWidget","click .jcarousel li a":"onBannerClick"},n.prototype.initialize=function(t){if(this.options=t,n.__super__.initialize.apply(this,arguments),u.BANNER_CAN_BE_CLOSED&&(o.isString(u.BANNER_CLOSE_DURATION)&&(this.closeDuration=c.duration(u.BANNER_CLOSE_DURATION)),this.closeDuration>0||(this.closeDuration=c.duration({days:1}),console.warn("BANNER_CLOSE_DURATION is not valid ISO 8601 period.  Falling back to default: "+this.closeDuration.toISOString()))),this.placementName=this.$el.data("placement-name"),!this.placementName)throw new Error("Banner placement name must be specified");return this.width=this.$el.data("width"),this.height=this.$el.data("height"),this.model=new e({query:{filter:this.getFilter()}})},n.prototype.getFilter=function(){var t,e;return t=["placement:"+this.placementName],e=["WB_GLOBAL"],null!=window.WB.pageType&&e.push(window.WB.pageType),t.push("pageType__in:"+e.join()),t},n.prototype.getCarouselConfig=function(){return{dots:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,arrows:!0,autoplay:!0,pauseOnHover:!0,draggable:Modernizr.touch,autoplaySpeed:1e3*u.BANNER_ROTATION_INTERVAL_SECONDS,onAfterChange:(t=this,function(e){return t.addShowing(t.$(".banner-wrapper").eq(e.currentSlide))}),onInit:function(t){return function(){return t.$(".slick-prev, .slick-next").hide(),t.$(".banners-control, .slick-prev, .slick-next").mouseover((function(){return t.$(".banners-control, .slick-prev, .slick-next").addClass("overed")})),t.$(".banners-control, .slick-prev, .slick-next").mouseleave((function(){return t.$(".banners-control, .slick-prev, .slick-next").removeClass("overed")})),t.$(".slick-list").mouseenter((function(){return t.$(".banners-control, .slick-prev, .slick-next").show()})),t.$(".slick-list").mouseleave((function(){return t.$(".banners-control, .slick-prev, .slick-next").hide()}))}}(this)};var t},n.prototype.onRender=function(){var t;return this.$el.is(":visible")||this.$el.show(),this.model.size()>1?(this,this.$(".jcarousel").slick(this.getCarouselConfig())):1===this.model.size()&&this.$(".jcarousel-wrapper").mouseenter((t=this,function(){return t.$(".banners-control").fadeIn("slow")})).mouseleave(function(t){return function(){return t.$(".banners-control").hide().fadeOut()}}(this)),this.addShowing(this.$(".banner-wrapper").eq(0))},n.prototype.addShowing=function(t){var e;if(!t.data("shown"))return null!=(e=this.model.get(t.data("banner-id")))&&e.addShowing().fail((function(t){return t.errorHandled=!0})),t.data("shown",!0)},n.prototype.show=function(){return this.isClosed()?i.Deferred().resolve().promise():this.model.fetch().done((t=this,function(){return t.model.size()?t.render():t.$el.hide()})).fail((function(t){return console.warn("unable to get banners",t),t.errorHandled=!0}));var t},n.prototype.onBannerClick=function(){return d.trackEvent("Banners","click banner")},n.prototype.isClosed=function(){return l.get(this.storageKey())},n.prototype.storageKey=function(){return"hide-banner-"+this.placementName+"-"+window.app.session.get("user.id")},n.prototype.onPaginationClick=function(t){return t.preventDefault()},n.prototype.closeWidget=function(t){var e;return t.preventDefault(),d.trackEvent("Banners","close banners block"),e=c().add(this.closeDuration).toDate(),l.set(this.storageKey(),!0,{expires:e,path:window.WB.contextPath}),this.remove()},n.prototype.update=function(){return this.clearTimeout(),this.model.updateQuery({filter:this.getFilter()}),this.show()},n.prototype.clearTimeout=function(){if(this.timeoutId)return clearTimeout(this.timeoutId)},n.prototype.context=function(){return{banners:this.model.viewContext(),staticPath:window.WB.STATIC_PATH,contextPath:window.WB.contextPath,width:this.width,height:this.height,settings:u}},n}(r)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(11),n(14))},function(t,e,n){(function(o,i,r){var s,a=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;void 0===(s=function(t){var e,s,c,u,l,d,p;return p=n(40),c=(d=n(375)).BaseModel,l=d.SingleFetchBaseCollection,u=d.CollectionQuery,e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.addShowing=function(){return o.post(p.API_URL+"/banners/"+this.get("id")+"/viewings")},e}(c),s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.model=e,n.prototype.baseUrl=p.API_URL+"/banners",n.prototype.url=function(){return this.URI.toString()},n.prototype.initialize=function(t){var e;return this.options=t,this.baseUrl=("undefined"!=typeof options&&null!==options?options.baseUrl:void 0)||this.baseUrl,this.URI=new i(this.baseUrl),this.query=new u(r.extend({},null!=(e=this.options)?e.query:void 0)),this.query.updateQuery(this.URI)},n.prototype.updateQuery=function(t){return this.query.set(t),this.query.updateQuery(this.URI)},n.prototype.fetch=function(){return this.previousUrl&&this.url()===this.previousUrl?o.Deferred().resolve():(this.previousUrl=this.url(),n.__super__.fetch.apply(this,arguments))},n}(l),{Banner:e,Banners:s}}.call(e,n,e,t))||(t.exports=s)}).call(this,n(14),n(379),n(11))},function(e,n,o){(function(i,r,s){var a,c=function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};void 0===(a=function(e){var n,a,u,d,p,h,f,m,y,_,g,v,w,b,k,B,C,S,P,x,T;return T=o(96),b=o(405),u=o(137),f=o(406).Constants.ModelToView,864e5,x={int:0,float1:1,float2:2,float3:3,float4:4,float5:5},P=i(".block__invoice-details.input").length>0,w=function(t){return r.isNumber(t)?t:u.parseFloat(t)},C=function(t){return u.formatNumber(w(t))},S=function(t,e){return w(t).toFixed(x[e.get("editMask")]).replace(/\.?0*$/g,"")},k=function(t,e,n,o,i){var r;return e=b.makeDecimalConverter(x[o.get("editMask")]).apply(null,Array.prototype.slice.call(arguments)),(r=u.parseFloat(e))&&t===f?r:e},v=b.makeDecimalConverter(2),y={simple:r.template("<div>\n<%= simpleTariff %> <%= tariffUnit || '' %>\n</div>"),single:r.template("<div>\n<%= difference %> <%= counterUnit %> x <%= minTariff %> <%= tariffUnit %>\n</div>"),double:r.template("<div>\n<%= minDifference %> <%= counterUnit %> x <%= minTariff %> <%= tariffUnit %>\n</div>\n<div>\n<%= maxDifference %> <%= counterUnit %> x <%= maxTariff %> <%= tariffUnit %>\n</div>"),triple:r.template("<div>\n<%= minDifference %> <%= counterUnit %> x <%= minTariff %> <%= tariffUnit %>\n</div>\n<div>\n<%= midDifference %> <%= counterUnit %> x <%= midTariff %> <%= tariffUnit %>\n</div>\n<div>\n<%= maxDifference %> <%= counterUnit %> x <%= maxTariff %> <%= tariffUnit %>\n</div>")},p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.NUMERIC_ATTRS=["minTariff","midTariff","maxTariff","minTariffThreshold","maxTariffThreshold"],e.prototype.defaults={amount:0,payAmount:0},e.prototype.initialize=function(t,n){var o,i,r,s;for(e.__super__.initialize.apply(this,arguments),o=0,i=(r=this.NUMERIC_ATTRS).length;o<i;o++)s=r[o],this.has(s)&&this.set(s,Number(this.get(s)));return this.set("payAmount",this.get("amount"))},e.prototype.isThreeTariff=function(){return Boolean(this.get("midTariff"))},e}(s.Model),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){var t,e;return(t=new(s.Collection.extend({model:p}))).on("add change:payAmount",(e=this,function(){var t;if(null!==(t=e.calculateTotal()))return e.set("total",t)})),this.set("items",t)},e.prototype.calculateTotal=function(){var t;return t=this.get("items").reduce((function(t,e){var n;return(n=Number(e.get("payAmount")))<0?NaN:t+n}),0),r.isNaN(t)?null:Number(t).toFixed(2)},e}(s.Model),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.bindings=function(){return{amount:{selector:"input.value, .amount .value",converter:k},payAmount:[{selector:".pay-amount input.real-value"}]}},e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),P&&this.model.get("simpleTariff"))return this.$(".tariff-data").html(y.simple(this.model.toJSON()))},e}(d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.events={"click .prev-data a.inline-edit":"showPrevDataFields","click .amount a.inline-edit:not(.disabled)":"showAmountEdit","click .pay-amount a.cancel-icon":"hideAmountEdit"},e.prototype.bindings=function(){throw new Error("bindings must be implemented by subclass")},e.prototype.initialize=function(){var t;return this.initEditMask(),this.bindModel(),this.formatDates(),"function"==typeof this.updateValidationRules&&this.updateValidationRules(),this.model.on("change:amount",(t=this,function(){return t.model.set("payAmount",t.model.get("amount"))})),this.model.on("change:payAmount",function(t){return function(){return r.defer((function(){return t.$(".pay-amount input.real-value").focus().blur()}))}}(this))},e.prototype.bindModel=function(){var t;return this.modelBinder=new s.ModelBinder,t=this.bindings(),this.$(".pay-amount input.visible-value").length&&t.payAmount.push({selector:".pay-amount input.visible-value",converter:v}),this.$(".debt-amount").length&&(t.debtAmount={selector:".add-info .debt-amount",converter:v}),this.$(".overpay-amount").length&&(t.overpayAmount={selector:".add-info .overpay-amount",converter:v}),this.modelBinder.bind(this.model,this.$el,t)},e.prototype.initEditMask=function(){var t,e,n;if(0!==(e=this.$("[data-editmask]").map((n=this,function(t,e){var o;return(o=i(e).data("editmask"))?o:(console.warn("EditMask is not configured for "+n.model.id+", using float3 mask as default"),"float3")}))).length)return(e=r.unique(e)).length>1?(console.warn("EditMasks configuration is invalid for "+this.model.id+", using float3 mask as default"),t="float3"):t=e[0],this.model.set("editMask",t)},e.prototype.formatDates=function(){return this.$("[data-date]").each((function(){var t;return(t=i(this)).text(u.formatDate(T(t.data("date")).toDate(),{raw:"d MMMM yyyy"}))}))},e.prototype.showPrevDataFields=function(t){return t.preventDefault(),this.$(".prev-data").find(".label, .inline-edit").hide(),this.$(".prev-value").show()},e.prototype.showAmountEdit=function(t){return t.preventDefault(),i(t.target).closest(".inline-edit").addClass("disabled"),this.$(".pay-amount").show()},e.prototype.hideAmountEdit=function(t){return t.preventDefault(),this.$(".inline-edit").removeClass("disabled"),this.$(".pay-amount").hide(),this.model.set("payAmount",this.model.get("amount"))},e.prototype.templateContext=function(){var t,e,n,o;for(n in e=["minTariff","midTariff","maxTariff"],t=this.model.toJSON())o=t[n],l.call(e,n)>=0&&(t[n]=C(o));return t},e.prototype.isValid=function(){return 0===this.$(".error:visible").length},e.prototype.updateCounterValidationRules=function(){return this.$(".prev-value, .current-value").find("input.value").each((function(t,e){return i(e).rules("add",{counterValue:!0})})),this.$(".current-value input.value").each((t=this,function(e,n){return i(n).rules("add",{minCounterValue:t.model.get("prevValue")})}));var t},e.prototype.applyDebtAndOverpay=function(){var t;return t=Number(this.model.get("amount")),this.model.get("debtAmount")&&(t+=Number(this.model.get("debtAmount"))),this.model.get("overpayAmount")&&(t-=Number(this.model.get("overpayAmount"))),r.isNaN(t)?console.error("Failed to apply debt/overpay, result amount is NaN",this.model.toJSON()):(t=t>=0?t:0,this.model.set("amount",t.toFixed(2)))},e}(s.View)),n={value:{selector:".current-value input.value",converter:k},prevValue:{selector:".prev-value input.value",converter:k}},a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.bindings=function(){var t;return t={amount:{selector:".amount .value",converter:v},payAmount:[{selector:".pay-amount input.real-value"}]},P&&r.extend(t,n),t},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),P&&this.recalculate(),this.model.on("change:value change:prevValue",(t=this,function(){return t.updateValidationRules(),r.defer((function(){if(t.isValid())return t.recalculate()}))}));var t},e.prototype.recalculate=function(){var t,e;return t=((e=this.model.get("value")-this.model.get("prevValue"))*this.model.get("minTariff")).toFixed(2),this.model.set("amount",t),this.$(".tariff-data").html(y.single(r.extend(this.templateContext(),{difference:S(e,this.model)}))),this.applyDebtAndOverpay()},e.prototype.updateValidationRules=function(){if(P)return this.updateCounterValidationRules()},e}(d),B=function(t,e){var n;return n=T(e).toDate(),"ModelToView"===t?u.formatDate(n,{raw:"yyyy-MM-dd"}):n},g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.bindings=function(){var t;return t={amount:{selector:".amount .value",converter:v},payAmount:[{selector:".pay-amount input.real-value"}]},P&&(r.extend(t,n,{date:{selector:".current-data .owwb-ws-datepicker input.real-value",converter:B}}),this.$(".prev-data .prev-date-edit").length&&r.extend(t,{prevDate:{selector:".prev-data .owwb-ws-datepicker input.real-value",converter:B}})),t},e.prototype.initialize=function(){var t;return this.model.set("date",B(null,this.model.get("date"))),this.model.set("prevDate",B(null,this.model.get("prevDate"))),e.__super__.initialize.apply(this,arguments),P&&(this.recalculate(),this.updateCurrentDateDatepicker()),this.model.on("change:value change:prevValue change:date change:prevDate",(t=this,function(){return t.updateValidationRules(),r.defer((function(){if(t.isValid())return t.recalculate()}))})),this.model.on("change:prevDate",function(t){return function(){return r.defer((function(){return t.updateCurrentDateDatepicker()}))}}(this))},e.prototype.updateCurrentDateDatepicker=function(){return this.$(".current-data .owwb-ws-datepicker input.hasDatepicker").datepicker("option","minDate",this.model.get("prevDate"))},e.prototype.recalculate=function(){return this.model.isThreeTariff()?this.recalculateThreeTariff():this.recalculateTwoTariff(),this.applyDebtAndOverpay()},e.prototype.getTariffMultiplier=function(){var t,e,n;return t=T(this.model.get("date")),e=T(this.model.get("prevDate")),n=t.diff(e,"M",!0),Number.isInteger(n)?n:t.diff(e,"d",!0)/30.5},e.prototype.recalculateTwoTariff=function(){var t,e,n,o;return n=this.model.get("minTariffThreshold"),e=Math.ceil(n*this.getTariffMultiplier()),t=0,(o=this.model.get("value")-this.model.get("prevValue"))<=e?(t=o*this.model.get("minTariff"),this.renderTariffData(y.single(r.extend(this.model.attributes,{difference:S(o,this.model)})))):(t=e*this.model.get("minTariff")+(o-e)*this.model.get("maxTariff"),this.renderTariffData(y.double(r.extend(this.templateContext(),{minDifference:S(e,this.model),maxDifference:S(o-e,this.model)})))),this.model.set("amount",Number(t).toFixed(2))},e.prototype.recalculateThreeTariff=function(){var t,e,n,o,i,s,a;return a=this.getTariffMultiplier(),i=this.model.get("minTariffThreshold"),o=this.model.get("maxTariffThreshold"),e=Math.ceil(i*a),n=Math.ceil(o*a),t=0,(s=this.model.get("value")-this.model.get("prevValue"))<=e?(t=s*this.model.get("minTariff"),this.renderTariffData(y.single(r.extend(this.templateContext(),{difference:S(s,this.model)})))):s>e&&s<=n?(t=e*this.model.get("minTariff")+(s-e)*this.model.get("midTariff"),this.renderTariffData(y.double(r.extend(this.templateContext(),{minDifference:S(e,this.model),maxDifference:S(s-e,this.model),maxTariff:C(this.model.get("midTariff"))})))):(t=e*this.model.get("minTariff")+(n-e)*this.model.get("midTariff")+(s-n)*this.model.get("maxTariff"),this.renderTariffData(y.triple(r.extend(this.templateContext(),{minDifference:S(e,this.model),midDifference:S(n-e,this.model),maxDifference:S(s-n,this.model)})))),this.model.set("amount",Number(t).toFixed(2))},e.prototype.renderTariffData=function(t){return this.$(".tariff-data").html(t)},e.prototype.updateValidationRules=function(){if(P)return this.updateCounterValidationRules()},e}(d),_={Simple:m,FixedTariff:a,VariableTariff:g},function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.bindings={total:[{selector:".total-amount .amount-value",converter:v},{selector:"#USER_PROPERTY_AMOUNT"}]},n.prototype.initialize=function(){var t;if(this.enhanceInputs(),P&&this.initValidation(),this.model=new h,this.itemViews=[],this.$el=i(".block__invoice-details"),t=this,this.$(".invoice-item").each((function(){return t.createItemView(i(this))})),P)return this.modelBinder=new s.ModelBinder,this.modelBinder.bind(this.model,this.$el,this.bindings)},n.prototype.createItemView=function(t){var e;if(r.has(_,t.data("type")))return e=new p(t.data()),this.model.get("items").push(e),this.itemViews.push(new(_[t.data("type")])({el:t,model:e}))},n.prototype.enhanceInputs=function(){return i(".current-value input.value, .prev-value input.value").addClass("number"),i(".pay-amount input").addClass("amount real-value"),i(".pay-amount input[type!=hidden]").after('<input class="visible-value number money" maxlength="12"  maxAmount="10e11"/><a href="#" class="cancel-icon"></a>').end(),i(".pay-amount input.visible-value").each((function(){var t,e;if(e=(t=i(this)).prev("input.real-value").attr("id"))return t.attr("id",e+".visible")})),i(".hasDatepicker").datepicker("option","maxDate",new Date)},n.prototype.initValidation=function(){var e,n,o,s;return i.validator.addMethod("counterValue",(function(t,e){return w(t)>=0}),t("Invalid counter value")),i.validator.addMethod("minCounterValue",(function(t,e,n){return w(t)>=w(n)}),t("Enter a value not less than previous measurement ({0})")),i.validator.addMethod("maxlength",(function(){return!0}),""),(n=i("#serviceForm")).validate({ignore:":hidden:not(.validate-hidden)",errorElement:"p",errorPlacement:function(t,e){var n;return i(t).addClass("owwb-cs-form-item-validate_text error"),(n=i(e).closest(".owwb-cs-text-input-wrapper")).length?n.append(t):i(e).closest(".invoice-item").append(t)},showErrors:function(t,e){var n,o;return n=0===this.numberOfInvalids()&&!1==!(null!=(o=window.currentFormPacket)?o.isValid:void 0),i("#serviceSubmit")[0].setDisable(!n),this.defaultShowErrors(t,e)}}),1!==(e=n.find("select")).length?console.warn("Only one <select> per invoice form is supported"):(null==(o=e[0]).onSelectedChanged&&(o.onSelectedChanged=[]),e[0].onSelectedChanged.push((function(t){if(!i("#serviceSubmit").attr("disabled"))return i("#serviceSubmit")[0].setDisable(!n.valid())}))),n.on("submit",(function(t){if(!n.valid())return console.debug("Form invalid, preventing submit"),t.preventDefault(),r.defer((function(){return window.app.hideLoadingIndicator()}))})),s=function(t){var e;return e=i(t).closest(".invoice-item"),console.assert(e,".invoice-item not found"),e},n.on("change",".prev-value-edit input",(function(t){return s(t.target).find(":input").valid()}))},n}(s.View)}.call(n,o,n,e))||(e.exports=a)}).call(this,o(14),o(11),o(384))},function(t,e,n){(function(o){var i,r=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;void 0===(i=function(t){var e,i,s,a,c;return i=n(374).TemplateView,s=n(1195),e=n(1196).CurrencyRatesDialog,c=n(40),(a={}).HeaderView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="common/header",e.prototype.events={"click #logout":function(){return this.onLogoutClick()}},e.prototype.onLogoutClick=function(){return window.app.session.logout()},e.prototype.onRender=function(){return e.__super__.onRender.apply(this,arguments),this.initLanguageSwitch()},e.prototype.initLanguageSwitch=function(){if(!window.WB.isErrorPage&&!window.app.session.isAuthenticated())return new s({el:this.$(".language-switch")}).show()},e.prototype.context=function(){var t;return(t=o.extend(e.__super__.context.apply(this,arguments),window.app.session.viewContext())).isAuthenticated=window.app.session.isAuthenticated(),t.isErrorPage=window.WB.isErrorPage,t.logoLinkUrl=c.LOGO_LINK_URL,t},e}(i),a.FooterView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.template="common/footer",n.prototype.events={"click #show-feedback-dialog":"onFeedbackClick","click #show-currency-rates":"onCurrencyRatesClick"},n.prototype.onFeedbackClick=function(t){return t.preventDefault(),window.app.showFeedbackDialog()},n.prototype.onCurrencyRatesClick=function(t){return t.preventDefault(),(new e).show()},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.languageSwitchInitialized=!1,this.initLanguageSwitch()},n.prototype.initLanguageSwitch=function(){var t;if(!this.languageSwitchInitialized&&!window.WB.isErrorPage&&window.app.session.isAuthenticated()&&window.app.router.currentPage)return this.languageSwitchInitialized=!0,(t=this.$(".language-switch")).length?new s({el:t}).show():void 0},n.prototype.context=function(){var t;return t=o.extend(n.__super__.context.apply(this,arguments),{isAuthenticated:window.app.session.isAuthenticated(),isErrorPage:window.WB.isErrorPage}),window.OW.features.FEEDBACK&&(t.showFeedback=(t.isAuthenticated||window.OW.features.ANONYMOUS_FEEDBACK)&&!t.isErrorPage),t.showCurrencyRates=window.OW.features.CURRENCY_RATES&&t.isAuthenticated&&!t.isErrorPage,t.copyrightLinkUrl=c.COPYRIGHT_LINK_URL,t},n}(i),a.PrintHeader=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.template="common/print-header",e}(i),a}.call(e,n,e,t))||(t.exports=i)}).call(this,n(11))},function(t,e,n){(function(o,i){var r,s={}.hasOwnProperty;void 0===(r=function(t){var e,r;return e=n(40),r=n(97),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.template="common/wb-language-switch",n.prototype.events={"click .language-item":"changeLanguage"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.languages=e.LOCALE_OPTIONS||[],console.assert(this.languages.length<=4,"Using more than 4 languages may affect application appearance")},n.prototype.changeLanguage=function(t){var e;return t.preventDefault(),e=o(t.target).data("language"),r.set("LOCALE",e,{path:window.WB.contextPath}),i.defer((function(){return window.location.reload()}))},n.prototype.context=function(){return{languages:this.languages.filter((function(t){return t.id!==window.WB.currentLocale}))}},n}(n(374).TemplateView)}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(e,n,o){(function(n,i){var r,s,a,c,u,l={}.hasOwnProperty;a=o(386),u=o(1197),r=u.BaseQuotes,s=u.CrossQuotes,(c={}).CurrencyRatesDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.id="currency-rates-dialog",o.prototype.template="common/currency-rates-dialog",o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.baseQuotes=new r,this.crossQuotes=new s},o.prototype.dialogOptions=function(){return{buttons:[{text:t("Close"),class:"wb-button",click:(e=this,function(){return e.close()})}]};var e},o.prototype.show=function(){return window.OW.features.CURRENCY_RATES?(n.when(this.baseQuotes.fetch(),this.crossQuotes.fetch()).then((t=this,function(){return t.render()})),o.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})):n.Deferred().resolve();var t},o.prototype.context=function(){return i.extend(o.__super__.context.apply(this,arguments),{baseQuotes:this.baseQuotes.viewContext(),crossQuotes:this.crossQuotes.viewContext()})},o}(a),e.exports=c}).call(this,o(14),o(11))},function(t,e,n){var o,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;void 0===(o=function(t){var e,o;return o=n(40),{BaseQuotes:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=o.API_URL+"/currencies/fxrates/base",e}(e=n(375).BaseModel),CrossQuotes:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=o.API_URL+"/currencies/fxrates/cross",e}(e)}}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){(function(o,i){var r,s=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;void 0===(r=function(t){var e,r,a,c,u,l,d,p;return r=(d=n(375)).BaseModel,u=d.SingleFetchBaseCollection,p=n(40),l=n(96),"messages",null==p.PROMO_MESSAGES_POPUP_EXPIRE_TIME&&(p.PROMO_MESSAGES_POPUP_EXPIRE_TIME=3),e={DELETE:"delete-batch",READ:"read-batch",UNREAD:"unread-batch"},a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.defaults={type:"marketingMessage"},e.prototype.url=function(){return p.API_URL+"/messages/"+this.get("id")},e.prototype.isRead=function(){return"read"===this.get("status")},e.prototype.setRead=function(){return this.set({status:"read"})},e.prototype.hasPreview=function(){return Boolean(this.get("preview"))},e.prototype.markAsRead=function(){if(!this.isRead())return this.setRead(),o.post(this.url()+"/read")},e}(r),c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.model=a,n.prototype.url=p.API_URL+"/messages",n.prototype._performBatchRequest=function(t,e){var n;return n=i.pluck(e,"id"),o.ajax({type:"POST",url:this.url+"/"+t,data:JSON.stringify(n),contentType:"application/json",dataType:"json"})},n.prototype.deleteMessages=function(t){return this._performBatchRequest(e.DELETE,t).done((n=this,function(){return n.remove(t)}));var n},n.prototype.markAsRead=function(t){return this._performBatchRequest(e.READ,t).done((function(){return t.forEach((function(t){return t.setRead()}))}))},n.prototype.getUnreadCount=function(){return this.filter((function(t){return"unread"===t.get("status")})).length},n.prototype.getMessageForPopup=function(){return this.filter((function(t){return t.hasPreview()&&!t.isRead()&&l().diff(t.get("date"),"days")<=p.PROMO_MESSAGES_POPUP_EXPIRE_TIME})).sort((function(t,e){return new Date(e.get("date"))-new Date(t.get("date"))}))[0]},n}(u),{Message:a,Messages:c}}.call(e,n,e,t))||(t.exports=r)}).call(this,n(14),n(11))},function(t,e,n){(function(e){var o,i,r,s,a,c={}.hasOwnProperty;n(871),s=n(96),o=n(386),n(97),r=n(136),n(380),i={},null==(a=n(40)).PROMO_MESSAGES_POPUP_AUTOPLAY&&(a.PROMO_MESSAGES_POPUP_AUTOPLAY=!0),null==a.PROMO_MESSAGES_POPUP_AUTOPLAY_SPEED&&(a.PROMO_MESSAGES_POPUP_AUTOPLAY_SPEED=3e3),null==a.PROMO_MESSAGES_POPUP_MAX_COUNT&&(a.PROMO_MESSAGES_POPUP_MAX_COUNT=5),null==a.PROMO_MESSAGES_POPUP_EXPIRE_TIME&&(a.PROMO_MESSAGES_POPUP_EXPIRE_TIME=3),null==a.PROMO_MESSAGES_POPUP_WIDTH&&(a.PROMO_MESSAGES_POPUP_WIDTH=800),null==a.PROMO_MESSAGES_POPUP_HEIGHT&&(a.PROMO_MESSAGES_POPUP_HEIGHT=500),i.PromoMessagesPopupView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,t),n.prototype.id="block__promo-messages",n.prototype.template="marketing/promo-messages",n.prototype.events={"click .close":"onCloseIconClick"},n.prototype.dialogOptions=function(){return{width:a.PROMO_MESSAGES_POPUP_WIDTH,height:a.PROMO_MESSAGES_POPUP_HEIGHT,buttons:[]}},n.prototype.show=function(){return e.when(window.app.messagingPromise).done((t=this,function(){return 0===t.getMessagesContext().length?e.Deferred().resolve():n.__super__.show.apply(t,arguments)})).fail((function(t){return r.error("Promo Messages Pop-up. Request for messages was failed.",t),t.errorHandled=!0}));var t},n.prototype.getMessagesContext=function(){var t;return this.messagesContext||(t=window.app.messages.filter((function(t){return t.hasPreview()&&!t.isRead()})).map((function(t){return t.viewContext()})),this.messagesContext=t.filter((function(t){return s().diff(t.date,"days")<=a.PROMO_MESSAGES_POPUP_EXPIRE_TIME})).slice(0,a.PROMO_MESSAGES_POPUP_MAX_COUNT).sort((function(t,e){return new Date(e.date)-new Date(t.date)}))),this.messagesContext},n.prototype.initSlider=function(){return this.sliderEl=this.$(".promo-messages_carousel"),this.sliderEl.slick({dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,autoplay:a.PROMO_MESSAGES_POPUP_AUTOPLAY,autoplaySpeed:a.PROMO_MESSAGES_POPUP_AUTOPLAY_SPEED,arrows:!1,pauseOnHover:!0,onInit:(t=this,function(e){return t.afterSlideShownOperations(e,0)}),onAfterChange:function(t){return function(e,n){return t.afterSlideShownOperations(e,n)}}(this)});var t},n.prototype.afterSlideShownOperations=function(t,e){var n;return n=this.$(t.$slides[e]).attr("data-messageId"),this.tryAddLinkToMessageContent(this.$(t.$slides[e]),n),this.bindMessageLinkToEl(this.$(".learn-more"),n),this.markSlideMessageAsRead(n)},n.prototype.tryAddLinkToMessageContent=function(t,e){var n;if((e||t.length)&&(n=t.children()).length&&n.is("a"))return n.attr("href","javascript:void(0)"),this.bindMessageLinkToEl(n,e)},n.prototype.markSlideMessageAsRead=function(t){var e;if(t)return(e=window.app.messages.get(t))?e.markAsRead():void 0},n.prototype.bindMessageLinkToEl=function(t,e){var n;if(e)return t.off("click"),t.on("click",(n=this,function(t){return t.preventDefault(),n.close(),window.app.router.navigate(n.getMessageURL(e),{trigger:!0})}))},n.prototype.getMessageURL=function(t){var e;return e="#menu/"+window.app.data.menu.getPath("MESSAGES"),t?e+"?id="+t:e},n.prototype.onRender=function(){return n.__super__.onRender.apply(this,arguments),this.initSlider()},n.prototype.onDialogClose=function(){return n.__super__.onDialogClose.apply(this,arguments),this.sliderEl.unslick()},n.prototype.onCloseIconClick=function(t){return t.preventDefault(),this.close()},n.prototype.context=function(){return{messages:this.getMessagesContext()}},n}(o),t.exports=i}).call(this,n(14))},function(t,e,n){(function(o,i,r){var s,a={}.hasOwnProperty;void 0===(s=function(t){var e,o,s;return o=n(379),e=n(374).TemplateView,s=n(453).WbMenu,function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.template="submenu-switch",e.prototype.initialize=function(){var t;return e.__super__.initialize.apply(this,arguments),this.collection=new s(null!=(t=window.app.data.menu.get(window.WB.currentMenuId))?t.get("items"):void 0)},e.prototype.show=function(){return this.collection.length>0?e.__super__.show.apply(this,arguments).then((t=this,function(){return t.$el.show()})):(new i.Deferred).resolve();var t},e.prototype.context=function(){var t,e;return t={collection:this.collection.viewContext().filter((function(t){return!t.id.endsWith(".SECURITY")})),currentPath:new o(window.location.href).removeQuery(/.*/).resource()},window.WB.currentSubMenuId&&null!=(e=r.findWhere(t.collection,{id:window.WB.currentSubMenuId}))&&(e.isActive=!0),t},e}(e)}.call(e,n,e,t))||(t.exports=s)}).call(this,n(379),n(14),n(11))},function(e,n,o){(function(n){var i,r,s={}.hasOwnProperty;i=o(386),(r={}).AppDialog=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,e),o.prototype.id="app-dialog",o.prototype.template="common/app-dialog",o.prototype.requiredOptions=["type","text"],o.prototype.dialogOptions=function(){return{width:300,classes:{"ui-dialog":"app-dialog app-dialog--"+this.type},buttons:[{text:t("Close"),class:"link-button cancel",click:(e=this,function(){return e.close()})}]};var e},o.prototype.context=function(){return n.extend(o.__super__.context.apply(this,arguments),{type:this.type,text:this.text})},o}(i),e.exports=r}).call(this,o(11))},function(e,n,o){(function(e,i){var r,s,a,c,u,l,d,p,h,f,m={}.hasOwnProperty;f=o(40),a=o(386),s=o(1203).AttachmentsPanelView,l=o(394).WbGenericFormMixin,h=o(1205),c=h.FeedbackModel,r=h.AnonymousFeedbackModel,u=o(398).FormMeta,p=o(391),d=o(377),n.FEEDBACK_PHONE_MASK="PHONE10",null==f.ALLOW_FEEDBACK_ATTACHMENTS&&(f.ALLOW_FEEDBACK_ATTACHMENTS=!0),n.FeedbackDialog=function(o){function a(){return a.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(a,o),a.prototype.id="feedback-dialog",a.prototype.template="common/feedback-dialog",a.prototype.mixins=[l],a.prototype.supportedFiles=[".jpeg",".jpg",".gif",".png",".bmp"],a.prototype.fileFieldName="file",a.prototype.getValidationOptions=function(){return{errorPlacement:function(t,e){return t.appendTo(e.parent()),t.addClass("error-message")},showErrors:function(){var t,n;return n=Boolean(this.numberOfInvalids()),t=e(this.currentForm),n?this.currentElements.trigger("validation:failed"):i.all(t.find("[required]").filter(":visible"),(function(t){return!i.isEmpty(e(t).val())}))&&this.currentElements.trigger("validation:success"),this.defaultShowErrors()}}},a.prototype.dialogOptions=function(){return{title:t("Leave your feedback or ask a question"),buttons:[{text:t("Cancel"),class:"link-button cancel",click:(n=this,function(){if(!n.processing)return n.showLoadingIndicator(),n.close()})},{text:t("Send"),class:"wb-button proceed",click:function(t){return function(n){if(!t.processing)return t.formIsValid()?(t.applyLoadingStateToButton(e(n.currentTarget)),t.$form.submit()):void 0}}(this)}]};var n},a.prototype.initialize=function(){return a.__super__.initialize.apply(this,arguments),this.session=window.app.session,this.model=this.session.isAuthenticated()?new c:new r,this.formMeta=this.getFormMeta(),this.once("render.complete",(t=this,function(){return t.ensureAlignment()}));var t},a.prototype.getFormMeta=function(){var e,o;return o=new u({id:"feedback"}),e=this.session.isAuthenticated()?{type:{id:"type",placeholder:t("Select subject"),optional:!1,dataSource:{type:"catalog",url:"/feedback/types",isPlainCatalog:!0}},email:{id:"email",name:t("Contact e-mail"),inputType:"email",optional:!1},message:{id:"message",name:t("Your message"),input:"textarea",optional:!1}}:{name:{id:"name",name:t("Your name"),optional:!1},phone:{id:"phone",name:t("Contact phone"),inputType:n.FEEDBACK_PHONE_MASK,optional:!1},email:{id:"email",name:t("Contact e-mail"),inputType:"email",optional:!1},message:{id:"message",name:"Your message",input:"textarea",optional:!1}},o.set({fields:e}),o},a.prototype.show=function(){return this.session.isAuthenticated()?(p.discoverClientEmail().then((t=this,function(e){return t.model.set("email",e),a.__super__.show.apply(t,arguments)})),a.__super__.show.call(this,{silent:!0,context:{isLoading:!0}})):a.__super__.show.apply(this,arguments);var t},a.prototype.onRender=function(t){if(a.__super__.onRender.apply(this,arguments),!t.silent)return f.ALLOW_FEEDBACK_ATTACHMENTS&&((this.attachmentsPanel=new s({el:this.$("[data-js-attachments-panel-container]"),supportedFiles:this.supportedFiles,maxAllowedFiles:f.MAX_ALLOWED_FEEDBACK_ATTACHMENTS,maxAllowedSize:f.MAX_ALLOWED_FEEDBACK_ATTACHMENTS_SIZE,fileInputName:this.fileFieldName})).show(),this.listenTo(this.attachmentsPanel,"file:attached file:removed",(e=this,function(){return e.ensureAlignment()}))),this.initGenericForm();var e},a.prototype.formIsValid=function(){return this.attachmentsPanel.validate()&&l.formIsValid.apply(this,arguments)},a.prototype.getFormData=function(){var t,e,n;return(t=new FormData).append("feedback",new Blob([JSON.stringify(this.model.toJSON())],{type:"application/json"})),null!=(e=this.attachmentsPanel)&&e.getAttachments().forEach((n=this,function(e){return t.append(n.fileFieldName,e,d.transliterateFileName(e.name))})),t},a.prototype.submitAction=function(){var t;return e.ajax({url:("function"==typeof(t=this.model).url?t.url():void 0)||this.model.url,data:this.getFormData(),type:"POST",contentType:!1,processData:!1})},a.prototype.onSubmitSuccess=function(){var e;return this.$(":input:visible").val("").trigger("blur"),this.$el.closest(".feedback-dialog").addClass("successful"),this.$el.dialog("option","buttons",[{text:t("OK"),class:"wb-button",click:(e=this,function(){return e.close()})}]),this.hideLoadingIndicator()},a.prototype.onSubmitError=function(e){var n,o;return this.close(),n=(null!=(o=d.parseResponseSafe(e))?o.respText:void 0)||t("Failed to send feedback message. Please try again later."),window.app.showErrorDialog(n),!0},a.prototype.context=function(){return i.extend(a.__super__.context.apply(this,arguments),{allowAttachments:f.ALLOW_FEEDBACK_ATTACHMENTS})},a}(a)}).call(this,o(14),o(11))},function(e,n,o){(function(e,i){var r,s,a,c={}.hasOwnProperty;r=o(1204).EXIF,a=o(575),s=o(374).TemplateView,n.AttachmentsPanelView=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,n),o.prototype.template="common/attachments-panel",o.prototype.requiredOptions=["fileInputName"],o.prototype.showAttachmentsPreview=!0,o.prototype.maxAllowedFiles=Number.POSITIVE_INFINITY,o.prototype.events={"click [data-js-file-input]":"handleFileInputClick","change [data-js-file-input]":"handleFilesSelected","click [data-js-remove-attachment]":"handleFileRemove"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.maxAllowedFiles=this.options.maxAllowedFiles||this.maxAllowedFiles,this.maxAllowedSize=this.options.maxAllowedSize,this.supportedFiles=this.options.supportedFiles||[],this.supportedFiles=this.supportedFiles.map((function(t){return t.toLowerCase()})),this.filesQuantity=0},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.fileInput=this.$("[data-js-file-input]")[0],this.$attachmentsContainer=this.$("[data-js-attachments-container]"),this.$errorMessageEl=this.$("[data-js-error-message]")},o.prototype.validate=function(){var n;return!e.isNumber(this.maxAllowedSize)||(this.getAttachments().reduce((function(t,e){return t+e.size}),0)<=this.maxAllowedSize||(n=a.formatNumber(this.maxAllowedSize/1048576,2),this.showWarning(t("Total attachments size exceeds allowed maximum of %(size)sMb.",{size:n})),!1))},o.prototype.getAttachments=function(){return this.$attachmentsContainer.find("[data-js-attachment]").map((t=this,function(e,n){return i(n).data(t.fileInputName)})).get();var t},o.prototype.getAttachedFileMarkup=function(n){return this.showAttachmentsPreview?'<div class="attachment attachment--with-preview invert" data-js-attachment>\n  '+(n.type.startsWith("image")?'<img class="attachment__preview" />':"<div class='attachment__preview'>"+e.last(n.name.split("."))+"</div>")+'\n  <a href="#" class="delete-attachment" data-js-remove-attachment></a>\n</div>':'<div class="attachment" data-js-attachment>\n  <span class="filename">'+n.name+'</span>\n  <a href="#" title="'+t("Remove attachment")+'" class="delete-attachment" data-js-remove-attachment></a>\n</div>'},o.prototype.addAttachments=function(){var t,n,o,r,s,a,c;for(s=a=0,c=(r=this.fileInput.files).length;a<c;s=++a)if(n=r[s],o=("."+e.last(n.name.split("."))).toLowerCase(),-1!==this.supportedFiles.indexOf(o)&&((t=i(this.getAttachedFileMarkup(n))).data(e.object([this.fileInputName],[n])),this.$attachmentsContainer.append(t),this.filesQuantity+=1,this.showAttachmentsPreview&&this.initAttachmentPreview(t),this.filesQuantity===this.maxAllowedFiles))return},o.prototype.initAttachmentPreview=function(t){var e,n,o;return o=new FileReader,n=null,o.onload=function(e){var o;if((o=t.children("img")).attr("src",e.target.result),n)return o.addClass("attachment__preview--orientation-"+n)},(e=t.data(this.fileInputName)).type.startsWith("image")?r.getData(e,(function(){return n=r.getTag(this,"Orientation"),o.readAsDataURL(e)})):o.readAsDataURL(e)},o.prototype.showWarning=function(t){return this.$errorMessageEl.text(t).slideDown(),setTimeout((e=this,function(){return e.$errorMessageEl.slideUp()}),3e3);var e},o.prototype.handleFileInputClick=function(t){this.filesQuantity===this.maxAllowedFiles&&(t.preventDefault(),window.app.clearMessages(),this.showWarning(tn("You can only attach %(num)s file","You can only attach %(num)s files",this.maxAllowedFiles)))},o.prototype.handleFilesSelected=function(n){var o,i,r,s,a,c,u;if(window.app.clearMessages(),(n.isTrusted||(null!=(c=n.originalEvent)?c.isTrusted:void 0))&&0!==(r=this.fileInput.files).length){for(u=0,s=0,a=r.length;s<a;s++)i=r[s],o=("."+e.last(i.name.split("."))).toLowerCase(),-1!==this.supportedFiles.indexOf(o)&&(u+=1);return 0===u?(this.showWarning(tn("File you have selected is not supported","Files you have selected are not supported",r.length)),void(this.fileInput.value="")):(u<r.length&&this.showWarning(t("Some of the files you have selected are not supported and will be omitted")),u>(e.isFinite(this.maxAllowedFiles)?this.maxAllowedFiles-this.filesQuantity:this.maxAllowedFiles)&&this.showWarning(tn("You can only attach %(num)s file. The rest will be omitted.","You can only attach %(num)s files. The rest will be omitted.",this.maxAllowedFiles)),this.addAttachments(),this.validate(),this.fileInput.value="",this.trigger("file:attached"))}},o.prototype.handleFileRemove=function(t){return t.preventDefault(),i(t.currentTarget).parent().remove(),this.filesQuantity-=1,this.trigger("file:removed")},o.prototype.context=function(){return e.extend(o.__super__.context.apply(this,arguments),{multipleAllowed:this.maxAllowedFiles>1,supportedFiles:this.supportedFiles.length?this.supportedFiles.join(","):null})},o}(s)}).call(this,o(11),o(14))},,function(t,e,n){var o,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;void 0===(o=function(t){var e,o,r,s;return o=(r=n(375)).BaseModel,e=r.BaseCollection,s=n(40),{FeedbackTypes:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=s.API_URL+"/feedback/types",e}(e),FeedbackModel:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=s.API_URL+"/feedback",e}(o),AnonymousFeedbackModel:function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.url=s.API_URL+"/feedback/anonymous",e}(o)}}.call(e,n,e,t))||(t.exports=o)},function(e,n,o){var i,r={}.hasOwnProperty;void 0===(i=function(e){var n,i;return n=o(378),i=o(136),function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(n,e),n.prototype.availableToManager=!0,n.prototype.template="error-page",n.prototype.errorType="networkError",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),null!=this.options.errorType&&(this.errorType=this.options.errorType),this.errorText=this.options.errorText,null!=this.errorText?this.errorText:this.errorText=function(){switch(this.errorType){case"networkError":return t("System is not available. Try again later");case"unhandledException":return t("Unhandled error. Try again later or contact customer support");default:return i.error("Unexpected errorType: "+this.errorType),t("Unhandled error. Try again later or contact customer support")}}.call(this)},n.prototype.context=function(){return{errorText:this.errorText}},n}(n)}.call(n,o,n,e))||(e.exports=i)}])]);